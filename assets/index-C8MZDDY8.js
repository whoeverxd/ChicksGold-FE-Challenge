(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function yv(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const It={get(i,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[i]},define(i,e,...t){var r;let s=(r=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:r.value;s==null&&Object.defineProperty(e,Symbol.metadata,{value:s=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=t.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:s[t[0]]=i;return;case 2:s[t[0]]=s[t[1]]=i;return;default:{for(let o=0;o<n;++o)s[t[o]]=i;return}}},has(i,e){const t=e[Symbol.metadata];return t==null?!1:i in t},delete(i,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,i)}},Vr=Object.freeze,hf=Object.assign,Cv=String,Vt=It.get,yr=It.define,Re=i=>i instanceof Promise,_e=i=>i instanceof Array,$n=i=>i instanceof Set,Ws=i=>i instanceof Map,uf=i=>i instanceof Object;function Ii(i){return typeof i=="object"&&i!==null||typeof i=="function"}const Z=i=>typeof i=="function",J=i=>typeof i=="string",kv=i=>typeof i=="symbol",$v=i=>typeof i=="number",ce=()=>Object.create(null),Ps=Object.is,Ce=(i,...e)=>{const t=Cv(i).padStart(4,"0"),s=xv(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/0001-to-0023/aur${t}`;return new Error(`AUR${t}: ${s}\\n\\nFor more information, see: ${n}`)},Sv={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},xv=(i,...e)=>{let t=Sv[i];for(let s=0;s<e.length;++s)t=t.replace(`{{${s}}}`,String(e[s]));return t},hn=(...i)=>globalThis.console.error(...i),un=(()=>{const i={};let e=!1,t=0,s=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(r|0)===r;case"string":if(e=i[r],e!==void 0)return e;if(t=r.length,t===0)return i[r]=!1;for(s=0,n=0;n<t;++n)if(s=r.charCodeAt(n),n===0&&s===48&&t>1||s<48||s>57)return i[r]=!1;return i[r]=!0;default:return!1}}})(),df=(function(){const i=hf(ce(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:i[t]===!0?1:0;return(t,s)=>{const n=t.length;if(n===0)return t;let r=!1,o="",a,l="",c=0,u=t.charAt(0),h=e(u),f=0;for(;f<n;++f)a=c,l=u,c=h,u=t.charAt(f+1),h=e(u),c===0?o.length>0&&(r=!0):(!r&&o.length>0&&c===2&&(r=a===3||h===3),o+=s(l,r),r=!1);return o}})(),De=(function(){const i=ce(),e=(t,s)=>s?t.toUpperCase():t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=df(t,e)),s}})(),ff=(function(){const i=ce();return e=>{let t=i[e];return t===void 0&&(t=De(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),i[e]=t),t}})(),pf=(function(){const i=ce(),e=(t,s)=>s?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=df(t,e)),s}})(),Da=i=>{const e=i.length,t=Array(e);let s=0;for(;s<e;++s)t[s]=i[s];return t},zi=(i,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:i.bind(this),writable:!0,configurable:!0,enumerable:!1})})},Te=(...i)=>{const e=[];let t=0;const s=i.length;let n=0,r,o=0;for(;o<s;++o)if(r=i[o],r!==void 0){n=r.length;let a=0;for(;a<n;++a)e[t++]=r[a]}return e},Fs=(...i)=>{const e=i.length;let t,s=0;for(;e>s;++s)if(t=i[s],t!==void 0)return t;throw Ce(20)},Av=(function(){const i=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let s=i,n=0,r;return function(o){if(r=t.get(o),r===void 0)for(t.set(o,r=[s=o]),n=0;(s=e(s))!==i;)r[++n]=s;return r}})();function Il(...i){return hf(ce(),...i)}const au=(()=>{const i=new WeakMap;let e=!1,t="",s=0;return n=>(e=i.get(n),e==null&&(s=(t=n.toString()).length,e=s>28&&t.indexOf("[native code] }")===s-15,i.set(n,e)),e)})(),T=(i,e)=>Re(i)?i.then(e):e(i),le=(...i)=>{let e,t,s,n=0,r=i.length;for(;n<r;++n)e=i[n],Re(e=i[n])&&(t===void 0?t=e:s===void 0?s=[t,e]:s.push(e));return s===void 0?t:Promise.all(s)},Pv=(i,e)=>new zt(i,0,e),Cr=(i,e)=>new zt(i,1,e),gf=(i,e)=>new zt(i,2,e),Iv=(i,e)=>new zt(i,3,e),Ev=(i,e)=>new zt(i,3,_f(e)),Ro=(i,e)=>new zt(e,5,i),Tv=(i,...e)=>new Kv(i,e),lu=new WeakMap,_f=i=>(e,t,s)=>{let n=lu.get(e);if(n===void 0&&lu.set(e,n=new WeakMap),n.has(s))return n.get(s);const r=i(e,t,s);return n.set(s,r),r},Et={instance:Pv,singleton:Cr,transient:gf,callback:Iv,cachedCallback:Ev,aliasTo:Ro,defer:Tv},zr=function(i){return function(t){t.register(Cr(this,this),Ro(this,i))}},xi="au:annotation",Qs=(i,e)=>e===void 0?`${xi}:${i}`:`${xi}:${i}:${e}`,Rv=(i,e)=>{const t=Vt(xi,i);t===void 0?yr([e],i,xi):t.push(e)},Ov=Vr({name:"au:annotation",appendTo:Rv,set(i,e,t){yr(t,i,Qs(e))},get:(i,e)=>Vt(Qs(e),i),getKeys(i){let e=Vt(xi,i);return e===void 0&&yr(e=[],i,xi),e},isKey:i=>i.startsWith(xi),keyFor:Qs}),Dt="au:resource",si=(i,e,t)=>`${Dt}:${i}`,mf={annotation:Ov},vf=Object.prototype.hasOwnProperty;function ft(i,e,t,s){let n=Vt(Qs(i),t);return n===void 0?(n=e[i],n===void 0?(n=t[i],n===void 0||!vf.call(t,i)?s():n):n):n}function Lt(i,e,t){let s=Vt(Qs(i),e);return s===void 0?(s=e[i],s===void 0||!vf.call(e,i)?t():s):s}function Kt(i,e,t){const s=e[i];return s===void 0?t():s}const cs=Symbol.for("au:registrable"),Bv={singleton:i=>new zt(i,1,i)};class ts{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===ts.DEFAULT?ts.DEFAULT:new ts(e.inheritParentResources??!1,e.defaultResolver??Bv.singleton)}}ts.DEFAULT=ts.from({});const Mv=i=>new ir(null,ts.from(i)),Lv=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let Nv=0,be=null;class ir{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++Nv,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const s in e.res)this.registerResolver(s,e.res[s]);this._resolvers.set(Ni,jv)}register(...e){var u,h,f,d;if(++this._registerDepth===100)throw Ce(6,...e);let t,s,n,r,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!Ii(t))if(zn(t))t.register(this);else if((c=Vt(Dt,t))!=null)c.register(this);else if(Vv(t)){const g=(u=t[Symbol.metadata])==null?void 0:u[cs];if(zn(g))g.register(this);else if(J((h=t.$au)==null?void 0:h.type)){const p=t.$au,_=(t.aliases??q).concat(p.aliases??q);let b=`${Dt}:${p.type}:${p.name}`;if(this.has(b,!1)){(f=globalThis.console)==null||f.warn(Ce(7,b));continue}for(Ro(t,b).register(this),this.has(t,!1)||Cr(t,t).register(this),r=0,o=_.length;r<o;++r){if(b=`${Dt}:${p.type}:${_[r]}`,this.has(b,!1)){(d=globalThis.console)==null||d.warn(Ce(7,b));continue}Ro(t,b).register(this)}}else Cr(t,t).register(this)}else for(s=Object.keys(t),r=0,o=s.length;r<o;++r)n=t[s[r]],Ii(n)&&(zn(n)?n.register(this):this.register(n));return--this._registerDepth,this}registerResolver(e,t,s=!1){Ln(e);const n=this._resolvers,r=n.get(e);if(r==null){if(n.set(e,t),ja(e)){if(this.res[e]!==void 0)throw Ce(7,e);this.res[e]=t}}else r instanceof zt&&r._strategy===4?r._state.push(t):n.set(e,new zt(e,4,[r,t]));return s&&this._disposableResolvers.set(e,t),t}deregister(e){Ln(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),ja(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const s=this.getResolver(e);if(s==null)return!1;if(s.getFactory){const n=s.getFactory(this);return n==null?!1:(n.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(Ln(e),e.resolve!==void 0)return e;const s=be;let n=be=this,r,o;try{for(;n!=null;)if(r=n._resolvers.get(e),r==null){if(n._parent==null)return o=uu(e)?this:n,t?this._jitRegister(e,o):null;n=n._parent}else return r}finally{be=s}return null}has(e,t=!1){var s;return this._resolvers.has(e)||ja(e)&&e in this.res||((t&&((s=this._parent)==null?void 0:s.has(e,!0)))??!1)}get(e){if(Ln(e),e.$isResolver)return e.resolve(this,this);const t=be;let s=be=this,n,r;try{for(;s!=null;)if(n=s._resolvers.get(e),n==null){if(s._parent==null)return r=uu(e)?this:s,n=this._jitRegister(e,r),n.resolve(s,this);s=s._parent}else return n.resolve(s,this)}finally{be=t}throw Ce(8,e)}getAll(e,t=!1){Ln(e);const s=be,n=be=this;let r=n,o,a=q;try{if(t){for(;r!=null;)o=r._resolvers.get(e),o!=null&&(a=a.concat(hu(o,r,n))),r=r._parent;return a}for(;r!=null;)if(o=r._resolvers.get(e),o==null){if(r=r._parent,r==null)return q}else return hu(o,r,n)}finally{be=s}return q}invoke(e,t){if(au(e))throw Ce(15,e);const s=be;be=this;{let n,r;try{n=Ji(e).map(o=>this.get(r=o))}catch(o){throw hn(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(r)}`),be=s,o}try{return t===void 0?new e(...n):new e(...n,...t)}catch(o){throw hn(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{be=s}}try{return t===void 0?new e(...Ji(e).map(kr,this)):new e(...Ji(e).map(kr,this),...t)}finally{be=s}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(au(e))throw Ce(15,e);this._factories.set(e,t=new Dv(e,Ji(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===ts.DEFAULT?new ir(this,this.config):new ir(this,ts.from({...this.config,inheritParentResources:!1})):new ir(this,ts.from(e??this.config))}disposeResolvers(){var r;const e=this._resolvers,t=this._disposableResolvers;let s,n;for([n,s]of t.entries())(r=s.dispose)==null||r.call(s),e.delete(n);t.clear()}useResources(e){const t=e.res;for(const s in t)this.registerResolver(s,t[s])}find(e,t){var o,a;const s=J(t)?`${Dt}:${e}:${t}`:e;let n=this,r=n.res[s];return r==null&&(n=n.root,r=n.res[s]),r==null?null:((a=(o=r.getFactory)==null?void 0:o.call(r,n))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const s=zn(e);if(!Z(e)&&!s)throw Ce(9,e);if(Lv.has(e.name))throw Ce(10,e);if(s){const r=e.register(t,e);if(!(r instanceof Object)||r.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw Ce(11,e)}return r}if(e.$isInterface)throw Ce(12,e.friendlyName);const n=this.config.defaultResolver(e,t);return t._resolvers.set(e,n),n}}class Dv{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const s=be;be=e;let n;{let r,o;try{r=this.dependencies.map(a=>e.get(o=a))}catch(a){throw hn(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),be=s,a}try{return t===void 0?n=new this.Type(...r):n=new this.Type(...r,...t),this.transformers==null?n:this.transformers.reduce(cu,n)}catch(a){throw hn(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{be=s}}try{return t===void 0?n=new this.Type(...this.dependencies.map(kr,e)):n=new this.Type(...this.dependencies.map(kr,e),...t),this.transformers==null?n:this.transformers.reduce(cu,n)}finally{be=s}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function cu(i,e){return e(i)}function Ln(i){if(i==null)throw Ce(14)}function kr(i){return this.get(i)}function x(...i){if(be==null)throw Ce(16,...i);if(i.length===1)try{return be.get(i[0])}catch(e){throw hn(`[DEV:aurelia] resolve() call error for: ${String(i[0])}`),e}else{let e;try{return i.map(t=>be.get(e=t))}catch(t){throw hn(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return i.length===1?be.get(i[0]):i.map(kr,be)}const hu=(i,e,t)=>{if(i instanceof zt&&i._strategy===4){const s=i._state,n=s.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=s[o].resolve(e,t);return r}return[i.resolve(e,t)]},jv={$isResolver:!0,resolve(i,e){return e}},zn=i=>Z(i==null?void 0:i.register),Fv=i=>zn(i)&&typeof i.registerInRequestor=="boolean",uu=i=>Fv(i)&&i.registerInRequestor,Vv=i=>i.prototype!==void 0,ja=i=>J(i)&&i.indexOf(":")>0;class zv{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,_f(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:s,_key:n}=this;return this._container=this._key=void 0,s.registerResolver(n,new zt(n,e,t))}}const Nn=i=>{const e=i.slice(),t=Object.keys(i),s=t.length;let n;for(let r=0;r<s;++r)n=t[r],un(n)||(e[n]=i[n]);return e},yo=Qs("di:paramtypes"),Hv=i=>Vt(yo,i),bf=i=>Vt("design:paramtypes",i),du=i=>{var e;return(e=i.metadata)[yo]??(e[yo]=[])},Ji=i=>{const e=Qs("di:dependencies");let t=Vt(e,i);if(t===void 0){const s=i.inject;if(s===void 0){const n=bf(i),r=Hv(i);if(n===void 0)if(r===void 0){const o=Object.getPrototypeOf(i);Z(o)&&o!==Function.prototype?t=Nn(Ji(o)):t=[]}else t=Nn(r);else if(r===void 0)t=Nn(n);else{t=Nn(n);let o=r.length,a,l=0;for(;l<o;++l)a=r[l],a!==void 0&&(t[l]=a);const c=Object.keys(r);let u;for(l=0,o=c.length,l=0;l<o;++l)u=c[l],un(u)||(t[u]=r[u])}}else t=Nn(s);yr(t,i,e)}return t},hs=(i,e)=>{const t=Z(i)?i:e,s=(J(i)?i:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:s,toString:()=>`InterfaceSymbol<${s}>`,register:t!=null?(r,o)=>t(new zv(r,o??n)):void 0};return n},Sn=(...i)=>(e,t)=>{switch(t.kind){case"class":{const s=du(t);let n,r=0;for(;r<i.length;++r)n=i[r],n!==void 0&&(s[r]=n);break}case"field":{const s=du(t),n=i[0];n!==void 0&&(s[t.name]=n);break}default:throw Ce(22,String(t.name),t.kind)}},at=(yv(),{createContainer:Mv,getDesignParamtypes:bf,getDependencies:Ji,createInterface:hs,inject:Sn,transient(i){return i.register=function(e){return gf(i,i).register(e,i)},i.registerInRequestor=!1,i},singleton(i,e=Wv){return i.register=function(t){return Cr(i,i).register(t,i)},i.registerInRequestor=e.scoped,i}}),Ni=hs("IContainer"),Uv=Ni;function fu(i,e){return at.transient(i)}function qv(i,e){return i==null?fu:fu(i)}const Wv={scoped:!1},pu=at.singleton;function Qv(i,e){return Z(i)?pu(i):function(t,s){return pu(t,i)}}class zt{get $isResolver(){return!0}constructor(e,t,s){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=s}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw Ce(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const s=e.getFactory(this._state);if(s===null)throw Ce(4,this._key);return s.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw Ce(5,this._strategy)}}getFactory(e){var t,s;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((s=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:s.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class Se{get friendlyName(){return this._name}constructor(e,t=null,s=null){this._name=e,this._instance=t,this._Type=s}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw Ce(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class Kv{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const q=Vr([]),Ge=Vr({});function dt(){}const xn=hs("IPlatform");function Hr(i){return function(e){function t(s,n){Sn(t)(s,n)}return t.$isResolver=!0,t.resolve=function(s,n){return i(e,s,n)},t}}const Ic=(i,e=!1)=>{function t(s,n){Sn(t)(s,n)}return t.$isResolver=!0,t.resolve=(s,n)=>n.getAll(i,e),t},wf=Hr((i,e,t)=>{if(t.has(i,!0))return t.get(i)}),Gv=Hr((i,e,t)=>t.has(i,!1)?t.get(i):void 0),dn=Hr((i,e,t)=>t.has(i,!1)?t.get(i):t.root.get(i)),Xv=Hr((i,e,t)=>t.has(i,!1)?t.get(i):t.root.has(i,!1)?t.root.get(i):void 0),Jv=Hr((i,e,t)=>t===t.root?t.getAll(i,!1):t.has(i,!1)?t.getAll(i,!1).concat(t.root.getAll(i,!1)):t.root.getAll(i,!1));function Hi(i,e,t,s,n,r){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=s.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=i?s.static?i:i.prototype:null,u=c?Object.getOwnPropertyDescriptor(c,s.name):{},h,f=!1,d=t.length-1;d>=0;d--){var g={};for(var p in s)g[p]=p==="access"?{}:s[p];for(var p in s.access)g.access[p]=s.access[p];g.addInitializer=function(b){if(f)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(b||null))};var _=(0,t[d])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(u.get=h),(h=o(_.set))&&(u.set=h),(h=o(_.init))&&n.unshift(h)}else(h=o(_))&&(a==="field"?n.unshift(h):u[l]=h)}c&&Object.defineProperty(c,s.name,u),f=!0}function Yv(i,e,t){for(var s=arguments.length>2,n=0;n<e.length;n++)t=s?e[n].call(i,t):e[n].call(i);return s?t:void 0}const nr=0,rr=1,or=2,on=3,ar=4,lr=5,Zv=6,eb=Vr({trace:nr,debug:rr,info:or,warn:on,error:ar,fatal:lr,none:Zv}),yf=hs("ILogConfig",i=>i.instance(new rb("no-colors",on))),tb=hs("ISink"),sb=hs("ILogEventFactory",i=>i.singleton(ab)),Le=hs("ILogger",i=>i.singleton(lb)),ib=hs("ILogScope"),nb=Vr({key:Qs("logger-sink-handles"),define(i,e){yr(e.handles,i,this.key)},getHandles(i){return Vt(this.key,i.constructor)}}),ys=Il({red(i){return`\x1B[31m${i}\x1B[39m`},green(i){return`\x1B[32m${i}\x1B[39m`},yellow(i){return`\x1B[33m${i}\x1B[39m`},blue(i){return`\x1B[34m${i}\x1B[39m`},magenta(i){return`\x1B[35m${i}\x1B[39m`},cyan(i){return`\x1B[36m${i}\x1B[39m`},white(i){return`\x1B[37m${i}\x1B[39m`},grey(i){return`\x1B[90m${i}\x1B[39m`}});class rb{constructor(e,t){this.colorOptions=e,this.level=t}}const Fa=(function(){const i={"no-colors":Il({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:Il({TRC:ys.grey("TRC"),DBG:ys.grey("DBG"),INF:ys.white("INF"),WRN:ys.yellow("WRN"),ERR:ys.red("ERR"),FTL:ys.red("FTL"),QQQ:ys.grey("???")})};return(e,t)=>e<=nr?i[t].TRC:e<=rr?i[t].DBG:e<=or?i[t].INF:e<=on?i[t].WRN:e<=ar?i[t].ERR:e<=lr?i[t].FTL:i[t].QQQ})(),gu=(i,e)=>e==="no-colors"?i.join("."):i.map(ys.cyan).join("."),Va=(i,e)=>e==="no-colors"?new Date(i).toISOString():ys.grey(new Date(i).toISOString());class ob{constructor(e,t,s,n,r,o){this.severity=e,this.message=t,this.optionalParams=s,this.scope=n,this.colorOptions=r,this.timestamp=o}toString(){const{severity:e,message:t,scope:s,colorOptions:n,timestamp:r}=this;return s.length===0?`${Va(r,n)} [${Fa(e,n)}] ${t}`:`${Va(r,n)} [${Fa(e,n)} ${gu(s,n)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:s,scope:n,colorOptions:r,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&s instanceof Error?l=s:c=s;const u=n.length===0?"":` ${gu(n,r)}`;let h=`${Va(o,r)} [${Fa(t,r)}${u}] ${c}`;if(a===void 0||a.length===0)return l===null?[h]:[h,l];let f=0;for(;h.includes("%s");)h=h.replace("%s",String(a[f++]));return l!==null?[h,l,...a.slice(f)]:[h,...a.slice(f)]}}class ab{constructor(){this.config=x(yf)}createLogEvent(e,t,s,n){return new ob(t,s,n,e.scope,this.config.colorOptions,Date.now())}}let lb=(()=>{var i;let e=[],t,s,n,r,o,a;return i=class{constructor(c=x(yf),u=x(sb),h=x(Ic(tb)),f=x(wf(ib))??[],d=null){this.scope=(Yv(this,e),f),this._scopedLoggers=ce();let g,p,_,b,v,S;if(this.config=c,this._factory=u,this.sinks=h,d===null){this.root=this,this.parent=this,g=this._traceSinks=[],p=this._debugSinks=[],_=this._infoSinks=[],b=this._warnSinks=[],v=this._errorSinks=[],S=this._fatalSinks=[];for(const m of h){const C=nb.getHandles(m);((C==null?void 0:C.includes(nr))??!0)&&g.push(m),((C==null?void 0:C.includes(rr))??!0)&&p.push(m),((C==null?void 0:C.includes(or))??!0)&&_.push(m),((C==null?void 0:C.includes(on))??!0)&&b.push(m),((C==null?void 0:C.includes(ar))??!0)&&v.push(m),((C==null?void 0:C.includes(lr))??!0)&&S.push(m)}}else this.root=d.root,this.parent=d,g=this._traceSinks=d._traceSinks,p=this._debugSinks=d._debugSinks,_=this._infoSinks=d._infoSinks,b=this._warnSinks=d._warnSinks,v=this._errorSinks=d._errorSinks,S=this._fatalSinks=d._fatalSinks}trace(c,...u){this.config.level<=nr&&this._emit(this._traceSinks,nr,c,u)}debug(c,...u){this.config.level<=rr&&this._emit(this._debugSinks,rr,c,u)}info(c,...u){this.config.level<=or&&this._emit(this._infoSinks,or,c,u)}warn(c,...u){this.config.level<=on&&this._emit(this._warnSinks,on,c,u)}error(c,...u){this.config.level<=ar&&this._emit(this._errorSinks,ar,c,u)}fatal(c,...u){this.config.level<=lr&&this._emit(this._fatalSinks,lr,c,u)}scopeTo(c){const u=this._scopedLoggers;let h=u[c];return h===void 0&&(h=u[c]=new i(this.config,this._factory,null,this.scope.concat(c),this)),h}_emit(c,u,h,f){const d=Z(h)?h():h,g=this._factory.createLogEvent(this,u,d,f);for(let p=0,_=c.length;p<_;++p)c[p].handleEvent(g)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[zi],s=[zi],n=[zi],r=[zi],o=[zi],a=[zi],Hi(i,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),Hi(i,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),Hi(i,null,n,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),Hi(i,null,r,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),Hi(i,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),Hi(i,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),i})();const cb=hs(i=>i.singleton(db)),hb=i=>i;class ub{constructor(e){this._promiseCache=new Map,this._objectCache=new Map,this._transform=e}transform(e){if(e instanceof Promise)return this._transformPromise(e);if(typeof e=="object"&&e!==null)return this._transformObject(e);throw Ce(21,e)}_transformPromise(e){if(this._promiseCache.has(e))return this._promiseCache.get(e);const t=e.then(s=>this._transformObject(s));return this._promiseCache.set(e,t),t.then(s=>{this._promiseCache.set(e,s)}),t}_transformObject(e){if(this._objectCache.has(e))return this._objectCache.get(e);const t=this._transform(this._analyze(e));return this._objectCache.set(e,t),t instanceof Promise&&t.then(s=>{this._objectCache.set(e,s)}),t}_analyze(e){if(e==null)throw Ce(21,e);if(typeof e!="object")return new _u(e,[]);let t,s,n,r;const o=[];for(const a in e){switch(typeof(t=e[a])){case"object":if(t===null)continue;s=Z(t.register),n=!1,r=null;break;case"function":s=Z(t.register),n=t.prototype!==void 0,r=Vt(Dt,t)??null;break;default:continue}o.push(new fb(a,t,s,n,r))}return new _u(e,o)}}class db{constructor(){this.transformers=new Map}load(e,t=hb){const s=this.transformers;let n=s.get(t);return n===void 0&&s.set(t,n=new ub(t)),n.transform(e)}dispose(){this.transformers.clear()}}class _u{constructor(e,t){this.raw=e,this.items=t}}class fb{constructor(e,t,s,n,r){this.key=e,this.value=t,this.isRegistry=s,this.isConstructable=n,this.definition=r}}class pb{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const da=hs("IEventAggregator",i=>i.singleton(gb));class gb{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw Ce(18,e);if(J(e)){let s=this.eventLookup[e];if(s!==void 0){s=s.slice();const n=s.length;for(let r=0;r<n;r++)s[r](t,e)}}else{const s=this.messageHandlers.slice(),n=s.length;for(let r=0;r<n;r++)s[r].handle(e)}}subscribe(e,t){if(!e)throw Ce(19,e);let s,n;return J(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),s=t,n=this.eventLookup[e]):(s=new pb(e,t),n=this.messageHandlers),n.push(s),{dispose(){const r=n.indexOf(s);r!==-1&&n.splice(r,1)}}}subscribeOnce(e,t){const s=this.subscribe(e,(n,r)=>{s.dispose(),t(n,r)});return s}}const Cf="AccessThis",_b="AccessBoundary",Ec="AccessGlobal",Tc="AccessScope",mb="ArrayLiteral",vb="ObjectLiteral",bb="PrimitiveLiteral",wb="New",yb="Template",Cb="Unary",kb="CallScope",$b="CallMember",Sb="CallFunction",xb="CallGlobal",fa="AccessMember",kf="AccessKeyed",Ab="TaggedTemplate",Pb="Binary",Ib="Conditional",Eb="Assign",Tb="ArrowFunction",Rb="ValueConverter",Ob="BindingBehavior",$f="ArrayBindingPattern",Sf="ObjectBindingPattern",xf="BindingIdentifier",Bb="ForOfStatement",Mb="Interpolation",Af="ArrayDestructuring",Lb="ObjectDestructuring",Nb="DestructuringAssignmentLeaf",Db="Custom";class Pf{constructor(e){this.value=e,this.$kind=Db}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class jb{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=Ob,this.key=`_bb_${t}`}}class Fb{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=Rb}}class Vb{constructor(e,t,s="="){this.target=e,this.value=t,this.op=s,this.$kind=Eb}}class zb{constructor(e,t,s){this.condition=e,this.yes=t,this.no=s,this.$kind=Ib}}class Hb{constructor(e){this.name=e,this.$kind=Ec}}class cr{constructor(e=0){this.ancestor=e,this.$kind=Cf}}class Ub{constructor(){this.$kind=_b}}class hr{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=Tc}}const If=i=>i.$kind===Ec||(i.$kind===fa||i.$kind===kf)&&i.accessGlobal;class El{constructor(e,t,s=!1){this.object=e,this.name=t,this.optional=s,this.$kind=fa,this.accessGlobal=If(e)}}class Ef{constructor(e,t,s=!1){this.object=e,this.key=t,this.optional=s,this.$kind=kf,this.accessGlobal=If(e)}}class qb{constructor(e,t){this.func=e,this.args=t,this.$kind=wb}}class Tf{constructor(e,t,s=0,n=!1){this.name=e,this.args=t,this.ancestor=s,this.optional=n,this.$kind=kb}}class Oo{constructor(e,t,s,n=!1,r=!1){this.object=e,this.name=t,this.args=s,this.optionalMember=n,this.optionalCall=r,this.$kind=$b}}class Co{constructor(e,t,s=!1){this.func=e,this.args=t,this.optional=s,this.$kind=Sb}}class Wb{constructor(e,t){this.name=e,this.args=t,this.$kind=xb}}class Qb{constructor(e,t,s){this.operation=e,this.left=t,this.right=s,this.$kind=Pb}}class mu{constructor(e,t,s=0){this.operation=e,this.expression=t,this.pos=s,this.$kind=Cb}}class Fe{constructor(e){this.value=e,this.$kind=bb}}Fe.$undefined=new Fe(void 0);Fe.$null=new Fe(null);Fe.$true=new Fe(!0);Fe.$false=new Fe(!1);Fe.$empty=new Fe("");class Tl{constructor(e){this.elements=e,this.$kind=mb}}Tl.$empty=new Tl(q);class Rl{constructor(e,t){this.keys=e,this.values=t,this.$kind=vb}}Rl.$empty=new Rl(q,q);class Bo{constructor(e,t=q){this.cooked=e,this.expressions=t,this.$kind=yb}}Bo.$empty=new Bo([""]);class Rf{constructor(e,t,s,n=q){this.cooked=e,this.func=s,this.expressions=n,this.$kind=Ab,e.raw=t}}class Kb{constructor(e){this.elements=e,this.$kind=$f}}class Gb{constructor(e,t){this.keys=e,this.values=t,this.$kind=Sf}}class Mo{constructor(e){this.name=e,this.$kind=xf}}class Xb{constructor(e,t,s){this.declaration=e,this.iterable=t,this.semiIdx=s,this.$kind=Bb}}class Jb{constructor(e,t=q){this.parts=e,this.expressions=t,this.$kind=Mb,this.isMulti=t.length>1,this.firstExpression=t[0]}}class Yb{constructor(e,t,s,n){this.$kind=e,this.list=t,this.source=s,this.initializer=n}}class Of{constructor(e,t,s){this.target=e,this.source=t,this.initializer=s,this.$kind=Nb}}class Ol{constructor(e,t,s=!1){this.args=e,this.body=t,this.rest=s,this.$kind=Tb}}const Bl=String,ko=()=>Object.create(null),fe=(i,...e)=>new Error(`AUR${Bl(i).padStart(4,"0")}: ${ew(i,...e)}`),Zb={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},ew=(i,...e)=>{var s;let t=Zb[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Bl(l[a.slice(1)]):l=Bl(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t},An=at.createInterface("IExpressionParser");class Bf{constructor(){this._expressionLookup=ko(),this._forOfLookup=ko(),this._interpolationLookup=ko()}parse(e,t){let s;switch(t){case Nf:return new Pf(e);case Lo:return s=this._interpolationLookup[e],s===void 0&&(s=this._interpolationLookup[e]=this.$parse(e,t)),s;case ks:return s=this._forOfLookup[e],s===void 0&&(s=this._forOfLookup[e]=this.$parse(e,t)),s;default:{if(e.length===0){if(t===rw||t===vu)return Fe.$empty;throw yw()}return s=this._expressionLookup[e],s===void 0&&(s=this._expressionLookup[e]=this.$parse(e,t)),s}}}$parse(e,t){return ie=e,X=0,is=e.length,vt=0,Ei=0,M=6291456,ge="",he=Ti(0),re=!0,se=!1,Hn=!0,Oc=-1,ke(61,t===void 0?vu:t)}}Bf.register=zr(An);function Rc(i){switch(i){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return i}}const tw=Fe.$false,sw=Fe.$true,iw=Fe.$null,Mf=Fe.$undefined,ur=new cr(0),za=new cr(1),nw=new Ub,Ss="None",Lo="Interpolation",ks="IsIterator",Lf="IsChainable",rw="IsFunction",vu="IsProperty",Nf="IsCustom";let ie="",X=0,is=0,vt=0,Ei=0,M=6291456,ge="",he,re=!0,se=!1,Hn=!0,Oc=-1;const $r=String.fromCharCode,Ti=i=>ie.charCodeAt(i),xs=()=>ie.slice(Ei,X),ow="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function ke(i,e){if(e===Nf)return new Pf(ie);if(X===0){if(e===Lo)return pw();if(V(),M&4194304)throw vw()}re=577>i,se=!1,Hn=579>i;let t=!1,s,n=0;if(M&131072){const r=Wi[M&63];V(),s=new mu(r,ke(579,e)),re=!1}else{e:switch(M){case 12296:n=vt,re=!1,Hn=!1;do switch(V(),++n,M){case 65547:if(V(),(M&12288)===0)throw vs();break;case 12:case 13:throw vs();case 2162702:if(se=!0,V(),(M&12288)===0){s=n===0?ur:n===1?za:new cr(n),t=!0;break e}break;default:if(M&2097152){s=n===0?ur:n===1?za:new cr(n);break e}throw bw()}while(M===12296);case 4096:{const r=ge;if(e===ks)s=new Mo(r);else if(Hn&&ow.includes(r))s=new Hb(r);else{if(Hn&&r==="import")throw xw();s=new hr(r,n)}if(re=!se,V(),Xt(53)){if(M===524298)throw zf();const o=se,a=vt;++vt;const l=ke(62,Ss);se=o,vt=a,re=!1,s=new Ol([new Mo(r)],l)}break}case 12:throw Tw();case 13:throw Ml();case 12293:switch(re=!1,V(),vt){case 0:s=ur;break;case 1:s=za;break;default:s=new cr(vt);break}break;case 12294:re=!1,V(),s=nw;break;case 2688009:s=cw(e);break;case 2688020:s=ie.search(/\s+of\s+/)>X?aw():hw(e);break;case 524298:s=fw(e);break;case 2163762:s=new Bo([ge]),re=!1,V();break;case 2163763:s=Ha(e,s,!1);break;case 16384:case 32768:s=new Fe(ge),re=!1,V();break;case 8194:case 8195:case 8193:case 8192:s=Wi[M&63],re=!1,V();break;case 8196:{V();const r=ke(578,e);let o;M===2688009?o=xt():(o=[],V()),s=new qb(r,o),re=!1;break}default:throw X>=is?ww():Ua()}if(e===ks)return dw(s);switch(M){case 2228282:case 2228283:s=new mu(Wi[M&63],s,1),V(),re=!1;break}if(579<i)return s;if(M===12||M===13)throw vs();if(s.$kind===Cf)switch(M){case 2162702:if(se=!0,re=!1,V(),(M&13312)===0)throw Bc();if(M&12288)s=new hr(ge,s.ancestor),V();else if(M===2688009)s=new Co(s,xt(),!0);else if(M===2688020)s=$o(s,!0);else throw So();break;case 65547:if(re=!se,V(),(M&12288)===0)throw vs();s=new hr(ge,s.ancestor),V();break;case 12:case 13:throw vs();case 2688009:s=new Co(s,xt(),t);break;case 2688020:s=$o(s,t);break;case 2163762:s=bu(s);break;case 2163763:s=Ha(e,s,!0);break}for(;(M&65536)>0;)switch(M){case 2162702:s=lw(s);break;case 65547:if(V(),(M&12288)===0)throw vs();s=Df(s,!1);break;case 12:case 13:throw vs();case 2688009:if(i===578)return s;s.$kind===Tc?s=new Tf(s.name,xt(),s.ancestor,!1):s.$kind===fa?s=new Oo(s.object,s.name,xt(),s.optional,!1):s.$kind===Ec?s=new Wb(s.name,xt()):s=new Co(s,xt(),!1);break;case 2688020:s=$o(s,!1);break;case 2163762:if(se)throw So();s=bu(s);break;case 2163763:if(se)throw So();s=Ha(e,s,!0);break}}if(M===12||M===13)throw vs();if(577<i)return s;for(;(M&262144)>0;){const r=M;if((r&960)<=i)break;V(),s=new Qb(Wi[r&63],s,ke(r&960,e)),re=!1}if(63<i)return s;if(Xt(6291480)){const r=ke(62,e);Ft(6291478),s=new zb(s,r,ke(62,e)),re=!1}if(62<i)return s;switch(M){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!re)throw Cw();const r=Wi[M&63];V(),s=new Vb(s,ke(62,e),r);break}}if(61<i)return s;for(;Xt(6291482);){if(M===6291456)throw kw();const r=ge;V();const o=new Array;for(;Xt(6291478);)o.push(ke(62,e));s=new Fb(s,r,o)}for(;Xt(6291481);){if(M===6291456)throw $w();const r=ge;V();const o=new Array;for(;Xt(6291478);)o.push(ke(62,e));s=new jb(s,r,o)}if(M!==6291456){if(e===Lo&&M===7340047)return s;if(e===Lf&&M===6291479){if(X===is)throw Ua();return Oc=X-1,s}throw xs()==="of"?Sw():Ua()}return s}function aw(){const i=[],e=new Yb(Af,i,void 0,void 0);let t="",s=!0,n=0;for(;s;)switch(V(),M){case 7340053:s=!1,r();break;case 6291475:r();break;case 4096:t=xs();break;default:throw Iw()}return Ft(7340053),e;function r(){t!==""?(i.push(new Of(new El(ur,t),new Ef(ur,new Fe(n++)),void 0)),t=""):n++}}function xt(){const i=se;V();const e=[];for(;M!==7340048&&(e.push(ke(62,Ss)),!!Xt(6291475)););return Ft(7340048),re=!1,se=i,e}function $o(i,e){const t=se;return V(),i=new Ef(i,ke(62,Ss),e),Ft(7340053),re=!t,se=t,i}function lw(i){if(se=!0,re=!1,V(),(M&13312)===0)throw Bc();if(M&12288)return Df(i,!0);if(M===2688009)return i.$kind===Tc?new Tf(i.name,xt(),i.ancestor,!0):i.$kind===fa?new Oo(i.object,i.name,xt(),i.optional,!0):new Co(i,xt(),!0);if(M===2688020)return $o(i,!0);throw So()}function Df(i,e){const t=ge;switch(M){case 2162702:{se=!0,re=!1;const s=X,n=Ei,r=M,o=he,a=ge,l=re,c=se;if(V(),(M&13312)===0)throw Bc();return M===2688009?new Oo(i,t,xt(),e,!0):(X=s,Ei=n,M=r,he=o,ge=a,re=l,se=c,new El(i,t,e))}case 2688009:return re=!1,new Oo(i,t,xt(),e,!1);default:return re=!se,V(),new El(i,t,e)}}function cw(i){V();const e=X,t=Ei,s=M,n=he,r=ge,o=se,a=[];let l=1,c=!1;e:for(;;){if(M===13){if(V(),M!==4096)throw vs();if(a.push(new Mo(ge)),V(),M===6291475)throw Ew();if(M!==7340048||(V(),M!==53))throw Ml();V();const f=se,d=vt;++vt;const g=ke(62,Ss);return se=f,vt=d,re=!1,new Ol(a,g,!0)}switch(M){case 4096:a.push(new Mo(ge)),V();break;case 7340048:V();break e;case 524298:case 2688020:V(),l=4;break;case 6291475:l=2,c=!0;break e;case 2688009:l=2;break e;default:V(),l=2;break}switch(M){case 6291475:if(V(),c=!0,l===1)break;break e;case 7340048:V();break e;case 4194352:l===1&&(l=3);break e;case 53:if(c)throw ho();V(),l=2;break e;default:l===1&&(l=2);break e}}if(M===53){if(l===1){if(V(),M===524298)throw zf();const f=se,d=vt;++vt;const g=ke(62,Ss);return se=f,vt=d,re=!1,new Ol(a,g)}throw ho()}else if(l===1&&a.length===0)throw Vf(53);if(c)switch(l){case 2:throw ho();case 3:throw Cu();case 4:throw ku()}X=e,Ei=t,M=s,he=n,ge=r,se=o;const u=se,h=ke(62,i);if(se=u,Ft(7340048),M===53)switch(l){case 2:throw ho();case 3:throw Cu();case 4:throw ku()}return h}function hw(i){const e=se;V();const t=new Array;for(;M!==7340053;)if(Xt(6291475)){if(t.push(Mf),M===7340053)break}else if(t.push(ke(62,i===ks?Ss:i)),Xt(6291475)){if(M===7340053)break}else break;return se=e,Ft(7340053),i===ks?new Kb(t):(re=!1,new Tl(t))}const uw=[$f,Sf,xf,Af,Lb];function dw(i){if(!uw.includes(i.$kind)||M!==4204596)throw yu(i.$kind);V();const e=i,t=ke(61,Lf);return new Xb(e,t,Oc)}function fw(i){const e=se,t=new Array,s=new Array;for(V();M!==7340047;){if(t.push(ge),M&49152)V(),Ft(6291478),s.push(ke(62,i===ks?Ss:i));else if(M&12288){const n=he,r=M,o=X;V(),Xt(6291478)?s.push(ke(62,i===ks?Ss:i)):(he=n,M=r,X=o,s.push(ke(580,i===ks?Ss:i)))}else throw Aw();M!==7340047&&Ft(6291475)}return se=e,Ft(7340047),i===ks?new Gb(t,s):(re=!1,new Rl(t,s))}function pw(){const i=[],e=[],t=is;let s="";for(;X<t;){switch(he){case 36:if(Ti(X+1)===123){i.push(s),s="",X+=2,he=Ti(X),V();const n=ke(61,Lo);e.push(n);continue}else s+="$";break;case 92:s+=$r(Rc(z()));break;default:s+=$r(he)}z()}return e.length?(i.push(s),new Jb(i,e)):null}function Ha(i,e,t){const s=se,n=[ge];Ft(2163763);const r=[ke(62,i)];for(;(M=mw())!==2163762;)n.push(ge),Ft(2163763),r.push(ke(62,i));return n.push(ge),re=!1,se=s,t?(V(),new Rf(n,n,e,r)):(V(),new Bo(n,r))}function bu(i){re=!1;const e=[ge];return V(),new Rf(e,e,i)}function V(){for(;X<is;)if(Ei=X,(M=Ow[he]())!=null)return;M=6291456}function z(){return he=Ti(++X)}function gw(){for(;Bw[z()];);const i=Rw[ge=xs()];return i===void 0?4096:i}function wu(i){let e=he;if(i===!1){do e=z();while(e<=57&&e>=48);if(e!==46)return ge=parseInt(xs(),10),32768;if(e=z(),X>=is)return ge=parseInt(xs().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=z();while(e<=57&&e>=48);else he=Ti(--X);return ge=parseFloat(xs()),32768}function _w(){const i=he;z();let e=0;const t=new Array;let s=X;for(;he!==i;)if(he===92)t.push(ie.slice(s,X)),z(),e=Rc(he),z(),t.push($r(e)),s=X;else{if(X>=is)throw Pw();z()}const n=ie.slice(s,X);return z(),t.push(n),ge=t.join(""),16384}function jf(){let i=!0,e="";for(;z()!==96;)if(he===36)if(X+1<is&&Ti(X+1)===123){X++,i=!1;break}else e+="$";else if(he===92)e+=$r(Rc(z()));else{if(X>=is)throw Ff();e+=$r(he)}return z(),ge=e,i?2163762:2163763}const mw=()=>{if(X>=is)throw Ff();return X--,jf()},Xt=i=>M===i?(V(),!0):!1,Ft=i=>{if(M===i)V();else throw Vf(i)},vw=()=>fe(151,ie),Ml=()=>fe(152,ie),vs=()=>fe(153,ie),bw=()=>fe(154,ie),ww=()=>fe(155,ie),Ua=()=>fe(156,xs(),X,ie),yw=()=>fe(157),Cw=()=>fe(158,ie),kw=()=>fe(159,ie),$w=()=>fe(160,ie),Sw=()=>fe(161,ie),xw=()=>fe(162,ie),yu=i=>fe(163,ie,i),Aw=()=>fe(164,ie),Pw=()=>fe(165,ie),Ff=()=>fe(166,ie),Vf=i=>fe(167,Wi[i&63],ie),Iw=()=>fe(170,xs(),X,ie),Bc=()=>fe(171,xs(),X-1,ie),So=()=>fe(172,ie),ho=()=>fe(173,ie),Cu=()=>fe(174,ie),ku=()=>fe(175,ie),Ew=()=>fe(176,ie),zf=()=>fe(178,ie),Tw=()=>fe(179,X-1,ie),Wi=[tw,sw,iw,Mf,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],Rw=Object.assign(ko(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:Ow,IdParts:Bw}=(()=>{const i=()=>{throw fe(168,ie)};i.notMapped=!0;const e={IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const u=l.length;for(let h=0;h<u;h+=2){const f=l[h];let d=l[h+1];d=d>0?d:f+1,o&&o.fill(c,f,d)}},s=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),n=o=>()=>(z(),o),r=new Array(65535);return r.fill(i,0,65535),t(r,null,e.Skip,()=>(z(),null)),t(r,null,e.IdStart,gw),t(r,null,e.Digit,()=>wu(!1)),r[34]=r[39]=()=>_w(),r[96]=()=>jf(),r[33]=()=>z()!==61?131121:z()!==61?6553951:(z(),6553953),r[61]=()=>z()===62?(z(),53):he!==61?4194352:z()!==61?6553950:(z(),6553952),r[38]=()=>z()!==38?6291481:(z(),6553885),r[124]=()=>z()!==124?6291482:(z(),6553820),r[63]=()=>{if(z()===46){const o=Ti(X+1);return o<=48||o>=57?(z(),2162702):6291480}return he!==63?6291480:(z(),6553755)},r[46]=()=>z()<=57&&he>=48?wu(!0):he===46?z()!==46?12:(z(),13):65547,r[60]=()=>z()!==61?6554018:(z(),6554020),r[62]=()=>z()!==61?6554019:(z(),6554021),r[37]=n(6554157),r[40]=n(2688009),r[41]=n(7340048),r[42]=()=>z()===61?(z(),4194360):he===42?(z(),6554223):6554156,r[43]=()=>z()===43?(z(),2228282):he!==61?2490856:(z(),4194358),r[44]=n(6291475),r[45]=()=>z()===45?(z(),2228283):he!==61?2490857:(z(),4194359),r[47]=()=>z()!==61?6554158:(z(),4194361),r[58]=n(6291478),r[59]=n(6291479),r[91]=n(2688020),r[93]=n(7340053),r[123]=n(524298),r[125]=n(7340047),{CharScanners:r,IdParts:s}})(),us=at.createInterface,Pn=Object.freeze,{aliasTo:$u,singleton:Mc}=Et,Nt="Interpolation",Hf="IsFunction",ds="IsProperty",Qi="custom-element",Di=Pn({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),pa=us("ITemplateCompiler"),Uf=us("IAttrMapper"),ye=(i,...e)=>{const t=String(i).padStart(4,"0"),s=Lw(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/0088-to-0723/aur${t}`;return new Error(`AUR${t}: ${s}

For more information, see: ${n}`)},Mw={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",723:"Template compilation error: Invalid comma-separated class binding syntax in {{0}}. It resulted in no valid class names after parsing.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},Lw=(i,...e)=>{var s;let t=Mw[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=Nw(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function Nw(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var qf,Wf,Qf,Kf,Gf;class Lc{constructor(e,t,s,n){if(this.chars=e,this.repeat=t,this.isSymbol=s,this.isInverted=n,n)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class Dw{constructor(){this.parts=q,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=q):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const s=this._currentRecord;s[e]===void 0?s[e]=t:s[e]+=t}next(e){const t=this._currentRecord;let s;t[e]!==void 0&&(s=this._partsRecord,s[e]===void 0?s[e]=[t[e]]:s[e].push(t[e]),t[e]=void 0)}}class Nc{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,s=t.length;let n=null,r=0;for(;r<s;++r)if(n=t[r],e.equals(n.charSpec))return n;return null}append(e,t){const s=this._patterns;s.includes(t)||s.push(t);let n=this.findChild(e);return n==null&&(n=new Nc(e,t),this._nextStates.push(n),e.repeat&&n._nextStates.push(n)),n}findMatches(e,t){const s=[],n=this._nextStates,r=n.length;let o=0,a=null,l=0,c=0;for(;l<r;++l)if(a=n[l],a.charSpec.has(e))if(s.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return s}}let Su=class{constructor(e){this.text=e;const t=this._len=e.length,s=this._specs=[];let n=0;for(;t>n;++n)s.push(new Lc(e[n],!1,!1,!1))}eachChar(e){const t=this._len,s=this._specs;let n=0;for(;t>n;++n)e(s[n])}},jw=class{constructor(e){this.text="PART",this._spec=new Lc(e,!0,!1,!0)}eachChar(e){e(this._spec)}};class Fw{constructor(e){this.text=e,this._spec=new Lc(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class Vw{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const zw=us("ISyntaxInterpreter",i=>i.singleton(Hw));class Hw{constructor(){this._rootState=new Nc(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((f,d)=>f.pattern>d.pattern?1:-1);const t=e.length;let s,n,r,o,a,l,c,u=0,h;for(;t>u;){for(s=this._rootState,n=e[u],r=n.pattern,o=new Vw,a=this._parse(n,o),l=a.length,c=f=>s=s.append(f,r),h=0;l>h;++h)a[h].eachChar(c);s._types=o,s._isEndpoint=!0,++u}}interpret(e){const t=new Dw,s=e.length;let n=this._initialStates,r=0,o;for(;r<s&&(n=this._getNextStates(n,e.charAt(r),t),n.length!==0);++r);return n=n.filter(Uw),n.length>0&&(n.sort(qw),o=n[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,s){const n=[];let r=null;const o=e.length;let a=0;for(;a<o;++a)r=e[a],n.push(...r.findMatches(t,s));return n}_parse(e,t){const s=[],n=e.pattern,r=n.length,o=e.symbols;let a=0,l=0,c="";for(;a<r;)c=n.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&n.slice(a,a+4)==="PART"?(l=a=a+4,s.push(new jw(o)),++t.dynamics):++a:a!==l?(s.push(new Su(n.slice(l,a))),++t.statics,l=a):(s.push(new Fw(n.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(s.push(new Su(n.slice(l,a))),++t.statics),s}}function Uw(i){return i._isEndpoint}function qw(i,e){const t=i._types,s=e._types;return t.statics!==s.statics?s.statics-t.statics:t.dynamics!==s.dynamics?s.dynamics-t.dynamics:t.symbols!==s.symbols?s.symbols-t.symbols:0}class yt{constructor(e,t,s,n,r=null){this.rawName=e,this.rawValue=t,this.target=s,this.command=n,this.parts=r}}const Ww=us("IAttributePattern"),Dc=us("IAttributeParser",i=>i.singleton(Qw));class Qw{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=x(zw),this._container=x(Ni)}registerPattern(e,t){if(this._initialized)throw ye(88);const s=this._patterns;for(const{pattern:n}of e){if(s[n]!=null)throw ye(89,n);s[n]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let s=this._cache[e];s==null&&(s=this._cache[e]=this._interpreter.interpret(e));const n=s.pattern;return n==null?new yt(e,t,e,null,null):this._patterns[n].pattern[n](e,t,s.parts)}}const ii=Pn({name:si("attribute-pattern"),create(i,e){return{register(t){t.get(Dc).registerPattern(i,e),Mc(Ww,e).register(t)}}}});class Ll{"PART.PART"(e,t,s){return new yt(e,t,s[0],s[1])}"PART.PART.PART"(e,t,s){return new yt(e,t,`${s[0]}.${s[1]}`,s[2])}}qf=Symbol.metadata;Ll[qf]={[cs]:ii.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],Ll)};class Nl{ref(e,t,s){return new yt(e,t,"element","ref")}"PART.ref"(e,t,s){let n=s[0];return n==="view-model"&&(n="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new yt(e,t,n,"ref")}}Wf=Symbol.metadata;Nl[Wf]={[cs]:ii.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],Nl)};class Dl{"PART.trigger:PART"(e,t,s){return new yt(e,t,s[0],"trigger",s)}"PART.capture:PART"(e,t,s){return new yt(e,t,s[0],"capture",s)}}Qf=Symbol.metadata;Dl[Qf]={[cs]:ii.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],Dl)};class xu{":PART"(e,t,s){return new yt(e,t,s[0],"bind")}}Kf=Symbol.metadata;xu[Kf]={[cs]:ii.create([{pattern:":PART",symbols:":"}],xu)};class Au{"@PART"(e,t,s){return new yt(e,t,s[0],"trigger")}"@PART:PART"(e,t,s){return new yt(e,t,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}Gf=Symbol.metadata;Au[Gf]={[cs]:ii.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],Au)};const jl=It.get,Pu=It.define,Xf="ra",Jf="rb",Yf="rc",Zf="rd",ep="re",tp="rf",jc="rg",sp="ri",ip="rj",np="rk",rp="rl",op="ha",ap="hb",lp="hc",Kw="hd",cp="he",hp="hf",up="hg",dp="hs",fp="hp",pp="svb",Be=Pn({hydrateElement:Xf,hydrateAttribute:Jf,hydrateTemplateController:Yf,hydrateLetElement:Zf,setProperty:ep,interpolation:tp,propertyBinding:jc,letBinding:sp,refBinding:ip,iteratorBinding:np,multiAttr:rp,textBinding:op,listenerBinding:ap,attributeBinding:lp,stylePropertyBinding:Kw,setAttribute:cp,setClassAttribute:hp,setStyleAttribute:up,spreadTransferedBinding:dp,spreadElementProp:fp,spreadValueBinding:pp}),In=us("Instruction");class _s{constructor(e,t){this.from=e,this.to=t,this.type=tp}}class Ur{constructor(e,t,s){this.from=e,this.to=t,this.mode=s,this.type=jc}}class Gw{constructor(e,t,s){this.forOf=e,this.to=t,this.props=s,this.type=np}}class Xw{constructor(e,t){this.from=e,this.to=t,this.type=ip}}class Ui{constructor(e,t){this.value=e,this.to=t,this.type=ep}}class Jw{constructor(e,t,s){this.value=e,this.to=t,this.command=s,this.type=rp}}class Yw{constructor(e,t,s,n,r,o){this.res=e,this.props=t,this.projections=s,this.containerless=n,this.captures=r,this.data=o,this.type=Xf}}class qa{constructor(e,t,s){this.res=e,this.alias=t,this.props=s,this.type=Jf}}class Zw{constructor(e,t,s,n){this.def=e,this.res=t,this.alias=s,this.props=n,this.type=Yf}}class e0{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=Zf}}class Iu{constructor(e,t){this.from=e,this.to=t,this.type=sp}}class t0{constructor(e){this.from=e,this.type=op}}class gp{constructor(e,t,s,n){this.from=e,this.to=t,this.capture=s,this.modifier=n,this.type=ap}}class Eu{constructor(e,t){this.value=e,this.to=t,this.type=cp}}class Tu{constructor(e){this.value=e,this.type=hp}}class Ru{constructor(e){this.value=e,this.type=up}}class Fc{constructor(e,t,s){this.attr=e,this.from=t,this.to=s,this.type=lp}}class Ou{constructor(){this.type=dp}}class Bu{constructor(e){this.instruction=e,this.type=fp}}class Fl{constructor(e,t){this.target=e,this.from=t,this.type=pp}}class No{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return J(e)?(s=e,n={name:s}):(s=e.name,n=e),new No(t,Fs(Vl(t,"name"),s),Te(Vl(t,"aliases"),n.aliases,t.aliases),an(s))}register(e,t){const s=this.Type,n=typeof t=="string"?an(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${ye(157,this.name)}`):e.register(e.has(s,!1)?null:Mc(s,s),$u(s,n),...r.map(o=>$u(s,an(o))))}}const Je="binding-command",xo=si(Je),an=i=>`${xo}:${i}`,Vl=(i,e)=>jl(mf.annotation.keyFor(e),i),s0=(()=>{const i="__au_static_resource__",e=(t,s,n)=>{var o;let r=jl(i,t);return r==null&&((o=t.$au)==null?void 0:o.type)===s&&(r=n(t.$au,t),Pu(r,t,i)),r};return Pn({name:xo,keyFrom:an,define(t,s){const n=No.create(t,s),r=n.Type;return Pu(n,r,xo,Dt),r},getAnnotation:Vl,find(t,s){const n=t.find(Je,s);return n==null?null:jl(xo,n)??e(n,Je,No.create)??null},get(t,s){try{return t.get(dn(an(s)))}catch(n){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,s),n}return t.get(dn(an(s)))}})})();class _p{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Ur(t.parse(o,ds),r,1)}}_p.$au={type:Je,name:"one-time"};class mp{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Ur(t.parse(o,ds),r,2)}}mp.$au={type:Je,name:"to-view"};class vp{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Ur(t.parse(o,ds),r,4)}}vp.$au={type:Je,name:"from-view"};class bp{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Ur(t.parse(o,ds),r,6)}}bp.$au={type:Je,name:"two-way"};class wp{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr,r=e.bindable;let o=n.rawValue,a=n.target,l,c;return o=o===""?De(a):o,r==null?(c=s.isTwoWay(e.node,a)?6:2,a=s.map(e.node,a)??De(a)):(l=e.def.defaultBindingMode??0,c=r.mode===0||r.mode==null?l==null||l===0?2:l:r.mode,a=r.name),new Ur(t.parse(o,ds),a,J(c)?Di[c]??0:c)}}wp.$au={type:Je,name:"bind"};class yp{constructor(){this._attrParser=x(Dc)}get ignoreAttr(){return!1}build(e,t){const s=e.bindable===null?De(e.attr.target):e.bindable.name,n=t.parse(e.attr.rawValue,"IsIterator");let r=q;if(n.semiIdx>-1){const o=e.attr.rawValue.slice(n.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),u=this._attrParser.parse(l,c);r=[new Jw(c,u.target,u.command)]}}return new Gw(n,s,r)}}yp.$au={type:Je,name:"for"};class Cp{get ignoreAttr(){return!0}build(e,t){var s;return new gp(t.parse(e.attr.rawValue,Hf),e.attr.target,!1,((s=e.attr.parts)==null?void 0:s[2])??null)}}Cp.$au={type:Je,name:"trigger"};class kp{get ignoreAttr(){return!0}build(e,t){var s;return new gp(t.parse(e.attr.rawValue,Hf),e.attr.target,!0,((s=e.attr.parts)==null?void 0:s[2])??null)}}kp.$au={type:Je,name:"capture"};class $p{get ignoreAttr(){return!0}build(e,t){const s=e.attr,n=s.target;let r=s.rawValue;return r=r===""?De(n):r,new Fc(n,t.parse(r,ds),n)}}$p.$au={type:Je,name:"attr"};class Sp{get ignoreAttr(){return!0}build(e,t){return new Fc("style",t.parse(e.attr.rawValue,ds),e.attr.target)}}Sp.$au={type:Je,name:"style"};class xp{get ignoreAttr(){return!0}build(e,t){let s=e.attr.target;if(s.includes(",")){const n=s.split(",").filter(r=>r.length>0);if(n.length===0)throw ye(723);s=n.join(" ")}return new Fc("class",t.parse(e.attr.rawValue,ds),s)}}xp.$au={type:Je,name:"class"};class Ap{get ignoreAttr(){return!0}build(e,t){return new Xw(t.parse(e.attr.rawValue,ds),e.attr.target)}}Ap.$au={type:Je,name:"ref"};class Pp{get ignoreAttr(){return!1}build(e){return new Fl(e.attr.target,e.attr.rawValue)}}Pp.$au={type:Je,name:"spread"};const i0=us("ITemplateElementFactory",i=>i.singleton(n0)),Mu={};class n0{constructor(){this.p=x(xn),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var s;if(J(e)){let n=Mu[e];if(n===void 0){const r=this._template;r.innerHTML=e;const o=r.content.firstElementChild;t(o)?(this._template=this.t(),n=r):(r.content.removeChild(o),n=o),Mu[e]=n}return n.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const n=this.t();return n.content.appendChild(e),n}return(s=e.parentNode)==null||s.removeChild(e),e.cloneNode(!0);function t(n){if(n==null||n.nodeName!=="TEMPLATE"||n.nextElementSibling!=null)return!0;const o=n.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=n.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const Wa="au-start",Qa="au-end",Ka=(i,e,t)=>i.insertBefore(e,t),Lu=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},pi=(i,e)=>i.content.appendChild(e),Nu=(i,e)=>{const t=e.length;let s=0;for(;t>s;)i.content.appendChild(e[s]),++s},Du=i=>i.nodeType===1,ju=i=>i.nodeType===3,Dn="au-slot",Fu="default",jn=(i=>()=>`anonymous-${++i}`)(0);class Ip{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var h,f;if(e.template==null||e.needsCompile===!1)return e;const s=new Do(e,t,null,null,void 0),n=J(e.template)||!e.enhance?s._templateFactory.createTemplate(e.template):e.template,r=n.nodeName===Ga&&n.content!=null,o=r?n.content:n,a=h0.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(f=(h=a[c]).compiling)==null||f.call(h,n),++c;if(n.hasAttribute(zl))throw ye(701,e);return this._compileLocalElement(o,s),this._compileNode(o,s),{...e,name:e.name||jn(),dependencies:(e.dependencies??q).concat(s.deps??q),instructions:s.rows,surrogates:r?this._compileSurrogate(n,s):q,template:n,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(e,t,s,n,r){const o=new Do(e,s,null,null,void 0),a=[],l=r??o._findElement(n.nodeName.toLowerCase()),c=l!==null,u=o._exprParser,h=t.length;let f=0,d,g=null,p,_,b,v,S,m=null,C,O,E,N;for(;h>f;++f){if(d=t[f],E=d.target,N=d.rawValue,E==="...$attrs"){a.push(new Ou);continue}if(m=o._getCommand(d),m!==null&&m.ignoreAttr){L.node=n,L.attr=d,L.bindable=null,L.def=null,a.push(m.build(L,o._exprParser,o._attrMapper));continue}if(c&&(b=o._getBindables(l),v=b.attrs[E],v!==void 0)){m==null?(C=u.parse(N,Nt),a.push(new Bu(C==null?new Ui(N,v.name):new _s(C,v.name)))):(L.node=n,L.attr=d,L.bindable=v,L.def=l,a.push(new Bu(m.build(L,o._exprParser,o._attrMapper))));continue}if(g=o._findAttr(E),g!==null){if(g.isTemplateController)throw ye(9998,E);b=o._getBindables(g),O=g.noMultiBindings===!1&&m===null&&Xa(N),O?_=this._compileMultiBindings(n,N,g,o):(S=b.primary,m===null?(C=u.parse(N,Nt),_=[C===null?new Ui(N,S.name):new _s(C,S.name)]):(L.node=n,L.attr=d,L.bindable=S,L.def=g,_=[m.build(L,o._exprParser,o._attrMapper)])),(p??(p=[])).push(new qa(this.resolveResources?g:g.name,g.aliases!=null&&g.aliases.includes(E)?E:void 0,_));continue}if(m==null)if(C=u.parse(N,Nt),C!=null)a.push(new _s(C,o._attrMapper.map(n,E)??De(E)));else switch(E){case"class":a.push(new Tu(N));break;case"style":a.push(new Ru(N));break;default:a.push(new Eu(N,E))}else L.node=n,L.attr=d,L.bindable=null,L.def=null,a.push(m.build(L,o._exprParser,o._attrMapper))}return uo(),p!=null?p.concat(a):a}_compileSurrogate(e,t){const s=[],n=e.attributes,r=t._exprParser;let o=n.length,a=0,l,c,u,h,f=null,d,g,p,_,b=null,v,S,m,C;for(;o>a;++a){if(l=n[a],c=l.name,u=l.value,h=t._attrParser.parse(c,u),m=h.target,C=h.rawValue,o0[m])throw ye(702,c);if(b=t._getCommand(h),b!==null&&b.ignoreAttr){L.node=e,L.attr=h,L.bindable=null,L.def=null,s.push(b.build(L,t._exprParser,t._attrMapper));continue}if(f=t._findAttr(m),f!==null){if(f.isTemplateController)throw ye(703,m);p=t._getBindables(f),S=f.noMultiBindings===!1&&b===null&&Xa(C),S?g=this._compileMultiBindings(e,C,f,t):(_=p.primary,b===null?(v=r.parse(C,Nt),g=v===null?C===""?[]:[new Ui(C,_.name)]:[new _s(v,_.name)]):(L.node=e,L.attr=h,L.bindable=_,L.def=f,g=[b.build(L,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(d??(d=[])).push(new qa(this.resolveResources?f:f.name,f.aliases!=null&&f.aliases.includes(m)?m:void 0,g));continue}if(b===null)if(v=r.parse(C,Nt),v!=null)e.removeAttribute(c),--a,--o,s.push(new _s(v,t._attrMapper.map(e,m)??De(m)));else switch(c){case"class":s.push(new Tu(C));break;case"style":s.push(new Ru(C));break;default:s.push(new Eu(C,c))}else L.node=e,L.attr=h,L.bindable=null,L.def=null,s.push(b.build(L,t._exprParser,t._attrMapper))}return uo(),d!=null?d.concat(s):s}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let s=e.firstChild;for(;s!==null;)s=this._compileNode(s,t);break}}return e.nextSibling}_compileLet(e,t){const s=e.attributes,n=s.length,r=[],o=t._exprParser;let a=!1,l=0,c,u,h,f,d,g,p,_;for(;n>l;++l){if(c=s[l],h=c.name,f=c.value,h==="to-binding-context"){a=!0;continue}if(u=t._attrParser.parse(h,f),g=u.target,p=u.rawValue,d=t._getCommand(u),d!==null){if(u.command==="bind")r.push(new Iu(o.parse(p,ds),De(g)));else throw ye(704,u);continue}_=o.parse(p,Nt),_===null&&console.warn(`[DEV:aurelia] Property "${g}" is declared with literal string ${p}. Did you mean ${g}.bind="${p}"?`),r.push(new Iu(_===null?new Fe(p):_,De(g)))}return t.rows.push([new e0(r,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var A,te,ht,et,qt,lo,Vi,On;const s=e.nextSibling,n=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),r=t._findElement(n),o=r!==null,a=o&&r.shadowOptions!=null,l=r==null?void 0:r.capture,c=l!=null&&typeof l!="boolean",u=l?[]:q,h=t._exprParser,f=this.debug?dt:()=>{e.removeAttribute(v),--_,--p};let d=e.attributes,g,p=d.length,_=0,b,v,S,m,C,O,E=null,N=!1,D,F,pe,Ne,Pe,we,Ie,G=null,R,ue,j,ae,ct=!0,y=!1,$=!1,w=!1,P,H=0;if(n==="slot"){if(t.root.def.shadowOptions==null)throw ye(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(P={},ct=(A=r.processContent)==null?void 0:A.call(r.Type,e,t.p,P),d=e.attributes,p=d.length);p>_;++_){switch(b=d[_],v=b.name,S=b.value,v){case"as-element":case"containerless":f(),y=y||v==="containerless";continue}if(m=t._attrParser.parse(v,S),G=t._getCommand(m),j=m.target,ae=m.rawValue,l&&(!c||c&&l(j))){if(G!=null&&G.ignoreAttr){f(),u.push(m);continue}if($=j!==Dn&&j!=="slot"&&((H=j.indexOf("..."))===-1||H===0&&j==="...$attrs"),$&&(R=t._getBindables(r),R.attrs[j]==null&&!((te=t._findAttr(j))!=null&&te.isTemplateController))){f(),u.push(m);continue}}if(j==="...$attrs"){(C??(C=[])).push(new Ou),f();continue}if(G!=null&&G.ignoreAttr){L.node=e,L.attr=m,L.bindable=null,L.def=null,(C??(C=[])).push(G.build(L,t._exprParser,t._attrMapper)),f();continue}if(j.indexOf("...")===0){if(o&&(j=j.slice(3))!=="$element"){(O??(O=[])).push(new Fl("$bindables",j==="$bindables"?ae:j)),f();continue}throw(j==="$bindable"||j==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${j} on <${e.nodeName}>, did you mean "$bindables"?`),ye(720,j)}if(o){if(R=t._getBindables(r),D=R.attrs[j],D!==void 0){G===null?(we=h.parse(ae,Nt),(O??(O=[])).push(we==null?new Ui(ae,D.name):new _s(we,D.name))):(L.node=e,L.attr=m,L.bindable=D,L.def=r,(O??(O=[])).push(G.build(L,t._exprParser,t._attrMapper))),f(),E=t._findAttr(j),E!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${j}" on custom element "${r.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(j==="$bindables"){if(G!=null){L.node=e,L.attr=m,L.bindable=null,L.def=r;{const K=G.build(L,t._exprParser,t._attrMapper);K instanceof Fl||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${r.name}" with command ${m.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(O??(O=[])).push(K)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${r.name}>" is ignored.`);f();continue}}if(j==="$bindables")throw ye(721,e.nodeName,j,ae);if(E=t._findAttr(j),E!==null){R=t._getBindables(E),N=E.noMultiBindings===!1&&G===null&&Xa(ae),N?pe=this._compileMultiBindings(e,ae,E,t):(ue=R.primary,G===null?(we=h.parse(ae,Nt),pe=we===null?ae===""?[]:[new Ui(ae,ue.name)]:[new _s(we,ue.name)]):(L.node=e,L.attr=m,L.bindable=ue,L.def=E,pe=[G.build(L,t._exprParser,t._attrMapper)])),f(),E.isTemplateController?(Ne??(Ne=[])).push(new Zw(r0,this.resolveResources?E:E.name,void 0,pe)):(F??(F=[])).push(new qa(this.resolveResources?E:E.name,E.aliases!=null&&E.aliases.includes(j)?j:void 0,pe));continue}if(G===null){we=h.parse(ae,Nt),we!=null&&(f(),(C??(C=[])).push(new _s(we,t._attrMapper.map(e,j)??De(j))));continue}L.node=e,L.attr=m,L.bindable=null,L.def=null,(C??(C=[])).push(G.build(L,t._exprParser,t._attrMapper)),f()}uo(),this._shouldReorderAttrs(e,C)&&C!=null&&C.length>1&&this._reorder(e,C),o&&(Ie=new Yw(this.resolveResources?r:r.name,O??q,null,y,u,P)),(C!=null||Ie!=null||F!=null)&&(g=q.concat(Ie??q,F??q,C??q),w=!0);let k;if(Ne!=null){p=Ne.length-1,_=p,Pe=Ne[_];let K;Vu(e)?(K=t.t(),Nu(K,[t._marker(),t._comment(Wa),t._comment(Qa)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?K=e:(K=t.t(),pi(K,e)));const co=K,Ot=t._createChild(g==null?[]:[g]);let Bn,Bt,ui=!1,di,Mt,Wt,Qt,Mn,Ms,fi=0,ru=0,qe=e.firstChild,ou=!1;if(ct!==!1)for(;qe!==null;){if(Bt=Du(qe)?qe.getAttribute(Dn):null,ui=Bt!==null||o&&!a,Bn=qe.nextSibling,ui){if(!o)throw ye(706,Bt,n);(ht=qe.removeAttribute)==null||ht.call(qe,Dn),ou=ju(qe)&&qe.textContent.trim()==="",ou||((et=Mt??(Mt={}))[qt=Bt||Fu]??(et[qt]=[])).push(qe),e.removeChild(qe)}qe=Bn}if(Mt!=null){di={};for(Bt in Mt){for(K=t.t(),Wt=Mt[Bt],fi=0,ru=Wt.length;ru>fi;++fi)Qt=Wt[fi],Qt.nodeName==="TEMPLATE"?Qt.attributes.length>0?pi(K,Qt):pi(K,Qt.content):pi(K,Qt);Ms=t._createChild(),this._compileNode(K.content,Ms),di[Bt]={name:jn(),type:Qi,template:K,instructions:Ms.rows,needsCompile:!1}}Ie.projections=di}if(w&&(o&&(y||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),k=!o||!r.containerless&&!y&&ct!==!1,k)if(e.nodeName===Ga)this._compileNode(e.content,Ot);else for(qe=e.firstChild;qe!==null;)qe=this._compileNode(qe,Ot);for(Pe.def={name:jn(),type:Qi,template:co,instructions:Ot.rows,needsCompile:!1};_-- >0;)Pe=Ne[_],K=t.t(),Mn=t._marker(),Nu(K,[Mn,t._comment(Wa),t._comment(Qa)]),Pe.def={name:jn(),type:Qi,template:K,needsCompile:!1,instructions:[[Ne[_+1]]]};t.rows.push([Pe])}else{g!=null&&t.rows.push(g);let K=e.firstChild,co,Ot,Bn=!1,Bt=null,ui,di,Mt,Wt,Qt,Mn=!1,Ms=0,fi=0;if(ct!==!1)for(;K!==null;){if(Ot=Du(K)?K.getAttribute(Dn):null,Bn=Ot!==null||o&&!a,co=K.nextSibling,Bn){if(!o)throw ye(706,Ot,n);(lo=K.removeAttribute)==null||lo.call(K,Dn),Mn=ju(K)&&K.textContent.trim()==="",Mn||((Vi=ui??(ui={}))[On=Ot||Fu]??(Vi[On]=[])).push(K),e.removeChild(K)}K=co}if(ui!=null){Bt={};for(Ot in ui){for(Wt=t.t(),di=ui[Ot],Ms=0,fi=di.length;fi>Ms;++Ms)Mt=di[Ms],Mt.nodeName===Ga?Mt.attributes.length>0?pi(Wt,Mt):pi(Wt,Mt.content):pi(Wt,Mt);Qt=t._createChild(),this._compileNode(Wt.content,Qt),Bt[Ot]={name:jn(),type:Qi,template:Wt,instructions:Qt.rows,needsCompile:!1}}Ie.projections=Bt}if(w&&(o&&(y||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),k=!o||!r.containerless&&!y&&ct!==!1,k&&e.childNodes.length>0)for(K=e.firstChild;K!==null;)K=this._compileNode(K,t)}return s}_compileText(e,t){const s=e.parentNode,n=t._exprParser.parse(e.textContent,Nt),r=e.nextSibling;let o,a,l,c,u;if(n!==null){for({parts:o,expressions:a}=n,(u=o[0])&&Ka(s,t._text(u),e),l=0,c=a.length;c>l;++l)Lu(s,e,[t._marker(),t._text(" ")]),(u=o[l+1])&&Ka(s,t._text(u),e),t.rows.push([new t0(a[l])]);s.removeChild(e)}return r}_compileMultiBindings(e,t,s,n){const r=n._getBindables(s),o=t.length,a=[];let l,c,u=0,h=0,f,d,g,p;for(let _=0;_<o;++_)if(h=t.charCodeAt(_),h===92)++_;else if(h===58){for(l=t.slice(u,_);t.charCodeAt(++_)<=32;);for(u=_;_<o;++_)if(h=t.charCodeAt(_),h===92)++_;else if(h===59){c=t.slice(u,_);break}if(c===void 0&&(c=t.slice(u)),d=n._attrParser.parse(l,c),g=n._getCommand(d),p=r.attrs[d.target],p==null)throw ye(707,d.target,s.name);for(g===null?(f=n._exprParser.parse(c,Nt),a.push(f===null?new Ui(c,p.name):new _s(f,p.name))):(L.node=e,L.attr=d,L.bindable=p,L.def=s,a.push(g.build(L,n._exprParser,n._attrMapper)));_<o&&t.charCodeAt(++_)<=32;);u=_,l=void 0,c=void 0}return uo(),a}_compileLocalElement(e,t){const s=t.root.def.name,n=e,r=Da(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(o===0)return;if(o===n.childElementCount)throw ye(708,s);const a=new Set,l=[];for(const u of r){if(u.parentNode!==n)throw ye(709,s);const h=c0(s,u,a),f=u.content,d=Da(f.querySelectorAll("bindable")),g=new Set,p=new Set,_=d.reduce((v,S)=>{if(S.parentNode!==f)throw ye(710,h);const m=S.getAttribute("name");if(m===null)throw ye(711,S,h);const C=S.getAttribute("attribute");if(C!==null&&p.has(C)||g.has(m))throw ye(712,g,C);C!==null&&p.add(C),g.add(m);const O=Da(S.attributes).filter(E=>!zu.includes(E.name));return O.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${O.map(E=>E.name).join(", ")} will be ignored for ${S.outerHTML}. Only ${zu.join(", ")} are processed.`),S.remove(),v[m]={name:m,attribute:C??void 0,mode:S.getAttribute("mode")??"default"},v},{});class b{}b.$au={type:Qi,name:h,template:u,bindables:_},Reflect.defineProperty(b,"name",{value:ff(h)}),l.push(b),n.removeChild(u)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?q:[t.root.def.Type]);for(const u of l)u.dependencies=c.concat(l.filter(h=>h!==u)),t._addLocalDep(u)}_shouldReorderAttrs(e,t){const s=e.nodeName;return s==="INPUT"&&a0[e.type]===1||s==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(n=>n.type===jc&&n.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const s=t;let n,r,o=0,a;for(let l=0;l<s.length&&o<3;l++)switch(a=s[l],a.to){case"model":case"value":case"matcher":n=l,o++;break;case"checked":r=l,o++;break}r!==void 0&&n!==void 0&&r<n&&([s[n],s[r]]=[s[r],s[n]]);break}case"SELECT":{const s=t;let n=0,r=0,o=0,a;for(let l=0;l<s.length&&o<2;++l){switch(a=s[l],a.to){case"multiple":r=l,o++;break;case"value":n=l,o++;break}o===2&&n<r&&([s[r],s[n]]=[s[n],s[r]])}}}}_markAsTarget(e,t){return Ka(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(Vu(e))return e;const s=e.parentNode,n=t._marker();return Lu(s,e,[n,t._comment(Wa),t._comment(Qa)]),s.removeChild(e),n}}Ip.register=zr(pa);const Ga="TEMPLATE",Vu=i=>i.nodeValue==="au*";class Do{constructor(e,t,s,n,r){var a;this.hasSlot=!1,this.deps=null;const o=s!==null;if(this.c=t,this.root=n===null?this:n,this.def=e,this.parent=s,this._resourceResolver=o?s._resourceResolver:t.get(Ep),this._commandResolver=o?s._commandResolver:t.get(l0),this._templateFactory=o?s._templateFactory:t.get(i0),this._attrParser=o?s._attrParser:t.get(Dc),this._exprParser=o?s._exprParser:t.get(An),this._attrMapper=o?s._attrMapper:t.get(Uf),this._logger=o?s._logger:t.get(Le),typeof((a=(this.p=o?s.p:t.get(xn)).document)==null?void 0:a.nodeType)!="number")throw ye(722);this.localEls=o?s.localEls:new Set,this.rows=r??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new Do(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const Xa=i=>{const e=i.length;let t=0,s=0;for(;e>s;){if(t=i.charCodeAt(s),t===92)++s;else{if(t===58)return!0;if(t===36&&i.charCodeAt(s+1)===123)return!1}++s}return!1},uo=()=>{L.node=L.attr=L.bindable=L.def=null},r0={name:"unnamed",type:Qi},L={node:null,attr:null,bindable:null,def:null},o0={id:!0,name:!0,"au-slot":!0,"as-element":!0},a0={checkbox:1,radio:1},Ep=us("IResourceResolver"),l0=us("IBindingCommandResolver",i=>{class e{constructor(){this._cache=new WeakMap}get(s,n){let r=this._cache.get(s);return r||this._cache.set(s,r={}),n in r?r[n]:r[n]=s0.get(s,n)}}return i.singleton(e)}),zu=Pn(["name","attribute","mode"]),zl="as-custom-element",c0=(i,e,t)=>{const s=e.getAttribute(zl);if(s===null||s==="")throw ye(715,i);if(t.has(s))throw ye(716,s,i);return t.add(s),e.removeAttribute(zl),s},Hu=us("ITemplateCompilerHooks"),h0=Pn({name:si("compiler-hooks"),define(i){return{register(e){Mc(Hu,i).register(e)}}},findAll(i){return i.get(Jv(Hu))}}),u0=Object.prototype.hasOwnProperty,Js=Reflect.defineProperty;function ns(i,e,t){return Js(i,e,{configurable:!0,writable:!0,value:t}),t}function Cs(i,e,t){e in i||ns(i,e,t)}const Tp=Object.assign,Vc=Object.freeze,fn=String,ga=at.createInterface,d0=It.get,f0=It.define,U=(i,...e)=>new Error(`AUR${fn(i).padStart(4,"0")}: ${g0(i,...e)}`),p0={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},g0=(i,...e)=>{var s;let t=p0[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=fn(l[a.slice(1)]):l=fn(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};class Oe{constructor(e,t,s,n){this.parent=e,this.bindingContext=t,this.overrideContext=s,this.isBoundary=n}static getContext(e,t,s){if(e==null)throw U(203);let n=e.overrideContext,r=e;if(s>0){for(;s>0;)if(s--,r=r.parent,r==null)return;return n=r.overrideContext,t in n?n:r.bindingContext}for(;r!=null&&!r.isBoundary&&!(t in r.overrideContext)&&!(t in r.bindingContext);)r=r.parent;return r==null?e.bindingContext:(n=r.overrideContext,t in n?n:r.bindingContext)}static create(e,t,s){if(e==null)throw U(204);return new Oe(null,e,t??new qu,s??!1)}static fromParent(e,t,s=new qu){if(e==null)throw U(203);return new Oe(e,t,s,!1)}}class Uu{constructor(e,t){e!==void 0&&(this[e]=t)}}class qu{}const{astAssign:Sr,astEvaluate:ve,astBind:ni,astUnbind:ri}=(()=>{const i="AccessThis",e="AccessBoundary",t="AccessGlobal",s="AccessScope",n="ArrayLiteral",r="ObjectLiteral",o="PrimitiveLiteral",l="Template",c="Unary",u="CallScope",h="CallMember",f="CallFunction",d="CallGlobal",g="AccessMember",p="AccessKeyed",_="TaggedTemplate",b="Binary",v="Conditional",S="Assign",m="ArrowFunction",C="ValueConverter",O="BindingBehavior",E="ArrayBindingPattern",N="ObjectBindingPattern",D="BindingIdentifier",F="ForOfStatement",pe="Interpolation",Ne="ArrayDestructuring",Pe="ObjectDestructuring",we="DestructuringAssignmentLeaf",Ie="Custom",G=Oe.getContext;function R(y,$,w,P){var H;switch(y.$kind){case i:{let k=$.overrideContext,A=$,te=y.ancestor;for(;te--&&k;)A=A.parent,k=(A==null?void 0:A.overrideContext)??null;return te<1&&A?A.bindingContext:void 0}case e:{let k=$;for(;k!=null&&!k.isBoundary;)k=k.parent;return k?k.bindingContext:void 0}case s:{const k=G($,y.name,y.ancestor);P!==null&&P.observe(k,y.name);const A=k[y.name];if(A==null){if(y.name==="$host")throw U(105);return A}return w!=null&&w.boundFn&&Z(A)?A.bind(k):A}case t:return globalThis[y.name];case d:{const k=globalThis[y.name];if(Z(k))return k(...y.args.map(A=>R(A,$,w,P)));if(!(w!=null&&w.strict)&&k==null)return;throw U(107)}case n:return y.elements.map(k=>R(k,$,w,P));case r:{const k={};for(let A=0;A<y.keys.length;++A)k[y.keys[A]]=R(y.values[A],$,w,P);return k}case o:return y.value;case"New":{const k=R(y.func,$,w,P);if(Z(k))return new k(...y.args.map(A=>R(A,$,w,P)));throw U(107)}case l:{let k=y.cooked[0];for(let A=0;A<y.expressions.length;++A)k+=fn(R(y.expressions[A],$,w,P)),k+=y.cooked[A+1];return k}case c:{const k=R(y.expression,$,w,P);switch(y.operation){case"void":return;case"typeof":return typeof k;case"!":return!k;case"-":return-k;case"+":return+k;case"--":if(P!=null)throw U(113);return ue(y.expression,$,w,P,k-1)+y.pos;case"++":if(P!=null)throw U(113);return ue(y.expression,$,w,P,k+1)-y.pos;default:throw U(109,y.operation)}}case u:{const k=G($,y.name,y.ancestor);if(k==null){if(w!=null&&w.strict)throw U(114,y.name,k);return}const A=k[y.name];if(Z(A))return A.apply(k,y.args.map(te=>R(te,$,w,P)));if(A==null){if(w!=null&&w.strict&&!y.optional)throw U(111,y.name);return}throw U(111,y.name)}case h:{const k=R(y.object,$,w,P);if(k==null&&w!=null&&w.strict&&!y.optionalMember)throw U(114,y.name,k);const A=k==null?void 0:k[y.name];if(A==null){if(!y.optionalCall&&(w!=null&&w.strict))throw U(111,y.name);return}if(!Z(A))throw U(111,y.name);const te=A.apply(k,y.args.map(ht=>R(ht,$,w,P)));return _e(k)&&ct.includes(y.name)&&(P==null||P.observeCollection(k)),te}case f:{const k=R(y.func,$,w,P);if(Z(k))return k(...y.args.map(A=>R(A,$,w,P)));if(k==null){if(!y.optional&&(w!=null&&w.strict))throw U(107);return}throw U(107)}case m:return(...A)=>{const te=y.args,ht=y.rest,et=te.length-1,qt=te.reduce((Vi,On,K)=>(ht&&K===et?Vi[On.name]=A.slice(K):Vi[On.name]=A[K],Vi),{}),lo=Oe.fromParent($,qt);return R(y.body,lo,w,P)};case g:{const k=R(y.object,$,w,P);if(k==null){if(!y.optional&&(w!=null&&w.strict))throw U(114,y.name,k);return}P!==null&&!y.accessGlobal&&P.observe(k,y.name);const A=k[y.name];return w!=null&&w.boundFn&&Z(A)?A.bind(k):A}case p:{const k=R(y.object,$,w,P),A=R(y.key,$,w,P);if(k==null){if(!y.optional&&(w!=null&&w.strict))throw U(115,A,k);return}return P!==null&&!y.accessGlobal&&P.observe(k,A),k[A]}case _:{const k=y.expressions.map(te=>R(te,$,w,P)),A=R(y.func,$,w,P);if(!Z(A))throw U(110);return A(y.cooked,...k)}case b:{const k=y.left,A=y.right;switch(y.operation){case"&&":return R(k,$,w,P)&&R(A,$,w,P);case"||":return R(k,$,w,P)||R(A,$,w,P);case"??":return R(k,$,w,P)??R(A,$,w,P);case"==":return R(k,$,w,P)==R(A,$,w,P);case"===":return R(k,$,w,P)===R(A,$,w,P);case"!=":return R(k,$,w,P)!=R(A,$,w,P);case"!==":return R(k,$,w,P)!==R(A,$,w,P);case"instanceof":{const te=R(A,$,w,P);return Z(te)?R(k,$,w,P)instanceof te:!1}case"in":{const te=R(A,$,w,P);return Ii(te)?R(k,$,w,P)in te:!1}case"+":return R(k,$,w,P)+R(A,$,w,P);case"-":return R(k,$,w,P)-R(A,$,w,P);case"*":return R(k,$,w,P)*R(A,$,w,P);case"/":return R(k,$,w,P)/R(A,$,w,P);case"%":return R(k,$,w,P)%R(A,$,w,P);case"**":return R(k,$,w,P)**R(A,$,w,P);case"<":return R(k,$,w,P)<R(A,$,w,P);case">":return R(k,$,w,P)>R(A,$,w,P);case"<=":return R(k,$,w,P)<=R(A,$,w,P);case">=":return R(k,$,w,P)>=R(A,$,w,P);default:throw U(108,y.operation)}}case v:return R(y.condition,$,w,P)?R(y.yes,$,w,P):R(y.no,$,w,P);case S:{let k=R(y.value,$,w,P);if(y.op!=="="){if(P!=null)throw U(113);const A=R(y.target,$,w,P);switch(y.op){case"/=":k=A/k;break;case"*=":k=A*k;break;case"+=":k=A+k;break;case"-=":k=A-k;break;default:throw U(108,y.op)}}return ue(y.target,$,w,P,k)}case C:return(H=w==null?void 0:w.useConverter)==null?void 0:H.call(w,y.name,"toView",R(y.expression,$,w,P),y.args.map(k=>R(k,$,w,P)));case O:return R(y.expression,$,w,P);case D:return y.name;case F:return R(y.iterable,$,w,P);case pe:if(y.isMulti){let k=y.parts[0],A=0;for(;A<y.expressions.length;++A)k+=fn(R(y.expressions[A],$,w,P)),k+=y.parts[A+1];return k}else return`${y.parts[0]}${R(y.firstExpression,$,w,P)}${y.parts[1]}`;case we:return R(y.target,$,w,P);case Ne:return y.list.map(k=>R(k,$,w,P));case E:case N:case Pe:default:return;case Ie:return y.evaluate($,w,P)}}function ue(y,$,w,P,H){var k;switch(y.$kind){case s:{if(y.name==="$host")throw U(106);const A=G($,y.name,y.ancestor);return A[y.name]=H}case g:{const A=R(y.object,$,w,P);if(A==null){if(w!=null&&w.strict)throw U(116,y.name);ue(y.object,$,w,P,{[y.name]:H})}else Ii(A)&&(y.name==="length"&&_e(A)&&!isNaN(H)?A.splice(H):A[y.name]=H);return H}case p:{const A=R(y.object,$,w,P),te=R(y.key,$,w,P);if(A==null){if(w!=null&&w.strict)throw U(116,te);return ue(y.object,$,w,P,{[te]:H}),H}if(_e(A)){if(te==="length"&&!isNaN(H))return A.splice(H),H;if(un(te))return A.splice(te,1,H),H}return A[te]=H}case S:return ue(y.value,$,w,P,H),ue(y.target,$,w,P,H);case C:return H=(k=w==null?void 0:w.useConverter)==null?void 0:k.call(w,y.name,"fromView",H,y.args.map(A=>R(A,$,w,P))),ue(y.expression,$,w,P,H);case O:return ue(y.expression,$,w,P,H);case Ne:case Pe:{const A=y.list,te=A.length;let ht,et;for(ht=0;ht<te;ht++)switch(et=A[ht],et.$kind){case we:ue(et,$,w,P,H);break;case Ne:case Pe:{if(typeof H!="object"||H===null)throw U(112);let qt=R(et.source,Oe.create(H),w,null);qt===void 0&&et.initializer&&(qt=R(et.initializer,$,w,null)),ue(et,$,w,P,qt);break}}break}case we:{if(y instanceof Of){if(H==null)return;if(typeof H!="object")throw U(112);let A=R(y.source,Oe.create(H),w,P);A===void 0&&y.initializer&&(A=R(y.initializer,$,w,P)),ue(y.target,$,w,P,A)}else{if(H==null)return;if(typeof H!="object")throw U(112);const A=y.indexOrProperties;let te;if(un(A)){if(!Array.isArray(H))throw U(112);te=H.slice(A)}else te=Object.entries(H).reduce((ht,[et,qt])=>(A.includes(et)||(ht[et]=qt),ht),{});ue(y.target,$,w,P,te)}break}case Ie:return y.assign($,w,H);default:return}}function j(y,$,w){var P,H,k;switch(y.$kind){case O:{(P=w.bindBehavior)==null||P.call(w,y.name,$,y.args.map(A=>R(A,$,w,null))),j(y.expression,$,w);break}case C:{(H=w.bindConverter)==null||H.call(w,y.name),j(y.expression,$,w);break}case F:{j(y.iterable,$,w);break}case Ie:(k=y.bind)==null||k.call(y,$,w)}}function ae(y,$,w){var P,H,k;switch(y.$kind){case O:{(P=w.unbindBehavior)==null||P.call(w,y.name,$),ae(y.expression,$,w);break}case C:{(H=w.unbindConverter)==null||H.call(w,y.name),ae(y.expression,$,w);break}case F:{ae(y.iterable,$,w);break}case Ie:(k=y.unbind)==null||k.call(y,$,w)}}const ct="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:R,astAssign:ue,astBind:j,astUnbind:ae}})(),_0=i=>{const e=i.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{ns(e,t,()=>{throw U(99,t)})})},Ja="pending",m0="running",Wu="completed",Un="canceled",Rp=Promise.resolve();let Ya=!1,Hl=!1;const ut=[];let Ks=0,Hs=null,Gs=[],jo=null,Us=null;const Fo=()=>{Ya||(Ya=!0,Rp.then(()=>{Ya=!1,Hl=!0,v0()}))},dr=i=>{if(Hs&&ut.length===0&&Ks===0)if(Hs=null,Gs.length>0){const e=Gs;Gs=[],e.length===1?Us(e[0]):Us(new AggregateError(e,"One or more tasks failed."))}else jo(i)},v0=()=>{const i=!Hl;Hl=!1,Hs??(Hs=new Promise((n,r)=>{jo=n,Us=r}));let e=-ut.length;const t=ut.length===0;for(;ut.length>0;){if(++e>1e4){const r=new Error("Potential deadlock detected. More than 10000 extra tasks were queued from within tasks.");throw ut.length=0,Us==null||Us(r),Hs=null,r}const n=ut.shift();if(typeof n=="function")try{n()}catch(r){Gs.push(r)}else n.run()}const s=Gs.slice();if(dr(!t),i&&s.length>0)throw s.length===1?s[0]:new AggregateError(s,"One or more tasks failed.")},b0=()=>Hs||(ut.length>0||Ks>0?Hs??(Hs=new Promise((i,e)=>{jo=i,Us=e})):Rp.then(()=>ut.length>0||Ks>0?Hs??(Hs=new Promise((i,e)=>{jo=i,Us=e})):!1)),rs=i=>{Fo(),ut.push(i)},fr=(i,e)=>{const t=new Op(i,e==null?void 0:e.delay);return t.delay!=null&&t.delay>0?(++Ks,t._timerId=setTimeout(()=>{if(--Ks,t._timerId=void 0,t.status===Un){dr(!0);return}ut.push(t),Fo()},t.delay)):(ut.push(t),Fo()),t};let Qu=class extends Error{constructor(e){super(`Task ${e.id} was canceled.`),this.task=e}},Op=class Bp{get result(){return this._result}get status(){return this._status}constructor(e,t){this.callback=e,this.delay=t,this.id=++Bp._taskId,this._status=Ja,this._result=new Promise((s,n)=>{this._resolve=s,this._reject=n})}run(){if(this._status!==Ja)throw new Error(`Cannot run task in ${this._status} state`);this._status=m0;let e;try{e=this.callback()}catch(t){this._status=Un,this._reject(t),Gs.push(t);return}e instanceof Promise?(++Ks,e.then(t=>{this._status=Wu,this._resolve(t)}).catch(t=>{this._status=Un,this._reject(t),Gs.push(t)}).finally(()=>{--Ks,dr(!0)})):(this._status=Wu,this._resolve(e))}cancel(){if(this._timerId!==void 0){clearTimeout(this._timerId),--Ks,this._timerId=void 0,this._status=Un;const e=new Qu(this);return this._reject(e),this._result.catch(dt),dr(!0),!0}if(this._status===Ja){const e=ut.indexOf(this);if(e>-1){ut.splice(e,1),this._status=Un;const t=new Qu(this);return this._reject(t),this._result.catch(dt),dr(!0),!0}}return!1}};Op._taskId=0;const w0=(i,e)=>{const t=new _a(i,Math.max(e==null?void 0:e.interval,0));return t._start(),t};class _a{constructor(e,t){this._callback=e,this._interval=t,this.id=++_a._nextId,this._canceled=!1,this._nextResolvers=[]}run(){try{this._callback()}catch(e){Gs.push(e);return}}_start(){this._canceled||(this._timerId=setTimeout(()=>{this._tick(),this._canceled||this._start()},this._interval))}_tick(){ut.push(this),Fo();const e=this._nextResolvers.splice(0);for(const t of e)t()}next(){return this._canceled?Promise.resolve():new Promise(e=>this._nextResolvers.push(e))}cancel(){this._canceled=!0,this._timerId!==void 0&&(clearTimeout(this._timerId),this._timerId=void 0);const e=this._nextResolvers.splice(0);for(const t of e)t()}}_a._nextId=0;const Mp=at.createInterface("ICoercionConfiguration"),ma=0,oi=1,y0=2,C0=4,zc=Vc({None:ma,Observer:oi,Node:y0,Layout:C0});function Ri(i=0){const e=Array(i);let t=0;for(;t<i;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let k0=!1;const Ht=(()=>{function i(a,l){return a==null?r:r(a)}function e(){return ns(this,"subs",new o)}function t(a){return this.subs.add(a)}function s(a){return this.subs.remove(a)}const n=new WeakSet;function r(a,l){if(!n.has(a)){n.add(a);const c=a.prototype;Js(c,"subs",{get:e}),Cs(c,"subscribe",t),Cs(c,"unsubscribe",s)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const u of this._subs.slice(0))u.handleChange(l,c)}notifyCollection(l,c){const u=this._subs.slice(0),h=u.length;let f=0;for(;f<h;++f)u[f].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return i})();class Lp{constructor(e){this.owner=e,this.type=oi,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.length;(this._value=n)!==s&&(this.subs.notifyDirty(),this.subs.notify(this._value,s))}}Np(Lp);class Hc{constructor(e){this.owner=e,this.type=oi,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw U(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.size;(this._value=n)!==s&&this.subs.notify(this._value,s)}}Np(Hc);function Np(i){const e=i.prototype;return Cs(e,"subscribe",$0),Cs(e,"unsubscribe",S0),Ht(i,null)}function $0(i){this.subs.add(i)&&this.subs.count===1&&this.owner.subscribe(this)}function S0(i){this.subs.remove(i)&&this.subs.count===0&&this.owner.subscribe(this)}const pr=(()=>{const i=Symbol.for("__au_arr_obs__"),e=Array[i]??ns(Array,i,new WeakMap);function t(p,_){return p===_?0:(p=p===null?"null":p.toString(),_=_===null?"null":_.toString(),p<_?-1:1)}function s(p,_){return p===void 0?_===void 0?0:1:_===void 0?-1:0}function n(p,_,b,v,S){let m,C,O,E,N,D,F;for(D=b+1;D<v;D++){for(m=p[D],C=_[D],F=D-1;F>=b&&(O=p[F],E=_[F],N=S(O,m),N>0);F--)p[F+1]=O,_[F+1]=E;p[F+1]=m,_[F+1]=C}}function r(p,_,b,v,S){let m=0,C=0,O,E,N,D,F,pe,Ne,Pe,we,Ie,G,R,ue,j,ae,ct,y,$,w;for(;;){if(v-b<=10){n(p,_,b,v,S);return}m=b+(v-b>>1),O=p[b],D=_[b],E=p[v-1],F=_[v-1],N=p[m],pe=_[m],Ne=S(O,E),Ne>0&&(Ie=O,G=D,O=E,D=F,E=Ie,F=G),Pe=S(O,N),Pe>=0?(Ie=O,G=D,O=N,D=pe,N=E,pe=F,E=Ie,F=G):(we=S(E,N),we>0&&(Ie=E,G=F,E=N,F=pe,N=Ie,pe=G)),p[b]=O,_[b]=D,p[v-1]=N,_[v-1]=pe,R=E,ue=F,j=b+1,ae=v-1,p[m]=p[j],_[m]=_[j],p[j]=R,_[j]=ue;e:for(C=j+1;C<ae;C++)if(ct=p[C],y=_[C],$=S(ct,R),$<0)p[C]=p[j],_[C]=_[j],p[j]=ct,_[j]=y,j++;else if($>0){do{if(ae--,ae==C)break e;w=p[ae],$=S(w,R)}while($>0);p[C]=p[ae],_[C]=_[ae],p[ae]=ct,_[ae]=y,$<0&&(ct=p[C],y=_[C],p[C]=p[j],_[C]=_[j],p[j]=ct,_[j]=y,j++)}v-ae<j-b?(r(p,_,ae,v,S),v=j):(r(p,_,b,j,S),b=ae)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const p=o.push,_=o.unshift,b=o.pop,v=o.shift,S=o.splice,m=o.reverse,C=o.sort;l={push:function(...O){const E=e.get(this);if(E===void 0)return p.apply(this,O);const N=this.length,D=O.length;if(D===0)return N;this.length=E.indexMap.length=N+D;let F=N;for(;F<this.length;)this[F]=O[F-N],E.indexMap[F]=-2,F++;return E.notify(),this.length},unshift:function(...O){const E=e.get(this);if(E===void 0)return _.apply(this,O);const N=O.length,D=new Array(N);let F=0;for(;F<N;)D[F++]=-2;_.apply(E.indexMap,D);const pe=_.apply(this,O);return E.notify(),pe},pop:function(){const O=e.get(this);if(O===void 0)return b.call(this);const E=O.indexMap,N=b.call(this),D=E.length-1;return E[D]>-1&&(E.deletedIndices.push(E[D]),E.deletedItems.push(N)),b.call(E),O.notify(),N},shift:function(){const O=e.get(this);if(O===void 0)return v.call(this);const E=O.indexMap,N=v.call(this);return E[0]>-1&&(E.deletedIndices.push(E[0]),E.deletedItems.push(N)),v.call(E),O.notify(),N},splice:function(...O){const E=O[0],N=O[1],D=e.get(this);if(D===void 0)return S.apply(this,O);const F=this.length,pe=E|0,Ne=pe<0?Math.max(F+pe,0):Math.min(pe,F),Pe=D.indexMap,we=O.length,Ie=we===0?0:we===1?F-Ne:N;let G=Ne;if(Ie>0){const ue=G+Ie;for(;G<ue;)Pe[G]>-1&&(Pe.deletedIndices.push(Pe[G]),Pe.deletedItems.push(this[G])),G++}if(G=0,we>2){const ue=we-2,j=new Array(ue);for(;G<ue;)j[G++]=-2;S.call(Pe,E,N,...j)}else S.apply(Pe,O);const R=S.apply(this,O);return(Ie>0||G>0)&&D.notify(),R},reverse:function(){const O=e.get(this);if(O===void 0)return m.call(this),this;const E=this.length,N=E/2|0;let D=0;for(;D!==N;){const F=E-D-1,pe=this[D],Ne=O.indexMap[D],Pe=this[F],we=O.indexMap[F];this[D]=Pe,O.indexMap[D]=we,this[F]=pe,O.indexMap[F]=Ne,D++}return O.notify(),this},sort:function(O){const E=e.get(this);if(E===void 0)return C.call(this,O),this;let N=this.length;if(N<2)return this;r(this,E.indexMap,0,N,s);let D=0;for(;D<N&&this[D]!==void 0;)D++;(O===void 0||!Z(O))&&(O=t),r(this,E.indexMap,0,D,O);let F=!1;for(D=0,N=E.indexMap.length;N>D;++D)if(E.indexMap[D]!==D){F=!0;break}return(F||k0)&&E.notify(),this}};for(const O of a)Js(l[O],"observing",{value:!0})}let u=!1;const h="__au_arr_on__";function f(){if(l===void 0&&c(),!(d0(h,Array)??!1)){f0(!0,Array,h);for(const p of a)o[p].observing!==!0&&ns(o,p,l[p])}}class d{constructor(_){this.type=oi,u||(u=!0,f()),this.indexObservers={},this.collection=_,this.indexMap=Ri(_.length),this.lenObs=void 0,e.set(_,this)}notify(){const _=this.subs;_.notifyDirty();const b=this.indexMap,v=this.collection,S=v.length;this.indexMap=Ri(S),_.notifyCollection(v,b)}getLengthObserver(){return this.lenObs??(this.lenObs=new Lp(this))}getIndexObserver(_){var b;return(b=this.indexObservers)[_]??(b[_]=new g(this,_))}}Ht(d,null);class g{constructor(_,b){this.owner=_,this.index=b,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(_){if(_===this.getValue())return;const b=this.owner,v=this.index,S=b.indexMap;S[v]>-1&&S.deletedIndices.push(S[v]),S[v]=-2,b.collection[v]=_,b.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(_,b){const v=this.index;if(b[v]===v)return;const m=this.value,C=this.value=this.getValue();m!==C&&this.subs.notify(C,m)}subscribe(_){this.subs.add(_)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(_){this.subs.remove(_)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return Ht(g,null),function(_){let b=e.get(_);return b===void 0&&(e.set(_,b=new d(_)),f()),b}})(),Vo=(()=>{const i=Symbol.for("__au_set_obs__"),e=Set[i]??ns(Set,i,new WeakMap),{add:t,clear:s,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(c){const u=e.get(this);if(u===void 0)return t.call(this,c),this;const h=this.size;return t.call(this,c),this.size===h?this:(u.indexMap[h]=-2,u.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return s.call(this);if(this.size>0){const h=c.indexMap;let f=0;for(const d of this.keys())h[f]>-1&&(h.deletedIndices.push(h[f]),h.deletedItems.push(d)),f++;s.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return n.call(this,c);if(this.size===0)return!1;let f=0;const d=u.indexMap;for(const g of this.keys()){if(g===c){d[f]>-1&&(d.deletedIndices.push(d[f]),d.deletedItems.push(g)),d.splice(f,1);const p=n.call(this,c);return p===!0&&u.notify(),p}f++}return!1}};function a(c){for(const u of r)ns(c,u,o[u])}class l{constructor(u){this.type=oi,this.collection=u,this.indexMap=Ri(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,f=this.collection,d=f.size;this.indexMap=Ri(d),u.notifyCollection(f,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new Hc(this))}}return Ht(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),zo=(()=>{const i=Symbol.for("__au_map_obs__"),e=Map[i]??ns(Map,i,new WeakMap),{set:t,clear:s,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(c,u){const h=e.get(this);if(h===void 0)return t.call(this,c,u),this;const f=this.get(c),d=this.size;if(t.call(this,c,u),this.size===d){let p=0;for(const _ of this.entries()){if(_[0]===c)return _[1]!==f&&(h.indexMap.deletedIndices.push(h.indexMap[p]),h.indexMap.deletedItems.push(_),h.indexMap[p]=-2,h.notify()),this;p++}return this}return h.indexMap[d]=-2,h.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return s.call(this);if(this.size>0){const h=c.indexMap;let f=0;for(const d of this.keys())h[f]>-1&&(h.deletedIndices.push(h[f]),h.deletedItems.push(d)),f++;s.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return n.call(this,c);if(this.size===0)return!1;let f=0;const d=u.indexMap;for(const g of this.keys()){if(g===c){d[f]>-1&&(d.deletedIndices.push(d[f]),d.deletedItems.push(g)),d.splice(f,1);const p=n.call(this,c);return p===!0&&u.notify(),p}++f}return!1}};function a(c){for(const u of r)ns(c,u,o[u])}class l{constructor(u){this.type=oi,this.collection=u,this.indexMap=Ri(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,f=this.collection,d=f.size;this.indexMap=Ri(d),u.notifyCollection(f,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new Hc(this))}}return Ht(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),Ku=(()=>{class i{constructor(u){this.version=0,this.count=0,this.o=new Map,this.b=u}add(u){this.o.has(u)||(u.subscribe(this.b),++this.count),this.o.set(u,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,u){u.unsubscribe(this.b)}function t(c,u){this.version!==c&&(u.unsubscribe(this.b),this.o.delete(u))}function s(){return ns(this,"obs",new i(this))}function n(c,u){this.obs.add(this.oL.getObserver(c,u))}function r(c){let u;if(_e(c))u=pr(c);else if($n(c))u=Vo(c);else if(Ws(c))u=zo(c);else throw U(210,c);this.obs.add(u)}function o(c){this.obs.add(c)}function a(){throw U(99,"handleChange")}function l(){throw U(99,"handleCollectionChange")}return function(u,h){const f=u.prototype;return Cs(f,"observe",n),Cs(f,"observeCollection",r),Cs(f,"subscribeTo",o),Js(f,"obs",{get:s}),Cs(f,"handleChange",a),Cs(f,"handleCollectionChange",l),u}})();function Rt(i,e){return i==null?Ku:Ku(i,e)}let ee=null;const Yi=[];let Is=!1;function x0(){Is=!1}function A0(){Is=!0}function Uc(){return ee}function qc(i){if(i==null)throw U(206);if(ee==null){ee=i,Yi[0]=ee,Is=!0;return}if(ee===i)throw U(207);Yi.push(i),ee=i,Is=!0}function Wc(i){if(i==null)throw U(208);if(ee!==i)throw U(209);Yi.pop(),ee=Yi.length>0?Yi[Yi.length-1]:null,Is=ee!=null}const P0=Vc({get current(){return ee},get connecting(){return Is},enter:qc,exit:Wc,pause:x0,resume:A0}),pn=Reflect.get,I0=Object.prototype.toString,Ul=new WeakMap,E0="__au_nw__",T0="__au_nw";function Dp(i){switch(I0.call(i)){case"[object Object]":return i.constructor[E0]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const En="__raw__";function Y(i){return Dp(i)?va(i):i}function va(i){return Ul.get(i)??R0(i)}function ne(i){return i[En]??i}function rt(i){return Dp(i)&&i[En]||i}function Qc(i,e){if(e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||i.constructor[`${T0}_${fn(e)}__`]===!0)return!0;const t=Reflect.getOwnPropertyDescriptor(i,e);return(t==null?void 0:t.configurable)===!1&&t.writable===!1}function R0(i){const e=_e(i)?B0:Ws(i)||$n(i)?iy:O0,t=new Proxy(i,e);return Ul.set(i,t),Ul.set(t,t),t}const O0={get(i,e,t){if(e===En)return i;const s=Uc();return!Is||Qc(i,e)||s==null?pn(i,e,t):(s.observe(i,e),Y(pn(i,e,t)))},deleteProperty(i,e){return console.warn("[DEV:aurelia] deletion of a property will not always be working with Aurelia observation system, as it depends on getter/setter installation."),delete i[e]}},B0={get(i,e,t){if(e===En)return i;if(!Is||Qc(i,e)||ee==null)return pn(i,e,t);switch(e){case"length":return ee.observe(i,"length"),i.length;case"map":return M0;case"includes":return D0;case"indexOf":return j0;case"lastIndexOf":return F0;case"every":return L0;case"filter":return N0;case"find":return z0;case"findIndex":return V0;case"flat":return H0;case"flatMap":return U0;case"join":return q0;case"push":return Q0;case"pop":return W0;case"reduce":return ty;case"reduceRight":return sy;case"reverse":return J0;case"shift":return K0;case"unshift":return G0;case"slice":return ey;case"splice":return X0;case"some":return Y0;case"sort":return Z0;case"keys":return jp;case"values":case Symbol.iterator:return ql;case"entries":return Wl}return ee.observe(i,e),Y(pn(i,e,t))},ownKeys(i){var e;return(e=Uc())==null||e.observe(i,"length"),Reflect.ownKeys(i)}};function M0(i,e){const t=ne(this),s=t.map((n,r)=>rt(i.call(e,Y(n),r,this)));return Ae(ee,t),Y(s)}function L0(i,e){const t=ne(this),s=t.every((n,r)=>i.call(e,Y(n),r,this));return Ae(ee,t),s}function N0(i,e){const t=ne(this),s=t.filter((n,r)=>rt(i.call(e,Y(n),r,this)));return Ae(ee,t),Y(s)}function D0(i){const e=ne(this),t=e.includes(rt(i));return Ae(ee,e),t}function j0(i){const e=ne(this),t=e.indexOf(rt(i));return Ae(ee,e),t}function F0(i){const e=ne(this),t=e.lastIndexOf(rt(i));return Ae(ee,e),t}function V0(i,e){const t=ne(this),s=t.findIndex((n,r)=>rt(i.call(e,Y(n),r,this)));return Ae(ee,t),s}function z0(i,e){const t=ne(this),s=t.find((n,r)=>i(Y(n),r,this),e);return Ae(ee,t),Y(s)}function H0(){const i=ne(this);return Ae(ee,i),Y(i.flat())}function U0(i,e){const t=ne(this);return Ae(ee,t),va(t.flatMap((s,n)=>Y(i.call(e,Y(s),n,this))))}function q0(i){const e=ne(this);return Ae(ee,e),e.join(i)}function W0(){return Y(ne(this).pop())}function Q0(...i){return ne(this).push(...i)}function K0(){return Y(ne(this).shift())}function G0(...i){return ne(this).unshift(...i)}function X0(...i){return Y(ne(this).splice(...i))}function J0(...i){return Y(ne(this).reverse())}function Y0(i,e){const t=ne(this),s=t.some((n,r)=>rt(i.call(e,Y(n),r,this)));return Ae(ee,t),s}function Z0(i){const e=ne(this),t=e.sort(i);return Ae(ee,e),Y(t)}function ey(i,e){const t=ne(this);return Ae(ee,t),va(t.slice(i,e))}function ty(i,e){const t=ne(this),s=t.reduce((n,r,o)=>i(n,Y(r),o,this),e);return Ae(ee,t),Y(s)}function sy(i,e){const t=ne(this),s=t.reduceRight((n,r,o)=>i(n,Y(r),o,this),e);return Ae(ee,t),Y(s)}const iy={get(i,e,t){if(e===En)return i;const s=Uc();if(!Is||Qc(i,e)||s==null)return pn(i,e,t);switch(e){case"size":return s.observe(i,"size"),i.size;case"clear":return cy;case"delete":return hy;case"forEach":return ny;case"add":if($n(i))return ly;break;case"get":if(Ws(i))return oy;break;case"set":if(Ws(i))return ay;break;case"has":return ry;case"keys":return jp;case"values":return ql;case"entries":return Wl;case Symbol.iterator:return Ws(i)?Wl:ql}return Y(pn(i,e,t))}};function ny(i,e){const t=ne(this);return Ae(ee,t),t.forEach((s,n)=>{i.call(e,Y(s),Y(n),this)})}function ry(i){const e=ne(this);return Ae(ee,e),e.has(rt(i))}function oy(i){const e=ne(this);return Ae(ee,e),Y(e.get(rt(i)))}function ay(i,e){return Y(ne(this).set(rt(i),rt(e)))}function ly(i){return Y(ne(this).add(rt(i)))}function cy(){return Y(ne(this).clear())}function hy(i){return Y(ne(this).delete(rt(i)))}function jp(){const i=ne(this);Ae(ee,i);const e=i.keys();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:Y(s),done:n}},[Symbol.iterator](){return this}}}function ql(){const i=ne(this);Ae(ee,i);const e=i.values();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:Y(s),done:n}},[Symbol.iterator](){return this}}}function Wl(){const i=ne(this);Ae(ee,i);const e=i.entries();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:[Y(s[0]),Y(s[1])],done:n}},[Symbol.iterator](){return this}}}const Ae=(i,e)=>i==null?void 0:i.observeCollection(e),uy=Vc({getProxy:va,getRaw:ne,wrap:Y,unwrap:rt,rawKey:En});class Ho{constructor(e,t,s,n,r="async"){this.type=oi,this._oldValue=void 0,this._value=void 0,this._notified=!1,this._isQueued=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=Y(e),this.$get=t,this.$set=s,this.oL=n,this._flush=r}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1,this._notified=!1),this._value)}setValue(e){if(Z(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),Ps(e,this._value)||(this.$set.call(this._obj,e),this.run());else throw U(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.compute(),this._isDirty=!1,this._notified=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll(),this._oldValue=void 0,this._notified=!0)}run(){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,rs(()=>{this._isQueued=!1,this._run()}))}_run(){var n;const e=this._value,t=this._oldValue,s=this.compute();this._isDirty=!1,(!this._notified||!Ps(s,e))&&((n=this._callback)==null||n.call(this,s,t),this.subs.notify(s,t),this._oldValue=this._value=s,this._notified=!0)}compute(){this.obs.version++;try{return qc(this),this._value=rt(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),Wc(this)}}}Rt(Ho,null),Ht(Ho,null);const dy=(()=>{const i=new WeakMap,e=t=>kv(t)?t:String(t);return{get:(t,s)=>{var n;return(n=i.get(t))==null?void 0:n.get(e(s))},_getFlush:(t,s)=>{var n,r;return(r=(n=i.get(t))==null?void 0:n.get(e(s)))==null?void 0:r.flush},set:(t,s,n)=>{i.has(t)||i.set(t,new Map),i.get(t).set(e(s),n)}}})(),Kc=ga("IDirtyChecker",i=>i.callback(()=>{throw U(217)})),fy={timeoutsPerCheck:25};class py{static register(e){e.register(Et.singleton(this,this),Et.aliasTo(this,Kc))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=x(xn),this.check=()=>{if(++this._elapsedFrames<fy.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked.slice(0),t=e.length;let s,n=0;for(;n<t;++n)s=e[n],s.isDirty()&&s.flush()},Ht(Gu,null)}createProperty(e,t){return new Gu(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=w0(this.check,{interval:0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class Gu{constructor(e,t,s){this.obj=t,this.key=s,this.type=ma,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw U(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class gy{get doNotCache(){return!0}constructor(e,t){this.type=ma,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class Fp{constructor(){this.type=ma}getValue(e,t){return e[t]}setValue(e,t,s){t[s]=e}}class Gc{constructor(e,t){this.type=oi,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var s,n;this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig));const t=this._value;if(this._observing){if(Ps(e,this._value))return;this._value=e,this.subs.notifyDirty(),this.subs.notify(e,t),Ps(e,this._value)&&((s=this._callback)==null||s.call(this,e,t))}else this._value=this._obj[this._key]=e,(n=this._callback)==null||n.call(this,e,t)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],Js(this._obj,this._key,{enumerable:!0,configurable:!0,get:Tp(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(Js(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}Ht(Gc,null);const Ql=new Fp,Tn=ga("IObserverLocator",i=>i.singleton(vy)),Xc=ga("INodeObserverLocator",i=>i.cachedCallback(e=>(e.getAll(Le).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new _y)));class _y{handles(){return!1}getObserver(){return Ql}getAccessor(){return Ql}}const my=ga("IComputedObserverLocator",i=>i.singleton(class{getObserver(t,s,n,r){const o=new Ho(t,n.get,n.set,r,dy._getFlush(t,s));return Js(t,s,{enumerable:n.enumerable,configurable:!0,get:Tp((()=>o.getValue()),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class vy{constructor(){this._adapters=[],this._dirtyChecker=x(Kc),this._nodeObserverLocator=x(Xc),this._computedObserverLocator=x(my)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw U(199,t);if(!uf(e))return new gy(e,Z(t)?"":t);if(Z(t))return new Ho(e,t,void 0,this);const s=Vp(e);let n=s[t];return n===void 0&&(n=this.createObserver(e,t),n.doNotCache||(s[t]=n)),n}getAccessor(e,t){var n;const s=(n=e.$observers)==null?void 0:n[t];return s!==void 0?s:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):Ql}getArrayObserver(e){return pr(e)}getMapObserver(e){return zo(e)}getSetObserver(e){return Vo(e)}createObserver(e,t){var n,r;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(_e(e))return pr(e).getLengthObserver();break;case"size":if(Ws(e))return zo(e).getLengthObserver();if($n(e))return Vo(e).getLengthObserver();break;default:if(_e(e)&&un(t))return pr(e).getIndexObserver(Number(t));break}let s=Ju(e,t);if(s===void 0){let o=Xu(e);for(;o!==null&&(s=Ju(o,t),s===void 0);)o=Xu(o)}if(s!==void 0&&!u0.call(s,"value")){let o=this._getAdapterObserver(e,t,s);return o==null&&(o=(r=(n=s.get)==null?void 0:n.getObserver)==null?void 0:r.call(n,e)),o??(s.configurable?this._computedObserverLocator.getObserver(e,t,s,this):this._dirtyChecker.createProperty(e,t))}return new Gc(e,t)}_getAdapterObserver(e,t,s){if(this._adapters.length>0)for(const n of this._adapters){const r=n.getObserver(e,t,s,this);if(r!=null)return r}return null}}const Jc=i=>{let e;return _e(i)?e=pr(i):Ws(i)?e=zo(i):$n(i)&&(e=Vo(i)),e},Xu=Object.getPrototypeOf,Ju=Object.getOwnPropertyDescriptor,Vp=i=>{let e=i.$observers;return e===void 0&&Js(i,"$observers",{value:e=ce()}),e};class by{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var s;if(this.stopped)throw U(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(s=this._cleanupTask)==null||s.call(void 0),qc(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,Wc(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,U(226);this.run()}else this.runCount=0}},this.stop=()=>{var s;(s=this._cleanupTask)==null||s.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}Rt(by,null);class Yu{constructor(e,t,s,n){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=s,this._callback=n}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=ve(this.ast,this._scope,this,this);this.obs.clear(),Ps(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}Rt(Yu,null),_0(Yu);const Fn="pending",Ao="running",Za="completed",fo="canceled",el=new Map,Zu=i=>()=>{throw Oi(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${i}'.`)};class Yc{constructor(e,t={}){var s,n;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(r=>{this[r]=r in t?t[r]:e[r]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(r=>{var o;this[r]=r in t?t[r]:((o=e[r])==null?void 0:o.bind(e))??Zu(r)}),this.performanceNow="performanceNow"in t?t.performanceNow:((n=(s=e.performance)==null?void 0:s.now)==null?void 0:n.bind(e.performance))??Zu("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new Zc(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let s=el.get(e);return s===void 0&&el.set(e,s=new Yc(e,t)),s}static set(e,t){el.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class Zc{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(tl)&&this._pending.every(tl)&&this._delayed.every(tl)}constructor(e,t,s){this.platform=e,this.$request=t,this.$cancel=s,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new Cy(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));let s;for(;this._processing.length>0;)if((s=this._processing.shift()).run(),s.status===Ao)if(s.suspend===!0){this._suspenderTask=s,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const n=this._yieldPromise;this._yieldPromise=void 0,n.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=Up()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:s,preempt:n,persistent:r,suspend:o}={...ky,...t};if(n){if(s>0)throw Sy();if(r)throw xy()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new yy(this._tracer,this,a,a+s,n,r,o,e);return n?this._processing[this._processing.length]=l:s===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Oi(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Oi(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const s=this._yieldPromise;this._yieldPromise=void 0,s.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class ed extends Error{constructor(e){super("Task was canceled."),this.task=e}}let wy=0;class yy{get result(){const e=this._result;if(e===void 0)switch(this._status){case Fn:{const t=this._result=Up();return this._resolve=t.resolve,this._reject=t.reject,t}case Ao:throw Oi("Trying to await task from within task will cause a deadlock.");case Za:return this._result=Promise.resolve();case fo:return this._result=Promise.reject(new ed(this))}return e}get status(){return this._status}constructor(e,t,s,n,r,o,a,l){this.taskQueue=t,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=l,this.id=++wy,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=Fn,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==Fn)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Oi(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:s,callback:n,_resolve:r,_reject:o,createdTime:a}=this;let l;this._status=Ao;try{l=n(e-a),l instanceof Promise?l.then(c=>{this.persistent?s._resetPersistentTask(this):(t?this._status=fo:this._status=Za,this.dispose()),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),r!==void 0&&r(c)}).catch(c=>{if(this.persistent||this.dispose(),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?s._resetPersistentTask(this):(t?this._status=fo:this._status=Za,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),r!==void 0&&r(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===Fn){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=fo,this.dispose(),t!==void 0&&t(new ed(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===Ao&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=Fn,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class Cy{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,s){if(t instanceof Zc){const n=t._processing.length,r=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${n} pending=${r} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${s}] ${c}`)}else{const n=t.id,r=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,u=t._status,h=`id=${n} created=${r} queue=${o} preempt=${a} persistent=${l} status=${u} suspend=${c}`;this.console.log(`${e}[T.${s}] ${h}`)}}}const ky={delay:0,preempt:!1,persistent:!1,suspend:!1};let zp,Hp;const $y=(i,e)=>{zp=i,Hp=e},Up=()=>{const i=new Promise($y);return i.resolve=zp,i.reject=Hp,i},tl=i=>i.persistent,Sy=()=>Oi("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),xy=()=>Oi("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Oi=i=>new Error(i);class qs extends Yc{static getOrCreate(e,t={}){let s=qs._lookup.get(e);return s===void 0&&qs._lookup.set(e,s=new qs(e,t)),s}static set(e,t){qs._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const s=n=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${n}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(n=>this[n]=n in t?t[n]:e[n]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(n=>{var r;return this[n]=n in t?t[n]:((r=e[n])==null?void 0:r.bind(e))??s(n)}),this.domQueue=(()=>{let n=!1,r=-1;const o=()=>{n=!0,r===-1&&(r=this.requestAnimationFrame(l))},a=()=>{n=!1,r>-1&&(this.cancelAnimationFrame(r),r=-1)},l=()=>{r=-1,n===!0&&(n=!1,c.flush())},c=new Zc(this,o,a);return c})()}}qs._lookup=new WeakMap;const{default:eh,oneTime:ba,toView:xe,fromView:Es,twoWay:qp}=Di,Ye=It.get,wa=It.has,Ut=It.define,{annotation:Ay}=mf,Rs=Ay.keyFor,qr=Object,Bi=String,Wp=qr.prototype,$i=Wp.hasOwnProperty,fs=qr.freeze,Qp=qr.assign,Kp=qr.getOwnPropertyNames,th=qr.keys,td=ce(),Kl=(i,e,t)=>{if(td[e]===!0)return!0;if(!J(e))return!1;const s=e.slice(0,5);return td[e]=s==="aria-"||s==="data-"||t.isStandardSvgAttribute(i,e)},Gl=i=>{throw i},Gp=Reflect.defineProperty,bt=(i,e,t)=>(Gp(i,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),Xp=(i,e,t)=>i.addSignalListener(e,t),Jp=(i,e,t)=>i.removeSignalListener(e,t),Py="Interpolation",Iy="IsIterator",Ey="IsFunction",os="IsProperty",sd="pending",sl="running",sh=zc.Observer,ai=zc.Node,ps=zc.Layout,B=(i,...e)=>{const t=Bi(i).padStart(4,"0"),s=Ry(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/runtime-html/aur${t}`;return new Error(`AUR${t}: ${s}

For more information, see: ${n}`)},Ty={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},Ry=(i,...e)=>{var s;let t=Ty[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=Oy(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Bi(l[a.slice(1)]):l=Bi(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function Oy(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function $e(i,e){let t;function s(n,r){var c;let o;switch(r.kind){case"getter":case"field":{const u=r.name;if(typeof u!="string")throw B(227);o=u;break}case"class":if(t==null)throw B(228);if(typeof t=="string")o=t;else{const u=t.name;if(!u)throw B(229);if(typeof u!="string")throw B(227);o=u}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=r.metadata)[Vs]??(c[Vs]=ce());l[o]=$s.create(o,a)}if(arguments.length>1){t={},s(i,e);return}else if(J(i))return t=i,s;return t=i===void 0?{}:i,s}const Vs=Rs("bindables"),mt=fs({name:Vs,keyFrom:i=>`${Vs}:${i}`,from(...i){const e={},t=Array.isArray;function s(o){e[o]=$s.create(o)}function n(o,a){e[o]=a instanceof $s?a:$s.create(o,a===!0?{}:a)}function r(o){t(o)?o.forEach(a=>J(a)?s(a):n(a.name,a)):o instanceof $s?e[o.name]=o:o!==void 0&&th(o).forEach(a=>n(a,o[a]))}return i.forEach(r),e},getAll(i){const e=[],t=Av(i);let s=t.length,n;for(;--s>=0;){n=t[s];const r=Ye(Vs,n);r!=null&&e.push(...Object.values(r))}return e},_add(i,e){let t=Ye(Vs,e);t==null&&Ut(t=ce(),e,Vs),t[i.name]=i}});class $s{constructor(e,t,s,n,r,o){this.attribute=e,this.callback=t,this.mode=s,this.primary=n,this.name=r,this.set=o}static create(e,t={}){const s=t.mode??xe;return new $s(t.attribute??pf(e),t.callback??`${e}Changed`,J(s)?Di[s]??eh:s,t.primary??!1,t.name??e,t.set??By(t))}}const Xl={key:Rs("coercer"),define(i,e){Ut(i[e].bind(i),i,Xl.key)},for(i){return Ye(Xl.key,i)}};function By(i={}){const e=i.type??null;if(e==null)return dt;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const s=e.coerce;t=typeof s=="function"?s.bind(e):Xl.for(e)??dt;break}}return t===dt?t:My(t,i.nullable)}function My(i,e){return function(t,s){return s!=null&&s.enableCoercion?(e??!((s==null?void 0:s.coerceNullish)??!1))&&t==null?t:i(t,s):t}}const oe=at.createInterface,gs=Et.singleton,Ys=Et.aliasTo,ih=Et.instance,me=(i,e,t)=>i.registerResolver(e,t),Ly="custom-element",Ny="custom-attribute",Zs=(i,e,t,s="__au_static_resource__")=>{var r;let n=Ye(s,i);return n==null&&((r=i.$au)==null?void 0:r.type)===e&&(n=t(i.$au,i),Ut(n,i,s)),n};class gr{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return J(e)?(s=e,n={name:s}):(s=e.name,n=e),new gr(t,Fs(id(t,"name"),s),Te(id(t,"aliases"),n.aliases,t.aliases),Yp.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?_r(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${B(156,this.name)}`):e.register(e.has(s,!1)?null:gs(s,s),Ys(s,n),...r.map(o=>Ys(s,_r(o))))}}const Pt="binding-behavior",Ki=si(Pt),id=(i,e)=>Ye(Rs(e),i),_r=i=>`${Ki}:${i}`,Yp=fs({name:Ki,keyFrom:_r,isType(i){var e;return Z(i)&&(wa(Ki,i)||((e=i.$au)==null?void 0:e.type)===Pt)},define(i,e){const t=gr.create(i,e),s=t.Type;return Ut(t,s,Ki,Dt),s},getDefinition(i){const e=Ye(Ki,i)??Zs(i,Pt,gr.create);if(e===void 0)throw B(151,i);return e},find(i,e){const t=i.find(Pt,e);return t==null?null:Ye(Ki,t)??Zs(t,Pt,gr.create)??null},get(i,e){try{return i.get(dn(_r(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return i.get(dn(_r(e)))}}),il=new Map,ya=i=>({type:Pt,name:i});class Ca{bind(e,t){il.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=il.get(t),il.delete(t)}}class Zp extends Ca{get mode(){return ba}}Zp.$au=ya("oneTime");class eg extends Ca{get mode(){return xe}}eg.$au=ya("toView");class tg extends Ca{get mode(){return Es}}tg.$au=ya("fromView");class sg extends Ca{get mode(){return qp}}sg.$au=ya("twoWay");const nl=new WeakMap,Dy=200;class ig{constructor(){this._platform=x(xn)}bind(e,t,s,n){var a;const r={type:"debounce",delay:s??Dy,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:J(n)?[n]:n??q},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):nl.set(t,o)}unbind(e,t){var s;(s=nl.get(t))==null||s.dispose(),nl.delete(t)}}ig.$au={type:Pt,name:"debounce"};const Uo=oe("ISignaler",i=>i.singleton(jy));class jy{constructor(){this.signals=ce()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let s;for(s of t.keys())s.handleChange(void 0,void 0)}addSignalListener(e,t){var s;((s=this.signals)[e]??(s[e]=new Set)).add(t)}removeSignalListener(e,t){var s;(s=this.signals[e])==null||s.delete(t)}}class ng{constructor(){this._lookup=new Map,this._signaler=x(Uo)}bind(e,t,...s){if(!("handleChange"in t))throw B(817);if(s.length===0)throw B(818);this._lookup.set(t,s);let n;for(n of s)Xp(this._signaler,n,t)}unbind(e,t){const s=this._lookup.get(t);this._lookup.delete(t);let n;for(n of s)Jp(this._signaler,n,t)}}ng.$au={type:Pt,name:"signal"};const rl=new WeakMap,Fy=200;class rg{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=x(xn))}bind(e,t,s,n){var a;const r={type:"throttle",delay:s??Fy,now:this._now,queue:this._taskQueue,signals:J(n)?[n]:n??q},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):rl.set(t,o)}unbind(e,t){var s;(s=rl.get(t))==null||s.dispose(),rl.delete(t)}}rg.$au={type:Pt,name:"throttle"};const Jl=oe("IAppTask");class nd{constructor(e,t,s){this.c=void 0,this.slot=e,this.k=t,this.cb=s}register(e){return this.c=e.register(ih(Jl,this))}run(){const e=this.k,t=this.cb;return e===null?t():t(this.c.get(e))}}const po=fs({creating:gi("creating"),hydrating:gi("hydrating"),hydrated:gi("hydrated"),activating:gi("activating"),activated:gi("activated"),deactivating:gi("deactivating"),deactivated:gi("deactivated")});function gi(i){function e(t,s){return Z(s)?new nd(i,t,s):new nd(i,null,t)}return e}const je=xn;class Vy{}const jt=(()=>{const i=new WeakMap;let e=!1;return new class{get hideProp(){return e}set hideProp(t){e=t}get(t,s){var n;return((n=i.get(t))==null?void 0:n[s])??null}set(t,s,n){const r=i.get(t)??(i.set(t,new Vy),i.get(t));if(s in r)throw new Error(`Node already associated with a controller, remove the ref "${s}" first before associating with another controller`);return e||(t.$au??(t.$au=r)),r[s]=n}}})(),Rn=oe("INode"),Yl=(()=>{const i=new WeakMap;return fs({add(e,t){let s=i.get(e);s==null&&i.set(e,s=[]),s.push(t)},getDefinitions(e){return i.get(e)??q}})})();class Mi{get type(){return Ny}constructor(e,t,s,n,r,o,a,l,c,u,h){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.defaultBindingMode=r,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=u,this.containerStrategy=h}static create(e,t){let s,n;J(e)?(s=e,n={name:s}):(s=e.name,n=e);const r=Fs(bs(t,"defaultBindingMode"),n.defaultBindingMode,t.defaultBindingMode,xe);for(const o of Object.values(mt.from(n.bindables)))mt._add(o,t);return new Mi(t,Fs(bs(t,"name"),s),Te(bs(t,"aliases"),n.aliases,t.aliases),ln(s),J(r)?Di[r]??eh:r,Fs(bs(t,"isTemplateController"),n.isTemplateController,t.isTemplateController,!1),mt.from(...mt.getAll(t),bs(t,"bindables"),t.bindables,n.bindables),Fs(bs(t,"noMultiBindings"),n.noMultiBindings,t.noMultiBindings,!1),Te(Yl.getDefinitions(t),t.watches),Te(bs(t,"dependencies"),n.dependencies,t.dependencies),Fs(bs(t,"containerStrategy"),n.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const s=this.Type,n=typeof t=="string"?ln(t):this.key,r=this.aliases;e.has(n,!1)?(Mi.warnDuplicate&&e.get(Le).warn(B(154,this.name)),console.warn(`[DEV:aurelia] ${B(154,this.name)}`)):e.register(e.has(s,!1)?null:gs(s,s),Ys(s,n),...r.map(o=>Ys(s,ln(o))))}toString(){return`au:ca:${this.name}`}}Mi.warnDuplicate=!0;const Ze="custom-attribute",gn=si(Ze),ln=i=>`${gn}:${i}`,bs=(i,e)=>Ye(Rs(e),i),zy=i=>{var e;return Z(i)&&(wa(gn,i)||((e=i.$au)==null?void 0:e.type)===Ze)},og=(i,e)=>jt.get(i,ln(e))??void 0,nh=(i,e)=>{const t=Mi.create(i,e),s=t.Type;return Ut(t,s,gn,Dt),s},rh=i=>{const e=Ye(gn,i)??Zs(i,Ze,Mi.create);if(e===void 0)throw B(759,i);return e},Hy=(i,e)=>{let t="",s="";if(J(e))t=ln(e),s=e;else{const r=rh(e);t=r.key,s=r.name}let n=i;for(;n!==null;){const r=jt.get(n,t);if(r!=null&&r.is(s))return r;n=Qo(n)}return null},Wr=fs({name:gn,keyFrom:ln,isType:zy,for:og,closest:Hy,define:nh,getDefinition:rh,annotate(i,e,t){Ut(t,i,Rs(e))},getAnnotation:bs,find(i,e){const t=i.find(Ze,e);return t===null?null:Ye(gn,t)??Zs(t,Ze,Mi.create)??null}}),qi=oe("ILifecycleHooks");class Uy{constructor(e,t){this.definition=e,this.instance=t}}class oh{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const s=new Set;let n=t.prototype;for(;n!==Wp;){for(const r of Kp(n))r!=="constructor"&&!r.startsWith("_")&&s.add(r);n=Object.getPrototypeOf(n)}return new oh(t,s)}}const rd=(()=>{const i=new WeakMap,e=new WeakMap;return fs({define(t,s){const n=oh.create(t,s),r=n.Type;return e.set(r,n),{register(o){gs(qi,r).register(o)}}},resolve(t){let s=i.get(t);if(s===void 0){i.set(t,s=new qy);const n=t.root,r=n===t?t.getAll(qi):t.has(qi,!1)?n.getAll(qi).concat(t.getAll(qi)):n.getAll(qi);let o,a,l,c,u;for(o of r){a=e.get(o.constructor),l=new Uy(a,o);for(c of a.propertyNames)u=s[c],u===void 0?s[c]=[l]:u.push(l)}}return s}})})();class qy{}class mr{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return J(e)?(s=e,n={name:s}):(s=e.name,n=e),new mr(t,Fs(Zl(t,"name"),s),Te(Zl(t,"aliases"),n.aliases,t.aliases),ag.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?vr(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${B(155,this.name)}`):e.register(e.has(s,!1)?null:gs(s,s),Ys(s,n),...r.map(o=>Ys(s,vr(o))))}}const Zi="value-converter",Gi=si(Zi),Zl=(i,e)=>Ye(Rs(e),i),vr=i=>`${Gi}:${i}`,ag=fs({name:Gi,keyFrom:vr,isType(i){var e;return Z(i)&&(wa(Gi,i)||((e=i.$au)==null?void 0:e.type)===Zi)},define(i,e){const t=mr.create(i,e),s=t.Type;return Ut(t,s,Gi,Dt),s},getDefinition(i){const e=Ye(Gi,i)??Zs(i,Zi,mr.create);if(e===void 0)throw B(152,i);return e},annotate(i,e,t){Ut(t,i,Rs(e))},getAnnotation:Zl,find(i,e){const t=i.find(Zi,e);return t==null?null:Ye(Gi,t)??Zs(t,Zi,mr.create)??null},get(i,e){try{return i.get(dn(vr(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return i.get(dn(vr(e)))}});class Wy{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.isBound&&this.b.updateSource(this._value)}handleChange(e,t){const s=this.b;e!==ve(s.ast,s._scope,s,null)&&(this._value=e,this._flushQueue.add(this))}}const li=(()=>{function i(e){this._scope=e}return e=>{bt(e.prototype,"useScope",i)}})(),Os=(()=>{class i{}const e=new WeakMap,t=new WeakMap,s=new WeakMap;function n(f){return this.l.get(f)}function r(f,d){let g=t.get(f);return g==null&&t.set(f,g=new i),g[d]??(g[d]=Yp.get(f.l,d))}function o(f,d,g){var b;const p=r(this,f);if(p==null)throw B(101,f);let _=s.get(this);if(_==null&&s.set(this,_={}),_[f])throw B(102,f);(b=p.bind)==null||b.call(p,d,this,...g)}function a(f,d){var _;const g=r(this,f),p=s.get(this);(_=g==null?void 0:g.unbind)==null||_.call(g,d,this),p!=null&&(p[f]=!1)}function l(f,d){let g=e.get(f);return g==null&&e.set(f,g=new i),g[d]??(g[d]=ag.get(f.l,d))}function c(f){const d=l(this,f);if(d==null)throw B(103,f);const g=d.signals;if(g!=null){const p=this.l.get(Uo),_=g.length;let b=0;for(;b<_;++b)p.addSignalListener(g[b],this)}}function u(f){const d=l(this,f);if((d==null?void 0:d.signals)===void 0)return;const g=this.l.get(Uo);let p=0;for(;p<d.signals.length;++p)g.removeSignalListener(d.signals[p],this)}function h(f,d,g,p){var S,m;const _=l(this,f);if(_==null)throw B(103,f);const b=_.withContext===!0;let v=null;switch(b&&(v={source:this.l.get(ei).controller.viewModel,binding:this}),d){case"toView":return"toView"in _?b?_.toView(g,v,...p):_.toView(g,...p):g;case"fromView":return"fromView"in _?b?(S=_.fromView)==null?void 0:S.call(_,g,v,...p):(m=_.fromView)==null?void 0:m.call(_,g,...p):g}}return f=>{const d=f.prototype;bt(d,"get",n),bt(d,"bindBehavior",o),bt(d,"unbindBehavior",a),bt(d,"bindConverter",c),bt(d,"unbindConverter",u),bt(d,"useConverter",h)}})(),Qy=oe("IFlushQueue",i=>i.singleton(Ky));class Ky{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(Gy)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const Gy=function(i,e,t){t.delete(i),i.flush()},ci=(()=>{const i=new WeakSet,e=(s,n,r)=>{let o,a,l,c=!1;const u=()=>n(l),h=d=>{l=d,r.isBound?(a=o,o=fr(u,{delay:s.delay}),a==null||a.cancel()):u()},f=h.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return h.flush=()=>{c=(o==null?void 0:o.status)===sd,f(),c&&u()},h},t=(s,n,r)=>{let o,a,l=0,c=0,u,h=!1;const f=()=>s.now(),d=()=>n(u),g=_=>{u=_,r.isBound?(c=f()-l,a=o,c>s.delay?(l=f(),d()):o=fr(()=>{l=f(),d()},{delay:s.delay-c}),a==null||a.cancel()):d()},p=g.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return g.flush=()=>{h=(o==null?void 0:o.status)===sd,p(),h&&d()},g};return(s,n)=>{bt(s.prototype,"limit",function(r){if(i.has(this))throw B(9996);i.add(this);const o=n(this,r),a=r.signals,l=a.length>0?this.get(Uo):null,c=this[o],u=(...d)=>c.call(this,...d),h=r.type==="debounce"?e(r,u,this):t(r,u,this),f=l?{handleChange:h.flush}:null;return this[o]=h,l&&a.forEach(d=>Xp(l,d,f)),{dispose:()=>{l&&a.forEach(d=>Jp(l,d,f)),i.delete(this),h.dispose(),delete this[o]}}})}})(),hi=((i=new WeakSet)=>e=>function(){i.has(this)||(i.add(this),e.call(this))})();class At{constructor(e,t,s,n,r,o,a,l,c){this.targetAttribute=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._isQueued=!1,this._value=void 0,this.boundFn=!1,this._isMulti=!1,this.l=t,this.ast=n,this._controller=e,this.target=r,this.oL=s,(this._isMulti=a.indexOf(" ")>-1)&&!At._splitString.has(a)&&At._splitString.set(a,a.split(" "))}updateTarget(e){const t=this.target,s=this.targetAttribute,n=this.targetProperty;switch(s){case"class":if(this._isMulti){const r=!!e;for(const o of At._splitString.get(n))t.classList.toggle(o,r)}else t.classList.toggle(n,!!e);break;case"style":{let r="",o=Bi(e);J(o)&&o.includes("!important")&&(r="important",o=o.replace("!important","")),t.style.setProperty(n,o,r);break}default:e==null?t.removeAttribute(s):t.setAttribute(s,Bi(e))}}handleChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,rs(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&xe)>0?this:null);this.obs.clear(),e!==this._value&&(this._value=e,this.updateTarget(e))})))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ni(this.ast,e,this),this.mode&(xe|ba)&&this.updateTarget(this._value=ve(this.ast,e,this,(this.mode&xe)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ri(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,this.obs.clearAll())}}At.mix=hi(()=>{li(At),ci(At,()=>"updateTarget"),Rt(At,null),Os(At)});At._splitString=new Map;class Xy{constructor(e,t,s,n,r,o,a,l){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.strict=l,this.isBound=!1,this._scope=void 0,this._isQueued=!1,this._controller=e,this.oL=s,this._targetObserver=s.getAccessor(r,o);const c=n.expressions,u=this.partBindings=Array(c.length),h=c.length;let f=0;for(;h>f;++f)u[f]=new vi(c[f],r,o,t,s,l,this)}_handlePartChange(){if(!this.isBound)return;if(this._controller.state!==Jt&&(this._targetObserver.type&ps)>0){if(this._isQueued)return;this._isQueued=!0,rs(()=>{this._isQueued=!1,this.isBound&&this.updateTarget()})}else this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast,s=this.target,n=this.targetProperty,r=t.parts,o=e.length;let a="",l=0;if(o===1)a=r[0]+e[0]._evaluate()+r[1];else for(a=r[0];o>l;++l)a+=e[l]._evaluate()+r[l+1];this._targetObserver.setValue(a,s,n)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,s=t.length;let n=0;for(;s>n;++n)t[n].bind(e);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let s=0;for(;t>s;++s)e[s].unbind()}useAccessor(e){this._targetObserver=e}}class vi{constructor(e,t,s,n,r,o,a){this.ast=e,this.target=t,this.targetProperty=s,this.strict=o,this.owner=a,this.mode=xe,this.isBound=!1,this._value="",this.boundFn=!1,this._isDirty=!1,this.l=n,this.oL=r}updateTarget(){this.owner._handlePartChange()}handleChange(){this.isBound&&(this._isDirty=!0,this.updateTarget())}handleCollectionChange(){this.isBound&&(this._isDirty=!0,this.updateTarget())}_evaluate(){if(!this._isDirty)return this._value;this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&xe)>0?this:null);return this.obs.clear(),this._value=e,_e(e)&&this.observeCollection(e),this._isDirty=!1,this._value}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ni(this.ast,e,this),this._value=ve(this.ast,this._scope,this,(this.mode&xe)>0?this:null),_e(this._value)&&this.observeCollection(this._value),this._isDirty=!1,this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this._value=void 0,this._isDirty=!1,ri(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}vi.mix=hi(()=>{li(vi),ci(vi,()=>"updateTarget"),Rt(vi,null),Os(vi)});class bi{constructor(e,t,s,n,r,o,a){this.p=n,this.ast=r,this.target=o,this.strict=a,this.isBound=!1,this.mode=xe,this._isQueued=!1,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=s}updateTarget(e){var n,r;const t=this.target,s=this._value;this._value=e,this._needsRemoveNode&&((n=s.parentNode)==null||n.removeChild(s),this._needsRemoveNode=!1),e instanceof this.p.Node&&((r=t.parentNode)==null||r.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Bi(e??"")}handleChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,rs(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&xe)>0?this:null);this.obs.clear(),e!==this._value&&this.updateTarget(e)})))}handleCollectionChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,rs(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=this._value=ve(this.ast,this._scope,this,(this.mode&xe)>0?this:null);this.obs.clear(),_e(e)&&this.observeCollection(e),this.updateTarget(e)})))}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ni(this.ast,e,this);const t=this._value=ve(this.ast,this._scope,this,(this.mode&xe)>0?this:null);_e(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,ri(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll())}}bi.mix=hi(()=>{li(bi),ci(bi,()=>"updateTarget"),Rt(bi,null),Os(bi)});class wi{constructor(e,t,s,n,r,o){this.ast=s,this.targetProperty=n,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=r}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=ve(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,ni(this.ast,e,this),this._value=ve(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ri(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}wi.mix=hi(()=>{li(wi),ci(wi,()=>"updateTarget"),Rt(wi,null),Os(wi)});class it{constructor(e,t,s,n,r,o,a,l){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.strict=l,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._isQueued=!1,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this.oL=s}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){Sr(this.ast,this._scope,this,null,e)}handleChange(){if(!this.isBound)return;if(this._controller.state!==Jt&&(this._targetObserver.type&ps)>0){if(this._isQueued)return;this._isQueued=!0,rs(()=>{this._isQueued=!1,this.isBound&&this._handleChange()})}else this._handleChange()}_handleChange(){this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&xe)>0?this:null);this.obs.clear(),this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ni(this.ast,e,this);const t=this.oL,s=this.mode;let n=this._targetObserver;n||(s&Es?n=t.getObserver(this.target,this.targetProperty):n=t.getAccessor(this.target,this.targetProperty),this._targetObserver=n);const r=(s&xe)>0;s&(xe|ba)&&this.updateTarget(ve(this.ast,this._scope,this,r?this:null)),s&Es&&(n.subscribe(this._targetSubscriber??(this._targetSubscriber=new Wy(this,this.l.get(Qy)))),r||this.updateSource(n.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),ri(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw B(9995);this._targetSubscriber=e}}it.mix=hi(()=>{li(it),ci(it,i=>i.mode&Es?"updateSource":"updateTarget"),Rt(it,null),Os(it)});class yi{constructor(e,t,s,n,r){this.oL=t,this.ast=s,this.target=n,this.strict=r,this.isBound=!1,this._scope=void 0,this.l=e}updateSource(){this.isBound?(this.obs.version++,Sr(this.ast,this._scope,this,this,this.target),this.obs.clear()):Sr(this.ast,this._scope,this,null,null)}handleChange(){this.isBound&&this.updateSource()}handleCollectionChange(){this.isBound&&this.updateSource()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ni(this.ast,e,this),this.isBound=!0,this.updateSource()}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),ve(this.ast,this._scope,this,null)===this.target&&this.updateSource(),ri(this.ast,this._scope,this),this._scope=void 0)}}yi.mix=hi(()=>{Rt(yi,null),ci(yi,()=>"updateSource"),li(yi),Os(yi)});class Jy{constructor(e,t=!1,s){this.prevent=e,this.capture=t,this.onError=s}}class en{constructor(e,t,s,n,r,o,a){this.ast=t,this.target=s,this.targetEvent=n,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=r,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let s=ve(this.ast,this._scope,this,null);delete t.$event,Z(s)&&(s=s(e)),s!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(s){this._options.onError(e,s)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ni(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ri(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}en.mix=hi(function(){li(en),ci(en,()=>"callSource"),Os(en)});const ka=oe("IEventModifier"),lg=oe("IKeyMapping",i=>i.instance({meta:fs(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,s)=>{let n=String.fromCharCode(s+65);return e[s+65]=n,n=String.fromCharCode(s+97),e[s+97]=e[n]=n,e},{})}}));class ah{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=x(lg),this._mouseButtons=["left","middle","right"]}static register(e){e.register(gs(ka,ah))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue;case"left":case"middle":case"right":if(s.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&s[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}class lh{constructor(){this._mapping=x(lg),this.type=["keydown","keyup"]}static register(e){e.register(gs(ka,lh))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}if(this._mapping.meta.includes(o)){if(s[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==s.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${s.key}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}class ch{constructor(){this.type=["$ALL"]}static register(e){e.register(gs(ka,ch))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${s.type}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}const cg=oe("IEventModifierHandler",i=>i.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class hh{constructor(){this._reg=x(Ic(ka)).reduce((e,t)=>((_e(t.type)?t.type:[t.type]).forEach(n=>e[n]=t),e),{})}static register(e){e.register(gs(cg,hh))}getHandler(e,t){var s;return J(t)?((s=this._reg[e]??this._reg.$ALL)==null?void 0:s.getHandler(t))??null:null}}const Yy={register(i){i.register(hh,ah,lh,ch)}},Ct=oe("IViewFactory");class $a{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=$a.maxCacheSize:J(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let s;return t!=null&&t.length>0?(s=t.pop(),s):(s=Xe.$view(this,e),s)}}$a.maxCacheSize=65535;const Zy=(()=>{const i=(e,t)=>e.document.createComment(t);return e=>{const t=i(e,"au-end");return t.$start=i(e,"au-start"),t}})(),go=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},hg=(i,e)=>new i.ownerDocument.defaultView.MutationObserver(e),e1=i=>i.nodeType===1,ug="default",t1="au-slot",dg=oe("IAuSlotsInfo");class fg{constructor(e){this.projectedSlots=e}}const s1=oe("IAuSlotWatcher");class Sa{static create(e,t,s,n,r,o,a,l){const c=[],u=n.renderers,h=d=>{let g=d,p=e;for(;p!=null&&g>0;)p=p.parent,--g;if(p==null)throw B(9999);return p},f=d=>{var v;const g=h(d),p=new Sa(g),_=r.compileSpread(g.controller.definition,((v=g.instruction)==null?void 0:v.captures)??q,g.controller.container,t,s);let b;for(b of _)switch(b.type){case Be.spreadTransferedBinding:f(d+1);break;case Be.spreadElementProp:u[b.instruction.type].render(p,cn(t),b.instruction,o,a,l);break;default:u[b.type].render(p,t,b,o,a,l)}c.push(p)};return f(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw B(9999);this._innerBindings.forEach(s=>s.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==mi)throw B(9998);this.$controller.addChild(e)}}class Zt{constructor(e,t,s,n,r,o,a){this.target=t,this.targetKeys=s,this.ast=n,this.strict=a,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=r,this.l=o}updateTarget(){this.obs.version++;const e=ve(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this.isBound=!0,this._scope=e,ni(this.ast,e,this);const t=ve(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,ri(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let s;if(!uf(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(s in this._bindingCache)(o=this._bindingCache[s])==null||o.unbind();return}let n,r=this._scopeCache.get(e);r==null&&this._scopeCache.set(e,r=Oe.fromParent(this._scope,e));for(s of this.targetKeys)n=this._bindingCache[s],s in e?(n==null&&(n=this._bindingCache[s]=new it(this._controller,this.l,this.oL,(a=Zt._astCache)[s]??(a[s]=new hr(s,0)),this.target,s,Di.toView,this.strict)),n.bind(r)):t&&(n==null||n.unbind())}}Zt.mix=hi(()=>{li(Zt),ci(Zt,()=>"updateTarget"),Rt(Zt,null),Os(Zt)});Zt._astCache={};const od=(i,e,t,s)=>{i.addEventListener(e,t,s)},ad=(i,e,t,s)=>{i.removeEventListener(e,t,s)},uh=i=>{let e;const t=i.prototype;bt(t,"subscribe",function(s){var n;if(this.subs.add(s)&&this.subs.count===1){for(e of this._config.events)od(this._el,e,this);this._listened=!0,(n=this._start)==null||n.call(this)}}),bt(t,"unsubscribe",function(s){var n;if(this.subs.remove(s)&&this.subs.count===0){for(e of this._config.events)ad(this._el,e,this);this._listened=!1,(n=this._stop)==null||n.call(this)}}),bt(t,"useConfig",function(s){if(this._config=s,this._listened){for(e of this._config.events)ad(this._el,e,this);for(e of this._config.events)od(this._el,e,this)}})},xa=i=>{bt(i.prototype,"subscribe",dt),bt(i.prototype,"unsubscribe",dt)};class Aa{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=ai|ps,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,s=this.obj.classList,n=pg(this._value),r=n.length;let o=0,a;if(r>0)for(;o<r;o++)a=n[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,s.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&s.remove(a)}}xa(Aa);function pg(i){if(J(i))return ld(i);if(typeof i!="object")return q;if(_e(i)){const s=i.length;if(s>0){const n=[];let r=0;for(;s>r;++r)n.push(...pg(i[r]));return n}else return q}const e=[];let t;for(t in i)i[t]&&(t.includes(" ")?e.push(...ld(t)):e.push(t));return e}function ld(i){const e=i.match(/\S+/g);return e===null?q:e}const gg=i=>({$isResolver:!0,resolve(e,t){return t.get(ei).controller.container.get(Gv(i))}}),_g=oe("IRenderer");function Ve(i,e){var s;const t=i[s=Symbol.metadata]??(i[s]=Object.create(null));return t[cs]={register(n){gs(_g,i).register(n)}},i}function as(i,e,t){return J(e)?i.parse(e,t):e}function Pa(i){return i.viewModel!=null?i.viewModel:i}function i1(i,e){if(e==="element")return i;switch(e){case"controller":return cn(i);case"view":throw B(750);case"component":return cn(i).viewModel;default:{const t=og(i,e);if(t!==void 0)return t.viewModel;const s=cn(i,{name:e});if(s===void 0)throw B(751,e);return s.viewModel}}}const n1=Ve(class{constructor(){this.target=Be.setProperty}render(e,t,s){var r;const n=Pa(t);((r=n.$observers)==null?void 0:r[s.to])!==void 0?n.$observers[s.to].setValue(s.value):n[s.to]=s.value}}),r1=Ve(class{constructor(){this._rendering=x(ji),this.target=Be.hydrateElement}render(e,t,s,n,r,o){let a,l,c;const u=s.res,h=s.projections,f=e.container;switch(typeof u){case"string":if(a=Q.find(f,u),a==null)throw B(752,s,e);break;default:a=u}const g=s.containerless||a.containerless?xr(t):null,p=A1(n,e,t,s,g,h==null?void 0:new fg(th(h)));l=p.invoke(a.Type),c=Xe.$el(p,l,t,s,a,g);const _=this._rendering.renderers,b=s.props,v=b.length;let S=0,m;for(;v>S;)m=b[S],_[m.type].render(e,c,m,n,r,o),++S;e.addChild(c)}}),o1=Ve(class{constructor(){this._rendering=x(ji),this.target=Be.hydrateAttribute}render(e,t,s,n,r,o){let a=e.container,l;switch(typeof s.res){case"string":if(l=Wr.find(a,s.res),l==null)throw B(753,s,e);break;default:l=s.res}const c=yg(n,l,e,t,s,void 0,void 0),u=Xe.$attr(c.ctn,c.vm,t,l);jt.set(t,l.key,u);const h=this._rendering.renderers,f=s.props,d=f.length;let g=0,p;for(;d>g;)p=f[g],h[p.type].render(e,u,p,n,r,o),++g;e.addChild(u)}}),a1=Ve(class{constructor(){this._rendering=x(ji),this.target=Be.hydrateTemplateController}render(e,t,s,n,r,o){var v,S;let a=e.container,l;switch(typeof s.res){case"string":if(l=Wr.find(a,s.res),l==null)throw B(754,s,e);break;default:l=s.res}const c=this._rendering.getViewFactory(s.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),u=xr(t),h=yg(n,l,e,t,s,c,u),f=Xe.$attr(h.ctn,h.vm,t,l);jt.set(u,l.key,f),(S=(v=h.vm).link)==null||S.call(v,e,f,t,s);const d=this._rendering.renderers,g=s.props,p=g.length;let _=0,b;for(;p>_;)b=g[_],d[b.type].render(e,f,b,n,r,o),++_;e.addChild(f)}}),l1=Ve(class{constructor(){this.target=Be.hydrateLetElement,wi.mix()}render(e,t,s,n,r,o){t.remove();const a=s.instructions,l=s.toBindingContext,c=e.container,u=a.length;let h,f,d=0;for(;u>d;)h=a[d],f=as(r,h.from,os),e.addBinding(new wi(c,o,f,h.to,l,e.strict??!1)),++d}}),c1=Ve(class{constructor(){this.target=Be.refBinding,yi.mix()}render(e,t,s,n,r,o){e.addBinding(new yi(e.container,o,as(r,s.from,os),i1(t,s.to),e.strict??!1))}}),h1=Ve(class{constructor(){this.target=Be.interpolation,vi.mix()}render(e,t,s,n,r,o){const a=e.container,l=new Xy(e,a,o,as(r,s.from,Py),Pa(t),s.to,xe,e.strict??!1);if(s.to==="class"&&l.target.nodeType>0){const c=a.get(gg(qo));l.useAccessor(new Aa(l.target,c))}e.addBinding(l)}}),u1=Ve(class{constructor(){this.target=Be.propertyBinding,it.mix()}render(e,t,s,n,r,o){const a=e.container,l=new it(e,a,o,as(r,s.from,os),Pa(t),s.to,s.mode,e.strict??!1);if(s.to==="class"&&l.target.nodeType>0){const c=a.get(gg(qo));l.useTargetObserver(new Aa(l.target,c))}e.addBinding(l)}}),d1=Ve(class{constructor(){this.target=Be.iteratorBinding,it.mix()}render(e,t,s,n,r,o){e.addBinding(new it(e,e.container,o,as(r,s.forOf,Iy),Pa(t),s.to,xe,e.strict??!1))}}),f1=Ve(class{constructor(){this.target=Be.textBinding,bi.mix()}render(e,t,s,n,r,o){e.addBinding(new bi(e,e.container,o,n,as(r,s.from,os),t,e.strict??!1))}}),p1=oe("IListenerBindingOptions",i=>i.singleton(class{constructor(){this.p=x(je),this.prevent=!1,this.onError=(e,t)=>{const s=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(s),!s.defaultPrevented)throw t}}})),g1=Ve(class{constructor(){this.target=Be.listenerBinding,this._modifierHandler=x(cg),this._defaultOptions=x(p1),en.mix()}render(e,t,s,n,r){e.addBinding(new en(e.container,as(r,s.from,Ey),t,s.to,new Jy(this._defaultOptions.prevent,s.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(s.to,s.modifier),e.strict??!1))}}),_1=Ve(class{constructor(){this.target=Be.setAttribute}render(e,t,s){t.setAttribute(s.to,s.value)}}),m1=Ve(class{constructor(){this.target=Be.setClassAttribute}render(e,t,s){S1(t.classList,s.value)}}),v1=Ve(class{constructor(){this.target=Be.setStyleAttribute}render(e,t,s){t.style.cssText+=s.value}}),b1=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],w1=Ve(class{constructor(){this.target=Be.stylePropertyBinding,it.mix()}render(e,t,s,n,r,o){if(b1.includes(s.to)){e.addBinding(new y1(e,e.container,o,as(r,s.from,os),t.style,s.to,xe,e.strict??!1));return}e.addBinding(new it(e,e.container,o,as(r,s.from,os),t.style,s.to,xe,e.strict??!1))}});class y1 extends it{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const C1=Ve(class{constructor(){this.target=Be.attributeBinding,At.mix()}render(e,t,s,n,r,o){const a=e.container,l=a.has(qo,!1)?a.get(qo):null;e.addBinding(new At(e,a,o,as(r,s.from,os),t,s.attr,l==null?s.to:s.to.split(/\s/g).map(c=>l[c]??c).join(" "),xe,e.strict??!1))}}),k1=Ve(class{constructor(){this._compiler=x(pa),this._rendering=x(ji),this.target=Be.spreadTransferedBinding}render(e,t,s,n,r,o){Sa.create(e.container.get(ei),t,void 0,this._rendering,this._compiler,n,r,o).forEach(a=>e.addBinding(a))}}),$1=Ve(class{constructor(){this.target=Be.spreadValueBinding,Zt.mix()}render(e,t,s,n,r,o){const a=s.target;if(a==="$bindables")e.addBinding(new Zt(e,t.viewModel,th(t.definition.bindables),r.parse(s.from,os),o,e.container,e.strict??!1));else throw B(820,a)}});function S1(i,e){const t=e.length;let s=0;for(let n=0;n<t;++n)e.charCodeAt(n)===32?(n!==s&&i.add(e.slice(s,n)),s=n+1):n+1===t&&i.add(e.slice(s))}const mg="IController",vg="IInstruction",x1="IRenderLocation",bg="ISlotsInfo";function A1(i,e,t,s,n,r){const o=e.container.createChild();return Gr(o,t,i),me(o,Qr,new Se(mg,e)),me(o,In,new Se(vg,s)),me(o,ot,n==null?kg:new Cg(n)),me(o,Ct,$g),me(o,dg,r==null?Sg:new Se(bg,r)),o}class wg{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw B(755);if(!J(e.name)||e.name.length===0)throw B(756);return e}}function yg(i,e,t,s,n,r,o,a){const l=t instanceof Xe?t:t.$controller,c=l.container.createChild();return Gr(c,s,i),me(c,Qr,new Se(mg,l)),me(c,In,new Se(vg,n)),me(c,ot,o==null?kg:new Se(x1,o)),me(c,Ct,r==null?$g:new wg(r)),me(c,dg,Sg),{vm:c.invoke(e.Type),ctn:c}}class Cg{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const kg=new Cg(null),$g=new wg(null),Sg=new Se(bg,new fg(q)),ji=oe("IRendering",i=>i.singleton(P1));class P1{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(_g,!1).reduce((e,t)=>{var s;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[s=t.target]??(e[s]=t),e},ce()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=x(Ni).root,t=this._platform=e.get(je);this._exprParser=e.get(An),this._observerLocator=e.get(Tn),this._marker=t.document.createElement("au-m"),this._empty=new cl(t,t.document.createDocumentFragment())}compile(e,t){const s=t.get(pa),n=this._compilationCache;let r=n.get(e);return r==null&&n.set(e,r=Me.create(e.needsCompile?s.compile(e,t):e)),r}getViewFactory(e,t){return new $a(t,Me.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new cl(this._platform,this._transformMarker(e.template));let t,s=!1;const n=this._fragmentCache,r=this._platform,o=r.document;if(n.has(e))t=n.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof r.Node?a.nodeName==="TEMPLATE"?(t=a.content,s=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),J(a)&&(l.innerHTML=a),t=l.content,s=!0),this._transformMarker(t),n.set(e,t)}return t==null?this._empty:new cl(this._platform,s?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,s,n){const r=s.instructions,o=this.renderers,a=t.length;let l=0,c=0,u=r.length,h,f,d;if(a!==u)throw B(757,a,u);if(n!=null&&(h=s.surrogates,(u=h.length)>0))for(c=0;u>c;)f=h[c],o[f.type].render(e,n,f,this._platform,this._exprParser,this._observerLocator),++c;if(a>0)for(;a>l;){for(h=r[l],d=t[l],c=0,u=h.length;u>c;)f=h[c],o[f.type].render(e,d,f,this._platform,this._exprParser,this._observerLocator),++c;++l}}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let s;for(;(s=t.nextNode())!=null;)s.nodeValue==="au*"&&s.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),s);return e}}const cd=oe("IShadowDOMStyles"),I1=oe("IShadowDOMGlobalStyles",i=>i.instance({applyTo:dt})),{enter:E1,exit:T1}=P0,{wrap:R1,unwrap:O1}=uy;class xg{get value(){return this._value}constructor(e,t,s,n,r="async"){this.obj=e,this.$get=s,this.isBound=!1,this._isQueued=!1,this._computeDepth=0,this._value=void 0,this._callback=n,this.oL=t,this._flush=r}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(this.isBound){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,rs(()=>{this._isQueued=!1,this._run()}))}}_run(){if(!this.isBound)return;const e=this.obj,t=this._value;if(++this._computeDepth>100)throw new Error("AURXXXX: Possible infinitely recursive side-effect detected in a watcher.");const s=this.compute();Ps(s,t)||this._callback.call(e,s,t,e),this._isQueued||(this._computeDepth=0)}compute(){this.obs.version++;try{return E1(this),this._value=O1(this.$get.call(void 0,R1(this.obj),this))}finally{this.obs.clear(),T1(this)}}}Rt(xg,null);class ec{get value(){return this._value}constructor(e,t,s,n,r,o="async"){this.scope=e,this.l=t,this.oL=s,this.isBound=!1,this._isQueued=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=n,this._callback=r,this._flush=o}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){if(this.isBound){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,rs(()=>{this._isQueued=!1,this._run()}))}}_run(){if(!this.isBound)return;const e=this._expression,t=this.obj,s=this._value;this.obs.version++;const n=ve(e,this.scope,this,this);this.obs.clear(),Ps(n,s)||(this._value=n,this._callback.call(t,n,s,t))}bind(){this.isBound||(this.obs.version++,this._value=ve(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}Rt(ec,null),Os(ec);class Xe{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(Jt|Ci))>0&&(this.state&br)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case mi:return`[${this.definition.name}]`;case _t:return this.definition.name;case We:return this.viewFactory.name}switch(this.vmKind){case mi:return`${this.parent.name}>[${this.definition.name}]`;case _t:return`${this.parent.name}>${this.definition.name}`;case We:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===We?tn.none:new tn(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,s,n,r,o,a){this.container=e,this.vmKind=t,this.definition=s,this.viewFactory=n,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.mountTarget=Ag,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=ol,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=r,this._vmHooks=t===We?tn.none:new tn(r),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(ji)}static getCached(e){return Ls.get(e)}static getCachedOrThrow(e){const t=Xe.getCached(e);if(t===void 0)throw B(500,e);return t}static $el(e,t,s,n,r=void 0,o=null){if(Ls.has(t))return Ls.get(t);if(r==null)try{r=Rg(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${s.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}me(e,r.Type,new Se(r.key,t,r.Type));const a=new Xe(e,_t,r,null,t,s,o),l=e.get(wf(ei));return r.dependencies.length>0&&e.register(...r.dependencies),me(e,ei,new Se("IHydrationContext",new Pg(a,n,l))),Ls.set(t,a),(n==null||n.hydrate!==!1)&&a._hydrateCustomElement(n),a}static $attr(e,t,s,n){if(Ls.has(t))return Ls.get(t);n=n??rh(t.constructor),me(e,n.Type,new Se(n.key,t,n.Type));const r=new Xe(e,mi,n,null,t,s,null);return n.dependencies.length>0&&e.register(...n.dependencies),Ls.set(t,r),r._hydrateCustomAttribute(),r}static $view(e,t=void 0){const s=new Xe(e.container,We,null,e,null,null,null);return s.parent=t??null,s._hydrateSynthetic(),s}_hydrateCustomElement(e){this.logger=this.container.get(Le).root,this.debug=this.logger.config.level<=eb.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,s=this._vm,n=this.definition;this.scope=Oe.create(s,null,!0),n.watches.length>0&&dd(this,t,n,s),hd(this,n,s),this._lifecycleHooks=rd.resolve(t),t.register(n.Type),n.injectable!==null&&me(t,n.injectable,new Se("definition.injectable",s)),(e==null||e.hydrate!==!1)&&(this._hydrate(),this._hydrateChildren())}_hydrate(){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(F1,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const e=this.definition,t=this._compiledDef=this._rendering.compile(e,this.container),s=t.shadowOptions,n=t.hasSlots,r=t.containerless,o=this.host;let a=this.location;if(r&&a==null&&(a=this.location=xr(o)),kt(o,He,this),kt(o,e.key,this),s!==null||n){if(a!=null)throw B(501);kt(this.shadowRoot=o.attachShadow(s??N1),He,this),kt(this.shadowRoot,e.key,this),this.mountTarget=Wn}else a!=null?(o!==a&&(kt(a,He,this),kt(a,e.key,this)),this.mountTarget=Qn):this.mountTarget=qn;this._vm.$controller=this,this.nodes=this._rendering.createNodes(t),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(V1,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(fd,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&dd(this,this.container,e,t),hd(this,e,t),t.$controller=this,this._lifecycleHooks=rd.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(fd,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,s){switch(this.state){case ol:case sn:if(!(t===null||t.isActive))return;this.state=Jt;break;case Ci:return;case Ds:throw B(502,this.name);default:throw B(503,this.name,D1(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(Le).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case _t:this.scope.parent=s??null;break;case mi:this.scope=s??null;break;case We:if(s==null)throw B(504,this.name);this.hasLockedScope||(this.scope=s);break}this.$initiator=e,this._enterActivating();let n;return this.vmKind!==We&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),n=le(...this._lifecycleHooks.binding.map(z1,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),n=le(n,this._vm.binding(this.$initiator,this.parent))),Re(n)?(this._ensurePromise(),n.then(()=>{this._isBindingDone=!0,this.state!==Jt?this._leaveActivating():this.bind()}).catch(r=>{this._reject(r)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,s;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==We&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),s=le(...this._lifecycleHooks.bound.map(H1,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),s=le(s,this._vm.bound(this.$initiator,this.parent))),Re(s)){this._ensurePromise(),s.then(()=>{this.isBound=!0,this.state!==Jt?this._leaveActivating():this._attach()}).catch(n=>{this._reject(n)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case qn:this.host.append(...e);break;case Wn:this.shadowRoot.append(...e);break;case Qn:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){switch(this.debug&&this.logger.trace("attach()"),this.mountTarget){case qn:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case Wn:{const s=this.container;(s.has(cd,!1)?s.get(cd):s.get(I1)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Qn:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==We&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=le(...this._lifecycleHooks.attaching.map(U1,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=le(t,this._vm.attaching(this.$initiator,this.parent))),Re(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(s=>{this._reject(s)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let s;switch(this.state&~nn){case Ci:this.state=br;break;case Jt:this.state=br,s=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case ol:case sn:case Ds:case sn|Ds:return;default:throw B(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let n=0,r;if(this.children!==null)for(n=0;n<this.children.length;++n)this.children[n].deactivate(e,this);return T(s,()=>{if(this.isBound&&(this.vmKind!==We&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),r=le(...this._lifecycleHooks.detaching.map(W1,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),r=le(r,this._vm.detaching(this.$initiator,this.parent)))),Re(r)&&(this._ensurePromise(),e._enterDetaching(),r.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case _t:case We:this.nodes.remove(),this.nodes.unlink()}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case mi:this.scope=null;break;case We:this.hasLockedScope||(this.scope=null),(this.state&nn)===nn&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case _t:this.scope.parent=null;break}this.state=sn,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(al=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,al(),al=void 0)}_reject(e){this.$promise!==void 0&&(ll=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,ll(e),ll=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==Jt){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==We&&this._lifecycleHooks.attached!=null&&(_i=le(...this._lifecycleHooks.attached.map(q1,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),_i=le(_i,this._vm.attached(this.$initiator))),Re(_i)){this._ensurePromise(),_i.then(()=>{this.state=Ci,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),_i=void 0;return}_i=void 0,this.state=Ci,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==We&&e._lifecycleHooks.unbinding!=null&&(t=le(...e._lifecycleHooks.unbinding.map(Q1,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=le(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Re(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(s=>{this._reject(s)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case mi:case _t:return this.definition.name===e;case We:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===_t&&(kt(e,He,this),kt(e,this.definition.key,this)),this.host=e,this.mountTarget=qn,this}setShadowRoot(e){return this.vmKind===_t&&(kt(e,He,this),kt(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=Wn,this}setLocation(e){return this.vmKind===_t&&(kt(e,He,this),kt(e,this.definition.key,this)),this.location=e,this.mountTarget=Qn,this}release(){this.state|=nn}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&Ds)!==Ds&&(this.state|=Ds,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(j1),this.children=null),this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(Ls.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}const Ls=new WeakMap,Ag=0,qn=1,Wn=2,Qn=3,Kn=fs({none:Ag,host:qn,shadowRoot:Wn,location:Qn}),B1=Xv(Mp);function hd(i,e,t){var u,h;const s=e.bindables,n=Kp(s),r=n.length;if(r===0)return;const o=i.container.get(Tn),a="propertiesChanged"in t,l=i.vmKind===We?void 0:i.container.get(B1),c=a?(()=>{let f={},d=!1,g=0;const p=()=>{d||(d=!0,rs(()=>{var b;d=!1;const _=f;f={},g=0,i.isBound&&((b=t.propertiesChanged)==null||b.call(t,_),g>0&&p())}))};return(_,b,v)=>{f[_]={newValue:b,oldValue:v},g++,p()}})():dt;for(let f=0;f<r;++f){const d=n[f],g=s[d],p=g.callback,_=o.getObserver(t,d);if(g.set!==dt&&((u=_.useCoercer)==null?void 0:u.call(_,g.set,l))!==!0)throw B(507,d);if(t[p]!=null||t.propertyChanged!=null||a){const b=(v,S)=>{var m,C;i.isBound&&((m=t[p])==null||m.call(t,v,S),(C=t.propertyChanged)==null||C.call(t,d,v,S),c(d,v,S))};if(((h=_.useCallback)==null?void 0:h.call(_,b))!==!0)throw B(508,d)}}}const ud=new Map,M1=i=>{let e=ud.get(i);return e==null&&(e=new hr(i,0),ud.set(i,e)),e};function dd(i,e,t,s){const n=e.get(Tn),r=e.get(An),o=t.watches,a=i.vmKind===_t?i.scope:Oe.create(s,null,!0),l=o.length;let c,u,h,f,d=0;for(;l>d;++d){if({expression:c,callback:u,flush:f}=o[d],u=Z(u)?u:Reflect.get(s,u),!Z(u))throw B(506,u);Z(c)?i.addBinding(new xg(s,n,c,u,f)):(h=J(c)?r.parse(c,os):M1(c),i.addBinding(new ec(a,e,n,h,u,f)))}}function L1(i){return i instanceof Xe&&i.vmKind===_t}function Ia(i){return Tg(i==null?void 0:i.constructor)}class tn{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}tn.none=new tn({});const N1={mode:"open"},_t="customElement",mi="customAttribute",We="synthetic",ol=0,Jt=1,Ci=2,br=4,sn=8,nn=16,Ds=32;function D1(i){const e=[];return(i&Jt)===Jt&&e.push("activating"),(i&Ci)===Ci&&e.push("activated"),(i&br)===br&&e.push("deactivating"),(i&sn)===sn&&e.push("deactivated"),(i&nn)===nn&&e.push("released"),(i&Ds)===Ds&&e.push("disposed"),e.length===0?"none":e.join("|")}const Qr=oe("IController"),ei=oe("IHydrationContext");class Pg{constructor(e,t,s){this.instruction=t,this.parent=s,this.controller=e}}function j1(i){i.dispose()}function fd(i){i.instance.created(this._vm,this)}function F1(i){i.instance.hydrating(this._vm,this)}function V1(i){i.instance.hydrated(this._vm,this)}function z1(i){return i.instance.binding(this._vm,this.$initiator,this.parent)}function H1(i){return i.instance.bound(this._vm,this.$initiator,this.parent)}function U1(i){return i.instance.attaching(this._vm,this.$initiator,this.parent)}function q1(i){return i.instance.attached(this._vm,this.$initiator)}function W1(i){return i.instance.detaching(this._vm,this.$initiator,this.parent)}function Q1(i){return i.instance.unbinding(this._vm,this.$initiator,this.parent)}let al,ll,_i;const kt=jt.set,K1=oe("IEventTarget",i=>i.cachedCallback(e=>e.has(_n,!0)?e.get(_n).host:e.get(je).document)),ot=oe("IRenderLocation"),qo=oe("ICssClassMapping"),Wo=new WeakMap;function Qo(i){if(Wo.has(i))return Wo.get(i);let e=0,t=i.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(i.parentNode===null&&i.nodeType===11){const s=cn(i,{optional:!0});if(s==null)return null;if(s.mountTarget===Kn.shadowRoot)return Qo(s.host)}return i.parentNode}function G1(i,e){if(i.platform!==void 0&&!(i instanceof i.platform.Node)){const t=i.childNodes;for(let s=0,n=t.length;s<n;++s)Wo.set(t[s],e)}else Wo.set(i,e)}function xr(i){if(Ig(i))return i;const e=i.ownerDocument.createComment("au-end"),t=e.$start=i.ownerDocument.createComment("au-start"),s=i.parentNode;return s!==null&&(s.replaceChild(e,i),s.insertBefore(t,e)),e}function Ig(i){return i.textContent==="au-end"}class cl{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const s=(this.f=t).querySelectorAll("au-m");let n=0,r=s.length,o=this.t=Array(r),a,l;for(;r>n;)l=s[n],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[n]=a,++n;const c=t.childNodes,u=this.childNodes=Array(r=c.length);for(n=0;r>n;)u[n]=c[n],++n;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,e.appendChild(s),s!==r);)s=n}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let s,n=this._firstChild;for(;n!==null&&(s=n.nextSibling,e.appendChild(n),n!==t);)n=s}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,Ig(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const Kr=oe("IWindow",i=>i.callback(e=>e.get(je).window)),X1=oe("ILocation",i=>i.callback(e=>e.get(Kr).location)),J1=oe("IHistory",i=>i.callback(e=>e.get(Kr).history)),Gr=(i,e,t=i.get(je))=>(me(i,t.HTMLElement,me(i,t.Element,me(i,Rn,new Se("ElementResolver",e)))),i);function lt(i){return function(e,t){return t.addInitializer(function(){Eg(i,this)}),e}}const hl=new WeakMap;class Me{get type(){return Ly}constructor(e,t,s,n,r,o,a,l,c,u,h,f,d,g,p,_,b,v,S){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=u,this.surrogates=h,this.bindables=f,this.containerless=d,this.shadowOptions=g,this.hasSlots=p,this.enhance=_,this.watches=b,this.strict=v,this.processContent=S}static create(e,t=null){if(t===null){const n=e;if(J(n))throw B(761,e);const r=Kt("name",n,Ko);Z(n.Type)?t=n.Type:t=Og(ff(r));for(const o of Object.values(mt.from(n.bindables)))mt._add(o,t);return new Me(t,r,Te(n.aliases),Kt("key",n,()=>Xi(r)),ft("capture",n,t,St),ft("template",n,t,$t),Te(n.instructions),Te(pt(t,"dependencies"),n.dependencies),Kt("injectable",n,$t),Kt("needsCompile",n,dl),Te(n.surrogates),mt.from(pt(t,"bindables"),n.bindables),ft("containerless",n,t,St),Kt("shadowOptions",n,$t),Kt("hasSlots",n,St),Kt("enhance",n,St),Kt("watches",n,Z1),Kt("strict",n,ul),Lt("processContent",t,$t))}if(J(e))return new Me(t,e,Te(pt(t,"aliases"),t.aliases),Xi(e),Lt("capture",t,St),Lt("template",t,$t),Te(pt(t,"instructions"),t.instructions),Te(pt(t,"dependencies"),t.dependencies),Lt("injectable",t,$t),Lt("needsCompile",t,dl),Te(pt(t,"surrogates"),t.surrogates),mt.from(...mt.getAll(t),pt(t,"bindables"),t.bindables),Lt("containerless",t,St),Lt("shadowOptions",t,$t),Lt("hasSlots",t,St),Lt("enhance",t,St),Te(Yl.getDefinitions(t),t.watches),Lt("strict",t,ul),Lt("processContent",t,$t));const s=Kt("name",e,Ko);for(const n of Object.values(mt.from(e.bindables)))mt._add(n,t);return new Me(t,s,Te(pt(t,"aliases"),e.aliases,t.aliases),Xi(s),ft("capture",e,t,St),ft("template",e,t,$t),Te(pt(t,"instructions"),e.instructions,t.instructions),Te(pt(t,"dependencies"),e.dependencies,t.dependencies),ft("injectable",e,t,$t),ft("needsCompile",e,t,dl),Te(pt(t,"surrogates"),e.surrogates,t.surrogates),mt.from(...mt.getAll(t),pt(t,"bindables"),t.bindables,e.bindables),ft("containerless",e,t,St),ft("shadowOptions",e,t,$t),ft("hasSlots",e,t,St),ft("enhance",e,t,St),Te(e.watches,Yl.getDefinitions(t),t.watches),ft("strict",e,t,ul),ft("processContent",e,t,$t))}static getOrCreate(e){if(e instanceof Me)return e;if(hl.has(e))return hl.get(e);const t=Me.create(e);return hl.set(e,t),Ut(t,t.Type,He),t}register(e,t){const s=this.Type,n=typeof t=="string"?Xi(t):this.key,r=this.aliases;if(e.has(n,!1)){console.warn(B(153,this.name));return}e.register(e.has(s,!1)?null:gs(s,s),Ys(s,n),...r.map(o=>Ys(s,Xi(o))))}toString(){return`au:ce:${this.name}`}}const Y1={name:void 0,searchParents:!1,optional:!1},$t=()=>null,ul=()=>{},St=()=>!1,dl=()=>!0,Z1=()=>q,Li="custom-element",He=si(Li),Xi=i=>`${He}:${i}`,Ko=(i=>()=>`unnamed-${++i}`)(0),eC=(i,e,t)=>{Ut(t,i,Rs(e))},Eg=(i,e)=>{const t=Me.create(i,e),s=t.Type;return Ut(t,s,He,Dt),s},Tg=i=>{var e;return Z(i)&&(wa(He,i)||((e=i.$au)==null?void 0:e.type)===Li)},cn=(i,e=Y1)=>{if(e.name===void 0&&e.searchParents!==!0){const s=jt.get(i,He);if(s===null){if(e.optional===!0)return null;throw B(762,i)}return s}if(e.name!==void 0){if(e.searchParents!==!0){const r=jt.get(i,He);if(r===null)throw B(763,i);return r.is(e.name)?r:void 0}let s=i,n=!1;for(;s!==null;){const r=jt.get(s,He);if(r!==null&&(n=!0,r.is(e.name)))return r;s=Qo(s)}if(n)return;throw B(764,i)}let t=i;for(;t!==null;){const s=jt.get(t,He);if(s!==null)return s;t=Qo(t)}throw B(765,i)},pt=(i,e)=>Ye(Rs(e),i),Rg=i=>{const e=Ye(He,i)??Zs(i,Li,Me.create);if(e==null)throw B(760,i);return e},tC=()=>{const i={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(i,!0)?t.get(i):null}}}};return i},Og=(function(){const i={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,s=e){const n=class{};return i.value=t,Gp(n,"name",i),s!==e&&Qp(n.prototype,s),n}})(),Q=fs({name:He,keyFrom:Xi,isType:Tg,for:cn,define:Eg,getDefinition:Rg,annotate:eC,getAnnotation:pt,generateName:Ko,createInjectable:tC,generateType:Og,find(i,e){const t=i.find(Li,e);return t==null?null:Ye(He,t)??Zs(t,Li,Me.create)??null}}),_n=oe("IAppRoot");class pd{get controller(){return this._controller}constructor(e,t,s,n=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=n;const r=this.host=e.host;s.prepare(this),me(t,K1,new Se("IEventTarget",r)),Gr(t,r,this.platform=this._createPlatform(t,r)),this._hydratePromise=T(this._runAppTasks("creating"),()=>{e.allowActionlessForm||r.addEventListener("submit",f=>{const d=f.target,g=!d.getAttribute("action");d.tagName==="FORM"&&g&&f.preventDefault()},!1);const o=n?t:t.createChild(),a=e.component;let l;Z(a)?l=o.invoke(a):l=e.component;const c={hydrate:!1,projections:null},u=n?Me.create({name:Ko(),template:this.host,enhance:!0,strict:e.strictBinding}):void 0,h=this._controller=Xe.$el(o,l,r,c,u);return h._hydrateCustomElement(c),T(this._runAppTasks("hydrating"),()=>(h._hydrate(),T(this._runAppTasks("hydrated"),()=>{h._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return T(this._hydratePromise,()=>T(this._runAppTasks("activating"),()=>T(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return T(this._runAppTasks("deactivating"),()=>T(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,s=this._useOwnAppTasks&&!t.has(Jl,!1)?[]:t.getAll(Jl);return le(...s.reduce((n,r)=>(r.slot===e&&n.push(r.run()),n),[]))}_createPlatform(e,t){let s;if(e.has(je,!1))s=e.get(je);else{if(t.ownerDocument.defaultView===null)throw B(769);s=new qs(t.ownerDocument.defaultView),e.register(ih(je,s))}return s}dispose(){var e;(e=this._controller)==null||e.dispose()}}const gd=oe("IAurelia");let sC=class tc{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw B(767);return this.next}return this._root}constructor(e=at.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(gd,!0)||e.has(tc,!0))throw B(768);me(e,gd,new Se("IAurelia",this)),me(e,tc,new Se("Aurelia",this)),me(e,_n,this._rootProvider=new Se("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new pd(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),s=me(t,_n,new Se("IAppRoot")),n=new pd({host:e.host,component:e.component},t,s,!0);return T(n.activate(),()=>n)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw B(770);return Re(this._startPromise)?this._startPromise:this._startPromise=T(this.stop(),()=>(jt.hideProp||Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,T(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(Re(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=T(t.deactivate(),()=>T(b0(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._stopPromise=void 0,this._dispatchEvent(t,"au-stopped",t.host)}))}}dispose(){if(this._isRunning||this._isStopping)throw B(771);this.container.dispose()}_dispatchEvent(e,t,s){const n=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(n)}};const Bg=oe("ISVGAnalyzer",i=>i.singleton(iC));class iC{isStandardSvgAttribute(e,t){return!1}}class Mg{constructor(){this.fns=[],this._tagAttrMap=ce(),this._globalAttrMap=ce(),this.svg=x(Bg),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,s,n,r;for(n in e){t=e[n],s=(o=this._tagAttrMap)[n]??(o[n]=ce());for(r in t){if(s[r]!==void 0)throw _d(r,n);s[r]=t[r]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const s in e){if(t[s]!==void 0)throw _d(s,"*");t[s]=e[s]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return nC(e,t)||this.fns.length>0&&this.fns.some(s=>s(e,t))}map(e,t){var s;return((s=this._tagAttrMap[e.nodeName])==null?void 0:s[t])??this._globalAttrMap[t]??(Kl(e,t,this.svg)?t:null)}}Mg.register=zr(Uf);function nC(i,e){switch(i.nodeName){case"INPUT":switch(i.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return i.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function _d(i,e){return B(719,i,e)}const rC={register(i){i.register(Ip,Mg,Lg)}};class oC{constructor(e,t,s){this.attrs=e,this.bindables=t,this.primary=s}}class Lg{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new md),t in s._element?s._element[t]:s._element[t]=Q.find(e,t)}attr(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new md),t in s._attr?s._attr[t]:s._attr[t]=Wr.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const s=e.bindables,n=ce();let r,o,a=!1,l,c;for(o in s){if(r=s[o],c=r.attribute,r.primary===!0){if(a)throw B(714,e);a=!0,l=r}else!a&&l==null&&(l=r);n[c]=$s.create(o,r)}r==null&&e.type==="custom-attribute"&&(l=n.value=$s.create("value",{mode:e.defaultBindingMode??eh})),this._bindableCache.set(e,t=new oC(n,s,l??null))}return t}}Lg.register=zr(Ep);class md{constructor(){this._element=ce(),this._attr=ce()}}const fl=ce();class Ar{static forNs(e){return fl[e]??(fl[e]=new Ar(e))}constructor(e){this.ns=e,this.type=ai|ps}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,s){e==null?t.removeAttributeNS(this.ns,s):t.setAttributeNS(this.ns,s,e)}}xa(Ar);class Ng{constructor(){this.type=ai|ps}getValue(e,t){return e.getAttribute(t)}setValue(e,t,s){e==null?t.removeAttribute(s):t.setAttribute(s,e)}}xa(Ng);const Po=new Ng;class Ai{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const s=e.length;let n=0,r;for(;s>n;)r=e[n],r.selected&&(t[t.length]=$i.call(r,"model")?r.model:r.value),++n;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,s,n){this.type=ai|sh|ps,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=n,this._config=s}getValue(){return this._observing?this._value:this._el.multiple?Ai._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,s=_e(e),n=t.matcher??Ai._defaultMatcher,r=t.options;let o=r.length;for(;o-- >0;){const a=r[o],l=$i.call(a,"model")?a.model:a.value;if(s){a.selected=e.findIndex(c=>!!n(l,c))!==-1;continue}a.selected=!!n(l,e)}}syncValue(){const e=this._el,t=e.options,s=t.length,n=this._value;let r=0;if(e.multiple){if(!(n instanceof Array))return!0;let l;const c=e.matcher||Ai._defaultMatcher,u=[];for(;r<s;)l=t[r],l.selected&&u.push($i.call(l,"model")?l.model:l.value),++r;let h;for(r=0;r<n.length;)h=n[r],u.findIndex(f=>!!c(h,f))===-1?n.splice(r,1):++r;for(r=0;r<u.length;)h=u[r],n.findIndex(f=>!!c(h,f))===-1&&n.push(h),++r;return!1}let o=null,a;for(;r<s;){if(a=t[r],a.selected){o=$i.call(a,"model")?a.model:a.value;break}++r}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=hg(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw B(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}uh(Ai),Ht(Ai,null);const aC="--";class Dg{constructor(e){this.obj=e,this.type=ai|ps,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],s=/url\([^)]+$/;let n=0,r="",o,a,l,c;for(;n<e.length;){if(o=e.indexOf(";",n),o===-1&&(o=e.length),r+=e.substring(n,o),n=o+1,s.test(r)){r+=";";continue}a=r.indexOf(":"),l=r.substring(0,a).trim(),c=r.substring(a+1).trim(),t.push([l,c]),r=""}return t}_getStyleTuplesFromObject(e){let t,s;const n=[];for(s in e)if(t=e[s],t!=null){if(J(t)){if(s.startsWith(aC)){n.push([s,t]);continue}n.push([pf(s),t]);continue}n.push(...this._getStyleTuples(t))}return n}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const s=[];let n=0;for(;t>n;++n)s.push(...this._getStyleTuples(e[n]));return s}return q}_getStyleTuples(e){return J(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):q}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,s=this._getStyleTuples(e);let n,r=this.version;this._oldValue=e;let o,a,l,c=0;const u=s.length;for(;c<u;++c)o=s[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=r;if(this.styles=t,this.version+=1,r===0)return;r-=1;for(n in t)!$i.call(t,n)||t[n]!==r||this.obj.style.removeProperty(n)}}setProperty(e,t){let s="";t!=null&&Z(t.indexOf)&&t.includes("!important")&&(s="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,s)}bind(){this._value=this._oldValue=this.obj.style.cssText}}xa(Dg);class sc{constructor(e,t,s){this.type=ai|sh|ps,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=s}getValue(){return this._value}setValue(e){Ps(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}uh(sc),Ht(sc,null);const vd=(()=>{const i="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return Qp(ce(),{"xlink:actuate":["actuate",i],"xlink:arcrole":["arcrole",i],"xlink:href":["href",i],"xlink:role":["role",i],"xlink:show":["show",i],"xlink:title":["title",i],"xlink:type":["type",i],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),jg=new Fp;jg.type=ai|ps;class dh{constructor(){this.allowDirtyCheck=!0,this._events=ce(),this._globalEvents=ce(),this._overrides=ce(),this._globalOverrides=ce(),this._locator=x(Uv),this._platform=x(je),this._dirtyChecker=x(Kc),this.svg=x(Bg);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:ic,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:Ai,events:["change"],default:""}},TEXTAREA:{value:t}});const s={events:["change","input","blur","keyup","paste"],default:""},n={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:n,scrollLeft:n,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,s){const n=this._events;let r;if(J(e))r=n[e]??(n[e]=ce()),r[t]==null?r[t]=s:_o(e,t);else for(const o in e){r=n[o]??(n[o]=ce());const a=e[o];for(t in a)r[t]==null?r[t]=a[t]:_o(o,t)}}useConfigGlobal(e,t){const s=this._globalEvents;if(typeof e=="object")for(const n in e)s[n]==null?s[n]=e[n]:_o("*",n);else s[e]==null?s[e]=t:_o("*",e)}getAccessor(e,t,s){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??Ge))return this.getObserver(e,t,s);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),Po;default:{const n=vd[t];return n!==void 0?Ar.forNs(n[1]):Kl(e,t,this.svg)?Po:jg}}}overrideAccessor(e,t){var n,r;let s;if(J(e))s=(n=this._overrides)[e]??(n[e]=ce()),s[t]=!0;else for(const o in e)for(const a of e[o])s=(r=this._overrides)[o]??(r[o]=ce()),s[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var s;return((s=this._events[e.tagName])==null?void 0:s[t])??this._globalEvents[t]}getNodeObserver(e,t,s){var o;const n=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let r;return n!=null?(r=new(n.type??sc)(e,t,n,s,this._locator),r.doNotCache||(Vp(e)[t]=r),r):null}getObserver(e,t,s){switch(t){case"class":return new Aa(e);case"css":case"style":return new Dg(e)}const n=this.getNodeObserver(e,t,s);if(n!=null)return n;const r=vd[t];if(r!==void 0)return Ar.forNs(r[1]);if(Kl(e,t,this.svg))return Po;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw B(652,t)}else return new Gc(e,t)}}dh.register=zr(Xc);function lC(i,e){if(i instanceof Array)return e.getArrayObserver(i);if(i instanceof Map)return e.getMapObserver(i);if(i instanceof Set)return e.getSetObserver(i)}function _o(i,e){throw B(653,i,e)}function bd(i,e){return i===e}class ic{constructor(e,t,s,n){this.type=ai|sh|ps,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=n,this._config=s}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,s=$i.call(t,"model")?t.model:t.value,n=t.type==="radio",r=t.matcher!==void 0?t.matcher:bd;if(n)t.checked=!!r(e,s);else if(e===!0)t.checked=!0;else{let o=!1;if(_e(e))o=e.findIndex(a=>!!r(a,s))!==-1;else if(e instanceof Set){for(const a of e)if(r(a,s)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(r(l,s)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,s=$i.call(t,"model")?t.model:t.value,n=t.checked,r=t.matcher!==void 0?t.matcher:bd;if(t.type==="checkbox"){if(_e(e)){const o=e.findIndex(a=>!!r(a,s));n&&o===-1?e.push(s):!n&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(r(l,s)===!0){a=l;break}n&&a===o?e.add(s):!n&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(r(l,s)===!0){o=l;break}}e.set(o,n);return}e=n}else if(n)e=s;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){pl=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,pl),pl=void 0}_observe(){var t,s,n,r,o;const e=this._el;(n=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((s=e.$observers)==null?void 0:s.value)))==null||n.subscribe(this),(r=this._collectionObserver)==null||r.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=lC(this._value,this.oL))==null||o.subscribe(this))}}uh(ic),Ht(ic,null);let pl;class Fg{bind(e,t){if(!(t instanceof it))throw B(9994,t);t.useTargetObserver(Po)}}Fg.$au={type:Pt,name:"attr"};class Vg{bind(e,t){if(!("handleEvent"in t))throw B(801);t.self=!0}unbind(e,t){t.self=!1}}Vg.$au={type:Pt,name:"self"};class zg{constructor(){this._observerLocator=x(Tn),this._nodeObserverLocator=x(Xc)}bind(e,t,...s){if(!(this._nodeObserverLocator instanceof dh))throw B(9993);if(s.length===0)throw B(802);if(!(t instanceof it)||!(t.mode&Es))throw B(803);const n=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(n==null)throw B(9992,t);const r=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);r.useConfig({readonly:n.readonly,default:n.default,events:s}),t.useTargetObserver(r)}}zg.$au={type:Pt,name:"updateTrigger"};class Go{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=x(Ct),this._location=x(ot)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,T(this.pending,()=>{var s;this._wantsDeactivate=!1,this.pending=void 0,(s=this.view)==null||s.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,s=this.$controller,n=this._swapId++,r=()=>!this._wantsDeactivate&&this._swapId===n+1;let o;return T(this.pending,()=>this.pending=T(t==null?void 0:t.deactivate(t,s),()=>{var a;if(r()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),T(o.activate(o,s,s.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}Go.$au={type:Ze,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:i=>i===""||!!i&&i!=="false"}}};class Hg{constructor(){this._factory=x(Ct)}link(e,t,s,n){const r=e.children,o=r[r.length-1];if(o instanceof Go)o.elseFactory=this._factory;else if(o.viewModel instanceof Go)o.viewModel.elseFactory=this._factory;else throw B(810)}}Hg.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function cC(i){i.dispose()}const hC=["BindingBehavior","ValueConverter"];class Ug{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=x(ot),this._parent=x(Qr),this._factory=x(Ct),this._resolver=x(dC);const t=x(In).props[0].props[0];if(t!==void 0){const{to:s,value:n,command:r}=t;if(s==="key")if(r===null)this.key=n;else if(r==="bind")this.key=x(An).parse(n,os);else throw B(775,r);else throw B(776,s)}}binding(e,t){const s=this._parent.bindings,n=s.length;let r,o,a=0;for(;n>a;++a)if(r=s[a],r.target===this&&r.targetProperty==="items"){o=this.forOf=r.ast,this._forOfBinding=r;let c=o.iterable;for(;c!=null&&hC.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=ve(l,this.$controller.scope,r,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(void 0),this._activateAllViews(e,this._normalizedItems??q)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(void 0),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const s=this.$controller;if(s.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=ve(this.forOf.iterable,s.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(this.key===null?t:void 0),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const s=t.length,n=this.key,r=n!==null,o=this._oldScopes,a=this._scopes;if(r||e===void 0){const l=this.local,u=this._normalizedItems.length,f=this.forOf.declaration,d=this._forOfBinding,g=this._hasDestructuredLocal;e=Ri(u);let p=0;if(s===0)for(;p<u;++p)e[p]=-2;else if(u===0)for(p=0;p<s;++p)e.deletedIndices.push(p),e.deletedItems.push(Io(g,f,o[p],d,l));else if(r){const _=Array(s);for(p=0;p<s;++p)_[p]=xd(g,n,f,o[p],d,l);const b=Array(s);for(p=0;p<u;++p)b[p]=xd(g,n,f,a[p],d,l);for(p=0;p<u;++p)_.includes(b[p])?e[p]=_.indexOf(b[p]):e[p]=-2;for(p=0;p<s;++p)b.includes(_[p])||(e.deletedIndices.push(p),e.deletedItems.push(Io(g,f,o[p],d,l)))}else{for(p=0;p<u;++p)o.includes(a[p])?e[p]=o.indexOf(a[p]):e[p]=-2;for(p=0;p<s;++p)a.includes(o[p])||(e.deletedIndices.push(p),e.deletedItems.push(Io(g,f,o[p],d,l)))}}if(e.deletedIndices.length>0){const l=T(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));Re(l)&&l.catch(Gl)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,s=this._observingInnerItems,n;s&&(t=this._innerItems=ve(this._innerItemsExpression,e,this._forOfBinding,null)??null,s=this._observingInnerItems=!Ps(this.items,t));const r=this._observer;if(this.$controller.isActive){const l=s?t:this.items;n=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),r!==n&&(r==null||r.unsubscribe(this),n==null||n.subscribe(this))}else r==null||r.unsubscribe(this),this._observer=void 0}_createScopes(e){const t=this._scopes;this._oldScopes=t.slice();const s=this._normalizedItems,n=s.length,r=this._scopes=Array(s.length),o=this._scopeMap,a=new Map,l=this.$controller.scope,c=this._forOfBinding,u=this.forOf,h=this.local,f=this._hasDestructuredLocal;if(e===void 0){const d=this.key;if(d!==null){const p=Array(n);if(typeof d=="string")for(let _=0;_<n;++_)p[_]=s[_][d];else for(let _=0;_<n;++_){const b=rc(s[_],u,l,c,h,f);nc(f,u.declaration,b,c,h,s[_]),p[_]=ve(d,b,c,null)}for(let _=0;_<n;++_)r[_]=Ad(o,a,p[_],s[_],u,l,c,h,f)}else for(let p=0;p<n;++p)r[p]=Ad(o,a,s[p],s[p],u,l,c,h,f)}else{const d=t.length;for(let g=0;g<n;++g){const p=e[g];p>=0&&p<d?r[g]=t[p]:r[g]=rc(s[g],u,l,c,h,f),nc(f,u.declaration,r[g],c,h,s[g])}}o.clear(),this._scopeMap=a}_normalizeToArray(){const e=this.items;if(_e(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(s,n)=>{t[n]=s}),this._normalizedItems=t}_activateAllViews(e,t){let s,n,r,o;const{$controller:a,_factory:l,_location:c,_scopes:u}=this,h=t.length,f=this.views=Array(h);for(let d=0;d<h;++d)r=f[d]=l.create().setLocation(c),r.nodes.unlink(),o=u[d],vo(o.overrideContext,d,h),n=r.activate(e??r,a,o),Re(n)&&(s??(s=[])).push(n);if(s!==void 0)return s.length===1?s[0]:Promise.all(s)}_deactivateAllViews(e){let t,s,n,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)n=o[r],n.release(),s=n.deactivate(e??n,a),Re(s)&&(t??(t=[])).push(s);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,s,n;const{$controller:r,views:o}=this,a=e.deletedIndices.slice().sort(_C),l=a.length;let c=0;for(;l>c;++c)n=o[a[c]],n.release(),s=n.deactivate(n,r),Re(s)&&(t??(t=[])).push(s);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,s,n,r=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:u,_oldViews:h}=this,f=e.length;for(;f>r;++r)e[r]===-2&&(n=a.create(),c.splice(r,0,n));if(c.length!==f)throw B(814,[c.length,f]);let d=0;for(r=0;r<e.length;++r)(d=e[r])!==-2&&(c[r]=h[d]);const g=uC(e),p=g.length;let _,b=p-1;for(r=f-1;r>=0;--r)n=c[r],_=c[r+1],e[r]===-2?(n.nodes.link((_==null?void 0:_.nodes)??l),n.setLocation(l),vo(u[r].overrideContext,r,f),s=n.activate(n,o,u[r]),Re(s)&&(t??(t=[])).push(s)):b<0||r!==g[b]?(n.nodes.link((_==null?void 0:_.nodes)??l),vo(n.scope.overrideContext,r,f),n.nodes.insertBefore(n.location)):(vo(n.scope.overrideContext,r,f),--b);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(cC),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}Ug.$au={type:Ze,name:"repeat",isTemplateController:!0,bindables:["items"]};let Xo=16,ms=new Int32Array(Xo),mo=new Int32Array(Xo);function uC(i){const e=i.length;e>Xo&&(Xo=e,ms=new Int32Array(e),mo=new Int32Array(e));let t=0,s=0,n=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(s=i[r],s!==-2){if(o=ms[t],n=i[o],n!==-2&&n<s){mo[r]=o,ms[++t]=r;continue}for(a=0,l=t;a<l;)c=a+l>>1,n=i[ms[c]],n!==-2&&n<s?a=c+1:l=c;n=i[ms[a]],(s<n||n===-2)&&(a>0&&(mo[r]=ms[a-1]),ms[a]=r)}r=++t;const u=new Int32Array(r);for(s=ms[t-1];t-- >0;)u[t]=s,s=mo[s];for(;r-- >0;)ms[r]=0;return u}class wd{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const vo=(i,e,t)=>{i.$index=e,i.$length=t},dC=oe("IRepeatableHandlerResolver",i=>i.singleton(fC));class fC{constructor(){this._handlers=x(Ic(pC))}resolve(e){if(yd.handles(e))return yd;if(Cd.handles(e))return Cd;if(kd.handles(e))return kd;if($d.handles(e))return $d;if(Sd.handles(e))return Sd;const t=this._handlers.find(s=>s.handles(e));return t!==void 0?t:gC}}const pC=oe("IRepeatableHandler"),yd={handles:_e,getObserver:Jc,iterate(i,e){const t=i.length;let s=0;for(;s<t;++s)e(i[s],s,i)}},Cd={handles:$n,getObserver:Jc,iterate(i,e){let t=0,s;for(s of i.keys())e(s,t++,i)}},kd={handles:Ws,getObserver:Jc,iterate(i,e){let t=0,s;for(s of i.entries())e(s,t++,i)}},$d={handles:$v,iterate(i,e){let t=0;for(;t<i;++t)e(t,t,i)}},Sd={handles:i=>i==null,iterate(){}},gC={handles(i){return!1},iterate(i,e){throw B(777,i)}},nc=(i,e,t,s,n,r)=>{i?Sr(e,t,s,null,r):t.bindingContext[n]=r},Io=(i,e,t,s,n)=>i?ve(e,t,s,null):t.bindingContext[n],xd=(i,e,t,s,n,r)=>typeof e=="string"?Io(i,t,s,n,r)[e]:ve(e,s,n,null),Ad=(i,e,t,s,n,r,o,a,l)=>{let c=i.get(t);if(c===void 0?c=rc(s,n,r,o,a,l):c instanceof Oe?i.delete(t):c.length===1?(c=c[0],i.delete(t)):c=c.shift(),e.has(t)){const u=e.get(t);u instanceof Oe?e.set(t,[u,c]):u.push(c)}else e.set(t,c);return nc(l,n.declaration,c,o,a,s),c},rc=(i,e,t,s,n,r)=>{if(r){const o=Oe.fromParent(t,new Uu,new wd);Sr(e.declaration,o,s,null,i)}return Oe.fromParent(t,new Uu(n,i),new wd)},_C=(i,e)=>i-e;class qg{constructor(){this.view=x(Ct).create().setLocation(x(ot))}valueChanged(e,t){const s=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(s.isActive&&n!=null)for(r=Oe.fromParent(s.scope,e===void 0?{}:e),a=n.length;a>o;++o)n[o].bind(r)}attaching(e,t){const{$controller:s,value:n}=this,r=Oe.fromParent(s.scope,n===void 0?{}:n);return this.view.activate(e,s,r)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}qg.$au={type:Ze,name:"with",isTemplateController:!0,bindables:["value"]};class fh{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=x(Ct),this._location=x(ot)}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return this.queue(()=>s.activate(e,n,n.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),s=this.activeCases,n=s.length;if(!t)return n>0&&s[0].id===e.id?this._clearActiveCases(null):void 0;if(n>0&&s[0].id<e.id)return;const r=[];let o=e.fallThrough;if(!o)r.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,u=a.length;c<u&&o;c++){const h=a[c];r.push(h),o=h.fallThrough}}return T(this._clearActiveCases(null,r),()=>(this.activeCases=r,this._activateCases(null)))}swap(e,t){const s=[];let n=!1;for(const o of this.cases)if((n||o.isMatch(t))&&(s.push(o),n=o.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return s.length===0&&r!==void 0&&s.push(r),T(this.activeCases.length>0?this._clearActiveCases(e,s):void 0,()=>{if(this.activeCases=s,s.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const s=this.activeCases,n=s.length;if(n===0)return;const r=t.scope;return n===1?s[0].activate(e,r):le(...s.map(o=>o.activate(e,r)))}_clearActiveCases(e,t=[]){const s=this.activeCases,n=s.length;if(n!==0){if(n===1){const r=s[0];return t.includes(r)?void 0:(s.length=0,r.deactivate(e))}return T(le(...s.reduce((r,o)=>(t.includes(o)||r.push(o.deactivate(e)),r),[])),()=>{s.length=0})}}queue(e){const t=this.promise;let s;s=this.promise=T(T(t,e),()=>{this.promise===s&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}fh.$au={type:Ze,name:"switch",isTemplateController:!0,bindables:["value"]};let mC=0;const Wg=["value",{name:"fallThrough",mode:ba,set(i){switch(i){case"true":return!0;case"false":return!1;default:return!!i}}}];class ph{constructor(){this.id=++mC,this.fallThrough=!1,this.view=void 0,this._factory=x(Ct),this._locator=x(Tn),this._location=x(ot),this._logger=x(Le).scopeTo(`Case-#${this.id}`)}link(e,t,s,n){const r=e.parent,o=r==null?void 0:r.viewModel;if(o instanceof fh)this.$switch=o,this.linkToSwitch(o);else throw B(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return _e(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var s;_e(e)?((s=this._observer)==null||s.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(e??s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}nh({name:"case",bindables:Wg,isTemplateController:!0},ph);class Qg extends ph{linkToSwitch(e){if(e.defaultCase!==void 0)throw B(816);e.defaultCase=this}}nh({name:"default-case",bindables:Wg,isTemplateController:!0},Qg);var Kg,Gg,Xg;class gh{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=x(Ct),this._location=x(ot),this._platform=x(je),this.logger=x(Le).scopeTo("promise.resolve")}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return T(s.activate(e,n,this.viewScope=Oe.fromParent(n.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var c,u;const t=this.value;if(!Re(t)){this.logger.warn(`The value '${Bi(t)}' is not a promise. No change will be done.`);return}const s=this.fulfilled,n=this.rejected,r=this.pending,o=this.viewScope;let a;const l=()=>{le(a=(this.preSettledTask=fr(()=>le(s==null?void 0:s.deactivate(e),n==null?void 0:n.deactivate(e),r==null?void 0:r.activate(e,o)))).result.catch(h=>{throw h}),t.then(h=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=fr(()=>le(r==null?void 0:r.deactivate(e),n==null?void 0:n.deactivate(e),s==null?void 0:s.activate(e,o,h)))).result};this.preSettledTask.status===sl?a.then(f):(this.preSettledTask.cancel(),f())},h=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=fr(()=>le(r==null?void 0:r.deactivate(e),s==null?void 0:s.deactivate(e),n==null?void 0:n.activate(e,o,h)))).result};this.preSettledTask.status===sl?a.then(f):(this.preSettledTask.cancel(),f())}))};((c=this.postSettledTask)==null?void 0:c.status)===sl?this.postSettlePromise.then(l):((u=this.postSettledTask)==null||u.cancel(),l())}detaching(e,t){var s,n;return(s=this.preSettledTask)==null||s.cancel(),(n=this.postSettledTask)==null||n.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}gh.$au={type:Ze,name:"promise",isTemplateController:!0,bindables:["value"]};class Jg{constructor(){this.view=void 0,this._factory=x(Ct),this._location=x(ot)}link(e,t,s,n){_h(e).pending=this}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}Jg.$au={type:Ze,name:"pending",isTemplateController:!0,bindables:{value:{mode:xe}}};class Yg{constructor(){this.view=void 0,this._factory=x(Ct),this._location=x(ot)}link(e,t,s,n){_h(e).fulfilled=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}Yg.$au={type:Ze,name:"then",isTemplateController:!0,bindables:{value:{mode:Es}}};class Zg{constructor(){this.view=void 0,this._factory=x(Ct),this._location=x(ot)}link(e,t,s,n){_h(e).rejected=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}Zg.$au={type:Ze,name:"catch",isTemplateController:!0,bindables:{value:{mode:Es}}};function _h(i){const e=i.parent,t=e==null?void 0:e.viewModel;if(t instanceof gh)return t;throw B(813)}class oc{"promise.resolve"(e,t){return new yt(e,t,"promise","bind")}}Kg=Symbol.metadata;oc[Kg]={[cs]:ii.create([{pattern:"promise.resolve",symbols:""}],oc)};class ac{then(e,t){return new yt(e,t,"then","from-view")}}Gg=Symbol.metadata;ac[Gg]={[cs]:ii.create([{pattern:"then",symbols:""}],ac)};class lc{catch(e,t){return new yt(e,t,"catch","from-view")}}Xg=Symbol.metadata;lc[Xg]={[cs]:ii.create([{pattern:"catch",symbols:""}],lc)};class e_{constructor(){this._needsApply=!1,this._element=x(Rn),this._platform=x(je)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,s=this.value;s&&!t?e.focus():!s&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}e_.$au={type:Ze,name:"focus",bindables:{value:{mode:qp}}};class t_{constructor(){this.position="beforeend",this.strict=!1;const e=x(Ct),t=x(ot),s=x(je);this._platform=s,this._resolvedTarget=s.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=Zy(s)),G1(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const s=T(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Re(s)&&s.catch(Gl)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const s=T(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Re(s)&&s.catch(Gl)}_activating(e,t){const{activating:s,callbackContext:n,view:r}=this;return T(s==null?void 0:s.call(n,t,r),()=>this._activate(e,t))}_activate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.insertBefore(this._targetLocation);else return T(n.activate(e??n,s,s.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:s,view:n}=this;return t==null?void 0:t.call(s,e,n)}_deactivating(e,t){const{deactivating:s,callbackContext:n,view:r}=this;return T(s==null?void 0:s.call(n,t,r),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.remove();else return T(n.deactivate(e,s),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:s,view:n}=this;return T(t==null?void 0:t.call(s,e,n),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let s=this.target,n=this.renderContext;if(s===""){if(this.strict)throw B(811);return t.body}if(J(s)){let r=t;J(n)&&(n=t.querySelector(n)),n instanceof e.Node&&(r=n),s=r.querySelector(s)}if(s instanceof e.Node)return s;if(s==null){if(this.strict)throw B(812);return t.body}return s}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const s=this._targetLocation,n=s.$start,r=e.parentNode,o=[n,s];switch(t){case"beforeend":go(e,null,o);break;case"afterbegin":go(e,e.firstChild,o);break;case"beforebegin":go(r,e,o);break;case"afterend":go(r,e.nextSibling,o);break;default:throw B(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}t_.$au={type:Ze,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let vC;class Ea{constructor(){var h,f,d,g;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=x(ei),t=x(ot),s=x(In),n=x(ji),r=this.name=s.data.name,o=(h=s.projections)==null?void 0:h[ug],a=(d=(f=e.instruction)==null?void 0:f.projections)==null?void 0:d[r],l=e.controller.container;let c,u;a==null?(u=l.createChild({inheritParentResources:!0}),c=n.getViewFactory(o??vC??(vC=Me.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),u),this._hasProjection=!1):(u=l.createChild(),u.useResources(e.parent.controller.container),me(u,ei,new Se(void 0,e.parent)),c=n.getViewFactory(a,u),this._hasProjection=!0,this._slotwatchers=((g=l.getAll(s1,!1))==null?void 0:g.filter(p=>p.slotName==="*"||p.slotName===r))??q),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=q)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let s=t.$start.nextSibling;for(;s!=null&&s!==t;)s.nodeType!==8&&e.push(s),s=s.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var r;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((r=t.parent)==null?void 0:r.viewModel)instanceof Ea;)t=t.parent.parent;const s=t.scope.bindingContext;let n;this._hasProjection&&(n=this._hdrContext.controller.scope.parent,(this._outerScope=Oe.fromParent(n,n.bindingContext)).overrideContext.$host=this.expose??s)}attaching(e,t){return T(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{(this._hasSlotWatcher||Z(this.slotchange))&&(this._slotwatchers.forEach(s=>s.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(s=>s.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=hg(t,s=>{bC(e,s)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var n;const e=this.nodes,t=new Set(this._subs);let s;this._attached&&((n=this.slotchange)==null||n.call(void 0,this.name,e));for(s of t)s.handleSlotChange(this,e)}}Ea.$au={type:Li,name:"au-slot",template:null,containerless:!0,processContent(i,e,t){t.name=i.getAttribute("name")??ug;let s=i.firstChild,n=null;for(;s!==null;)n=s.nextSibling,e1(s)&&s.hasAttribute(t1)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${s.nodeName} au-slot>".`,"This element will be ignored and removed"),i.removeChild(s)),s=n},bindables:["expose","slotchange"]};const bo=(i,e)=>i.compareDocumentPosition(e),bC=(i,e)=>{for(const{addedNodes:t,removedNodes:s,nextSibling:n}of e){let r=0,o=t.length,a;for(;r<o;++r)if(a=t[r],bo(i.$start,a)===4&&bo(i,a)===2)return!0;if(s.length>0&&n!=null&&bo(i.$start,n)===4&&bo(i,n)===2)return!0}};class s_{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=x(Ni),this.parent=x(Qr),this._host=x(Rn),this._location=x(ot),this._platform=x(je),this._rendering=x(ji),this._instruction=x(In),this._contextFactory=x(qv(yC)),this._compiler=x(pa),this._hydrationContext=x(ei),this._exprParser=x(An),this._observerLocator=x(Tn),this._attached=!1}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._attached=!0,this._composing=T(this.queue(new Pd(this.template,this.component,this.model,void 0),e),s=>{this._contextFactory._isCurrent(s)&&(this._composing=void 0)})}detaching(e){this._attached=!1;const t=this._composition,s=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,T(s,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(this._attached&&!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===_t){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=T(this._composing,()=>T(this.queue(new Pd(this.template,this.component,this.model,e),void 0),s=>{this._contextFactory._isCurrent(s)&&(this._composing=void 0)}))}}queue(e,t){const s=this._contextFactory,n=this._composition;return T(s.create(e),r=>s._isCurrent(r)?T(this.compose(r),o=>s._isCurrent(r)?T(o.activate(t),()=>s._isCurrent(r)?(this._composition=o,T(n==null?void 0:n.deactivate(t),()=>r)):T(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),r))):(o.controller.dispose(),r)):r)}compose(e){const{_template:t,_component:s,_model:n}=e.change,{_container:r,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,s),u=r.createChild(),h=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(h,a);let f;c==null?f=this.tag==null?xr(h):null:f=c.containerless?xr(h):null;const d=()=>{var _;if(h.remove(),f!=null){let b=f.$start.nextSibling,v=null;for(;b!==null&&b!==f;)v=b.nextSibling,b.remove(),b=v;(_=f.$start)==null||_.remove(),f.remove()}},g=this._createComponentInstance(u,typeof s=="string"?c.Type:s,h,f),p=()=>{const _=l.captures??q;if(c!==null){const b=c.capture,[v,S]=_.reduce((C,O)=>{const E=!(O.target in c.bindables)&&(b===!0||Z(b)&&!!b(O.target));return C[E?0:1].push(O),C},[[],[]]),m=Xe.$el(u,g,h,{projections:l.projections,captures:v},c,f);return this._createSpreadBindings(h,c,S).forEach(C=>m.addBinding(C)),new Ed(m,C=>m.activate(C??m,o,o.scope.parent),C=>T(m.deactivate(C??m,o),d),C=>{var O;return(O=g.activate)==null?void 0:O.call(g,C)},e)}else{const b=Me.create({name:Q.generateName(),template:t}),v=this._rendering.getViewFactory(b,u),S=Xe.$view(v,o),m=this.scopeBehavior==="auto"?Oe.fromParent(this.parent.scope,g):Oe.create(g);return S.setHost(h),f==null?this._createSpreadBindings(h,b,_).forEach(C=>S.addBinding(C)):S.setLocation(f),new Ed(S,C=>S.activate(C??S,o,m),C=>T(S.deactivate(C??S,o),d),C=>{var O;return(O=g.activate)==null?void 0:O.call(g,C)},e)}};return"activate"in g?T(g.activate(n),()=>p()):p()}_createComponentInstance(e,t,s,n){if(t==null)return new wC;if(typeof t=="object")return t;const r=this._platform;Gr(e,s,r),me(e,ot,new Se("IRenderLocation",n));const o=e.invoke(t);return me(e,t,new Se("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const n=Q.find(e,t);if(n==null)throw B(806,t);return n}const s=Z(t)?t:t==null?void 0:t.constructor;return Q.isType(s,void 0)?Q.getDefinition(s,null):null}_createSpreadBindings(e,t,s){const n=new Pg(this.$controller,{projections:null,captures:s},this._hydrationContext.parent);return Sa.create(n,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}s_.$au={type:Li,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:i=>{if(i==="scoped"||i==="auto")return i;throw B(805,i)}},{name:"composing",mode:Es},{name:"composition",mode:Es},"tag"]};class wC{}class yC{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return T(e.load(),t=>new CC(++this.id,t))}invalidate(){this.id++}}class Pd{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}load(){return Re(this._template)||Re(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new Id(e,t,this._model,this._src)):new Id(this._template,this._component,this._model,this._src)}}class Id{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}}class CC{constructor(e,t){this.id=e,this.change=t}}class Ed{constructor(e,t,s,n,r){this.controller=e,this.start=t,this.stop=s,this.update=n,this.context=r,this.state=0}activate(e){if(this.state!==0)throw B(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw B(808);default:this.state=-1}}}const kC=oe("ISanitizer",i=>i.singleton(class{sanitize(){throw B(99,"sanitize")}}));class i_{constructor(){this._sanitizer=x(kC)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}i_.$au={type:Zi,name:"sanitize"};class n_{constructor(){this.el=x(Rn),this.p=x(je),this._isActive=!1,this._isQueued=!1,this.$val="",this.$prio="",this.update=()=>{this._isQueued=!1,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=x(In);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){this._isActive=!1,this._isQueued=!1}valueChanged(){this._isActive&&!this._isQueued&&(this._isQueued=!0,rs(this.update))}}n_.$au={type:Ze,name:"show",bindables:["value"],aliases:["hide"]};const $C=[rC,py,dh],SC=[Nl,Ll,Dl,Yy],xC=[wp,_p,vp,mp,bp,yp,Ap,Cp,kp,xp,Sp,$p,Pp],AC=[ig,Zp,eg,tg,ng,rg,sg,i_,Go,Hg,Ug,qg,fh,ph,Qg,gh,Jg,Yg,Zg,oc,ac,lc,Fg,Vg,zg,s_,t_,e_,n_,Ea],PC=[u1,d1,c1,h1,n1,r1,o1,a1,l1,g1,C1,_1,m1,v1,w1,f1,k1,$1],IC=r_(dt);function r_(i){return{optionsProvider:i,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return i(t),e.register(ih(Mp,t.coercingOptions),Bf,...$C,...AC,...SC,...xC,...PC)},customize(e){return r_(e??i)}}}const EC=qs.getOrCreate(globalThis);function TC(){return at.createContainer().register(Et.instance(je,EC),IC)}class wr extends sC{constructor(e=TC()){super(e)}static app(e){return new wr().app(e)}static enhance(e){return new wr().enhance(e)}static register(...e){return new wr().register(...e)}app(e){if(Q.isType(e)){const t=Q.getDefinition(e);let s=document.querySelector(t.name);return s===null&&(s=document.body),super.app({host:s,component:e})}return super.app(e)}}const o_="my-app",cc=`<template>\r
    <app-header></app-header>\r
    <main>\r
        <au-viewport></au-viewport>\r
\r
    </main>\r
    <toast-notifications></toast-notifications>\r
    <payment-methods></payment-methods>\r
    <app-footer></app-footer>\r
</template>`,a_=[],l_={};let gl;function RC(i){gl||(gl=Q.define({name:o_,template:cc,dependencies:a_,bindables:l_})),i.register(gl)}const OC=Object.freeze(Object.defineProperty({__proto__:null,bindables:l_,default:cc,dependencies:a_,name:o_,register:RC,template:cc},Symbol.toStringTag,{value:"Module"})),c_="app-header",hc=`<template>\r
    <header class="main-header">\r
        <div class="header-content">\r
            <div class="header-left">\r
                <button class="hamburger-btn" aria-label="Open menu" aria-expanded.bind="isMobileMenuOpen" click.trigger="toggleMobileMenu()">\r
                    <img src="/src/assets/icons/Hamburger_icon.png" alt="Menu" class="hamburger-icon" />\r
                </button>\r
                <a class="logo-link" load="/" href="/" aria-label="Home">\r
                    <img src="/src/assets/logo/chicks-logo-large.svg" alt="Logo" class="header-logo" />\r
                </a>\r
            </div>\r
            <category-navigation></category-navigation>\r
            <div class="header-spacer"></div>\r
            <div class="header-right">\r
                <cart-icon count.bind="cartCount"></cart-icon>\r
                <currency-selector></currency-selector>\r
                <button class="header-signin sign-in-button">\r
                    SIGN IN\r
                    <span class="user-icon" aria-hidden="true">\r
                        <svg class="user-icon-outline" width="22" height="22" viewBox="0 0 24 24" fill="none"\r
                            stroke="#23243a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
                            <circle cx="12" cy="8" r="4" />\r
                            <path d="M4 20c0-2.5 3.5-4 8-4s8 1.5 8 4" />\r
                        </svg>\r
                        <svg class="user-icon-filled" width="22" height="22" viewBox="0 0 24 24" fill="#23243a">\r
                            <circle cx="12" cy="8" r="4" />\r
                            <path d="M4 20c0-2.5 3.5-4 8-4s8 1.5 8 4" />\r
                        </svg>\r
                    </span>\r
                </button>\r
            </div>\r
        </div>\r
        <!-- Mobile overlay and drawer -->\r
        <div if.bind="isMobileMenuOpen" class="mobile-overlay" click.trigger="closeMobileMenu()"></div>\r
        <aside class="mobile-drawer \${isMobileMenuOpen ? 'open' : ''}" role="dialog" aria-modal="true">\r
            <div class="mobile-drawer-header">\r
                <a class="logo-link" load="/" href="/" aria-label="Home">\r
                    <img src="/src/assets/logo/chicks-logo-large.svg" alt="Logo" class="header-logo" />\r
                </a>\r
                <button class="drawer-close" aria-label="Close" click.trigger="closeMobileMenu()"></button>\r
            </div>\r
            <nav class="mobile-nav">\r
                <ul class="mobile-categories">\r
                    <li repeat.for="cat of ['CURRENCY','ITEMS','ACCOUNTS','SERVICES','SWAP','SELL']" class="mobile-cat-item">\${cat}</li>\r
                </ul>\r
            </nav>\r
            <div class="mobile-actions">\r
                <cart-icon count.bind="cartCount"></cart-icon>\r
                <currency-selector></currency-selector>\r
                <button class="header-signin sign-in-button">SIGN IN</button>\r
            </div>\r
        </aside>\r
    </header>\r
</template>`,h_=[],u_={};let _l;function BC(i){_l||(_l=Q.define({name:c_,template:hc,dependencies:h_,bindables:u_})),i.register(_l)}const MC=Object.freeze(Object.defineProperty({__proto__:null,bindables:u_,default:hc,dependencies:h_,name:c_,register:BC,template:hc},Symbol.toStringTag,{value:"Module"}));var LC=Object.create,mh=Object.defineProperty,NC=Object.getOwnPropertyDescriptor,DC=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),d_=i=>{throw TypeError(i)},jC=(i,e,t)=>e in i?mh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,FC=(i,e)=>mh(i,"name",{value:e,configurable:!0}),VC=i=>[,,,LC(null)],zC=["class","method","getter","setter","accessor","field","value","get","set"],f_=i=>i!==void 0&&typeof i!="function"?d_("Function expected"):i,HC=(i,e,t,s,n)=>({kind:zC[i],name:e,metadata:s,addInitializer:r=>t._?d_("Already initialized"):n.push(f_(r||null))}),UC=(i,e)=>jC(e,DC("metadata"),i[3]),qC=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},WC=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&NC(n,t));FC(n,t);for(var g=s.length-1;g>=0;g--)l=HC(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,f_(o)&&(n=o);return UC(i,n),d&&mh(n,t,d),u?c^4?r:d:n},p_,vh;p_=[Qv()];const su=class su{constructor(e){this.ea=e,this.items=[]}initializing(){try{const e=localStorage.getItem("cart:items");if(e){const t=JSON.parse(e);Array.isArray(t)&&(this.items=t,this.notify())}}catch{}}get count(){return this.items.reduce((e,t)=>e+(t.qty??1),0)}getItems(){return this.items}add(e,t=1){const s=this.items.find(n=>n.id===e.id);s?s.qty=(s.qty??1)+t:this.items.push({...e,qty:t}),this.persist(),this.notify(),this.ea.publish("cart:added",{item:e,qty:t})}remove(e,t=1){const s=this.items.findIndex(n=>n.id===e);if(s>-1){const n=this.items[s],r=(n.qty??1)-t;r>0?n.qty=r:this.items.splice(s,1),this.persist(),this.notify()}}clear(){this.items=[],this.persist(),this.notify()}notify(){this.ea.publish("cart:changed",{count:this.count,items:this.items})}persist(){try{localStorage.setItem("cart:items",JSON.stringify(this.items))}catch{}}};su.inject=[da];let ti=su;vh=VC();ti=WC(vh,0,"CartService",p_,ti);qC(vh,1,ti);const g_="cart-icon",uc=`<template>\r
    <a class="cart-icon-btn" load="/cart" href="/cart" role="button">\r
        <span class="cart-icon-svg" aria-hidden="true">\r
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
                <circle cx="9" cy="21" r="1" />\r
                <circle cx="20" cy="21" r="1" />\r
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-7.39H6" />\r
            </svg>\r
            <span class="cart-badge">\${count}</span>\r
        </span>\r
        <span class="cart-label">Cart</span>\r
    </a>\r
</template>`,__=[],m_={};let ml;function QC(i){ml||(ml=Q.define({name:g_,template:uc,dependencies:__,bindables:m_})),i.register(ml)}const KC=Object.freeze(Object.defineProperty({__proto__:null,bindables:m_,default:uc,dependencies:__,name:g_,register:QC,template:uc},Symbol.toStringTag,{value:"Module"}));var GC=Object.create,bh=Object.defineProperty,XC=Object.getOwnPropertyDescriptor,JC=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Xr=i=>{throw TypeError(i)},YC=(i,e,t)=>e in i?bh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Td=(i,e)=>bh(i,"name",{value:e,configurable:!0}),ZC=i=>[,,,GC(null)],v_=["class","method","getter","setter","accessor","field","value","get","set"],Gn=i=>i!==void 0&&typeof i!="function"?Xr("Function expected"):i,ek=(i,e,t,s,n)=>({kind:v_[i],name:e,metadata:s,addInitializer:r=>t._?Xr("Already initialized"):n.push(Gn(r||null))}),tk=(i,e)=>YC(e,JC("metadata"),i[3]),dc=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},b_=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,f=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?f?1:2:0,p=v_[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!f&&(n=n.prototype),h<5&&(h>3||!d)&&XC(h<4?n:{get[t](){return Rd(this,r)},set[t](m){return Od(this,r,m)}},t));h?d&&h<4&&Td(r,(h>2?"set ":h>1?"get ":"")+t):Td(n,t);for(var S=s.length-1;S>=0;S--)c=ek(h,t,l={},i[3],b),h&&(c.static=f,c.private=d,u=c.access={has:d?m=>sk(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Rd:ik)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,C)=>Od(m,n,C,h^4?r:v.set):(m,C)=>m[t]=C)),a=(0,s[S])(h?h<4?d?r:v[p]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?Gn(a)&&(h>4?_.unshift(a):h?d?r=a:v[p]=a:n=a):typeof a!="object"||a===null?Xr("Object expected"):(Gn(o=a.get)&&(v.get=o),Gn(o=a.set)&&(v.set=o),Gn(o=a.init)&&_.unshift(o));return h||tk(i,n),v&&bh(n,t,v),d?h^4?r:v:n},wh=(i,e,t)=>e.has(i)||Xr("Cannot "+t),sk=(i,e)=>Object(e)!==e?Xr('Cannot use the "in" operator on this value'):i.has(e),Rd=(i,e,t)=>(wh(i,e,"read from private field"),t?t.call(i):e.get(i)),Od=(i,e,t,s)=>(wh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),ik=(i,e,t)=>(wh(i,e,"access private method"),t),w_,y_,mn;y_=[lt({...KC,name:"cart-icon"})],w_=[$e];class Pr{constructor(){this.count=dc(mn,8,this,0),dc(mn,11,this)}}mn=ZC();b_(mn,5,"count",w_,Pr);Pr=b_(mn,0,"CartIcon",y_,Pr);dc(mn,1,Pr);var nk=Object.create,yh=Object.defineProperty,rk=Object.getOwnPropertyDescriptor,ok=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),C_=i=>{throw TypeError(i)},ak=(i,e,t)=>e in i?yh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,lk=(i,e)=>yh(i,"name",{value:e,configurable:!0}),ck=i=>[,,,nk(null)],hk=["class","method","getter","setter","accessor","field","value","get","set"],k_=i=>i!==void 0&&typeof i!="function"?C_("Function expected"):i,uk=(i,e,t,s,n)=>({kind:hk[i],name:e,metadata:s,addInitializer:r=>t._?C_("Already initialized"):n.push(k_(r||null))}),dk=(i,e)=>ak(e,ok("metadata"),i[3]),fk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},pk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&rk(n,t));lk(n,t);for(var g=s.length-1;g>=0;g--)l=uk(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,k_(o)&&(n=o);return dk(i,n),d&&yh(n,t,d),u?c^4?r:d:n},$_,Ch;const gk=`<template>
	<div class="currency-selector-wrapper">
		<button class="currency-btn" type="button" click.trigger="isOpen = !isOpen">
			<span class="currency-label">\${selectedCurrency}</span>
			<svg class="currency-arrow" aria-expanded.bind="isOpen" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<polyline points="6 9 12 15 18 9" />
			</svg>
		</button>
		<div if.bind="isOpen" class="currency-popup">
			<ul>
				<li repeat.for="currency of currencies" class="currency-option" click.trigger="selectCurrency(currency)">
					\${currency}
				</li>
			</ul>
		</div>
	</div>
</template>`;$_=[lt({name:"currency-selector",template:gk})];class Jo{constructor(){this.isOpen=!1,this.selectedCurrency="USD",this.currencies=["USD","EUR","GBP","AUD","BRL","ARS","CLP","COP","MXN"],this.closeTimeout=null;const e=localStorage.getItem("selectedCurrency");e&&this.currencies.includes(e)&&(this.selectedCurrency=e)}open(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.isOpen=!0}close(){this.closeTimeout=setTimeout(()=>{this.isOpen=!1,this.closeTimeout=null},200)}selectCurrency(e){this.selectedCurrency=e,localStorage.setItem("selectedCurrency",e),this.isOpen=!1}}Ch=ck();Jo=pk(Ch,0,"CurrencySelector",$_,Jo);fk(Ch,1,Jo);var _k=Object.create,kh=Object.defineProperty,mk=Object.getOwnPropertyDescriptor,vk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Jr=i=>{throw TypeError(i)},bk=(i,e,t)=>e in i?kh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Bd=(i,e)=>kh(i,"name",{value:e,configurable:!0}),wk=i=>[,,,_k(null)],S_=["class","method","getter","setter","accessor","field","value","get","set"],Xn=i=>i!==void 0&&typeof i!="function"?Jr("Function expected"):i,yk=(i,e,t,s,n)=>({kind:S_[i],name:e,metadata:s,addInitializer:r=>t._?Jr("Already initialized"):n.push(Xn(r||null))}),Ck=(i,e)=>bk(e,vk("metadata"),i[3]),fc=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},x_=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,f=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?f?1:2:0,p=S_[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!f&&(n=n.prototype),h<5&&(h>3||!d)&&mk(h<4?n:{get[t](){return Md(this,r)},set[t](m){return Ld(this,r,m)}},t));h?d&&h<4&&Bd(r,(h>2?"set ":h>1?"get ":"")+t):Bd(n,t);for(var S=s.length-1;S>=0;S--)c=yk(h,t,l={},i[3],b),h&&(c.static=f,c.private=d,u=c.access={has:d?m=>kk(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Md:$k)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,C)=>Ld(m,n,C,h^4?r:v.set):(m,C)=>m[t]=C)),a=(0,s[S])(h?h<4?d?r:v[p]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?Xn(a)&&(h>4?_.unshift(a):h?d?r=a:v[p]=a:n=a):typeof a!="object"||a===null?Jr("Object expected"):(Xn(o=a.get)&&(v.get=o),Xn(o=a.set)&&(v.set=o),Xn(o=a.init)&&_.unshift(o));return h||Ck(i,n),v&&kh(n,t,v),d?h^4?r:v:n},$h=(i,e,t)=>e.has(i)||Jr("Cannot "+t),kk=(i,e)=>Object(e)!==e?Jr('Cannot use the "in" operator on this value'):i.has(e),Md=(i,e,t)=>($h(i,e,"read from private field"),t?t.call(i):e.get(i)),Ld=(i,e,t,s)=>($h(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),$k=(i,e,t)=>($h(i,e,"access private method"),t),A_,P_,vn;const Sk=`<template>
  <ul class="main-categories-list">
    <li repeat.for="cat of categories" class="main-category-item">
      <button class="main-category-btn" type="button" click.trigger="cat.isOpen = !cat.isOpen">
        <span>\${cat.name}</span>
        <svg class="main-category-arrow" aria-expanded.bind="cat.isOpen" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 12 15 18 9" />
        </svg>
      </button>
      <div if.bind="cat.isOpen" class="main-category-dropdown">
        <div class="main-category-dropdown-content">
          <!-- Aqu puedes renderizar subcategoras, links, etc. -->
          <span class="dropdown-placeholder">Contenido de \${cat.name}</span>
        </div>
      </div>
    </li>
  </ul>
</template>`;P_=[lt({name:"category-navigation",template:Sk})],A_=[$e];class Ir{constructor(){this.categories=fc(vn,8,this,[{name:"CURRENCY"},{name:"ITEMS"},{name:"ACCOUNTS"},{name:"SERVICES"},{name:"SWAP"},{name:"SELL"}]),fc(vn,11,this)}open(e){this.categories.forEach(t=>t.isOpen=!1),e.isOpen=!0}close(e){e.isOpen=!1}}vn=wk();x_(vn,5,"categories",A_,Ir);Ir=x_(vn,0,"CategoryNavigation",P_,Ir);fc(vn,1,Ir);var xk=Object.create,Sh=Object.defineProperty,Ak=Object.getOwnPropertyDescriptor,Pk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),I_=i=>{throw TypeError(i)},Ik=(i,e,t)=>e in i?Sh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ek=(i,e)=>Sh(i,"name",{value:e,configurable:!0}),Tk=i=>[,,,xk(null)],Rk=["class","method","getter","setter","accessor","field","value","get","set"],E_=i=>i!==void 0&&typeof i!="function"?I_("Function expected"):i,Ok=(i,e,t,s,n)=>({kind:Rk[i],name:e,metadata:s,addInitializer:r=>t._?I_("Already initialized"):n.push(E_(r||null))}),Bk=(i,e)=>Ik(e,Pk("metadata"),i[3]),Mk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},Lk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&Ak(n,t));Ek(n,t);for(var g=s.length-1;g>=0;g--)l=Ok(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,E_(o)&&(n=o);return Bk(i,n),d&&Sh(n,t,d),u?c^4?r:d:n},T_,xh;T_=[lt({...MC,name:"app-header"}),Sn(ti,da)];const iu=class iu{constructor(e,t){this.cart=e,this.ea=t,this.cartCount=0,this.sub=void 0,this.isMobileMenuOpen=!1,this.onKeyDown=s=>{s.key==="Escape"&&this.isMobileMenuOpen&&this.closeMobileMenu()}}binding(){this.cartCount=this.cart.count,this.sub=this.ea.subscribe("cart:changed",e=>{this.cartCount=e.count??0,console.log("Cart updated, new count:",this.cartCount)})}detaching(){var e;(e=this.sub)==null||e.dispose(),window.removeEventListener("keydown",this.onKeyDown);try{document.body.style.overflow=""}catch{}}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen,this.updateBodyScroll()}closeMobileMenu(){this.isMobileMenuOpen=!1,this.updateBodyScroll()}updateBodyScroll(){try{const e=document.body;if(!e)return;this.isMobileMenuOpen?e.style.overflow="hidden":e.style.overflow=""}catch{}}attached(){window.addEventListener("keydown",this.onKeyDown)}};iu.dependencies=[Pr,Jo,Ir];let bn=iu;xh=Tk();bn=Lk(xh,0,"AppHeader",T_,bn);Mk(xh,1,bn);const R_="app-footer",pc=`<template>\r
  \r
  <footer class="footer">\r
    <div class="grid-container">\r
      <div class="footer-top-box">\r
        <div class="footer-social-row">\r
          <a href="https://facebook.com" target="_blank" rel="noopener" class="footer-social-icon facebook"\r
            aria-label="Facebook">\r
            <img src="/src/assets/icons/facebook.svg" class="footer-social-icon-img" alt="Facebook" />\r
          </a>\r
          <a href="https://instagram.com" target="_blank" rel="noopener" class="footer-social-icon instagram"\r
            aria-label="Instagram">\r
            <img src="/src/assets/icons/instagram.svg" class="footer-social-icon-img" alt="Instagram" />\r
          </a>\r
          <a href="https://twitter.com" target="_blank" rel="noopener" class="footer-social-icon twitter"\r
            aria-label="Twitter">\r
            <img src="/src/assets/icons/twitter.svg" class="footer-social-icon-img" alt="Twitter" />\r
          </a>\r
          <a href="https://discord.com" target="_blank" rel="noopener" class="footer-social-icon discord"\r
            aria-label="Discord">\r
            <img src="/src/assets/icons/discord.svg" class="footer-social-icon-img" alt="Discord" />\r
          </a>\r
        </div>\r
\r
        <div class="footer-container">\r
          <div class="footer-left-box">\r
            <div class="footer-column-title">\r
              <img src="/src/assets/logo/chicks-logo-large.svg" alt="ChicksGold Logo" class="footer-logo" />\r
            </div>\r
            <div class="footer-support-email">\r
              <a href="mailto:support@chicksgold.com" id="footer-support-email-link">support@chicksgold.com</a>\r
            </div>\r
          </div>\r
          <div class="footer-center-box">\r
            <div class="footer-columns">\r
              <div class="footer-column">\r
                <h4 class="footer-column-title">Chicks Gold</h4>\r
                <ul class="footer-column-list">\r
                  <li><a href="#">Games</a></li>\r
                  <li><a href="#">About Us</a></li>\r
                  <li><a href="#">Blog</a></li>\r
                  <li><a href="#">Sitemap</a></li>\r
                </ul>\r
              </div>\r
              <div class="footer-column">\r
                <h4 class="footer-column-title">Support</h4>\r
                <ul class="footer-column-list">\r
                  <li><a href="#">Contact Us</a></li>\r
                  <li><a href="#">FAQ</a></li>\r
\r
                </ul>\r
              </div>\r
              <div class="footer-column">\r
                <h4 class="footer-column-title">Legal</h4>\r
                <ul class="footer-column-list">\r
                  <li><a href="#">Cookies Policy</a></li>\r
                  <li><a href="#">Terms of Service</a></li>\r
                  <li><a href="#">Copyright Policy</a></li>\r
                </ul>\r
              </div>\r
            </div>\r
          </div>\r
          <div class="footer-right-box">\r
            <h3 class="footer-trustpilot-text">Trustpilot Reviews</h3>\r
            <div class="footer-trustpilot-row">\r
              <span class="footer-trustpilot-stars">\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
              </span>\r
              <span class="footer-trustpilot-text-counter">5/5</span>\r
            </div>\r
          </div>\r
\r
        </div>\r
        <div class="row-center">\r
          <p class="footer-bottom-text"> 2024 - 2025 ChicksGold.com. All rights reserved.</p>\r
        </div>\r
\r
      </div>\r
  </footer>\r
</template>`,O_=[],B_={};let vl;function Nk(i){vl||(vl=Q.define({name:R_,template:pc,dependencies:O_,bindables:B_})),i.register(vl)}const Dk=Object.freeze(Object.defineProperty({__proto__:null,bindables:B_,default:pc,dependencies:O_,name:R_,register:Nk,template:pc},Symbol.toStringTag,{value:"Module"}));var jk=Object.create,Ah=Object.defineProperty,Fk=Object.getOwnPropertyDescriptor,Vk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),M_=i=>{throw TypeError(i)},zk=(i,e,t)=>e in i?Ah(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Hk=(i,e)=>Ah(i,"name",{value:e,configurable:!0}),Uk=i=>[,,,jk(null)],qk=["class","method","getter","setter","accessor","field","value","get","set"],L_=i=>i!==void 0&&typeof i!="function"?M_("Function expected"):i,Wk=(i,e,t,s,n)=>({kind:qk[i],name:e,metadata:s,addInitializer:r=>t._?M_("Already initialized"):n.push(L_(r||null))}),Qk=(i,e)=>zk(e,Vk("metadata"),i[3]),Kk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},Gk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&Fk(n,t));Hk(n,t);for(var g=s.length-1;g>=0;g--)l=Wk(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,L_(o)&&(n=o);return Qk(i,n),d&&Ah(n,t,d),u?c^4?r:d:n},N_,Ph;N_=[lt({...Dk,name:"app-footer"})];class Yo{constructor(){this.year=new Date().getFullYear()}}Ph=Uk();Yo=Gk(Ph,0,"AppFooter",N_,Yo);Kk(Ph,1,Yo);const D_="payment-methods",gc=`<template>\r
  <div class="payment-methods">\r
   <div class="container">\r
      <ul class="payment-methods-list">\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/visa.svg" alt="Visa" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/mastercard-old.svg" alt="Mastercard" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/amex.svg" alt="American Express" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/skrill.svg" alt="Skrill" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/bitcoin.svg" alt="Bitcoin" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/ethereum.svg" alt="Ethereum" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/bitcoin-cash.svg" alt="Bitcoin cash" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/litecoin.svg" alt="Litecoin" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item ">\r
          <a href="#" class="payment-more">and 50+ more</a>\r
        </li>\r
      </ul>\r
    \r
   </div>\r
  </div>\r
</template>\r
`,j_=[],F_={};let bl;function Xk(i){bl||(bl=Q.define({name:D_,template:gc,dependencies:j_,bindables:F_})),i.register(bl)}const Jk=Object.freeze(Object.defineProperty({__proto__:null,bindables:F_,default:gc,dependencies:j_,name:D_,register:Xk,template:gc},Symbol.toStringTag,{value:"Module"}));var Yk=Object.create,Ih=Object.defineProperty,Zk=Object.getOwnPropertyDescriptor,e$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),V_=i=>{throw TypeError(i)},t$=(i,e,t)=>e in i?Ih(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,s$=(i,e)=>Ih(i,"name",{value:e,configurable:!0}),i$=i=>[,,,Yk(null)],n$=["class","method","getter","setter","accessor","field","value","get","set"],z_=i=>i!==void 0&&typeof i!="function"?V_("Function expected"):i,r$=(i,e,t,s,n)=>({kind:n$[i],name:e,metadata:s,addInitializer:r=>t._?V_("Already initialized"):n.push(z_(r||null))}),o$=(i,e)=>t$(e,e$("metadata"),i[3]),a$=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},l$=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&Zk(n,t));s$(n,t);for(var g=s.length-1;g>=0;g--)l=r$(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,z_(o)&&(n=o);return o$(i,n),d&&Ih(n,t,d),u?c^4?r:d:n},H_,Eh;H_=[lt({...Jk,name:"payment-methods"})];class Zo{}Eh=i$();Zo=l$(Eh,0,"PaymentMethods",H_,Zo);a$(Eh,1,Zo);const U_="toast-notifications",_c=`<template>\r
  <div class="toast-container" aria-live="polite" aria-atomic="true">\r
    <div repeat.for="t of toasts" class="toast \${t.state}">\r
      <div class="toast-icon" aria-hidden="true"></div>\r
      <div class="toast-content">\r
        <div class="toast-title">Added to cart</div>\r
        <div class="toast-body">\${t.message}</div>\r
      </div>\r
      <button class="toast-close" aria-label="Close" click.trigger="dismiss(t)"></button>\r
    </div>\r
  </div>\r
</template>\r
`,q_=[],W_={};let wl;function c$(i){wl||(wl=Q.define({name:U_,template:_c,dependencies:q_,bindables:W_})),i.register(wl)}const h$=Object.freeze(Object.defineProperty({__proto__:null,bindables:W_,default:_c,dependencies:q_,name:U_,register:c$,template:_c},Symbol.toStringTag,{value:"Module"}));var u$=Object.create,Th=Object.defineProperty,d$=Object.getOwnPropertyDescriptor,f$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Q_=i=>{throw TypeError(i)},p$=(i,e,t)=>e in i?Th(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,g$=(i,e)=>Th(i,"name",{value:e,configurable:!0}),_$=i=>[,,,u$(null)],m$=["class","method","getter","setter","accessor","field","value","get","set"],K_=i=>i!==void 0&&typeof i!="function"?Q_("Function expected"):i,v$=(i,e,t,s,n)=>({kind:m$[i],name:e,metadata:s,addInitializer:r=>t._?Q_("Already initialized"):n.push(K_(r||null))}),b$=(i,e)=>p$(e,f$("metadata"),i[3]),w$=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},y$=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&d$(n,t));g$(n,t);for(var g=s.length-1;g>=0;g--)l=v$(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,K_(o)&&(n=o);return b$(i,n),d&&Th(n,t,d),u?c^4?r:d:n},G_,Rh;G_=[lt({...h$,name:"toast-notifications"}),Sn(da)];class ea{constructor(e){this.ea=e,this.toasts=[],this.sub=void 0,this.nextId=1}attached(){this.sub=this.ea.subscribe("cart:added",e=>{var n;const t=((n=e==null?void 0:e.item)==null?void 0:n.name)??"Item",s=(e==null?void 0:e.qty)??1;this.show(`${s}  ${t} added to cart`)})}detaching(){var e;(e=this.sub)==null||e.dispose()}show(e,t=2500){const n={id:this.nextId++,message:e,timeout:t,state:"enter"};this.toasts.push(n),setTimeout(()=>n.state="visible");const r=setTimeout(()=>this.dismiss(n),t);n._timer=r}dismiss(e){e._timer&&clearTimeout(e._timer),e.state="leave",setTimeout(()=>{this.toasts=this.toasts.filter(t=>t.id!==e.id)},180)}}Rh=_$();ea=y$(Rh,0,"ToastNotifications",G_,ea);w$(Rh,1,ea);const X_="pagination",mc=`<template>\r
  <nav class="pagination">\r
    <button class="pagination-btn" disabled.bind="page === 1" click.trigger="changePage(page - 1)">\r
      &#60;\r
    </button>\r
    <template repeat.for="p of pages">\r
      <span if.bind="p === '...'" class="pagination-ellipsis"></span>\r
      <button else\r
              class.bind="p === page ? 'pagination-page active' : 'pagination-page'"\r
              click.trigger="changePage(p)">\r
        \${p}\r
      </button>\r
    </template>\r
    <button class="pagination-btn" disabled.bind="page === totalPages" click.trigger="changePage(page + 1)">\r
      &#62;\r
    </button>\r
  </nav>\r
</template>\r
`,J_=[],Y_={};let yl;function C$(i){yl||(yl=Q.define({name:X_,template:mc,dependencies:J_,bindables:Y_})),i.register(yl)}const k$=Object.freeze(Object.defineProperty({__proto__:null,bindables:Y_,default:mc,dependencies:J_,name:X_,register:C$,template:mc},Symbol.toStringTag,{value:"Module"}));var $$=Object.create,Oh=Object.defineProperty,S$=Object.getOwnPropertyDescriptor,x$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Yr=i=>{throw TypeError(i)},A$=(i,e,t)=>e in i?Oh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Nd=(i,e)=>Oh(i,"name",{value:e,configurable:!0}),P$=i=>[,,,$$(null)],Z_=["class","method","getter","setter","accessor","field","value","get","set"],Jn=i=>i!==void 0&&typeof i!="function"?Yr("Function expected"):i,I$=(i,e,t,s,n)=>({kind:Z_[i],name:e,metadata:s,addInitializer:r=>t._?Yr("Already initialized"):n.push(Jn(r||null))}),E$=(i,e)=>A$(e,x$("metadata"),i[3]),ws=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Zr=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,f=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?f?1:2:0,p=Z_[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!f&&(n=n.prototype),h<5&&(h>3||!d)&&S$(h<4?n:{get[t](){return Dd(this,r)},set[t](m){return jd(this,r,m)}},t));h?d&&h<4&&Nd(r,(h>2?"set ":h>1?"get ":"")+t):Nd(n,t);for(var S=s.length-1;S>=0;S--)c=I$(h,t,l={},i[3],b),h&&(c.static=f,c.private=d,u=c.access={has:d?m=>T$(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Dd:R$)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,C)=>jd(m,n,C,h^4?r:v.set):(m,C)=>m[t]=C)),a=(0,s[S])(h?h<4?d?r:v[p]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?Jn(a)&&(h>4?_.unshift(a):h?d?r=a:v[p]=a:n=a):typeof a!="object"||a===null?Yr("Object expected"):(Jn(o=a.get)&&(v.get=o),Jn(o=a.set)&&(v.set=o),Jn(o=a.init)&&_.unshift(o));return h||E$(i,n),v&&Oh(n,t,v),d?h^4?r:v:n},Bh=(i,e,t)=>e.has(i)||Yr("Cannot "+t),T$=(i,e)=>Object(e)!==e?Yr('Cannot use the "in" operator on this value'):i.has(e),Dd=(i,e,t)=>(Bh(i,e,"read from private field"),t?t.call(i):e.get(i)),jd=(i,e,t,s)=>(Bh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),R$=(i,e,t)=>(Bh(i,e,"access private method"),t),em,tm,sm,im,nm,st;nm=[lt({...k$,name:"pagination"})],im=[$e],sm=[$e],tm=[$e],em=[$e];class Ts{constructor(){this.page=ws(st,8,this,1),ws(st,11,this),this.pageSize=ws(st,12,this,10),ws(st,15,this),this.total=ws(st,16,this,0),ws(st,19,this),this.pageChange=ws(st,20,this),ws(st,23,this)}get totalPages(){return Math.max(1,Math.ceil(this.total/this.pageSize))}get pages(){const e=this.totalPages,t=this.page;return e<=7?Array.from({length:e},(s,n)=>n+1):t<=4?[...[1,2,3,4].filter(n=>n<=e),"...",e]:t>=e-3?[1,"...",...[e-3,e-2,e-1,e].filter(n=>n>=1)]:[1,"...",t-1,t,t+1,"...",e]}changePage(e){var t;typeof e!="number"||e<1||e>this.totalPages||e===this.page||(t=this.pageChange)==null||t.call(this,e)}}st=P$();Zr(st,5,"page",im,Ts);Zr(st,5,"pageSize",sm,Ts);Zr(st,5,"total",tm,Ts);Zr(st,5,"pageChange",em,Ts);Ts=Zr(st,0,"Pagination",nm,Ts);ws(st,1,Ts);const rm=Object.freeze(Object.defineProperty({__proto__:null,get Pagination(){return Ts}},Symbol.toStringTag,{value:"Module"})),om="toolbar",vc=`<template>\r
  <div class="toolbar-row">\r
    <!-- Game Dropdown -->\r
\r
    <div class="toolbar-dropdown toolbar-row-box">\r
      <button class="toolbar-btn" click.trigger="isGameOpen = !isGameOpen">\r
        <img src="/src/assets/icons/sword.svg" alt="Game Icon" class="toolbar-icon" />\r
        <span class="toolbar-selected">\r
          \${selectedGame && selectedGame !== 'All'\r
          ? (games.find(g => g.id == selectedGame)?.name || selectedGame)\r
          : 'Select a game'}\r
        </span>\r
        <svg class="toolbar-arrow\${isGameOpen ? ' open' : ''}" width="16" height="16" viewBox="0 0 24 24" fill="none"\r
          stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
          <polyline points="6 9 12 15 18 9" />\r
        </svg>\r
      </button>\r
      <ul if.bind="isGameOpen" class="toolbar-dropdown-list">\r
        <li class="toolbar-dropdown-item" click.trigger="selectGame('All')">All</li>\r
        <li repeat.for="game of games" class="toolbar-dropdown-item" click.trigger="selectGame(game.id)">\${game.name}</li>\r
      </ul>\r
    </div>\r
    <!-- Search -->\r
\r
    <div class="toolbar-search toolbar-row-box">\r
      <img src="/src/assets/icons/search.svg" alt="Search Icon" class="toolbar-search-icon" />\r
      <input type="text" class="toolbar-search-input" value.bind="search" placeholder="Search"\r
        input.trigger="onSearch()" />\r
\r
    </div>\r
\r
    <!-- Price Dropdown -->\r
\r
    <div class="toolbar-dropdown toolbar-row-box">\r
      <button class="toolbar-btn" click.trigger="isPriceOpen = !isPriceOpen">\r
        <img src="/src/assets/icons/money-sack.svg" alt="Price Icon" class="toolbar-icon" />\r
        <span class="toolbar-label">Price</span>\r
        <span class="toolbar-selected">\${selectedPrice || 'All'}</span>\r
        <svg class="toolbar-arrow\${isPriceOpen ? ' open' : ''}" width="16" height="16" viewBox="0 0 24 24" fill="none"\r
          stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
          <polyline points="6 9 12 15 18 9" />\r
        </svg>\r
      </button>\r
      <ul if.bind="isPriceOpen" class="toolbar-dropdown-list">\r
        <li class="toolbar-dropdown-item" click.trigger="selectPrice('All')">All</li>\r
        <li repeat.for="price of priceOptions" class="toolbar-dropdown-item" click.trigger="selectPrice(price)">\r
          \${price}\r
        </li>\r
      </ul>\r
    </div>\r
\r
    <!-- Item Type Dropdown -->\r
\r
    <div class="toolbar-dropdown toolbar-row-box">\r
      <button class="toolbar-btn" click.trigger="isTypeOpen = !isTypeOpen">\r
        <img src="/src/assets/icons/leaf.svg" alt="Type Icon" class="toolbar-icon" />\r
        <span class="toolbar-label">Item Type</span>\r
        <span class="toolbar-selected">\${selectedType || 'All'}</span>\r
        <svg class="toolbar-arrow\${isTypeOpen ? ' open' : ''}" width="16" height="16" viewBox="0 0 24 24" fill="none"\r
          stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
          <polyline points="6 9 12 15 18 9" />\r
        </svg>\r
      </button>\r
      <ul if.bind="isTypeOpen" class="toolbar-dropdown-list">\r
        <li class="toolbar-dropdown-item" click.trigger="selectType('All')">All</li>\r
        <li repeat.for="type of typeOptions" class="toolbar-dropdown-item" click.trigger="selectType(type)">\${type}\r
        </li>\r
      </ul>\r
    </div>\r
    <!-- Filters button for small screens -->\r
    <button class="filters-btn toolbar-row-box" click.trigger="toggleFilters()">\r
      <img src="/src/assets/icons/filter.svg" alt="Filter Icon" class="toolbar-icon" />\r
      <span>Filters</span>\r
    </button>\r
  </div>\r
  <!-- Bottom sheet filters panel -->\r
  <div if.bind="isFiltersOpen">\r
    <div class="filters-overlay" click.trigger="closeFilters()"></div>\r
    <div class="filters-panel" role="dialog" aria-modal="true">\r
      <div class="filters-header">\r
        <h3>Filters</h3>\r
        <button class="filters-close" aria-label="Close" click.trigger="closeFilters()"></button>\r
      </div>\r
      <div class="filters-section">\r
        <h4>Game</h4>\r
        <ul class="filters-list">\r
          <li class="filters-item \${selectedGame === 'All' || !selectedGame ? 'selected' : ''}" click.trigger="selectGame('All')">All</li>\r
          <li repeat.for="game of games" class="filters-item \${selectedGame == game.id ? 'selected' : ''}" click.trigger="selectGame(game.id)">\${game.name}</li>\r
        </ul>\r
      </div>\r
      <div class="filters-section">\r
        <h4>Price</h4>\r
        <ul class="filters-list">\r
          <li class="filters-item \${selectedPrice === 'All' || !selectedPrice ? 'selected' : ''}" click.trigger="selectPrice('All')">All</li>\r
          <li repeat.for="price of priceOptions" class="filters-item \${selectedPrice == price ? 'selected' : ''}" click.trigger="selectPrice(price)">\${price}</li>\r
        </ul>\r
      </div>\r
      <div class="filters-section">\r
        <h4>Item Type</h4>\r
        <ul class="filters-list">\r
          <li class="filters-item \${selectedType === 'All' || !selectedType ? 'selected' : ''}" click.trigger="selectType('All')">All</li>\r
          <li repeat.for="type of typeOptions" class="filters-item \${selectedType == type ? 'selected' : ''}" click.trigger="selectType(type)">\${type}</li>\r
        </ul>\r
      </div>\r
      <div class="filters-actions">\r
        <button class="filters-apply" click.trigger="closeFilters()">Apply</button>\r
      </div>\r
    </div>\r
  </div>\r
</template>`,am=[],lm={};let Cl;function O$(i){Cl||(Cl=Q.define({name:om,template:vc,dependencies:am,bindables:lm})),i.register(Cl)}const B$=Object.freeze(Object.defineProperty({__proto__:null,bindables:lm,default:vc,dependencies:am,name:om,register:O$,template:vc},Symbol.toStringTag,{value:"Module"}));var M$=Object.create,Mh=Object.defineProperty,L$=Object.getOwnPropertyDescriptor,N$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),eo=i=>{throw TypeError(i)},D$=(i,e,t)=>e in i?Mh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Fd=(i,e)=>Mh(i,"name",{value:e,configurable:!0}),j$=i=>[,,,M$(null)],cm=["class","method","getter","setter","accessor","field","value","get","set"],Yn=i=>i!==void 0&&typeof i!="function"?eo("Function expected"):i,F$=(i,e,t,s,n)=>({kind:cm[i],name:e,metadata:s,addInitializer:r=>t._?eo("Already initialized"):n.push(Yn(r||null))}),V$=(i,e)=>D$(e,N$("metadata"),i[3]),ze=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Bs=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,f=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?f?1:2:0,p=cm[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!f&&(n=n.prototype),h<5&&(h>3||!d)&&L$(h<4?n:{get[t](){return Vd(this,r)},set[t](m){return zd(this,r,m)}},t));h?d&&h<4&&Fd(r,(h>2?"set ":h>1?"get ":"")+t):Fd(n,t);for(var S=s.length-1;S>=0;S--)c=F$(h,t,l={},i[3],b),h&&(c.static=f,c.private=d,u=c.access={has:d?m=>z$(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Vd:H$)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,C)=>zd(m,n,C,h^4?r:v.set):(m,C)=>m[t]=C)),a=(0,s[S])(h?h<4?d?r:v[p]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?Yn(a)&&(h>4?_.unshift(a):h?d?r=a:v[p]=a:n=a):typeof a!="object"||a===null?eo("Object expected"):(Yn(o=a.get)&&(v.get=o),Yn(o=a.set)&&(v.set=o),Yn(o=a.init)&&_.unshift(o));return h||V$(i,n),v&&Mh(n,t,v),d?h^4?r:v:n},Lh=(i,e,t)=>e.has(i)||eo("Cannot "+t),z$=(i,e)=>Object(e)!==e?eo('Cannot use the "in" operator on this value'):i.has(e),Vd=(i,e,t)=>(Lh(i,e,"read from private field"),t?t.call(i):e.get(i)),zd=(i,e,t,s)=>(Lh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),H$=(i,e,t)=>(Lh(i,e,"access private method"),t),hm,um,dm,fm,pm,gm,_m,mm,vm,de;vm=[lt({...B$,name:"toolbar"})],mm=[$e],_m=[$e],gm=[$e],pm=[$e],fm=[$e],dm=[$e],um=[$e],hm=[$e];class Tt{constructor(){this.games=ze(de,8,this,[]),ze(de,11,this),this.priceOptions=ze(de,12,this,[]),ze(de,15,this),this.typeOptions=ze(de,16,this,[]),ze(de,19,this),this.selectedGame=ze(de,20,this,""),ze(de,23,this),this.selectedPrice=ze(de,24,this,""),ze(de,27,this),this.selectedType=ze(de,28,this,""),ze(de,31,this),this.search=ze(de,32,this,""),ze(de,35,this),this.filtersChange=ze(de,36,this),ze(de,39,this),this.isGameOpen=!1,this.isPriceOpen=!1,this.isTypeOpen=!1,this.isFiltersOpen=!1}selectGame(e){this.selectedGame=e,this.isGameOpen=!1,console.log("Selected game:",e),this.emitChange()}selectPrice(e){this.selectedPrice=e,this.isPriceOpen=!1,this.emitChange()}selectType(e){this.selectedType=e,this.isTypeOpen=!1,this.emitChange()}onSearch(){this.emitChange()}toggleFilters(){this.isFiltersOpen=!this.isFiltersOpen}closeFilters(){this.isFiltersOpen=!1}emitChange(){this.filtersChange&&this.filtersChange({game:this.selectedGame,price:this.selectedPrice,type:this.selectedType,search:this.search})}}de=j$();Bs(de,5,"games",mm,Tt);Bs(de,5,"priceOptions",_m,Tt);Bs(de,5,"typeOptions",gm,Tt);Bs(de,5,"selectedGame",pm,Tt);Bs(de,5,"selectedPrice",fm,Tt);Bs(de,5,"selectedType",dm,Tt);Bs(de,5,"search",um,Tt);Bs(de,5,"filtersChange",hm,Tt);Tt=Bs(de,0,"Toolbar",vm,Tt);ze(de,1,Tt);const U$=Object.freeze(Object.defineProperty({__proto__:null,get Toolbar(){return Tt}},Symbol.toStringTag,{value:"Module"})),bm="product-card",bc=`<template>\r
  <div class="product-card">\r
    <div class="product-card-header">\r
      <div class="card-header-left">\r
        <div class="onsale-status">\r
          <span class="onsale-dot"></span>\r
          <span class="onsale-label">ON SALE</span>\r
        </div>\r
        <div class="stock-row">\r
          <span class="stock-status">In stock</span>\r
        </div>\r
      </div>\r
      <div class="qty-box-horizontal">\r
        <input class="qty-input" type="number" min="1" value.bind="qty" input.trigger="onQtyInput($event)" />\r
        <div class="qty-arrows">\r
          <button class="qty-arrow-btn" click.trigger="increaseQty()" tabindex="-1">&#9650;</button>\r
          <button class="qty-arrow-btn" click.trigger="decreaseQty()" tabindex="-1">&#9660;</button>\r
        </div>\r
      </div>\r
    </div>\r
    <div class="product-image">\r
      <img src.bind="product.imagen" alt="Product Image" class="product-img" />\r
    </div>\r
    <div class="product-name-row">\r
      <span class="product-name">\${product.nombre}</span>\r
      <div class="product-game-icon">\r
        <img src.bind="product.gameIcon" alt="Game Icon" class="game-icon" />\r
\r
      </div>\r
    </div>\r
    <div class="product-price-row" if.bind="product.precio">\r
      <span class="product-price">$\${product.precio.toFixed(2)}</span>\r
      <span class="product-price-original" if.bind="product.precioOriginal">\r
        $\${product.precioOriginal.toFixed(2)}\r
      </span>\r
    </div>\r
\r
    <span class="product-description">\${product.descripcion}</span>\r
    <div class="product-card-footer">\r
      <button class="details-btn" disabled>DETAILS</button>\r
      <button class="add-btn" disabled.bind="!product.precio" click.trigger="addToCart()">\r
        ADD\r
        <span class="add-cart-icon" aria-hidden="true">\r
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
            <circle cx="9" cy="21" r="1" />\r
            <circle cx="20" cy="21" r="1" />\r
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-7.39H6" />\r
          </svg>\r
        </span>\r
      </button>\r
    </div>\r
  </div>\r
</template>`,wm=[],ym={};let kl;function q$(i){kl||(kl=Q.define({name:bm,template:bc,dependencies:wm,bindables:ym})),i.register(kl)}const W$=Object.freeze(Object.defineProperty({__proto__:null,bindables:ym,default:bc,dependencies:wm,name:bm,register:q$,template:bc},Symbol.toStringTag,{value:"Module"}));var Q$=Object.create,Nh=Object.defineProperty,K$=Object.getOwnPropertyDescriptor,G$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),to=i=>{throw TypeError(i)},X$=(i,e,t)=>e in i?Nh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Hd=(i,e)=>Nh(i,"name",{value:e,configurable:!0}),J$=i=>[,,,Q$(null)],Cm=["class","method","getter","setter","accessor","field","value","get","set"],Zn=i=>i!==void 0&&typeof i!="function"?to("Function expected"):i,Y$=(i,e,t,s,n)=>({kind:Cm[i],name:e,metadata:s,addInitializer:r=>t._?to("Already initialized"):n.push(Zn(r||null))}),Z$=(i,e)=>X$(e,G$("metadata"),i[3]),wc=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},km=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,f=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?f?1:2:0,p=Cm[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!f&&(n=n.prototype),h<5&&(h>3||!d)&&K$(h<4?n:{get[t](){return Ud(this,r)},set[t](m){return qd(this,r,m)}},t));h?d&&h<4&&Hd(r,(h>2?"set ":h>1?"get ":"")+t):Hd(n,t);for(var S=s.length-1;S>=0;S--)c=Y$(h,t,l={},i[3],b),h&&(c.static=f,c.private=d,u=c.access={has:d?m=>eS(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Ud:tS)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,C)=>qd(m,n,C,h^4?r:v.set):(m,C)=>m[t]=C)),a=(0,s[S])(h?h<4?d?r:v[p]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?Zn(a)&&(h>4?_.unshift(a):h?d?r=a:v[p]=a:n=a):typeof a!="object"||a===null?to("Object expected"):(Zn(o=a.get)&&(v.get=o),Zn(o=a.set)&&(v.set=o),Zn(o=a.init)&&_.unshift(o));return h||Z$(i,n),v&&Nh(n,t,v),d?h^4?r:v:n},Dh=(i,e,t)=>e.has(i)||to("Cannot "+t),eS=(i,e)=>Object(e)!==e?to('Cannot use the "in" operator on this value'):i.has(e),Ud=(i,e,t)=>(Dh(i,e,"read from private field"),t?t.call(i):e.get(i)),qd=(i,e,t,s)=>(Dh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),tS=(i,e,t)=>(Dh(i,e,"access private method"),t),$m,Sm,wn;Sm=[lt({...W$,name:"product-card"}),Sn(ti)],$m=[$e];class Er{constructor(e){this.cartService=e,this.product=wc(wn,8,this),wc(wn,11,this),this.qty=1}increaseQty(){this.qty++}decreaseQty(){this.qty>1&&this.qty--}onQtyInput(e){const t=parseInt(e.target.value,10);!isNaN(t)&&t>0?this.qty=t:this.qty=1}addToCart(){if(!this.product)return;const e=Number.isFinite(this.qty)&&this.qty>0?this.qty:1;this.cartService.add({id:this.product.id,name:this.product.nombre,price:this.product.precio,image:this.product.imagen,qty:e},e)}}wn=J$();km(wn,5,"product",$m,Er);Er=km(wn,0,"ProductCard",Sm,Er);wc(wn,1,Er);const sS=Object.freeze(Object.defineProperty({__proto__:null,get ProductCard(){return Er}},Symbol.toStringTag,{value:"Module"})),xm="product-list",yc=`<template>\r
    \r
  <div class="product-list">\r
    <product-card repeat.for="product of products" product.bind="product"></product-card>\r
  </div>\r
</template>\r
`,Am=[sS],Pm={};let $l;function iS(i){$l||($l=Q.define({name:xm,template:yc,dependencies:Am,bindables:Pm})),i.register($l)}const nS=Object.freeze(Object.defineProperty({__proto__:null,bindables:Pm,default:yc,dependencies:Am,name:xm,register:iS,template:yc},Symbol.toStringTag,{value:"Module"}));var rS=Object.create,jh=Object.defineProperty,oS=Object.getOwnPropertyDescriptor,aS=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),so=i=>{throw TypeError(i)},lS=(i,e,t)=>e in i?jh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Wd=(i,e)=>jh(i,"name",{value:e,configurable:!0}),cS=i=>[,,,rS(null)],Im=["class","method","getter","setter","accessor","field","value","get","set"],er=i=>i!==void 0&&typeof i!="function"?so("Function expected"):i,hS=(i,e,t,s,n)=>({kind:Im[i],name:e,metadata:s,addInitializer:r=>t._?so("Already initialized"):n.push(er(r||null))}),uS=(i,e)=>lS(e,aS("metadata"),i[3]),Cc=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Em=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,f=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?f?1:2:0,p=Im[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!f&&(n=n.prototype),h<5&&(h>3||!d)&&oS(h<4?n:{get[t](){return Qd(this,r)},set[t](m){return Kd(this,r,m)}},t));h?d&&h<4&&Wd(r,(h>2?"set ":h>1?"get ":"")+t):Wd(n,t);for(var S=s.length-1;S>=0;S--)c=hS(h,t,l={},i[3],b),h&&(c.static=f,c.private=d,u=c.access={has:d?m=>dS(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Qd:fS)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,C)=>Kd(m,n,C,h^4?r:v.set):(m,C)=>m[t]=C)),a=(0,s[S])(h?h<4?d?r:v[p]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?er(a)&&(h>4?_.unshift(a):h?d?r=a:v[p]=a:n=a):typeof a!="object"||a===null?so("Object expected"):(er(o=a.get)&&(v.get=o),er(o=a.set)&&(v.set=o),er(o=a.init)&&_.unshift(o));return h||uS(i,n),v&&jh(n,t,v),d?h^4?r:v:n},Fh=(i,e,t)=>e.has(i)||so("Cannot "+t),dS=(i,e)=>Object(e)!==e?so('Cannot use the "in" operator on this value'):i.has(e),Qd=(i,e,t)=>(Fh(i,e,"read from private field"),t?t.call(i):e.get(i)),Kd=(i,e,t,s)=>(Fh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),fS=(i,e,t)=>(Fh(i,e,"access private method"),t),Tm,Rm,yn;Rm=[lt({...nS,name:"product-list"})],Tm=[$e];class Tr{constructor(){this.products=Cc(yn,8,this,[]),Cc(yn,11,this)}}yn=cS();Em(yn,5,"products",Tm,Tr);Tr=Em(yn,0,"ProductList",Rm,Tr);Cc(yn,1,Tr);const pS=Object.freeze(Object.defineProperty({__proto__:null,get ProductList(){return Tr}},Symbol.toStringTag,{value:"Module"})),Om="element-list",kc=`<template>\r
    \r
        \r
    <div class="padded-box bg-primary">\r
        <div class="row-justified">\r
            <div>\r
                <span>Showing \${page * pageSize - pageSize + 1} - \${Math.min(page * pageSize, total)} of \${total}</span>\r
            </div>\r
            <div class="sort-dropdown-wrapper">\r
                <button class="sort-dropdown-btn" click.trigger="isSortOpen = !isSortOpen">\r
                    <img src="/src/assets/icons/filter.svg" alt="Sort Icon" class="sort-icon-vertical" />\r
                    <div class="sort-dropdown-labels">\r
                        <span class="sort-label">Sort By</span>\r
                        <span class="sort-selected">\${selectedSort}</span>\r
                    </div>\r
                    <svg class="sort-arrow-vertical\${isSortOpen ? ' open' : ''}" width="20" height="20"\r
                        viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"\r
                        stroke-linejoin="round">\r
                        <polyline points="6 9 12 15 18 9" />\r
                    </svg>\r
                </button>\r
                <ul if.bind="isSortOpen" class="sort-dropdown-list">\r
                    <li repeat.for="option of sortOptions" class="sort-dropdown-item"\r
                        click.trigger="selectSort(option)">\${option}</li>\r
                </ul>\r
            </div>\r
        </div>\r
        <product-list products.bind="items"></product-list>\r
        <pagination \r
            page.bind="page" \r
            page-size.bind="pageSize" \r
            total.bind="total"\r
            page-change.bind="onPageChange">\r
        </pagination>\r
    </div>\r
</template>`,Bm=[rm,pS],Mm={};let Sl;function gS(i){Sl||(Sl=Q.define({name:Om,template:kc,dependencies:Bm,bindables:Mm})),i.register(Sl)}const _S=Object.freeze(Object.defineProperty({__proto__:null,bindables:Mm,default:kc,dependencies:Bm,name:Om,register:gS,template:kc},Symbol.toStringTag,{value:"Module"}));var mS=Object.create,Vh=Object.defineProperty,vS=Object.getOwnPropertyDescriptor,bS=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),io=i=>{throw TypeError(i)},wS=(i,e,t)=>e in i?Vh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Gd=(i,e)=>Vh(i,"name",{value:e,configurable:!0}),yS=i=>[,,,mS(null)],Lm=["class","method","getter","setter","accessor","field","value","get","set"],tr=i=>i!==void 0&&typeof i!="function"?io("Function expected"):i,CS=(i,e,t,s,n)=>({kind:Lm[i],name:e,metadata:s,addInitializer:r=>t._?io("Already initialized"):n.push(tr(r||null))}),kS=(i,e)=>wS(e,bS("metadata"),i[3]),gt=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Fi=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,f=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?f?1:2:0,p=Lm[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!f&&(n=n.prototype),h<5&&(h>3||!d)&&vS(h<4?n:{get[t](){return Xd(this,r)},set[t](m){return Jd(this,r,m)}},t));h?d&&h<4&&Gd(r,(h>2?"set ":h>1?"get ":"")+t):Gd(n,t);for(var S=s.length-1;S>=0;S--)c=CS(h,t,l={},i[3],b),h&&(c.static=f,c.private=d,u=c.access={has:d?m=>$S(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Xd:SS)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,C)=>Jd(m,n,C,h^4?r:v.set):(m,C)=>m[t]=C)),a=(0,s[S])(h?h<4?d?r:v[p]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?tr(a)&&(h>4?_.unshift(a):h?d?r=a:v[p]=a:n=a):typeof a!="object"||a===null?io("Object expected"):(tr(o=a.get)&&(v.get=o),tr(o=a.set)&&(v.set=o),tr(o=a.init)&&_.unshift(o));return h||kS(i,n),v&&Vh(n,t,v),d?h^4?r:v:n},zh=(i,e,t)=>e.has(i)||io("Cannot "+t),$S=(i,e)=>Object(e)!==e?io('Cannot use the "in" operator on this value'):i.has(e),Xd=(i,e,t)=>(zh(i,e,"read from private field"),t?t.call(i):e.get(i)),Jd=(i,e,t,s)=>(zh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),SS=(i,e,t)=>(zh(i,e,"access private method"),t),Nm,Dm,jm,Fm,Vm,zm,Hm,Ee;Hm=[lt({..._S,name:"element-list"})],zm=[$e],Vm=[$e],Fm=[$e],jm=[$e],Dm=[$e],Nm=[$e];class ls{constructor(){this.items=gt(Ee,8,this,[]),gt(Ee,11,this),this.page=gt(Ee,12,this,1),gt(Ee,15,this),this.pageSize=gt(Ee,16,this,10),gt(Ee,19,this),this.total=gt(Ee,20,this,0),gt(Ee,23,this),this.sortChange=gt(Ee,24,this),gt(Ee,27,this),this.pageChange=gt(Ee,28,this),gt(Ee,31,this),this.isSortOpen=!1,this.selectedSort="Featured",this.sortOptions=["Featured","Price: Low to High","Price: High to Low","Stock","Name"],this.onPageChange=e=>{this.pageChange&&this.pageChange(e)}}selectSort(e){this.selectedSort=e,this.isSortOpen=!1,this.sortChange&&this.sortChange(e)}}Ee=yS();Fi(Ee,5,"items",zm,ls);Fi(Ee,5,"page",Vm,ls);Fi(Ee,5,"pageSize",Fm,ls);Fi(Ee,5,"total",jm,ls);Fi(Ee,5,"sortChange",Dm,ls);Fi(Ee,5,"pageChange",Nm,ls);ls=Fi(Ee,0,"ElementList",Hm,ls);gt(Ee,1,ls);const xS=Object.freeze(Object.defineProperty({__proto__:null,get ElementList(){return ls}},Symbol.toStringTag,{value:"Module"})),Um="home",$c=`<template>\r
  \r
  \r
\r
  \r
  <section class="home">\r
    <div id="epic-background">\r
      <div class="main-content-padding full-width ">\r
        <div class="grid-container">\r
          <div class="main-title-area">\r
            <h1 class="main-title">Condimentum consectetur</h1>\r
          </div>\r
          <toolbar \r
            games.bind="games" \r
            price-options.bind="priceOptions" \r
            type-options.bind="typeOptions" \r
            selected-game.bind="selectedGame" \r
            selected-price.bind="selectedPrice" \r
            selected-type.bind="selectedType" \r
            search.bind="search" \r
            filters-change.bind="onFiltersChange">\r
          </toolbar>\r
          <element-list \r
            items.bind="pagedItems" \r
            page.bind="page" \r
            page-size.bind="pageSize"\r
            total.bind="filteredProducts.length"\r
            sort-change.bind="onSortChange"\r
            page-change.bind="onPageChange">\r
          </element-list>\r
\r
        </div>\r
      </div>\r
\r
\r
    </div>\r
  </section>\r
</template>`,qm=[U$,xS,rm],Wm={};let xl;function AS(i){xl||(xl=Q.define({name:Um,template:$c,dependencies:qm,bindables:Wm})),i.register(xl)}const PS=Object.freeze(Object.defineProperty({__proto__:null,bindables:Wm,default:$c,dependencies:qm,name:Um,register:AS,template:$c},Symbol.toStringTag,{value:"Module"}));var IS=Object.create,Hh=Object.defineProperty,ES=Object.getOwnPropertyDescriptor,TS=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Qm=i=>{throw TypeError(i)},RS=(i,e,t)=>e in i?Hh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,OS=(i,e)=>Hh(i,"name",{value:e,configurable:!0}),BS=i=>[,,,IS(null)],MS=["class","method","getter","setter","accessor","field","value","get","set"],Km=i=>i!==void 0&&typeof i!="function"?Qm("Function expected"):i,LS=(i,e,t,s,n)=>({kind:MS[i],name:e,metadata:s,addInitializer:r=>t._?Qm("Already initialized"):n.push(Km(r||null))}),NS=(i,e)=>RS(e,TS("metadata"),i[3]),DS=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},jS=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&ES(n,t));OS(n,t);for(var g=s.length-1;g>=0;g--)l=LS(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,Km(o)&&(n=o);return NS(i,n),d&&Hh(n,t,d),u?c^4?r:d:n},Gm,Uh;Gm=[lt({...PS,name:"home"})];class Rr{constructor(){this.page=1,this.pageSize=10,this.products=[],this.filteredProducts=[],this.sort="Featured",this.games=[],this.priceOptions=["< $50","$50 - $100","$100+"],this.typeOptions=["Gold","Item","Account"],this.selectedGame="All",this.selectedPrice="All",this.selectedType="All",this.search="",this.onSortChange=e=>{this.sort=e,this.applySort()},this.onFiltersChange=e=>{this.selectedGame=e.game,this.selectedPrice=e.price,this.selectedType=e.type,this.search=e.search,this.applyFilters()},this.onPageChange=e=>{this.page=e},console.log("Home component loaded")}async attached(){try{const s=await fetch("/src/data/juegos.json");this.games=await s.json(),console.log("Games loaded:",this.games)}catch(s){console.error("Error loading games:",s),this.games=[]}const t=await(await fetch("/src/data/productos.json")).json();this.products=t.map(s=>{const n=this.games.find(a=>a.id===s.gameId);let r=null,o=s.precio;return n&&n.currencyPercentage&&n.currencyPercentage>0&&(r=s.precio,o=+(s.precio*(1-n.currencyPercentage/100)).toFixed(2)),{...s,gameIcon:n?n.icono:"",precioOriginal:r,precio:o}}),this.filteredProducts=this.products,this.typeOptions=Array.from(new Set(this.products.map(s=>s.type))).filter(Boolean),console.log(this.products)}get pagedItems(){const e=(this.page-1)*this.pageSize;return this.filteredProducts.slice(e,e+this.pageSize)}applyFilters(){let e=this.products;if(this.selectedGame&&this.selectedGame!=="All"&&(e=e.filter(t=>t.gameId==this.selectedGame)),this.selectedType&&this.selectedType!=="All"&&(e=e.filter(t=>t.type===this.selectedType)),this.selectedPrice&&this.selectedPrice!=="All"&&(this.selectedPrice==="< $50"?e=e.filter(t=>t.precio<50):this.selectedPrice==="$50 - $100"?e=e.filter(t=>t.precio>=50&&t.precio<=100):this.selectedPrice==="$100+"&&(e=e.filter(t=>t.precio>100))),this.search){const t=this.search.toLowerCase().split(/\s+/).filter(Boolean);e=e.filter(s=>{const n=s.nombre.toLowerCase(),r=s.descripcion.toLowerCase();return t.some(o=>n.includes(o)||r.includes(o))})}this.filteredProducts=e,this.applySort(),this.page=1}applySort(){this.sort==="Price: Low to High"?this.filteredProducts=[...this.filteredProducts].sort((e,t)=>e.precio-t.precio):this.sort==="Price: High to Low"?this.filteredProducts=[...this.filteredProducts].sort((e,t)=>t.precio-e.precio):this.sort==="Stock"?this.filteredProducts=[...this.filteredProducts].sort((e,t)=>t.stock-e.stock):this.sort==="Name"&&(this.filteredProducts=[...this.filteredProducts].sort((e,t)=>e.nombre.localeCompare(t.nombre)))}}Uh=BS();Rr=jS(Uh,0,"Home",Gm,Rr);DS(Uh,1,Rr);const Xm="cart",Sc=`<template>\r
  <section class="home">\r
    <div id="epic-background">\r
      <div class="main-content-padding full-width ">\r
        <div class="container">\r
          <h4>Lo sentimos, el programador se quedo sin tiempo ni cafe para hacer un buen carrito. intente nuevamente mas tarde.</h4>\r
        </div>\r
      </div>\r
\r
\r
    </div>\r
  </section>\r
</template>`,Jm=[],Ym={};let Al;function FS(i){Al||(Al=Q.define({name:Xm,template:Sc,dependencies:Jm,bindables:Ym})),i.register(Al)}const VS=Object.freeze(Object.defineProperty({__proto__:null,bindables:Ym,default:Sc,dependencies:Jm,name:Xm,register:FS,template:Sc},Symbol.toStringTag,{value:"Module"}));var zS=Object.create,qh=Object.defineProperty,HS=Object.getOwnPropertyDescriptor,US=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Zm=i=>{throw TypeError(i)},qS=(i,e,t)=>e in i?qh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,WS=(i,e)=>qh(i,"name",{value:e,configurable:!0}),QS=i=>[,,,zS(null)],KS=["class","method","getter","setter","accessor","field","value","get","set"],ev=i=>i!==void 0&&typeof i!="function"?Zm("Function expected"):i,GS=(i,e,t,s,n)=>({kind:KS[i],name:e,metadata:s,addInitializer:r=>t._?Zm("Already initialized"):n.push(ev(r||null))}),XS=(i,e)=>qS(e,US("metadata"),i[3]),JS=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},YS=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&HS(n,t));WS(n,t);for(var g=s.length-1;g>=0;g--)l=GS(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,ev(o)&&(n=o);return XS(i,n),d&&qh(n,t,d),u?c^4?r:d:n},tv,Wh;tv=[lt({...VS,name:"cart"})];class Or{}Wh=QS();Or=YS(Wh,0,"Cart",tv,Or);JS(Wh,1,Or);class Yd{constructor(e,t,s,n){this.name=e,this.isOptional=t,this.isStar=s,this.pattern=n}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class sv{constructor(e,t,s){this.path=e,this.caseSensitive=t,this.handler=s}}class iv{get residualEndpoint(){return this._residualEndpoint}set residualEndpoint(e){if(this._residualEndpoint!==null)throw new Error("Residual endpoint is already set");this._residualEndpoint=e}constructor(e,t){this.route=e,this.params=t,this._residualEndpoint=null}equalsOrResidual(e){return e!=null&&this===e||this._residualEndpoint===e}}class Ta{constructor(e,t){this.endpoint=e;const s=Object.create(null);for(const n in t){const r=t[n];s[n]=r!=null?decodeURIComponent(r):r}this.params=Object.freeze(s)}}class Qh{constructor(e,t,s,n){var r;this.chars=e,this.states=t,this.skippedStates=s,this.result=n,this.params=null,this.isConstrained=!1,this.satisfiesConstraints=null,this.head=t[t.length-1],this.endpoint=(r=this.head)==null?void 0:r.endpoint}advance(e){const{chars:t,states:s,skippedStates:n,result:r}=this;let o=null,a=0;const l=s[s.length-1];function c(u,h){if(u.isMatch(e)&&(++a===1?o=u:r.add(new Qh(t.concat(e),s.concat(u),h===null?n:n.concat(h),r))),l.segment===null&&u.isOptional&&u.nextStates!==null){if(u.nextStates.length>1)throw ta(`${u.nextStates.length} nextStates`);const f=u.nextStates[0];if(!f.isSeparator)throw ta("Not a separator");if(f.nextStates!==null)for(const d of f.nextStates)c(d,u)}}if(l.isDynamic&&c(l,null),l.nextStates!==null)for(const u of l.nextStates)c(u,null);o!==null&&(s.push(this.head=o),t.push(e),this.isConstrained=this.isConstrained||o.isDynamic&&o.segment.isConstrained,o.endpoint!==null&&(this.endpoint=o.endpoint)),a===0&&r.remove(this)}_finalize(){function e(t,s){const n=s.nextStates;if(n!==null){if(n.length===1&&n[0].segment===null)e(t,n[0]);else for(const r of n)if(r.isOptional&&r.endpoint!==null){if(t.push(r),r.nextStates!==null)for(const o of r.nextStates)e(t,o);break}}}return e(this.skippedStates,this.head),this.isConstrained?(this._getParams(),this.satisfiesConstraints):!0}_getParams(){var r;let e=this.params;if(e!=null)return e;const{states:t,chars:s,endpoint:n}=this;e={},this.satisfiesConstraints=!0;for(const o of n.params)e[o.name]=void 0;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(l.isDynamic){const c=l.segment,u=c.name;if(e[u]===void 0?e[u]=s[o]:e[u]+=s[o],!(l.isConstrained&&!Object.is((r=t[o+1])==null?void 0:r.segment,c)))continue;this.satisfiesConstraints=this.satisfiesConstraints&&l.satisfiesConstraint(e[u])}}return this.satisfiesConstraints&&(this.params=e),e}compareTo(e){const t=this.states,s=e.states;for(let l=0,c=0,u=Math.max(t.length,s.length);l<u;++l){let h=t[l];if(h===void 0)return 1;let f=s[c];if(f===void 0)return-1;let d=h.segment,g=f.segment;if(d===null){if(g===null){++c;continue}if((h=t[++l])===void 0)return 1;d=h.segment}else if(g===null){if((f=s[++c])===void 0)return-1;g=f.segment}if(d.kind<g.kind)return 1;if(d.kind>g.kind)return-1;++c}const n=this.skippedStates,r=e.skippedStates,o=n.length,a=r.length;if(o<a)return 1;if(o>a)return-1;for(let l=0;l<o;++l){const c=n[l],u=r[l];if(c.length<u.length)return 1;if(c.length>u.length)return-1}return 0}}function ZS(i){return i.head.endpoint!==null}function ex(i,e){return i.compareTo(e)}class tx{get isEmpty(){return this.candidates.length===0}constructor(e){this.candidates=[],this.candidates=[new Qh([""],[e],[],this)]}getSolution(){const e=this.candidates.filter(t=>ZS(t)&&t._finalize());return e.length===0?null:(e.sort(ex),e[0])}add(e){this.candidates.push(e)}remove(e){this.candidates.splice(this.candidates.indexOf(e),1)}advance(e){const t=this.candidates.slice();for(const s of t)s.advance(e)}}const Yt="$$residue",Zd=/^:(?<name>[^?\s{}]+)(?:\{\{(?<constraint>.+)\}\})?(?<optional>\?)?$/g;class sx{constructor(){this.rootState=new Kh(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(e,t=!1){var r,o;let s,n;if(e instanceof Array)for(const a of e)n=this.$add(a,!1),s=n.params,!(!t||(((r=s[s.length-1])==null?void 0:r.isStar)??!1))&&(n.residualEndpoint=this.$add({...a,path:`${a.path}/*${Yt}`},!0));else n=this.$add(e,!1),s=n.params,t&&!(((o=s[s.length-1])==null?void 0:o.isStar)??!1)&&(n.residualEndpoint=this.$add({...e,path:`${e.path}/*${Yt}`},!0));this.cache.clear()}$add(e,t){var u;const s=e.path,n=this.endpointLookup;if(n.has(s))throw ta(`Cannot add duplicate path '${s}'.`);const r=new sv(s,e.caseSensitive===!0,e.handler),o=s===""?[""]:s.split("/").filter(ix),a=[];let l=this.rootState;for(const h of o)switch(l=l.append(null,"/"),h.charAt(0)){case":":{Zd.lastIndex=0;const f=Zd.exec(h),{name:d,optional:g}=(f==null?void 0:f.groups)??{},p=g==="?";if(d===Yt)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${Yt}' is used.`);const _=(u=f==null?void 0:f.groups)==null?void 0:u.constraint,b=_!=null?new RegExp(_):null;a.push(new Yd(d,p,!1,b)),l=new rx(d,p,b).appendTo(l);break}case"*":{const f=h.slice(1);let d;if(f===Yt){if(!t)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${Yt}' is used.`);d=1}else d=2;a.push(new Yd(f,!0,!0,null)),l=new ox(f,d).appendTo(l);break}default:{l=new nx(h,r.caseSensitive).appendTo(l);break}}const c=new iv(r,a);return l.setEndpoint(c),n.set(s,c),c}recognize(e){let t=this.cache.get(e);return t===void 0&&this.cache.set(e,t=this.$recognize(e)),t}$recognize(e){e.startsWith("/")||(e=`/${e}`),e.length>1&&e.endsWith("/")&&(e=e.slice(0,-1));const t=new tx(this.rootState);for(let o=0,a=e.length;o<a;++o){const l=e.charAt(o);if(t.advance(l),t.isEmpty)return null}const s=t.getSolution();if(s===null)return null;const{endpoint:n}=s,r=s._getParams();return new Ta(n,r)}getEndpoint(e){return this.endpointLookup.get(e)??null}}class Kh{constructor(e,t,s){switch(this.prevState=e,this.segment=t,this.value=s,this.nextStates=null,this.endpoint=null,this.isConstrained=!1,t==null?void 0:t.kind){case 3:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=t.optional,this.isConstrained=t.isConstrained;break;case 2:case 1:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=e===null?0:e.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1;break}}append(e,t){let s,n=this.nextStates;return n===null?(s=void 0,n=this.nextStates=[]):e===null?s=n.find(r=>r.value===t):s=n.find(r=>{var o;return(o=r.segment)==null?void 0:o.equals(e)}),s===void 0&&n.push(s=new Kh(this,e,t)),s}setEndpoint(e){if(this.endpoint!==null)throw ta(`Cannot add ambiguous route. The pattern '${e.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=e,this.isOptional&&(this.prevState.setEndpoint(e),this.prevState.isSeparator&&this.prevState.prevState!==null&&this.prevState.prevState.setEndpoint(e))}isMatch(e){const t=this.segment;switch(t==null?void 0:t.kind){case 3:return!this.value.includes(e);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(e)}}satisfiesConstraint(e){return this.isConstrained?this.segment.satisfiesPattern(e):!0}}function ix(i){return i.length>0}class nx{get kind(){return 4}constructor(e,t){this.value=e,this.caseSensitive=t}appendTo(e){const{value:t,value:{length:s}}=this;if(this.caseSensitive)for(let n=0;n<s;++n)e=e.append(this,t.charAt(n));else for(let n=0;n<s;++n){const r=t.charAt(n);e=e.append(this,r.toUpperCase()+r.toLowerCase())}return e}equals(e){return e.kind===4&&e.caseSensitive===this.caseSensitive&&e.value===this.value}}class rx{get kind(){return 3}constructor(e,t,s){if(this.name=e,this.optional=t,this.pattern=s,s===void 0)throw new Error("Pattern is undefined");this.isConstrained=s!==null}appendTo(e){return e=e.append(this,"/"),e}equals(e){return e.kind===3&&e.optional===this.optional&&e.name===this.name}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class ox{constructor(e,t){this.name=e,this.kind=t}appendTo(e){return e=e.append(this,""),e}equals(e){return(e.kind===2||e.kind===1)&&e.name===this.name}}const ta=i=>new Error(i),no={3e3:"hydrated",3001:"attaching",3002:"detaching",3003:"dispose",3050:"created",3051:"activating - self",3052:"activating - via initiator",3053:"deactivating - self",3054:"deactivating - via initiator",3055:"disposing",3056:"canUnload(next:%s) - invoking %s hooks",3057:"canLoad(next:%s) - invoking %s hooks",3058:"unloading(next:%s) - invoking %s hooks",3059:"loading(next:%s) - invoking %s hooks",3100:"baseHref set to path: %s",3101:"starting listening to %s",3102:"stopping listening to %s",3103:"pushing to history state: %s (title: '%s', url: '%s')",3104:"replacing history state: %s (title: '%s', url: '%s')",3105:"pushing to history state: NOT_SERIALIZABLE (title: '%s', url: '%s')",3106:"replacing history state: NOT_SERIALIZABLE (title: '%s', url: '%s')",3150:"created",3151:"Node changed from %s to %s",3152:"The given context is nullish (%s); resolving to root RouteContext",3153:"The given context (%s) is an instance of RouteContext; resolving to it",3154:"The given context is a node (nodeName:%s); resolving RouteContext from controller's RenderContext",3155:"Failed to resolve RouteContext from node %s; error: %s",3156:"The given context is a custom element viewmodel (name:%s); resolving RouteContext from controller's RenderContext",3157:"The given context is a custom element controller (name:%s); resolving RouteContext from controller's RenderContext",3158:"Resolving viewport agent for the request: %s",3159:"Creating component agent for the node: %s",3160:"Registering viewport: %s",3161:"Skipping registering viewport: %s; it is already registered",3162:"Unregistering viewport: %s",3163:"Skipping unregistering viewport: %s; it is not registered",3164:"Recognizing path: %s",3165:"Adding route: %s",3166:"Unable to eagerly generate path for %s; reasons: %s",3167:"The provided container has no registered IAppRoot. RouteContext.setRoot can only be used after Aurelia.app was called, on a container that is within that app's component tree.",3168:'A root RouteContext is already registered. A possible cause is the RouterConfiguration being registered more than once in the same container tree. If you have a multi-rooted app, make sure you register RouterConfiguration only in the "forked" containers and not in the common root.',3169:"The provided IAppRoot does not (yet) have a controller. A possible cause is calling this API manually before Aurelia.start() is called",3170:"Invalid context type: %s",3171:"Invariant violation: RouteNode should be set immediately after the RouteContext is created. Context: %s",3172:"RouteContext has no ViewportAgent: %s",3173:"Invalid route config. When the component property is a lazy import, the path must be specified.",3174:`Failed to resolve %s at:
%s`,3175:"%s does not appear to be a component or CustomElement recognizable by Aurelia; make sure to use the @customElement decorator for your class if not using conventions.",3200:"Publishing event: %s",3201:"Invoking subscriber #%s (event: %s)",3250:"Loading instruction: %s",3251:"Checking if the route %s is active in context %s",3252:"Resolving existing RouteContext for %s",3253:"Creating new RouteContext for %s",3254:"Ignoring navigation triggered by '%s' because it is the same URL as the previous navigation which was triggered by 'api'.",3255:"Reusing promise/resolve/reject from the previously failed transition %s",3256:"Scheduling transition: %s",3257:"Transition succeeded: %s",3258:"Running transition: %s",3259:"Aborting transition %s because a new transition was queued in response to the NavigationStartEvent",3260:"Compiling viewport instructions tree %s",3261:"invoking canUnload on %s nodes",3262:"invoking canLoad on %s nodes",3263:"invoking unloading on %s nodes",3264:"invoking loading on %s nodes",3265:"invoking swapping on %s nodes",3266:"finalizing transition",3267:"navigation %s",3268:"navigation %s; finished.",3269:"scheduling next transition: %s",3270:"Transition %s failed with error: %s",3271:"Root RouteContext is not set. Did you forget to register RouteConfiguration, or try to navigate before calling Aurelia.start()?",3300:"created",3301:"Nothing to activate at %s",3302:"Activating existing component agent at %s",3303:"Activating next component agent at %s",3304:"Nothing to deactivate at %s",3305:"Deactivating existing component agent at %s",3306:"Already deactivating at %s",3307:"Deactivating current component agent at %s",3308:"Cannot handle the request %s due to viewport name mismatch %s",3309:"Cannot handle the request %s as componentName not included in usedBy %s",3310:"Viewport %s can handle the request %s",3311:"Viewport is not available as it is inactive",3312:"Viewport is not available as an update is scheduled for %s",3313:"Invoking on children at %s",3314:"Invoking on existing component at %s",3315:"Finished invoking on children, now invoking on own component at %s",3316:"Finished at %s",3317:"Nothing to unload at %s",3318:"Invoking on next component at %s",3319:"Nothing to load at %s",3320:"Compiling residue for %s; plan is set to %s",3321:"Delaying residue compilation for %s until activate",3322:"Finished own component; invoking on children at %s",3323:"Finished at %s",3324:"Invoking on children at %s",3325:"Invoking on existing component at %s",3326:"Finished invoking on children, now invoking on own component at %s",3327:"Finished at %s",3328:"Nothing to unload at %s",3329:"Invoking on next component at %s",3330:"Nothing to load at %s",3331:"Finished own component; invoking on children at %s",3332:"Finished at %s",3333:"Invoking on the current component at %s",3334:"Nothing to deactivate at %s",3335:"Already deactivating at %s",3336:"Invoking canLoad(), loading() and activate() on the next component at %s",3337:"Invoking on the next component at %s",3338:"Nothing to activate at %s",3339:"Running activate on next instead, because there is nothing to deactivate at %s",3340:"Running deactivate on current instead, because there is nothing to activate at %s",3341:"Skipping this level and swapping children instead at %s",3342:"Swapping current and next at %s",3343:"Processing dynamic children at %s",3344:"Scheduling update for %s; plan is set to %s",3345:"Cancelling update for %s",3346:"setting currState to State.currIsEmpty at %s",3347:"setting currState to State.currIsActive at %s",3348:"setting currState to State.currIsActive and reassigning curCA at %s",3349:"disposing at %s",3350:"Unexpected viewport activation outside of a transition context at %s",3351:"Unexpected viewport deactivation outside of a transition context at %s",3352:"Unexpected state at %s of %s",3353:"Unexpected guardsResult %s at %s",3354:"canLoad returned redirect result %s by the component agent %s",3400:"Invalid component %s: must be either a class, a custom element ViewModel, or a (partial) custom element definition",3401:"Neither the route '%s' matched any configured route at '%s' nor a fallback is configured for the viewport '%s' - did you forget to add '%s' to the routes list of the route decorator of '%s'?",3402:"'%s' did not match any configured route or registered component name at '%s' - did you forget to add '%s' to the routes list of the route decorator of '%s'?",3403:'Invalid instruction type %s for "toUrlComponent" operation. If you are seeing this error, then it is probably because of an internal bug. Please report it.',3404:"The given instruction is not compatible for eagerly generating path: %s",3450:"No endpoint found for path '%s'",3500:"Expected %s at index %s of '%s', but got: '%s' (rest='%s')",3501:"Unexpected '%s' at index %s of '%s'",3502:"Unexpected expression kind %s",3550:"Invalid operation, the configuration from the get hook is already applied.",3551:"When retrieving the RouteConfig for a component name, a RouteContext (that can resolve it) must be provided",3552:"Could not find a CustomElement named '%s' in the current container scope of %s. This means the component is neither registered at Aurelia startup nor via the 'dependencies' decorator or static property.",3553:"RouteContext must be provided when resolving an imported module",3554:'Invalid route config property: "%s". Expected %s, but got %s.',3555:"Invalid route config: expected an object or string, but got: %s",3556:'Unknown route config property: "%s.%s". Please specify known properties only.',3557:`Unknown redirect route config property: "%s.%s". Only 'path' and 'redirectTo' should be specified for redirects.`,3558:"Invalid operation, the component is not yet resolved for the navigation strategy (id: %s)."};function I(i,e,...t){const s=no[e]??"Unknown event";i.trace(`AUR${e}: ${s}`,...t)}function zs(i,e,...t){const s=no[e]??"Unknown event";i.debug(`AUR${e}: ${s}`,...t)}function ef(i,e,...t){{const s=no[e];i.warn(`AUR${e}: ${s}`,...t)}}function nv(i,e,...t){{const s=no[e];i.error(`AUR${e}: ${s}`,...t)}}function W(i,...e){{let t=no[i],s=0;for(;t.includes("%s")||s<e.length;)t=t.replace("%s",String(e[s++]));return`AUR${i}: ${t}`}}function wo(i,e){throw e.error(i),i}class Qe{constructor(e,t,s){this._stack=e,this._cb=t,this._done=!1,this._next=null,this._head=s??this}static _start(e){return new Qe(0,e,null)}_push(){let e=this;do++e._stack,e=e._next;while(e!==null)}_pop(){let e=this;do--e._stack===0&&e._invoke(),e=e._next;while(e!==null)}_invoke(){const e=this._cb;e!==null&&(this._cb=null,e(this),this._done=!0)}_continueWith(e){return this._next===null?this._next=new Qe(this._stack,e,this._head):this._next._continueWith(e)}_start(){return this._head._push(),this._head._pop(),this}}function xc(i,e){i=i.slice(),e=e.slice();const t=[];for(;i.length>0;){const s=i.shift(),n=s.context.vpa;if(t.every(r=>r.context.vpa!==n)){const r=e.findIndex(o=>o.context.vpa===n);r>=0?t.push(...e.splice(0,r+1)):t.push(s)}}return t.push(...e),t}function rv(i){try{return JSON.stringify(i)}catch{return Object.prototype.toString.call(i)}}function rn(i){return typeof i=="string"?[i]:i}function tf(i){return typeof i=="string"?i:i[0]}function sa(i,e,t){const s=t?new URLSearchParams(i):i;if(e==null)return s;for(const[n,r]of Object.entries(e))if(r!=null){if(_e(r)){for(const o of r)s.append(n,o);continue}s.append(n,r)}return s}function sf(i,e){if(e==null)return i;for(const[t,s]of Object.entries(e))if(s!=null)if(i[t]==null)i[t]=s;else{const n=i[t];i[t]=[..._e(n)?n:[n],..._e(s)?s:[s]]}return i}const sr=Di.toView,ax=Di.fromView;function Ra(i){return typeof i=="object"&&i!==null&&!Ia(i)}function Oa(i){return Ra(i)&&Object.prototype.hasOwnProperty.call(i,"name")===!0}function Ba(i){return Ra(i)&&Object.prototype.hasOwnProperty.call(i,"component")===!0}function ov(i){return Ra(i)&&Object.prototype.hasOwnProperty.call(i,"redirectTo")===!0}function ro(i){return Ra(i)&&Object.prototype.hasOwnProperty.call(i,"component")===!0}function Ke(i,e,t){throw new Error(W(3554,e,i,rv(t)))}function Eo(i,e){if(i==null)throw new Error(W(3555,i));const t=Object.keys(i);for(const s of t){const n=i[s],r=[e,s].join(".");switch(s){case"id":case"viewport":case"redirectTo":typeof n!="string"&&Ke("string",r,n);break;case"caseSensitive":case"nav":typeof n!="boolean"&&Ke("boolean",r,n);break;case"data":(typeof n!="object"||n===null)&&Ke("object",r,n);break;case"title":switch(typeof n){case"string":case"function":break;default:Ke("string or function",r,n)}break;case"path":if(n instanceof Array)for(let o=0;o<n.length;++o)typeof n[o]!="string"&&Ke("string",`${r}[${o}]`,n[o]);else typeof n!="string"&&Ke("string or Array of strings",r,n);break;case"component":Pl(n,r,"component");break;case"routes":{n instanceof Array||Ke("Array",r,n);for(const o of n){const a=`${r}[${n.indexOf(o)}]`;Pl(o,a,"component")}break}case"transitionPlan":switch(typeof n){case"string":switch(n){case"none":case"replace":case"invoke-lifecycles":break;default:Ke("string('none'|'replace'|'invoke-lifecycles') or function",r,n)}break;case"function":break;default:Ke("string('none'|'replace'|'invoke-lifecycles') or function",r,n)}break;case"fallback":Pl(n,r,"fallback");break;default:throw new Error(W(3556,e,s))}}}function lx(i,e){if(i==null)throw new Error(W(3555,i));const t=Object.keys(i);for(const s of t){const n=i[s],r=[e,s].join(".");switch(s){case"path":if(n instanceof Array)for(let o=0;o<n.length;++o)typeof n[o]!="string"&&Ke("string",`${r}[${o}]`,n[o]);else typeof n!="string"&&Ke("string or Array of strings",r,n);break;case"redirectTo":typeof n!="string"&&Ke("string",r,n);break;default:throw new Error(W(3557,e,s))}}}function Pl(i,e,t){switch(typeof i){case"function":break;case"object":if(i instanceof Promise||i instanceof ao)break;if(ov(i)){lx(i,e);break}if(Ba(i)){Eo(i,e);break}!Ia(i)&&!Oa(i)&&Ke(`an object with at least a '${t}' property (see Routeable)`,e,i);break;case"string":break;default:Ke("function, object or string (see Routeable)",e,i)}}function av(i,e){if(i===e)return!0;if(typeof i!=typeof e||i===null||e===null||Object.getPrototypeOf(i)!==Object.getPrototypeOf(e))return!1;const t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(let n=0,r=t.length;n<r;++n){const o=t[n];if(o!==s[n]||i[o]!==e[o])return!1}return!0}const lv="au-nav-id";class cx{constructor(e,t,s){this._events=e,this._serial=t,this._inner=s,this._disposed=!1}dispose(){if(!this._disposed){this._disposed=!0,this._inner.dispose();const e=this._events._subscriptions;e.splice(e.indexOf(this),1)}}}const Ma=at.createInterface("IRouterEvents",i=>i.singleton(hx));class hx{constructor(){this._subscriptionSerial=0,this._subscriptions=[],this._ea=x(da),this._logger=x(Le).scopeTo("RouterEvents")}publish(e){I(this._logger,3200,e),this._ea.publish(e.name,e)}subscribe(e,t){const s=new cx(this,++this._subscriptionSerial,this._ea.subscribe(e,n=>{I(this._logger,3201,s._serial,e),t(n)}));return this._subscriptions.push(s),s}}class ux{get name(){return"au:router:location-change"}constructor(e,t,s,n){this.id=e,this.url=t,this.trigger=s,this.state=n}toString(){return`LocationChangeEvent(id:${this.id},url:'${this.url}',trigger:'${this.trigger}')`}}class dx{get name(){return"au:router:navigation-start"}constructor(e,t,s,n){this.id=e,this.instructions=t,this.trigger=s,this.managedState=n}toString(){return`NavigationStartEvent(id:${this.id},instructions:'${this.instructions}',trigger:'${this.trigger}')`}}class fx{get name(){return"au:router:navigation-end"}constructor(e,t,s){this.id=e,this.instructions=t,this.finalInstructions=s}toString(){return`NavigationEndEvent(id:${this.id},instructions:'${this.instructions}',finalInstructions:'${this.finalInstructions}')`}}class px{get name(){return"au:router:navigation-cancel"}constructor(e,t,s){this.id=e,this.instructions=t,this.reason=s}toString(){return`NavigationCancelEvent(id:${this.id},instructions:'${this.instructions}',reason:${String(this.reason)})`}}class gx{get name(){return"au:router:navigation-error"}constructor(e,t,s){this.id=e,this.instructions=t,this.error=s}toString(){return`NavigationErrorEvent(id:${this.id},instructions:'${this.instructions}',error:${String(this.error)})`}}const cv=at.createInterface("IBaseHref"),hv=at.createInterface("ILocationManager",i=>i.singleton(_x));class _x{constructor(){this._eventId=0,this._logger=x(Le).root.scopeTo("LocationManager"),this._events=x(Ma),this._history=x(J1),this._location=x(X1),this._window=x(Kr),this._baseHref=x(cv),this._event=x(Yh).useUrlFragmentHash?"hashchange":"popstate",zs(this._logger,3100,this._baseHref.href)}startListening(){I(this._logger,3101,this._event),this._window.addEventListener(this._event,this,!1)}stopListening(){I(this._logger,3102,this._event),this._window.removeEventListener(this._event,this,!1)}handleEvent(e){this._events.publish(new ux(++this._eventId,this.getPath(),this._event,"state"in e?e.state:null))}pushState(e,t,s){s=this.addBaseHref(s);try{const n=JSON.stringify(e);I(this._logger,3103,n,t,s)}catch{ef(this._logger,3105,t,s)}this._history.pushState(e,t,s)}replaceState(e,t,s){s=this.addBaseHref(s);try{const n=JSON.stringify(e);I(this._logger,3104,n,t,s)}catch{ef(this._logger,3106,t,s)}this._history.replaceState(e,t,s)}getPath(){const{pathname:e,search:t,hash:s}=this._location;return this.removeBaseHref(`${e}${mx(t)}${s}`)}addBaseHref(e){let t,s=this._baseHref.href;return s.endsWith("/")&&(s=s.slice(0,-1)),s.length===0?t=e:(e.startsWith("/")&&(e=e.slice(1)),t=`${s}/${e}`),t}removeBaseHref(e){const t=this._baseHref.pathname;return e.startsWith(t)&&(e=e.slice(t.length)),uv(e)}}function uv(i){let e,t,s;return(s=i.indexOf("?"))>=0||(s=i.indexOf("#"))>=0?(e=i.slice(0,s),t=i.slice(s)):(e=i,t=""),e.endsWith("/")?e=e.slice(0,-1):e.endsWith("/index.html")&&(e=e.slice(0,-11)),`${e}${t}`}function mx(i){return i.length>0&&!i.startsWith("?")?`?${i}`:i}const To=q;class es{get path(){const e=this._path;if(e.length>0)return e;const t=Q.getDefinition(this._component);return this._path=[t.name,...t.aliases]}get component(){return this._getComponent()}constructor(e,t,s,n,r,o,a,l,c,u,h,f){this.id=e,this._path=t,this.title=s,this.redirectTo=n,this.caseSensitive=r,this.transitionPlan=o,this.viewport=a,this.data=l,this.routes=c,this.fallback=u,this.nav=f,this._configurationFromHookApplied=!1,this._currentComponent=null,this._component=h,this._isNavigationStrategy=h instanceof ao}static _create(e,t){if(typeof e=="string"||e instanceof Array){const s=rn(e),n=(t==null?void 0:t.redirectTo)??null,r=(t==null?void 0:t.caseSensitive)??!1,o=tf((t==null?void 0:t.id)??(s instanceof Array?s[0]:s)),a=(t==null?void 0:t.title)??null,l=(t==null?void 0:t.transitionPlan)??null,c=(t==null?void 0:t.viewport)??Cn,u=(t==null?void 0:t.data)??{},h=(t==null?void 0:t.routes)??To;return new es(o,s,a,n,r,l,c,u,h,(t==null?void 0:t.fallback)??null,t,(t==null?void 0:t.nav)??!0)}else if(typeof e=="object"){const s=e;Eo(s,"");const n=rn(s.path??(t==null?void 0:t.path)??q),r=s.title??(t==null?void 0:t.title)??null,o=s.redirectTo??(t==null?void 0:t.redirectTo)??null,a=s.caseSensitive??(t==null?void 0:t.caseSensitive)??!1,l=s.id??(t==null?void 0:t.id)??(n instanceof Array?n[0]:n),c=s.transitionPlan??(t==null?void 0:t.transitionPlan)??null,u=s.viewport??(t==null?void 0:t.viewport)??Cn,h={...t==null?void 0:t.data,...s.data},f=[...s.routes??To,...(t==null?void 0:t.routes)??To];return new es(l,n,r,o,a,c,u,h,f,s.fallback??(t==null?void 0:t.fallback)??null,s.component??t??null,s.nav??!0)}else Ke("string, function/class or object","",e)}_applyChildRouteConfig(e,t){Eo(e,this.path[0]??"");const s=rn(e.path??this.path);return new es(tf(e.id??this.id??s),s,e.title??this.title,e.redirectTo??this.redirectTo,e.caseSensitive??this.caseSensitive,e.transitionPlan??this.transitionPlan??(t==null?void 0:t.transitionPlan)??null,e.viewport??this.viewport,e.data??this.data,e.routes??this.routes,e.fallback??this.fallback??(t==null?void 0:t.fallback)??null,this._component,e.nav??this.nav)}_getTransitionPlan(e,t,s){if(o(e,t)&&av(e.params,t.params))return"none";if(s!=null)return s;const n=this.transitionPlan??"replace";return typeof n=="function"?n(e,t):n;function r(a){return a.replace(`/*${Yt}`,"")}function o(a,l){const c=a.finalPath,u=l.finalPath;return c.length===0||u.length===0||r(c)===r(u)}}_applyFromConfigurationHook(e,t,s){if(this._configurationFromHookApplied)throw new Error(W(3550));if(typeof e.getRouteConfig=="function")return T(e.getRouteConfig(t,s),n=>{if(this._configurationFromHookApplied=!0,n==null)return;let r=(t==null?void 0:t.path)??"";typeof r!="string"&&(r=r[0]),Eo(n,r),this.id=n.id??this.id,this._path=rn(n.path??this.path),this.title=n.title??this.title,this.redirectTo=n.redirectTo??this.redirectTo,this.caseSensitive=n.caseSensitive??this.caseSensitive,this.transitionPlan=n.transitionPlan??this.transitionPlan,this.viewport=n.viewport??this.viewport,this.data=n.data??this.data,this.routes=n.routes??this.routes,this.fallback=n.fallback??this.fallback,this.nav=n.nav??this.nav})}_clone(){return new es(this.id,this.path,this.title,this.redirectTo,this.caseSensitive,this.transitionPlan,this.viewport,this.data,this.routes,this.fallback,this._component,this.nav)}_getFallback(e,t,s){const n=this.fallback;return typeof n=="function"&&!Q.isType(n)?n(e,t,s):n}_getComponentName(){try{return this._getComponent().name}catch{return"UNRESOLVED-NAVIGATION-STRATEGY"}}_getComponent(e,t,s,n){if(e==null){if(this._currentComponent!=null)return this._currentComponent;if(this._isNavigationStrategy)throw new Error(W(3558,this.id));return this._currentComponent=this._component}return this._currentComponent??(this._currentComponent=this._isNavigationStrategy?this._component.getComponent(e,t,s,n):this._component)}_handleNavigationStart(){this._isNavigationStrategy&&(this._currentComponent=null)}toString(){let e=`RConf(id: ${this.id}, isNavigationStrategy: ${this._isNavigationStrategy}`;return e+=`, path: [${this.path.join(",")}]`,this.redirectTo&&(e+=`, redirectTo: ${this.redirectTo}`),this.caseSensitive&&(e+=`, caseSensitive: ${this.caseSensitive}`),this.transitionPlan!=null&&(e+=`, transitionPlan: ${this.transitionPlan}`),e+=`, viewport: ${this.viewport}`,this._currentComponent!=null&&(e+=`, component: ${this._currentComponent.name}`),`${e})`}}const ki={name:si("route-configuration"),isConfigured(i){return It.has(ki.name,i)},configure(i,e){const t=es._create(i,e);return It.define(t,e,ki.name),e},getConfig(i){return ki.isConfigured(i)||ki.configure({},i),It.get(ki.name,i)}};function vx(i){return function(e,t){return t.addInitializer(function(){ki.configure(i,this)}),e}}function Br(i,e,t,s,n){if(ov(i))return es._create(i,null);const[r,o]=Mr(i,n);return r.type===5?es._create({...i,nav:!1},null):T(o,a=>{const l=a.Type,c=ki.getConfig(l);return Ba(i)?c._applyChildRouteConfig(i,t):e?c._clone():!c._configurationFromHookApplied&&r.type===4&&typeof i.getRouteConfig=="function"?T(c._applyFromConfigurationHook(i,t,s),()=>c):c})}function Mr(i,e){const t=dv(i);let s;switch(t.type){case 5:return[t,null];case 0:{if(e==null)throw new Error(W(3551));let r=e.component.dependencies.find(o=>Oa(o)&&o.name===t.value)??Q.find(e.container,t.value);if(r===null)throw new Error(W(3552,t.value,e));r instanceof Me||(r=Me.create(r),Q.define(r)),s=r;break}case 2:s=t.value;break;case 4:s=Q.getDefinition(t.value.constructor);break;case 3:if(e==null)throw new Error(W(3553));s=e._resolveLazy(t.value);break}return[t,s]}function dv(i){return Ba(i)?dv(i.component):tt.create(i)}const ia=["?","#","/","+","(",")","@","!","=",",","&","'","~",";"];class bx{get _done(){return this._rest.length===0}constructor(e){this._input=e,this._buffers=[],this._bufferIndex=0,this._index=0,this._rest=e}_startsWith(...e){const t=this._rest;return e.some(function(s){return t.startsWith(s)})}_consumeOptional(e){return this._startsWith(e)?(this._rest=this._rest.slice(e.length),this._index+=e.length,this._append(e),!0):!1}_consume(e){this._consumeOptional(e)||this._expect(`'${e}'`)}_expect(e){throw new Error(W(3500,e,this._index,this._input,this._rest,this._rest))}_ensureDone(){if(!this._done)throw new Error(W(3501,this._rest,this._index,this._input))}_advance(){const e=this._rest[0];this._rest=this._rest.slice(1),++this._index,this._append(e)}_record(){this._buffers[this._bufferIndex++]=""}_playback(){const e=--this._bufferIndex,t=this._buffers,s=t[e];return t[e]="",s}_discard(){this._buffers[--this._bufferIndex]=""}_append(e){const t=this._bufferIndex,s=this._buffers;for(let n=0;n<t;++n)s[n]+=e}}const nf=new Map;class Pi{get kind(){return"Route"}constructor(e,t,s,n){this.isAbsolute=e,this.root=t,this.queryParams=s,this.fragment=n}static parse(e){const t=e.toString();let s=nf.get(t);return s===void 0&&nf.set(t,s=Pi._$parse(e)),s}static _$parse(e){const t=e.path;if(t==="")return new Pi(!1,Lr.Empty,e.query,e.fragment);const s=new bx(t);s._record();const n=s._consumeOptional("/"),r=La._parse(s);return s._ensureDone(),s._discard(),new Pi(n,r,e.query,e.fragment)}toInstructionTree(e){return new nt(e,this.isAbsolute,this.root._toInstructions(0,0),sa(this.queryParams,e.queryParams,!0),this.fragment??e.fragment)}}class La{get kind(){return"CompositeSegment"}constructor(e){this.siblings=e}static _parse(e){e._record();const t=e._consumeOptional("+"),s=[];do s.push(na._parse(e));while(e._consumeOptional("+"));return!t&&s.length===1?(e._discard(),s[0]):(e._discard(),new La(s))}_toInstructions(e,t){switch(this.siblings.length){case 0:return[];case 1:return this.siblings[0]._toInstructions(e,t);case 2:return[...this.siblings[0]._toInstructions(e,0),...this.siblings[1]._toInstructions(0,t)];default:return[...this.siblings[0]._toInstructions(e,0),...this.siblings.slice(1,-1).flatMap(function(s){return s._toInstructions(0,0)}),...this.siblings[this.siblings.length-1]._toInstructions(0,t)]}}}class na{get kind(){return"ScopedSegment"}constructor(e,t){this.left=e,this.right=t}static _parse(e){e._record();const t=Gh._parse(e);if(e._consumeOptional("/")){const s=na._parse(e);return e._discard(),new na(t,s)}return e._discard(),t}_toInstructions(e,t){const s=this.left._toInstructions(e,0),n=this.right._toInstructions(0,t);let r=s[s.length-1];for(;r.children.length>0;)r=r.children[r.children.length-1];return r.children.push(...n),s}}class Gh{get kind(){return"SegmentGroup"}constructor(e){this.expression=e}static _parse(e){if(e._record(),e._consumeOptional("(")){const t=La._parse(e);return e._consume(")"),e._discard(),new Gh(t)}return e._discard(),Lr._parse(e)}_toInstructions(e,t){return this.expression._toInstructions(e+1,t+1)}}class Lr{get kind(){return"Segment"}static get Empty(){return new Lr(Nr.Empty,Dr.Empty,!0)}constructor(e,t,s){this.component=e,this.viewport=t,this.scoped=s}static _parse(e){e._record();const t=Nr._parse(e),s=Dr._parse(e),n=!e._consumeOptional("!");return e._discard(),new Lr(t,s,n)}_toInstructions(e,t){return[Ue.create({component:this.component.name,params:this.component.parameterList._toObject(),viewport:this.viewport.name,open:e,close:t})]}}class Nr{get kind(){return"Component"}static get Empty(){return new Nr("",jr.Empty)}constructor(e,t){switch(this.name=e,this.parameterList=t,e.charAt(0)){case":":this.isParameter=!0,this.isStar=!1,this.isDynamic=!0,this.parameterName=e.slice(1);break;case"*":this.isParameter=!1,this.isStar=!0,this.isDynamic=!0,this.parameterName=e.slice(1);break;default:this.isParameter=!1,this.isStar=!1,this.isDynamic=!1,this.parameterName=e;break}}static _parse(e){if(e._record(),e._record(),!e._done)if(e._startsWith("./"))e._advance();else if(e._startsWith("../"))e._advance(),e._advance();else for(;!e._done&&!e._startsWith(...ia);)e._advance();const t=e._playback();t.length===0&&e._expect("component name");const s=jr._parse(e);return e._discard(),new Nr(t,s)}}class Dr{get kind(){return"Viewport"}static get Empty(){return new Dr("")}constructor(e){this.name=e}static _parse(e){e._record();let t=null;if(e._consumeOptional("@")){for(e._record();!e._done&&!e._startsWith(...ia);)e._advance();t=decodeURIComponent(e._playback()),t.length===0&&e._expect("viewport name")}return e._discard(),new Dr(t)}}class jr{get kind(){return"ParameterList"}static get Empty(){return new jr([])}constructor(e){this.expressions=e}static _parse(e){e._record();const t=[];if(e._consumeOptional("(")){do if(t.push(ra._parse(e,t.length)),!e._consumeOptional(","))break;while(!e._done&&!e._startsWith(")"));e._consume(")")}return e._discard(),new jr(t)}_toObject(){const e={};for(const t of this.expressions)e[t.key]=t.value;return e}}class ra{get kind(){return"Parameter"}static get Empty(){return new ra("","")}constructor(e,t){this.key=e,this.value=t}static _parse(e,t){for(e._record(),e._record();!e._done&&!e._startsWith(...ia);)e._advance();let s=e._playback();s.length===0&&e._expect("parameter key");let n;if(e._consumeOptional("=")){for(e._record();!e._done&&!e._startsWith(...ia);)e._advance();n=decodeURIComponent(e._playback()),n.length===0&&e._expect("parameter value")}else n=s,s=t.toString();return e._discard(),new ra(s,n)}}class wx{constructor(e,t){this.viewportName=e,this.componentName=t}toString(){return`VR(viewport:'${this.viewportName}',component:'${this.componentName}')`}}const rf=new WeakMap;class oa{get _currState(){return this._state&16256}set _currState(e){this._state=this._state&127|e}get _nextState(){return this._state&127}set _nextState(e){this._state=this._state&16256|e}constructor(e,t,s){this.viewport=e,this.hostController=t,this._isActive=!1,this._curCA=null,this._nextCA=null,this._state=8256,this._$plan="replace",this._currNode=null,this._nextNode=null,this._currTransition=null,this._cancellationPromise=null,this._logger=s.container.get(Le).scopeTo(`ViewportAgent<${s.routeConfigContext._friendlyPath}>`),I(this._logger,3300)}static for(e,t){let s=rf.get(e);if(s===void 0){const n=Xe.getCachedOrThrow(e);rf.set(e,s=new oa(e,n,t))}return s}_activateFromViewport(e,t){const s=this._currTransition;s!==null&&Gt(s),this._isActive=!0;const n=this._logger.scopeTo("activateFromViewport()");switch(this._nextState){case 64:switch(this._currState){case 8192:I(n,3301,this);return;case 4096:return I(n,3302,this),this._curCA._activate(e,t);default:this._unexpectedState("activateFromViewport 1")}case 2:{if(this._currTransition===null)throw new Error(W(3350,this));I(n,3303,this);const r=Qe._start(a=>{this._activate(e,this._currTransition,a)}),o=new Promise(a=>{r._continueWith(()=>{a()})});return r._start()._done?void 0:o}default:this._unexpectedState("activateFromViewport 2")}}_deactivateFromViewport(e,t){const s=this._currTransition;s!==null&&Gt(s),this._isActive=!1;const n=this._logger.scopeTo("deactivateFromViewport()");switch(this._currState){case 8192:I(n,3304,this);return;case 4096:return I(n,3305,this),this._curCA._deactivate(e,t);case 128:I(n,3306,this);return;default:{if(this._currTransition===null)throw new Error(W(3351,this));I(n,3307,this);const r=Qe._start(a=>{this._deactivate(e,this._currTransition,a)}),o=new Promise(a=>{r._continueWith(()=>{a()})});return r._start()._done?void 0:o}}}_handles(e){if(!this._isAvailable())return!1;const t=this.viewport,s=e.viewportName,n=t.name,r=this._logger.scopeTo("handles()");if(s!==Cn&&n!==s)return I(r,3308,e,n),!1;const o=t.usedBy;return o.length>0&&!o.split(",").includes(e.componentName)?(I(r,3309,e,o),!1):(I(r,3310,n,e),!0)}_isAvailable(){const e=this._logger.scopeTo("isAvailable()");return this._isActive?this._nextState!==64?(I(e,3312,this._nextNode),!1):!0:(I(e,3311),!1)}_canUnload(e,t){if(this._currTransition===null&&(this._currTransition=e),Gt(e),e.guardsResult!==!0)return;t._push();const s=this._logger.scopeTo("canUnload()");T(this._cancellationPromise,()=>{Qe._start(n=>{I(s,3313,this);for(const r of this._currNode.children)r.context.vpa._canUnload(e,n)})._continueWith(n=>{switch(this._currState){case 4096:switch(I(s,3314,this),this._$plan){case"none":this._currState=1024;return;case"invoke-lifecycles":case"replace":this._currState=2048,n._push(),Qe._start(r=>{I(s,3315,this),this._curCA._canUnload(e,this._nextNode,r)})._continueWith(()=>{I(s,3316,this),this._currState=1024,n._pop()})._start();return}case 8192:I(s,3317,this);return;default:e._handleError(new Error(`Unexpected state at canUnload of ${this}`))}})._continueWith(()=>{t._pop()})._start()})}_canLoad(e,t){if(this._currTransition===null&&(this._currTransition=e),Gt(e),e.guardsResult!==!0)return;t._push();const s=this._logger.scopeTo("canLoad()");Qe._start(n=>{switch(this._nextState){case 32:switch(I(s,3318,this),this._nextState=16,this._$plan){case"none":return;case"invoke-lifecycles":return this._curCA._canLoad(e,this._nextNode,n);case"replace":n._push(),T(this._nextNode.context._createComponentAgent(this.hostController,this._nextNode),r=>{(this._nextCA=r)._canLoad(e,this._nextNode,n),n._pop()})}case 64:I(s,3319,this);return;default:this._unexpectedState("canLoad")}})._continueWith(n=>{if(e.guardsResult!==!0){I(s,3354,e.guardsResult,this._nextCA);return}const r=this._nextNode;switch(this._$plan){case"none":case"invoke-lifecycles":{I(s,3320,r,this._$plan),n._push();const o=r.context;T(o.routeConfigContext.allResolved,()=>T(T(le(...r.residue.splice(0).map(a=>Si(this._logger,r,a))),()=>le(...o.getAvailableViewportAgents().reduce((a,l)=>{const c=l.viewport,u=c.default;return u===null||a.push(Si(this._logger,r,Ue.create({component:u,viewport:c.name}))),a},[]))),()=>{n._pop()}));return}case"replace":I(s,3321,r);return}})._continueWith(n=>{switch(this._nextState){case 16:I(s,3322,this),this._nextState=8;for(const r of this._nextNode.children)r.context.vpa._canLoad(e,n);return;case 64:return;default:this._unexpectedState("canLoad")}})._continueWith(()=>{I(s,3323,this),t._pop()})._start()}_unloading(e,t){Gt(e),Vn(this,e),t._push();const s=this._logger.scopeTo("unloading()");Qe._start(n=>{I(s,3324,this);for(const r of this._currNode.children)r.context.vpa._unloading(e,n)})._continueWith(n=>{switch(this._currState){case 1024:switch(I(s,3325,this),this._$plan){case"none":this._currState=256;return;case"invoke-lifecycles":case"replace":this._currState=512,n._push(),Qe._start(r=>{I(s,3326,this),this._curCA._unloading(e,this._nextNode,r)})._continueWith(()=>{I(s,3327,this),this._currState=256,n._pop()})._start();return}case 8192:I(s,3328,this);for(const r of this._currNode.children)r.context.vpa._unloading(e,t);return;default:this._unexpectedState("unloading")}})._continueWith(()=>{t._pop()})._start()}_loading(e,t){Gt(e),Vn(this,e),t._push();const s=this._logger.scopeTo("loading()");Qe._start(n=>{switch(this._nextState){case 8:switch(I(s,3329,this),this._nextState=4,this._$plan){case"none":return;case"invoke-lifecycles":return this._curCA._loading(e,this._nextNode,n);case"replace":return this._nextCA._loading(e,this._nextNode,n)}case 64:I(s,3330,this);return;default:this._unexpectedState("loading")}})._continueWith(n=>{switch(this._nextState){case 4:I(s,3331,this),this._nextState=2;for(const r of this._nextNode.children)r.context.vpa._loading(e,n);return;case 64:return;default:this._unexpectedState("loading")}})._continueWith(()=>{I(s,3332,this),t._pop()})._start()}_deactivate(e,t,s){Gt(t),Vn(this,t),s._push();const n=this._logger.scopeTo("deactivate()");switch(this._currState){case 256:switch(I(n,3333,this),this._currState=128,this._$plan){case"none":case"invoke-lifecycles":s._pop();return;case"replace":{const r=this.hostController,o=this._curCA;t._run(()=>T(o._deactivate(e,r),()=>{e===null&&o._dispose()}),()=>{s._pop()})}}return;case 8192:I(n,3334,this),s._pop();return;case 128:I(n,3335,this),s._pop();return;default:this._unexpectedState("deactivate")}}_activate(e,t,s){Gt(t),Vn(this,t),s._push();const n=this._logger.scopeTo("activate()");if(this._nextState===32){I(n,3336,this),Qe._start(r=>{this._canLoad(t,r)})._continueWith(r=>{this._loading(t,r)})._continueWith(r=>{this._activate(e,t,r)})._continueWith(()=>{s._pop()})._start();return}switch(this._nextState){case 2:I(n,3337,this),this._nextState=1,Qe._start(r=>{switch(this._$plan){case"none":case"invoke-lifecycles":return;case"replace":{const o=this.hostController;t._run(()=>(r._push(),this._nextCA._activate(e,o)),()=>{r._pop()})}}})._continueWith(r=>{this._processDynamicChildren(t,r)})._continueWith(()=>{s._pop()})._start();return;case 64:I(n,3338,this),s._pop();return;default:this._unexpectedState("activate")}}_swap(e,t){const s=this._logger.scopeTo("swap()");if(this._currState===8192){I(s,3339,this),this._activate(null,e,t);return}if(this._nextState===64){I(s,3340,this),this._deactivate(null,e,t);return}switch(Gt(e),Vn(this,e),this._currState===256&&this._nextState===2||this._unexpectedState("swap"),this._currState=128,this._nextState=1,this._$plan){case"none":case"invoke-lifecycles":{I(s,3341,this);const n=xc(this._nextNode.children,this._currNode.children);for(const r of n)r.context.vpa._swap(e,t);return}case"replace":{I(s,3342,this);const n=this.hostController,r=this._curCA,o=this._nextCA;t._push(),Qe._start(a=>{e._run(()=>(a._push(),T(r._deactivate(null,n),()=>r._dispose())),()=>{a._pop()})})._continueWith(a=>{e._run(()=>(a._push(),o._activate(null,n)),()=>{a._pop()})})._continueWith(a=>{this._processDynamicChildren(e,a)})._continueWith(()=>{t._pop()})._start();return}}}_processDynamicChildren(e,t){I(this._logger,3343,this);const s=this._nextNode;e._run(()=>{t._push();const n=s.context;return T(n.routeConfigContext.allResolved,()=>{const r=s.children.slice();return T(le(...s.residue.splice(0).map(o=>Si(this._logger,s,o))),()=>T(le(...n.getAvailableViewportAgents().reduce((o,a)=>{const l=a.viewport,c=l.default;return c===null||o.push(Si(this._logger,s,Ue.create({component:c,viewport:l.name}))),o},[])),()=>s.children.filter(o=>!r.includes(o))))})},n=>{Qe._start(r=>{for(const o of n)e._run(()=>(r._push(),o.context.vpa._canLoad(e,r)),()=>{r._pop()})})._continueWith(r=>{if(e.guardsResult===!0)for(const o of n)e._run(()=>(r._push(),o.context.vpa._loading(e,r)),()=>{r._pop()})})._continueWith(r=>{if(e.guardsResult===!0)for(const o of n)e._run(()=>(r._push(),o.context.vpa._activate(null,e,r)),()=>{r._pop()})})._continueWith(()=>{t._pop()})._start()})}_scheduleUpdate(e,t){var n;switch(this._nextState){case 64:this._nextNode=t,this._nextState=32;break;default:this._unexpectedState("scheduleUpdate 1")}switch(this._currState){case 8192:case 4096:case 1024:break;default:this._unexpectedState("scheduleUpdate 2")}const s=((n=this._curCA)==null?void 0:n._routeNode)??null;s===null||s.component!==t.component?this._$plan="replace":this._$plan=t.context.routeConfigContext.config._getTransitionPlan(s,t,e.transitionPlan),I(this._logger,3344,this)}_cancelUpdate(){var s,n;this._currNode!==null&&this._currNode.children.forEach(function(r){r.context.vpa._cancelUpdate()}),this._nextNode!==null&&this._nextNode.children.forEach(function(r){r.context.vpa._cancelUpdate()}),I(this._logger,3345,this._nextNode);let e=null,t=null;switch(this._currState){case 8192:case 4096:this._currTransition=null;break;case 2048:case 1024:this._currState=4096,this._currTransition=null;break;case 512:case 256:case 128:e=T((s=this._curCA)==null?void 0:s._deactivate(null,this.hostController),()=>{var r;(r=this._curCA)==null||r._dispose(),this._currState=8192,this._curCA=null});break}switch(this._nextState){case 64:case 32:case 16:case 8:this._nextNode=null,this._nextState=64;break;case 4:case 2:case 1:{t=T((n=this._nextCA)==null?void 0:n._deactivate(null,this.hostController),()=>{var r;(r=this._nextCA)==null||r._dispose(),this._$plan="replace",this._nextState=64,this._nextCA=null,this._nextNode=null});break}}e!==null&&t!==null&&(this._cancellationPromise=T(le(e,t),()=>{this._currTransition=null,this._cancellationPromise=null}))}_endTransition(){if(this._currNode!==null&&this._currNode.children.forEach(function(e){e.context.vpa._endTransition()}),this._nextNode!==null&&this._nextNode.children.forEach(function(e){e.context.vpa._endTransition()}),this._currTransition!==null){const e=this._logger.scopeTo("endTransition()");switch(Gt(this._currTransition),this._nextState){case 64:switch(this._currState){case 8192:case 128:I(e,3346,this),this._currState=8192,this._curCA=null;break;default:this._unexpectedState("endTransition 1")}break;case 1:switch(this._currState){case 8192:case 128:switch(this._$plan){case"none":I(e,3347,this),this._currState=4096;break;case"invoke-lifecycles":I(e,3347,this),this._currState=4096,this._curCA._routeNode=this._nextNode;break;case"replace":I(e,3348,this),this._currState=4096,this._curCA=this._nextCA;break}this._currNode=this._nextNode;break;default:this._unexpectedState("endTransition 2")}break;default:this._unexpectedState("endTransition 3")}this._$plan="replace",this._nextState=64,this._nextNode=null,this._nextCA=null,this._currTransition=null}}toString(){return`VPA(state:${yx(this._state)},plan:'${this._$plan}',n:${this._nextNode},c:${this._currNode},viewport:${this.viewport})`}_dispose(){var e;I(this._logger,3349,this),(e=this._curCA)==null||e._dispose()}_unexpectedState(e){throw new Error(W(3352,e,this))}}function Vn(i,e){if(e.guardsResult!==!0)throw new Error(W(3353,e.guardsResult,i))}function Gt(i){if(i.error!==void 0&&!i.erredWithUnknownRoute)throw i.error}const of=new Map;function yx(i){let e=of.get(i);return e===void 0&&of.set(i,e=Cx(i)),e}function Cx(i){const e=[];return(i&8192)===8192&&e.push("currIsEmpty"),(i&4096)===4096&&e.push("currIsActive"),(i&2048)===2048&&e.push("currCanUnload"),(i&1024)===1024&&e.push("currCanUnloadDone"),(i&512)===512&&e.push("currUnload"),(i&256)===256&&e.push("currUnloadDone"),(i&128)===128&&e.push("currDeactivate"),(i&64)===64&&e.push("nextIsEmpty"),(i&32)===32&&e.push("nextIsScheduled"),(i&16)===16&&e.push("nextCanLoad"),(i&8)===8&&e.push("nextCanLoadDone"),(i&4)===4&&e.push("nextLoad"),(i&2)===2&&e.push("nextLoadDone"),(i&1)===1&&e.push("nextActivate"),e.join("|")}class Fr{get root(){return this._tree.root}get isInstructionsFinalized(){return this._isInstructionsFinalized}constructor(e,t,s,n,r,o,a,l,c,u,h,f,d){this.path=e,this.finalPath=t,this.context=s,this._originalInstruction=n,this.instruction=r,this.params=o,this.queryParams=a,this.fragment=l,this.data=c,this._viewport=u,this.title=h,this.component=f,this.residue=d,this._version=1,this._isInstructionsFinalized=!1,this.children=[],this._originalInstruction??(this._originalInstruction=r)}static create(e){const{[Yt]:t,...s}=e.params??{};return new Fr(e.path,e.finalPath,e.context,e.originalInstruction??e.instruction,e.instruction,Object.freeze(s),e.queryParams??oo,e.fragment??null,Object.freeze(e.data??Ge),e._viewport??null,e.title??null,e.component,e.residue??[])}contains(e,t=!1){var s,n;if(this.context.routeConfigContext===e.options.context.routeConfigContext){const r=this.children,o=e.children;for(let a=0,l=r.length;a<l;++a)for(let c=0,u=o.length;c<u;++c){const h=o[c],f=t?(s=h.recognizedRoute)==null?void 0:s.route.endpoint:null,d=r[a+c]??null,g=d!==null?d.isInstructionsFinalized?d.instruction:d._originalInstruction:null,p=(n=g==null?void 0:g.recognizedRoute)==null?void 0:n.route.endpoint;if(a+c<l&&(((f==null?void 0:f.equalsOrResidual(p))??!1)||((g==null?void 0:g.contains(h))??!1))){if(c+1===u)return!0}else break}}return this.children.some(function(r){return r.contains(e,t)})}_appendChild(e){this.children.push(e),e._setTree(this._tree)}_clearChildren(){for(const e of this.children)e._clearChildren(),e.context.vpa._cancelUpdate();this.children.length=0}getTitle(e){const t=[...this.children.map(s=>s.getTitle(e)),typeof this.title=="function"?this.title.call(void 0,this):this.title].filter(s=>s!==null);return t.length===0?null:t.join(e)}computeAbsolutePath(){if(this.context.routeConfigContext.isRoot)return"";const e=this.context.parent.node.computeAbsolutePath(),t=this.instruction.toUrlComponent(!1);return e.length>0?t.length>0?`${e}/${t}`:e:t}_setTree(e){this._tree=e;for(const t of this.children)t._setTree(e)}_finalizeInstruction(){this._isInstructionsFinalized=!0;const e=this.children.map(s=>s._finalizeInstruction()),t=this.instruction._clone();return t.children.splice(0,t.children.length,...e),this.instruction=t}_clone(){const e=new Fr(this.path,this.finalPath,this.context,this._originalInstruction,this.instruction,this.params,this.queryParams,this.fragment,this.data,this._viewport,this.title,this.component,[...this.residue]),t=this.children,s=t.length;for(let n=0;n<s;++n)e.children.push(t[n]._clone());return e._version=this._version+1,e.context.node===this&&(e.context.node=e),e}toString(){var n,r,o;const e=[],t=((n=this.context)==null?void 0:n.routeConfigContext.config._getComponentName())??"";t.length>0&&e.push(`c:'${t}'`);const s=((r=this.context)==null?void 0:r.routeConfigContext.config.path)??"";return s.length>0&&e.push(`path:'${s}'`),this.children.length>0&&e.push(`children:[${this.children.map(String).join(",")}]`),this.residue.length>0&&e.push(`residue:${this.residue.map(function(a){return typeof a=="string"?`'${a}'`:String(a)}).join(",")}`),`RN(ctx:'${(o=this.context)==null?void 0:o.routeConfigContext._friendlyPath}',${e.join(",")})`}}class Xh{constructor(e,t,s,n){this.options=e,this.queryParams=t,this.fragment=s,this.root=n}contains(e,t=!1){return this.root.contains(e,t)}_clone(){const e=new Xh(this.options._clone(),this.queryParams,this.fragment,this.root._clone());return e.root._setTree(this),e}_finalizeInstructions(){return new nt(this.options,!0,this.root.children.map(e=>e._finalizeInstruction()),this.queryParams,this.fragment)}_mergeQuery(e){this.queryParams=Object.freeze(sa(this.queryParams,e,!0))}toString(){return this.root.toString()}}function Si(i,e,t){var s;switch(i.trace("createAndAppendNodes(node:%s,vi:%s",e,t),t.component.type){case 0:switch(t.component.value){case"..":e=((s=e.context.parent)==null?void 0:s.node)??e,e._clearChildren();case".":return le(...t.children.map(n=>Si(i,e,n)));default:{i.trace("createAndAppendNodes invoking createNode");const n=e.context,r=t._clone();let o=t.recognizedRoute;if(o!==null)return Ns(i,e,js(i,e,t,o,r));if(t.children.length===0){const d=n.routeConfigContext._generateViewportInstruction(t);if(d!==null){e._tree._mergeQuery(d.query);const g=d.vi;return g.children.push(...t.children),Ns(i,e,js(i,e,g,g.recognizedRoute,t))}}let a=0,l=t.component.value,c=t;for(;c.children.length===1&&(c=c.children[0],c.component.type===0);)++a,l=`${l}/${c.component.value}`;o=n.routeConfigContext.recognize(l),i.trace("createNode recognized route: %s",o);const u=(o==null?void 0:o.residue)??null;i.trace("createNode residue:",u);const h=u===null;if(o===null||u===l){const d=n.routeConfigContext._generateViewportInstruction({component:t.component.value,params:t.params??Ge,open:t.open,close:t.close,viewport:t.viewport,children:t.children});if(d!==null)return e._tree._mergeQuery(d.query),Ns(i,e,js(i,e,d.vi,d.vi.recognizedRoute,t));const g=t.component.value;if(g==="")return;let p=t.viewport;(p===null||p.length===0)&&(p=Cn);const _=n.getFallbackViewportAgent(p),b=_!==null?_.viewport._getFallback(t,e,n):n.routeConfigContext.config._getFallback(t,e,n);if(b===null)throw new Jh(W(3401,g,n.routeConfigContext._friendlyPath,p,g,n.routeConfigContext.component.name));if(typeof b=="string"){i.trace(`Fallback is set to '${b}'. Looking for a recognized route.`);const v=n.routeConfigContext.childRoutes.find(m=>m.id===b);if(v!==void 0)return Ns(i,e,af(i,v,e,t));i.trace(`No route configuration for the fallback '${b}' is found; trying to recognize the route.`);const S=n.routeConfigContext.recognize(b,!0);if(S!==null&&S.residue!==b)return Ns(i,e,js(i,e,t,S,null))}return i.trace(`The fallback '${b}' is not recognized as a route; treating as custom element name.`),T(Br(b,!1,n.routeConfigContext.config,null,n.routeConfigContext),v=>Ns(i,e,af(i,v,e,t)))}o.residue=null,t.component.value=h?l:l.slice(0,-(u.length+1));let f=!h;for(let d=0;d<a;++d){const g=t.children[0];if((u==null?void 0:u.startsWith(g.component.value))??!1){f=!1;break}t.viewport=g.viewport,t.children=g.children}return f&&t.children.unshift(Ue.create(u)),t.recognizedRoute=o,i.trace("createNode after adjustment vi:%s",t),Ns(i,e,js(i,e,t,o,r))}}case 3:case 4:case 2:{const n=e.context;return T(Mr(t.component.value,n.routeConfigContext)[1],r=>{const{vi:o,query:a}=n.routeConfigContext._generateViewportInstruction({component:r,params:t.params??Ge,open:t.open,close:t.close,viewport:t.viewport,children:t.children});return e._tree._mergeQuery(a),Ns(i,e,js(i,e,o,o.recognizedRoute,t))})}}}function js(i,e,t,s,n,r=s.route.endpoint.route){const o=e.context,a=e._tree;return T(r.handler,l=>{var m;if(r.handler=l,i.trace("creatingConfiguredNode(rdc:%s, vi:%s)",l,t),l.redirectTo===null){const C=(((m=t.viewport)==null?void 0:m.length)??0)>0,O=C?t.viewport:l.viewport;return T(Mr(l._getComponent(t,o,e,s.route),o.routeConfigContext)[1],E=>{const N=o._resolveViewportAgent(new wx(O,E.name));C||(t.viewport=N.viewport.name);const D=o.container.get(Xs);return T(D.getRouteContext(N,E,null,N.hostController.container,o.routeConfigContext.config,o,l),F=>{i.trace("createConfiguredNode setting the context node");const pe=F.node=Fr.create({path:s.route.endpoint.route.path,finalPath:r.path,context:F,instruction:t,originalInstruction:n,params:s.route.params,queryParams:a.queryParams,fragment:a.fragment,data:l.data,_viewport:O,component:E,title:l.title,residue:t.children.slice()});return pe._setTree(e._tree),i.trace("createConfiguredNode(vi:%s) -> %s",t,pe),pe})})}const c=Pi.parse(Ac.parse(r.path)),u=Pi.parse(Ac.parse(l.redirectTo));let h,f;const d=[];switch(c.root.kind){case"ScopedSegment":case"Segment":h=c.root;break;default:throw new Error(W(3502,c.root.kind))}switch(u.root.kind){case"ScopedSegment":case"Segment":f=u.root;break;default:throw new Error(W(3502,u.root.kind))}let g,p,_=!1,b=!1;for(;!(_&&b);){if(_)g=null;else if(h.kind==="Segment")g=h,_=!0;else if(h.left.kind==="Segment")switch(g=h.left,h.right.kind){case"ScopedSegment":case"Segment":h=h.right;break;default:throw new Error(W(3502,h.right.kind))}else throw new Error(W(3502,h.left.kind));if(b)p=null;else if(f.kind==="Segment")p=f,b=!0;else if(f.left.kind==="Segment")switch(p=f.left,f.right.kind){case"ScopedSegment":case"Segment":f=f.right;break;default:throw new Error(W(3502,f.right.kind))}else throw new Error(W(3502,f.left.kind));p!==null&&(p.component.isDynamic&&((g==null?void 0:g.component.isDynamic)??!1)?d.push(s.route.params[p.component.parameterName]):d.push(p.component.name))}const v=d.filter(Boolean).join("/"),S=o.routeConfigContext.recognize(v);if(S===null)throw new Jh(W(3402,v,o.routeConfigContext._friendlyPath,v,o.routeConfigContext.component.name));return js(i,e,Ue.create({recognizedRoute:S,component:v,children:t.children,viewport:t.viewport,open:t.open,close:t.close}),S,n)})}function Ns(i,e,t){return T(t,s=>(i.trace("appendNode($childNode:%s)",s),e._appendChild(s),s.context.vpa._scheduleUpdate(e._tree.options,s)))}function af(i,e,t,s){const n=new ha(new Ta(new iv(new sv(e.path[0],e.caseSensitive,e),[]),Ge),null);return s.children.length=0,js(i,t,s,n,null)}const oo=Object.freeze(new URLSearchParams);function kx(i){return Ii(i)&&Object.prototype.hasOwnProperty.call(i,lv)===!0}function lf(i,e){return{...i,[lv]:e}}class Jh extends Error{}class aa{get erredWithUnknownRoute(){return this._erredWithUnknownRoute}constructor(e,t,s,n,r,o,a,l,c,u,h,f,d,g,p){this.id=e,this.prevInstructions=t,this.instructions=s,this.finalInstructions=n,this.instructionsChanged=r,this.trigger=o,this.options=a,this.managedState=l,this.previousRouteTree=c,this.routeTree=u,this.promise=h,this.resolve=f,this.reject=d,this.guardsResult=g,this.error=p,this._erredWithUnknownRoute=!1}static _create(e){return new aa(e.id,e.prevInstructions,e.instructions,e.finalInstructions,e.instructionsChanged,e.trigger,e.options,e.managedState,e.previousRouteTree,e.routeTree,e.promise,e.resolve,e.reject,e.guardsResult,void 0)}_run(e,t){if(this.guardsResult===!0)try{const s=e();s instanceof Promise?s.then(t).catch(n=>{this._handleError(n)}):t(s)}catch(s){this._handleError(s)}}_handleError(e){this._erredWithUnknownRoute=e instanceof Jh,this.reject(this.error=e)}toString(){return`T(id:${this.id},trigger:'${this.trigger}',instructions:${this.instructions})`}}const Xs=at.createInterface("IRouter",i=>i.singleton(la));class la{get _ctx(){const e=this._$ctx;if(e!==null)return e;if(!this._container.has(wt,!0))throw new Error(W(3271));return this._$ctx=this._container.get(wt)}get routeTree(){let e=this._routeTree;if(e===null){const t=this._ctx;e=this._routeTree=new Xh(ss.create(this.options,{}),oo,null,Fr.create({path:"",finalPath:"",context:t,instruction:null,component:Q.getDefinition(t.routeConfigContext.config.component),title:t.routeConfigContext.config.title}))}return e}get currentTr(){return this._currentTr??(this._currentTr=aa._create({id:0,prevInstructions:this._instructions,instructions:this._instructions,finalInstructions:this._instructions,instructionsChanged:!0,trigger:"api",options:ss.create(this.options,{}),managedState:null,previousRouteTree:this.routeTree._clone(),routeTree:this.routeTree,resolve:null,reject:null,promise:null,guardsResult:!0,error:void 0}))}set currentTr(e){this._currentTr=e}get isNavigating(){return this._isNavigating}constructor(){this._$ctx=null,this._routeTree=null,this._currentTr=null,this._navigated=!1,this._navigationId=0,this._nextTr=null,this._locationChangeSubscription=null,this._hasTitleBuilder=!1,this._activeContexts=[],this._isNavigating=!1,this._container=x(Ni),this._p=x(je),this._logger=x(Le).root.scopeTo("Router"),this._events=x(Ma),this._locationMgr=x(hv),this.options=x(Yh),this._routeConfigLookup=new WeakMap,this._vpaLookup=new Map,this._instructions=nt.create("",this.options,null,null),this._container.registerResolver(la,Et.instance(la,this))}_resolveContext(e){return As.resolve(this._ctx,e)}start(e){if(this._hasTitleBuilder=typeof this.options.buildTitle=="function",this._locationMgr.startListening(),this._locationChangeSubscription=this._events.subscribe("au:router:location-change",t=>{this._p.taskQueue.queueTask(()=>{const s=kx(t.state)?t.state:null,n=this.options,r=ss.create(n,{historyStrategy:"replace"}),o=nt.create(t.url,n,r,this._ctx);this._enqueue(o,t.trigger,s,null)})}),!this._navigated&&e)return this.load(this._locationMgr.getPath(),{historyStrategy:this.options.historyStrategy!=="none"?"replace":"none"})}stop(){var e;this._locationMgr.stopListening(),(e=this._locationChangeSubscription)==null||e.dispose()}load(e,t){return T(this.createViewportInstructions(e,t??null),s=>(I(this._logger,3250,s),this._enqueue(s,"api",null,null)))}isActive(e,t){const s=this._resolveContext(t),n=e instanceof nt?e:this.createViewportInstructions(e,{context:s,historyStrategy:this.options.historyStrategy});return I(this._logger,3251,n,s),this.routeTree.contains(n,!1)}getRouteContext(e,t,s,n,r,o,a){const l=n.get(Le).scopeTo("RouteContext");return T(this.getRouteConfigContext(a,t,s,n,r,(o==null?void 0:o.routeConfigContext)??null),c=>{let u=this._vpaLookup.get(e);u===void 0&&this._vpaLookup.set(e,u=new WeakMap);let h=u.get(c);if(h!==void 0)return I(l,3252,c),h;I(l,3253,c);const f=n.has(wt,!0)?n.get(wt):null;return u.set(c,h=new As(e,f,n,this,c,this._locationMgr)),h})}getRouteConfigContext(e,t,s,n,r,o){return T(e instanceof es&&!e._isNavigationStrategy?e:Br(typeof(s==null?void 0:s.getRouteConfig)=="function"?s:t.Type,!1,r,null,o),a=>{let l=this._routeConfigLookup.get(a);return l!=null||(l=new Ix(o,t,a,n,this),this._routeConfigLookup.set(a,l)),l})}generatePath(e,t){return T(this.createViewportInstructions(Pc(e),{context:t??this._ctx},!0),s=>s.toUrl(!0,this.options._urlParser))}createViewportInstructions(e,t,s){if(e instanceof nt)return e;let n=(t==null?void 0:t.context)??null;return n!==null&&(n=t.context=this._resolveContext(n)),(n??this._$ctx).createViewportInstructions(e,t,s)}_enqueue(e,t,s,n){const r=this.currentTr,o=this._logger;if(t!=="api"&&r.trigger==="api"&&r.instructions.equals(e))return zs(o,3254,t),!0;let a,l,c;const u=this.options.restorePreviousRouteTreeOnError;n===null||n.erredWithUnknownRoute||n.error!=null&&u?c=new Promise(function(f,d){a=f,l=d}):(zs(o,3255,n),c=n.promise,a=n.resolve,l=n.reject);const h=this._nextTr=aa._create({id:++this._navigationId,trigger:t,managedState:s,prevInstructions:r.finalInstructions,finalInstructions:e,instructionsChanged:!r.finalInstructions.equals(e),instructions:e,options:e.options,promise:c,resolve:a,reject:l,previousRouteTree:this.routeTree,routeTree:this._routeTree=this.routeTree._clone(),guardsResult:!0,error:void 0});if(zs(o,3256,h),!this._isNavigating)try{this._run(h)}catch(f){h._handleError(f)}return h.promise.then(f=>(zs(o,3257,h),f)).catch(f=>{if(nv(o,3270,h,f),h.erredWithUnknownRoute)this._cancelNavigation(h);else if(this._isNavigating=!1,this._events.publish(new gx(h.id,h.instructions,f)),u)this._cancelNavigation(h);else{const d=this._nextTr;d!==null?d.previousRouteTree=h.previousRouteTree:this._routeTree=h.previousRouteTree}throw f})}_run(e){this.currentTr=e,this._nextTr=null,this._isNavigating=!0;for(const n of this._activeContexts)n.routeConfigContext._handleNavigationStart();let t=this._resolveContext(e.options.context);const s=this._logger.scopeTo("run()");if(I(s,3258,e),this._events.publish(new dx(e.id,e.instructions,e.trigger,e.managedState)),this._nextTr!==null)return zs(s,3259,e),this._run(this._nextTr);e._run(()=>{const n=e.finalInstructions;I(s,3260,n);const r=this._ctx,o=e.routeTree;o.options=n.options,o.queryParams=r.node._tree.queryParams=n.queryParams,o.fragment=r.node._tree.fragment=n.fragment;const a=t.container.get(Le).scopeTo("RouteTree");n.isAbsolute&&(t=r),t===r&&(o.root._setTree(o),r.node=o.root);const l=t.routeConfigContext.allResolved instanceof Promise?" - awaiting promise":"";return a.trace(`updateRouteTree(rootCtx:%s,rt:%s,vit:%s)${l}`,r,o,n),T(t.routeConfigContext.allResolved,()=>fv(a,n,t,r.node))},()=>{const n=e.previousRouteTree.root.children,r=e.routeTree.root.children,o=xc(n,r);Qe._start(a=>{I(s,3261,n.length);for(const l of n)l.context.vpa._canUnload(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(a=>{I(s,3262,r.length);for(const l of r)l.context.vpa._canLoad(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(a=>{I(s,3263,n.length);for(const l of n)l.context.vpa._unloading(e,a)})._continueWith(a=>{I(s,3264,r.length);for(const l of r)l.context.vpa._loading(e,a)})._continueWith(a=>{I(s,3265,o.length);for(const l of o)l.context.vpa._swap(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(()=>{I(s,3266),o.forEach(function(l){l.context.vpa._endTransition()}),this._navigated=!0,this._instructions=e.finalInstructions=e.routeTree._finalizeInstructions(),this._isNavigating=!1;const a=e.finalInstructions.toUrl(!0,this.options._urlParser);switch(e.options._getHistoryStrategy(this._instructions)){case"none":break;case"push":this._locationMgr.pushState(lf(e.options.state,e.id),this.updateTitle(e),a);break;case"replace":this._locationMgr.replaceState(lf(e.options.state,e.id),this.updateTitle(e),a);break}this._events.publish(new fx(e.id,e.instructions,this._instructions)),e.resolve(!0),this._runNextTransition()})._start()})}updateTitle(e=this.currentTr){const t=this._getTitle(e);return t.length>0&&(this._p.document.title=t),this._p.document.title}_getTitle(e=this.currentTr){let t;if(this._hasTitleBuilder)t=this.options.buildTitle(e)??"";else switch(typeof e.options.title){case"function":t=e.options.title.call(void 0,e.routeTree.root)??"";break;case"string":t=e.options.title;break;default:t=e.routeTree.root.getTitle(e.options.titleSeparator)??"";break}return t}_subscribeNavigationStart(e){this._activeContexts.push(e)}_unsubscribeNavigationStart(e){const t=this._activeContexts.indexOf(e);t>-1&&this._activeContexts.splice(t,1)}_cancelNavigation(e){I(this._logger.scopeTo("cancelNavigation()"),3267,e);const s=e.previousRouteTree.root.children,n=e.routeTree.root.children;xc(s,n).forEach(function(a){a.context.vpa._cancelUpdate()}),this._instructions=e.prevInstructions,this._routeTree=e.previousRouteTree,this._isNavigating=!1;const o=e.guardsResult;if(this._events.publish(new px(e.id,e.instructions,`guardsResult is ${o}`)),o===!1)e.resolve(!1),this._runNextTransition();else{let a;if(this._navigated&&(e.erredWithUnknownRoute||e.error!=null&&this.options.restorePreviousRouteTreeOnError))a=e.prevInstructions;else{if(o===!0)return;a=o}T(this._enqueue(a,"api",e.managedState,e),()=>{I(this._logger,3268,e)})}}_runNextTransition(){this._nextTr!==null&&(I(this._logger,3269,this._nextTr),this._p.taskQueue.queueTask(()=>{const e=this._nextTr;if(e!==null)try{this._run(e)}catch(t){e._handleError(t)}}))}}function fv(i,e,t,s){return i.trace("updateNode(ctx:%s,node:%s)",t,s),s.queryParams=e.queryParams,s.fragment=e.fragment,s.context.routeConfigContext.isRoot||s.context.vpa._scheduleUpdate(s._tree.options,s),s.context===t?(s._clearChildren(),T(le(...e.children.map(n=>Si(i,s,n))),()=>le(...t.getAvailableViewportAgents().reduce((n,r)=>{const o=r.viewport,a=o.default;return a===null||n.push(Si(i,s,Ue.create({component:a,viewport:o.name}))),n},[])))):le(...s.children.map(n=>fv(i,e,t,n)))}class Na{constructor(e,t,s){this.path=e,this.query=t,this.fragment=s,this.id=`${e}?${(t==null?void 0:t.toString())??""}#${s??""}`}toString(){return this.id}static _create(e){let t=null;const s=e.indexOf("#");if(s>=0){const o=e.slice(s+1);t=decodeURIComponent(o),e=e.slice(0,s)}let n=null;const r=e.indexOf("?");if(r>=0){const o=e.slice(r+1);e=e.slice(0,r),n=Object.freeze(new URLSearchParams(o))}return new Na(e,n??oo,t)}}function pv(i,e,t){let s;typeof i=="string"?s=i:(s=i.path,e=i.query,t=i.fragment),e??(e=oo);let n=e.toString();n=n===""?"":`?${n}`;const r=t!=null&&t.length>0?`#${encodeURIComponent(t)}`:"";return`${s}${n}${r}`}const Ac=Object.freeze({parse(i){return Na._create(i)},stringify(i,e,t){return pv(i,e,t)}}),$x=Object.freeze({parse(i){const e=i.indexOf("#");if(e>=0){const t=i.slice(e+1);i=decodeURIComponent(t)}return Na._create(i)},stringify(i,e,t){return`/#/${pv(i,e,t)}`}});function Sx(i,e){return typeof e=="function"?e(i):e}const Yh=at.createInterface("RouterOptions");class ca{constructor(e,t,s,n,r,o,a){this.useUrlFragmentHash=e,this.useHref=t,this.historyStrategy=s,this.buildTitle=n,this.useNavigationModel=r,this.activeClass=o,this.restorePreviousRouteTreeOnError=a,this._urlParser=e?$x:Ac}static create(e){return new ca(e.useUrlFragmentHash??!1,e.useHref??!0,e.historyStrategy??"push",e.buildTitle??null,e.useNavigationModel??!0,e.activeClass??null,e.restorePreviousRouteTreeOnError??!0)}toString(){return`RO(${[["historyStrategy","history"]].map(([e,t])=>{const s=this[e];return`${t}:${typeof s=="function"?s:`'${s}'`}`}).join(",")})`}}class ss{constructor(e,t,s,n,r,o,a,l){this.historyStrategy=e,this.title=t,this.titleSeparator=s,this.context=n,this.queryParams=r,this.fragment=o,this.state=a,this.transitionPlan=l}static create(e,t){return new ss(t.historyStrategy??e.historyStrategy,t.title??null,t.titleSeparator??" | ",t.context??null,t.queryParams??null,t.fragment??"",t.state??null,t.transitionPlan??null)}_clone(){return new ss(this.historyStrategy,this.title,this.titleSeparator,this.context,{...this.queryParams},this.fragment,this.state===null?null:{...this.state},this.transitionPlan)}_getHistoryStrategy(e){return Sx(e,this.historyStrategy)}}const Cn="default";class Ue{constructor(e,t,s,n,r,o,a){this.open=e,this.close=t,this.recognizedRoute=s,this.component=n,this.viewport=r,this.params=o,this.children=a}static create(e){var s;if(e instanceof Ue)return e;if(ro(e)){const n=tt.create(e.component),r=((s=e.children)==null?void 0:s.map(Ue.create))??[];return new Ue(e.open??0,e.close??0,e.recognizedRoute??null,n,e.viewport??null,Object.freeze(e.params??null),r)}const t=tt.create(e);return new Ue(0,0,null,t,null,null,[])}contains(e){const t=this.children,s=e.children;if(t.length<s.length||!this.component.equals(e.component))return!1;const n=this.viewport??null,r=e.viewport??null;if(n!==null&&r!==null&&n!==r)return!1;for(let o=0,a=s.length;o<a;++o)if(!t[o].contains(s[o]))return!1;return!0}equals(e){const t=this.children,s=e.children;if(t.length!==s.length||!this.component.equals(e.component)||this.viewport!==e.viewport||!av(this.params,e.params))return!1;for(let n=0,r=t.length;n<r;++n)if(!t[n].equals(s[n]))return!1;return!0}_clone(){return new Ue(this.open,this.close,this.recognizedRoute,this.component._clone(),this.viewport,this.params,[...this.children])}toUrlComponent(e=!0){const t=this.component.toUrlComponent(),s=this.viewport,n=t.length===0||s===null||s.length===0||s===Cn?"":`@${s}`,r=`${"(".repeat(this.open)}${t}${xx(this.params)}${n}${")".repeat(this.close)}`,o=e?this.children.map(a=>a.toUrlComponent()).join("+"):"";return r.length>0?o.length>0?`${r}/${o}`:r:o}toString(){const e=`c:${this.component}`,t=this.viewport===null||this.viewport.length===0?"":`viewport:${this.viewport}`,s=this.children.length===0?"":`children:[${this.children.map(String).join(",")}]`;return`VPI(${[e,t,s].filter(Boolean).join(",")})`}}function xx(i){if(i===null)return"";const e=Object.keys(i),t=e.length;if(t===0)return"";const s=Array(t),n=[],r=[];for(const o of e)un(o)?n.push(Number(o)):r.push(o);for(let o=0;o<t;++o){const a=n.indexOf(o);if(a>-1)s[o]=i[o],n.splice(a,1);else{const l=r.shift();s[o]=`${l}=${i[l]}`}}return`(${s.join(",")})`}class nt{constructor(e,t,s,n,r){this.options=e,this.isAbsolute=t,this.children=s,this.queryParams=n,this.fragment=r,Object.freeze(n)}static create(e,t,s,n,r){s=s instanceof ss?s:ss.create(t,s??Ge);let o=s.context;!(o instanceof As)&&n!=null&&(o=s.context=As.resolve(n,o));const a=o!=null;if(e instanceof Array){const l=e.length,c=new Array(l),u=new URLSearchParams(s.queryParams??Ge),h=new Array(l);for(let f=0;f<l;f++){const d=e[f];h[f]=T(a?o.routeConfigContext._generateViewportInstruction(d,r):null,g=>{g!==null?(c[f]=g.vi,sa(u,g.query,!1)):c[f]=Ue.create(d)})}return T(le(...h),()=>new nt(s,!1,c,u,s.fragment))}return typeof e=="string"?Pi.parse(t._urlParser.parse(e)).toInstructionTree(s):T(a?o.routeConfigContext._generateViewportInstruction(ro(e)?{...e,params:e.params??Ge}:{component:e,params:Ge},r):null,l=>{const c=new URLSearchParams(s.queryParams??Ge);return l!==null?new nt(s,!1,[l.vi],sa(c,l.query,!1),s.fragment):new nt(s,!1,[Ue.create(e)],c,s.fragment)})}equals(e){const t=this.children,s=e.children;if(t.length!==s.length)return!1;for(let n=0,r=t.length;n<r;++n)if(!t[n].equals(s[n]))return!1;return!0}toUrl(e,t){let s="";if(!e){const r=[];let o=this.options.context;if(o!=null&&!(o instanceof As))throw new Error("Invalid operation; incompatible navigation context.");for(;o!=null&&!o.routeConfigContext.isRoot;){const a=o.vpa,l=a._currState===4096?a._currNode:a._nextNode;if(l==null)throw new Error("Invalid operation; nodes of the viewport agent are not set.");r.splice(0,0,l.instruction.toUrlComponent()),o=o.parent}r[0]===""&&r.splice(0,1),s=r.join("/")}const n=this.toPath();return t.stringify(s.length>0?`${s}/${n}`:n,this.queryParams,this.fragment)}toPath(){return this.children.map(e=>e.toUrlComponent()).join("+")}toString(){return`[${this.children.map(String).join(",")}]`}}class ao{constructor(e){this.getComponent=e}}class tt{constructor(e,t){this.type=e,this.value=t}static create(e){if(e instanceof tt)return e;if(typeof e=="string")return new tt(0,e);if(Ii(e)||Ke("function/class or object","",e),e instanceof ao)return new tt(5,e);if(typeof e=="function")if(Q.isType(e)){const t=Q.getDefinition(e);return new tt(2,t)}else return tt.create(e());if(e instanceof Promise)return new tt(3,e);if(ro(e)){const t=Ue.create(e);return new tt(1,t)}if(Ia(e))return new tt(4,e);if(e instanceof Me)return new tt(2,e);if(Oa(e)){const t=Me.create(e);return Q.define(t),new tt(2,t)}throw new Error(W(3400,rv(e)))}equals(e){switch(this.type){case 5:case 2:case 4:case 3:case 0:return this.type===e.type&&this.value===e.value;case 1:return this.type===e.type&&this.value.equals(e.value)}}_clone(){return new tt(this.type,this.value)}toUrlComponent(){switch(this.type){case 2:return this.value.name;case 4:case 3:case 5:throw new Error(W(3403,this.type));case 1:return this.value.toUrlComponent();case 0:return this.value}}toString(){switch(this.type){case 2:return`CEDef(name:'${this.value.name}')`;case 5:return"NS";case 3:return"Promise";case 4:return`VM(name:'${Q.getDefinition(this.value.constructor).name}')`;case 1:return this.value.toString();case 0:return`'${this.value}'`}}}class Ax{constructor(e,t,s,n,r){this._instance=e,this._controller=t,this._routeNode=s,this._ctx=n,this._routerOptions=r,this._logger=t.container.get(Le).scopeTo(`ComponentAgent<${n.routeConfigContext._friendlyPath}>`),I(this._logger,3050);const o=t.lifecycleHooks;this._canLoadHooks=(o.canLoad??[]).map(a=>a.instance),this._loadHooks=(o.loading??[]).map(a=>a.instance),this._canUnloadHooks=(o.canUnload??[]).map(a=>a.instance),this._unloadHooks=(o.unloading??[]).map(a=>a.instance),this._hasCanLoad="canLoad"in e,this._hasLoad="loading"in e,this._hasCanUnload="canUnload"in e,this._hasUnload="unloading"in e}_activate(e,t){const s=this._controller,n=this._ctx.vpa.hostController;switch(s.mountTarget){case Kn.host:case Kn.shadowRoot:n.host.appendChild(s.host);break;case Kn.location:n.host.append(s.location.$start,s.location);break;case Kn.none:throw new Error("Invalid mount target for routed component")}if(e===null)return I(this._logger,3051),this._controller.activate(this._controller,t);I(this._logger,3052),this._controller.activate(e,t)}_deactivate(e,t){var n,r,o,a;const s=this._controller;if((n=s.host)==null||n.remove(),(r=s.location)==null||r.remove(),(a=(o=s.location)==null?void 0:o.$start)==null||a.remove(),e===null)return I(this._logger,3053),s.deactivate(s,t);I(this._logger,3054),s.deactivate(e,t)}_dispose(){I(this._logger,3055),this._controller.dispose()}_canUnload(e,t,s){I(this._logger,3056,t,this._canUnloadHooks.length),s._push();let n=Promise.resolve();for(const r of this._canUnloadHooks)s._push(),n=n.then(()=>new Promise(o=>{if(e.guardsResult!==!0){s._pop(),o();return}e._run(()=>r.canUnload(this._instance,t,this._routeNode),a=>{e.guardsResult===!0&&a===!1&&(e.guardsResult=!1),s._pop(),o()})}));this._hasCanUnload&&(s._push(),n=n.then(()=>{if(e.guardsResult!==!0){s._pop();return}e._run(()=>this._instance.canUnload(t,this._routeNode),r=>{e.guardsResult===!0&&r===!1&&(e.guardsResult=!1),s._pop()})})),s._pop()}_canLoad(e,t,s){I(this._logger,3057,t,this._canLoadHooks.length);const n=this._ctx.root;s._push();let r=Promise.resolve();for(const o of this._canLoadHooks)s._push(),r=r.then(()=>new Promise(a=>{if(e.guardsResult!==!0){s._pop(),a();return}e._run(()=>o.canLoad(this._instance,t.params,t,this._routeNode),l=>{e.guardsResult===!0&&l!=null&&l!==!0&&(e.guardsResult=l===!1?!1:nt.create(l,this._routerOptions,null,n)),s._pop(),a()})}));this._hasCanLoad&&(s._push(),r=r.then(()=>{if(e.guardsResult!==!0){s._pop();return}e._run(()=>this._instance.canLoad(t.params,t,this._routeNode),o=>{e.guardsResult===!0&&o!=null&&o!==!0&&(e.guardsResult=o===!1?!1:nt.create(o,this._routerOptions,null,n)),s._pop()})})),s._pop()}_unloading(e,t,s){I(this._logger,3058,t,this._unloadHooks.length),s._push();for(const n of this._unloadHooks)e._run(()=>(s._push(),n.unloading(this._instance,t,this._routeNode)),()=>{s._pop()});this._hasUnload&&e._run(()=>(s._push(),this._instance.unloading(t,this._routeNode)),()=>{s._pop()}),s._pop()}_loading(e,t,s){I(this._logger,3059,t,this._loadHooks.length),s._push();for(const n of this._loadHooks)e._run(()=>(s._push(),n.loading(this._instance,t.params,t,this._routeNode)),()=>{s._pop()});this._hasLoad&&e._run(()=>(s._push(),this._instance.loading(t.params,t,this._routeNode)),()=>{s._pop()}),s._pop()}}const wt=at.createInterface("IRouteContext"),gv=Object.freeze(["string","object","function"]);function Px(i){if(i==null)return!1;const e=i.params,t=i.component;return typeof e=="object"&&e!==null&&t!=null&&gv.includes(typeof t)&&!(t instanceof Promise)&&!(t instanceof ao)}function Pc(i){_e(i)||(i=[i]);const e=i.length;for(let s=0;s<e;++s){const n=t(i[s]);if(n==null)throw new Error(W(3404,i));i[s]=n}return i;function t(s){let n;return typeof s=="string"||typeof s=="function"?(n=s,s=null):n=s.component,n==null||!gv.includes(typeof n)||n instanceof Promise||n instanceof ao?null:{...s,component:n,params:(s==null?void 0:s.params)??Ge}}}class As{get isRoot(){return this.parent===null}get node(){const e=this._node;if(e===null)throw new Error(W(3171,this));return e}set node(e){(this._prevNode=this._node)!==e&&(this._node=e,I(this._logger,3151,this._prevNode,e))}get vpa(){const e=this._vpa;if(e===null)throw new Error(W(3172,this));return e}constructor(e,t,s,n,r,o){this.parent=t,this._router=n,this.routeConfigContext=r,this._locationMgr=o,this._childViewportAgents=[],this._prevNode=null,this._node=null,this._vpa=e,t===null?this.root=this:this.root=t.root,this._logger=s.get(Le).scopeTo(`RouteContext<${this.routeConfigContext._friendlyPath}>`),I(this._logger,3150),this._router._subscribeNavigationStart(this);const a=this.container=s.createChild();this._platform=a.get(je),a.registerResolver(Qr,this._hostControllerProvider=new Se,!0);const l=new Se("IRouteContext",this);a.registerResolver(wt,l),a.registerResolver(As,l),n.options.useNavigationModel&&a.get(Ma).subscribe("au:router:navigation-end",()=>{r.navigationModel._setIsActive(n,this)})}static setRoot(e){const t=e.get(Le).scopeTo("RouteContext");e.has(_n,!0)||wo(new Error(W(3167)),t),e.has(wt,!0)&&wo(new Error(W(3168)),t);const{controller:s}=e.get(_n);s===void 0&&wo(new Error(W(3169)),t);const n=e.get(Xs);return T(n.getRouteContext(null,s.definition,s.viewModel,s.container,null,null,null),r=>{e.register(Et.instance(wt,r)),r.node=n.routeTree.root})}static resolve(e,t){const s=e.container,n=s.get(Le).scopeTo("RouteContext");if(t==null)return I(n,3152,t),e;if(t instanceof As)return I(n,3153,t),t;if(t instanceof s.get(je).Node){I(n,3154,t.nodeName);try{return Q.for(t,{searchParents:!0}).container.get(wt)}catch(r){throw nv(n,3155,t.nodeName,r),r}}if(Ia(t)){const r=t.$controller;return I(n,3156,r.definition.name),r.container.get(wt)}if(L1(t)){const r=t;return I(n,3157,r.definition.name),r.container.get(wt)}wo(new Error(W(3170,Object.prototype.toString.call(t))),n)}dispose(){this.container.dispose(),this._router._unsubscribeNavigationStart(this)}_resolveViewportAgent(e){I(this._logger,3158,e);const t=this._childViewportAgents.find(s=>s._handles(e));if(t===void 0)throw new Error(W(3174,e,this._printTree()));return t}getAvailableViewportAgents(){return this._childViewportAgents.filter(e=>e._isAvailable())}getFallbackViewportAgent(e){return this._childViewportAgents.find(t=>t._isAvailable()&&t.viewport.name===e&&t.viewport.fallback!=="")??null}_createComponentAgent(e,t){I(this._logger,3159,t),this._hostControllerProvider.prepare(e);const s=this.container.createChild({inheritParentResources:!0}),n=this._platform,r=t.component,o=n.document.createElement(r.name);Gr(s,o,n);const a=s.invoke(r.Type),l=this.routeConfigContext._childRoutesConfigured?void 0:T(Br(a,!1,this.routeConfigContext.config,t,null),c=>this.routeConfigContext._processConfig(c));return T(l,()=>{const c=Xe.$el(s,a,o,{projections:null},r),u=new Ax(a,c,t,this,this._router.options);return this._hostControllerProvider.dispose(),u})}generateRootedPath(e){return T(this.createViewportInstructions(Pc(e),null,!0),t=>{var a,l,c;const s=t.toUrl(!0,this._router.options._urlParser);let n="";const r=[];let o=t.options.context;for(;!o.isRoot;){const u=(c=(l=(a=o.vpa)==null?void 0:a._currNode)==null?void 0:l.instruction)==null?void 0:c.toUrlComponent(!1);((u==null?void 0:u.length)??0)!==0&&r.unshift(u),o=o.parent}return n=r.join("/"),n.length===0?s:`${n}/${s}`})}generateRelativePath(e){return T(this.createViewportInstructions(Pc(e),null,!0),t=>t.toUrl(!0,this._router.options._urlParser))}createViewportInstructions(e,t,s){if(e instanceof nt)return e;let n=(t==null?void 0:t.context)??this,r=!1;if(!_e(e))e=a.call(this,e);else{const l=e.length;for(let c=0;c<l;++c)e[c]=a.call(this,e[c])}const o=this._router.options;return nt.create(e,o,ss.create(o,{...t,context:n}),this.root,s);function a(l){typeof l=="string"&&(l=this._locationMgr.removeBaseHref(l));const c=ro(l);let u=c?l.component:l;if(typeof u=="string"&&u.startsWith("../")&&n!==null){for(;u.startsWith("../")&&(((n==null?void 0:n.parent)??null)!==null||r);)u=u.slice(3),r||(n=n.parent);r=!0}return c?l.component=u:l=u,l}}_registerViewport(e){const t=oa.for(e,this);return this._childViewportAgents.includes(t)?(I(this._logger,3161,t),t):(I(this._logger,3160,t),this._childViewportAgents.push(t),t)}_unregisterViewport(e){const t=oa.for(e,this);if(!this._childViewportAgents.includes(t)){I(this._logger,3163,t);return}I(this._logger,3162,t),this._childViewportAgents.splice(this._childViewportAgents.indexOf(t),1)}toString(){const t=this._childViewportAgents.map(String).join(",");return`RC(path:'${this.routeConfigContext._friendlyPath}',viewports:[${t}])`}_printTree(){const e=[],t=this.routeConfigContext.path;for(let s=0;s<t.length;++s)e.push(`${" ".repeat(s)}${t[s]}`);return e.join(`
`)}}class Ix{get isRoot(){return this.parent===null}get depth(){return this.path.length-1}get navigationModel(){return this._navigationModel}get allResolved(){return this._allResolved}constructor(e,t,s,n,r){this.parent=e,this.component=t,this.config=s,this._router=r,this._childRoutesConfigured=!1,this.childRoutes=[],this._allResolved=null,e===null?(this.root=this,this.path=[this],this._friendlyPath=t.name):(this.root=e.root,this.path=[...e.path,this],this._friendlyPath=`${e._friendlyPath}/${t.name}`),this._logger=n.get(Le).scopeTo(`RouteConfigContext<${this._friendlyPath}>`),I(this._logger,3150),this._moduleLoader=n.get(cb),this.container=n.createChild(),this._recognizer=new sx,r.options.useNavigationModel?this._navigationModel=new Ex([]):this._navigationModel=null,this._processConfig(s)}_handleNavigationStart(){this.config._handleNavigationStart();for(const e of this.childRoutes)e instanceof Promise||e._handleNavigationStart()}_processConfig(e){var l;const t=[],s=e.routes??To,n=s.length;if(n===0){const c=(l=e.component.prototype)==null?void 0:l.getRouteConfig;this._childRoutesConfigured=c==null?!0:typeof c!="function";return}const r=this._navigationModel,o=r!==null;let a=0;for(;a<n;a++){const c=s[a];if(c instanceof Promise){t.push(this._addRoute(c));continue}const u=Br(c,!0,e,null,this);if(u instanceof Promise){if(!Ba(c)||c.path==null)throw new Error(W(3173));for(const d of rn(c.path))this._$addRoute(d,c.caseSensitive??!1,u);const h=this.childRoutes.length,f=u.then(d=>this.childRoutes[h]=d);this.childRoutes.push(f),o&&r._addRoute(f),t.push(f.then(dt));continue}for(const h of u.path??q)this._$addRoute(h,u.caseSensitive,u);this.childRoutes.push(u),o&&r._addRoute(u)}this._childRoutesConfigured=!0,t.length>0&&(this._allResolved=Promise.all(t).then(()=>{this._allResolved=null}))}_addRoute(e){return I(this._logger,3165,e),T(Br(e,!0,this.config,null,this),t=>{var s;for(const n of t.path??q)this._$addRoute(n,t.caseSensitive,t);(s=this._navigationModel)==null||s._addRoute(t),this.childRoutes.push(t)})}_$addRoute(e,t,s){this._recognizer.add({path:e,caseSensitive:t,handler:s},!0)}_resolveLazy(e){return this._moduleLoader.load(e,t=>{const s=t.raw;if(typeof s=="function"){const o=Q.isType(s)?Q.getDefinition(s):null;if(o!=null)return o}let n,r;for(const o of t.items){const a=Q.isType(o.value)?o.definition:null;a!=null&&(o.key==="default"?n=a:r===void 0&&(r=a))}if(n===void 0&&r===void 0){if(!Oa(s))throw new Error(W(3175,e));const o=Me.create(s);return Q.define(o),o}return r??n})}_generateViewportInstruction(e,t){if(!Px(e))return null;t??(t=!1);const s=e.component;let n,r=!1;if(s instanceof es)n=s.path,r=!0;else if(typeof s=="string"){const p=this.childRoutes.find(_=>_.id===s);if(p===void 0)return null;n=p.path}else if(s.type===0){const p=this.childRoutes.find(_=>_.id===s.value);if(p===void 0)return null;n=p.path}else{const p=Mr(s,this)[1];n=this.childRoutes.reduce((_,b)=>(b.component===p.Type&&_.push(...b.path),_),[]),r=!0}if(n===void 0)return null;const o=e.params,a=this._recognizer,l=n.length,c=[];let u=null;if(l===1){const p=f(n[0]);if(p===null){if(r)throw new Error(W(3166,e,c));return zs(this._logger,3166,e,c),null}return g.call(this,p)}let h=0;for(let p=0;p<l;p++){const _=f(n[p]);_!==null&&(u===null?(u=_,h=Object.keys(_.consumed).length):Object.keys(_.consumed).length>h&&(u=_))}if(u===null){if(r)throw new Error(W(3166,e,c));return zs(this._logger,3166,e,c),null}return g.call(this,u);function f(p){const _=a.getEndpoint(p);if(_===null)return c.push(`No endpoint found for the path: '${p}'.`),null;const b=Object.create(null);for(const m of _.params){const C=m.name;let O=o[C];if(O==null||String(O).length===0){if(!m.isOptional)return c.push(`No value for the required parameter '${C}' is provided for the path: '${p}'.`),null;O=""}else{if(!m.satisfiesPattern(O))return c.push(`The value '${O}' for the parameter '${C}' does not satisfy the pattern '${m.pattern}'.`),null;b[C]=O}const E=m.isStar?`*${C}`:m.isOptional?`:${C}?`:`:${C}`;p=p.replace(E,encodeURIComponent(O))}const v=Object.keys(b),S=Object.fromEntries(Object.entries(o).filter(([m])=>!v.includes(m)));return{path:p.replace(/\/\//g,"/"),endpoint:_,consumed:b,query:S}}async function d(p){const _=e.children,b=(_==null?void 0:_.length)??0;if(b===0)return{instructions:q,query:Ge};const v=p.component,S=Q.isType(v)?Q.getDefinition(v):Mr(v,this)[1];return T(T(this._router.getRouteConfigContext(p,S,null,this.container,this.config,this),m=>T(m.allResolved,()=>m)),m=>{const C=new Array(b),O=new Array(b);let E=Object.create(null);for(let N=0;N<b;++N){const D=_[N];C[N]=T(m._generateViewportInstruction(ro(D)?{...D,params:D.params??Ge}:{component:D,params:Ge},t),F=>{if(F==null)throw new Error(W(3166,D));O[N]=F.vi,E=sf(E,F.query)})}return T(Promise.all(C),()=>({instructions:O,query:E}))})}function g(p){return T(t?d.call(this,p.endpoint.route.handler):{instructions:e.children,query:Ge},({instructions:_,query:b})=>({vi:Ue.create({recognizedRoute:new ha(new Ta(p.endpoint,p.consumed),null),component:p.path,children:_,viewport:e.viewport,open:e.open,close:e.close}),query:sf(p.query,b)}))}}recognize(e,t=!1){I(this._logger,3164,e);let s=this,n=!0,r=null;for(;n;)if(r=s._recognizer.recognize(e),r===null){if(!t||s.isRoot)return null;s=s.parent}else n=!1;return new ha(r,Reflect.has(r.params,Yt)?r.params[Yt]??null:null)}dispose(){this.container.dispose()}}class ha{constructor(e,t){this.route=e,this.residue=t}toString(){const e=this.route,t=e.endpoint.route;return`RR(route:(endpoint:(route:(path:${t.path},handler:${t.handler})),params:${JSON.stringify(e.params)}),residue:${this.residue})`}}class Ex{constructor(e){this.routes=e,this._promise=void 0}resolve(){return T(this._promise,dt)}_setIsActive(e,t){T(this._promise,()=>{for(const s of this.routes)s._setIsActive(e,t)})}_addRoute(e){const t=this.routes;if(!(e instanceof Promise)){(e.nav??!1)&&e.redirectTo===null&&t.push(ua._create(e));return}const s=t.length;t.push(void 0);let n;n=this._promise=T(this._promise,()=>T(e,r=>{r.nav&&r.redirectTo===null?t[s]=ua._create(r):t.splice(s,1),this._promise===n&&(this._promise=void 0)}))}}class ua{constructor(e,t,s,n){this.id=e,this.path=t,this.title=s,this.data=n,this._trees=null}static _create(e){return new ua(e.id,rn(e.path??q),e.title,e.data)}get isActive(){return this._isActive}_setIsActive(e,t){let s=this._trees;if(s===null){const n=e.options;s=this._trees=this.path.map(r=>{const o=t.routeConfigContext._recognizer.getEndpoint(r);if(o===null)throw new Error(W(3450,r));return new nt(ss.create(n,{context:t}),!1,[Ue.create({recognizedRoute:new ha(new Ta(o,Ge),null),component:r})],oo,null)})}this._isActive=s.some(n=>e.routeTree.contains(n,!0))}}class _v{constructor(){this.name=Cn,this.usedBy="",this.default="",this.fallback="",this._agent=void 0,this._controller=void 0,this._ctx=x(wt),this._logger=x(Le).scopeTo(`au-viewport<${this._ctx.routeConfigContext._friendlyPath}>`)}_getFallback(e,t,s){const n=this.fallback;return typeof n=="function"&&!Q.isType(n)?n(e,t,s):n}hydrated(e){I(this._logger,3e3),this._controller=e,this._agent=this._ctx._registerViewport(this)}attaching(e,t){return I(this._logger,3001),this._agent._activateFromViewport(e,this._controller)}detaching(e,t){return I(this._logger,3002),this._agent._deactivateFromViewport(e,this._controller)}dispose(){I(this._logger,3003),this._ctx._unregisterViewport(this),this._agent._dispose(),this._agent=void 0}toString(){const e=[];for(const t of Tx){const s=this[t];switch(typeof s){case"string":s!==""&&e.push(`${t}:'${s}'`);break;default:e.push(`${t}:${String(s)}`)}}return`VP(ctx:'${this._ctx.routeConfigContext._friendlyPath}',${e.join(",")})`}}Q.define({name:"au-viewport",bindables:["name","usedBy","default","fallback"]},_v);const Tx=["name","usedBy","default","fallback"];class Zh{constructor(){this._el=x(Rn),this._router=x(Xs),this._ctx=x(wt),this._events=x(Ma),this._locationMgr=x(hv),this.attribute="href",this.active=!1,this._href=null,this._instructions=null,this._navigationEndListener=null,this.onClick=t=>{this._instructions!==null&&(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||t.button!==0||(t.preventDefault(),this._router.load(this._instructions,{context:this.context})))};const e=this._el;this._isEnabled=!e.hasAttribute("external")&&!e.hasAttribute("data-external"),this._activeClass=this._router.options.activeClass}binding(){this._isEnabled&&this._el.addEventListener("click",this.onClick),this.valueChanged(),this._navigationEndListener=this._events.subscribe("au:router:navigation-end",e=>{const t=this.active=this._instructions!==null&&this._router.isActive(this._instructions,this.context),s=this._activeClass;s!==null&&this._el.classList.toggle(s,t)})}attaching(){const t=this.context.routeConfigContext.allResolved;if(t!==null)return t.then(()=>{this.valueChanged()})}unbinding(){this._isEnabled&&this._el.removeEventListener("click",this.onClick),this._navigationEndListener.dispose()}valueChanged(){const e=this._router,t=e.options,s=this.route;let n=this.context;if(n===void 0?n=this.context=this._ctx:n===null&&(n=this.context=this._ctx.root),s!=null&&n.routeConfigContext.allResolved===null){const o=this.params,a=this._instructions=e.createViewportInstructions(typeof o=="object"&&o!==null?{component:s,params:o}:s,{context:n});this._href=a.toUrl(!1,t._urlParser)}else this._instructions=null,this._href=null;const r=Q.for(this._el,{optional:!0});if(r!==null)r.viewModel[this.attribute]=this._instructions;else if(this._href===null)this._el.removeAttribute(this.attribute);else{const o=t.useUrlFragmentHash?this._href:this._locationMgr.addBaseHref(this._href);this._el.setAttribute(this.attribute,o)}}}Wr.define({name:"load",bindables:{route:{mode:sr,primary:!0,callback:"valueChanged"},params:{mode:sr,callback:"valueChanged"},attribute:{mode:sr},active:{mode:ax},context:{mode:sr,callback:"valueChanged"}}},Zh);class mv{get _isExternal(){return this._el.hasAttribute("external")||this._el.hasAttribute("data-external")}constructor(){if(this._el=x(Rn),this._router=x(Xs),this._ctx=x(wt),this._isInitialized=!1,this._router.options.useHref&&this._el.nodeName==="A"){const e=x(Kr).name;switch(this._el.getAttribute("target")){case null:case e:case"_self":this._isEnabled=!0;break;default:this._isEnabled=!1;break}}else this._isEnabled=!1}binding(){this._isInitialized||(this._isInitialized=!0,this._isEnabled=this._isEnabled&&jt.get(this._el,Wr.getDefinition(Zh).key)===null),this.valueChanged(this.value),this._el.addEventListener("click",this)}unbinding(){this._el.removeEventListener("click",this)}valueChanged(e){e==null?this._el.removeAttribute("href"):(this._router.options.useUrlFragmentHash&&this._ctx.routeConfigContext.isRoot&&!/^[.#]/.test(e)&&!this._isExternal&&(e=`#${e}`),this._el.setAttribute("href",e))}handleEvent(e){this._onClick(e)}_onClick(e){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||e.button!==0||this._isExternal||!this._isEnabled)return;const t=this._el.getAttribute("href");t!==null&&(e.preventDefault(),this._router.load(t,{context:this._ctx}))}}mv.$au={type:"custom-attribute",name:"href",noMultiBindings:!0,bindables:{value:{mode:sr}}};const Rx=Xs,Ox=[Rx],Bx=[_v,Zh,mv];function cf(i,e){let t=null;Ii(e)?t=e.basePath??null:e={};const s=ca.create(e);return i.register(Et.cachedCallback(cv,(n,r,o)=>{const a=n.get(Kr),l=new URL(a.document.baseURI);return l.pathname=uv(t??l.pathname),l}),Et.instance(Yh,s),Et.instance(ca,s),po.creating(Xs,n=>{}),po.hydrated(Ni,As.setRoot),po.activated(Xs,n=>n.start(!0)),po.deactivated(Xs,n=>n.stop()),...Ox,...Bx)}const Mx={register(i){return cf(i)},customize(i){return{register(e){return cf(e,i)}}}};var Lx=Object.create,eu=Object.defineProperty,Nx=Object.getOwnPropertyDescriptor,Dx=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),vv=i=>{throw TypeError(i)},jx=(i,e,t)=>e in i?eu(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Fx=(i,e)=>eu(i,"name",{value:e,configurable:!0}),Vx=i=>[,,,Lx(null)],zx=["class","method","getter","setter","accessor","field","value","get","set"],bv=i=>i!==void 0&&typeof i!="function"?vv("Function expected"):i,Hx=(i,e,t,s,n)=>({kind:zx[i],name:e,metadata:s,addInitializer:r=>t._?vv("Already initialized"):n.push(bv(r||null))}),Ux=(i,e)=>jx(e,Dx("metadata"),i[3]),qx=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},Wx=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,f=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&Nx(n,t));Fx(n,t);for(var g=s.length-1;g>=0;g--)l=Hx(c,t,a={},i[3],f),o=(0,s[g])(n,l),a._=1,bv(o)&&(n=o);return Ux(i,n),d&&eu(n,t,d),u?c^4?r:d:n},wv,tu;wv=[lt(OC),vx({routes:[{path:"",component:Rr,title:"Home"},{path:"cart",component:Or,title:"Cart"}]})];const nu=class nu{constructor(e){this.cartService=e}get cartCount(){return this.cartService.count}};nu.dependencies=[bn,Yo,Zo,Ts,Rr,Or,ti,ea];let kn=nu;tu=Vx();kn=Wx(tu,0,"MyApp",wv,kn);qx(tu,1,kn);wr.register(Mx).app(kn).start();
