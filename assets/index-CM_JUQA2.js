(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function Mv(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const It={get(i,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[i]},define(i,e,...t){var r;let s=(r=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:r.value;s==null&&Object.defineProperty(e,Symbol.metadata,{value:s=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=t.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:s[t[0]]=i;return;case 2:s[t[0]]=s[t[1]]=i;return;default:{for(let o=0;o<n;++o)s[t[o]]=i;return}}},has(i,e){const t=e[Symbol.metadata];return t==null?!1:i in t},delete(i,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,i)}},Qr=Object.freeze,_p=Object.assign,Lv=String,Vt=It.get,Cr=It.define,Te=i=>i instanceof Promise,_e=i=>i instanceof Array,Sn=i=>i instanceof Set,Ws=i=>i instanceof Map,mp=i=>i instanceof Object;function Pi(i){return typeof i=="object"&&i!==null||typeof i=="function"}const Z=i=>typeof i=="function",J=i=>typeof i=="string",Nv=i=>typeof i=="symbol",Dv=i=>typeof i=="number",ce=()=>Object.create(null),Is=Object.is,ye=(i,...e)=>{const t=Lv(i).padStart(4,"0"),s=jv(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/0001-to-0023/aur${t}`;return new Error(`AUR${t}: ${s}\\n\\nFor more information, see: ${n}`)},Fv={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},jv=(i,...e)=>{let t=Fv[i];for(let s=0;s<e.length;++s)t=t.replace(`{{${s}}}`,String(e[s]));return t},un=(...i)=>globalThis.console.error(...i),dn=(()=>{const i={};let e=!1,t=0,s=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(r|0)===r;case"string":if(e=i[r],e!==void 0)return e;if(t=r.length,t===0)return i[r]=!1;for(s=0,n=0;n<t;++n)if(s=r.charCodeAt(n),n===0&&s===48&&t>1||s<48||s>57)return i[r]=!1;return i[r]=!0;default:return!1}}})(),vp=(function(){const i=_p(ce(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:i[t]===!0?1:0;return(t,s)=>{const n=t.length;if(n===0)return t;let r=!1,o="",a,l="",c=0,u=t.charAt(0),h=e(u),p=0;for(;p<n;++p)a=c,l=u,c=h,u=t.charAt(p+1),h=e(u),c===0?o.length>0&&(r=!0):(!r&&o.length>0&&c===2&&(r=a===3||h===3),o+=s(l,r),r=!1);return o}})(),De=(function(){const i=ce(),e=(t,s)=>s?t.toUpperCase():t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=vp(t,e)),s}})(),bp=(function(){const i=ce();return e=>{let t=i[e];return t===void 0&&(t=De(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),i[e]=t),t}})(),wp=(function(){const i=ce(),e=(t,s)=>s?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=vp(t,e)),s}})(),ja=i=>{const e=i.length,t=Array(e);let s=0;for(;s<e;++s)t[s]=i[s];return t},Ui=(i,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:i.bind(this),writable:!0,configurable:!0,enumerable:!1})})},Re=(...i)=>{const e=[];let t=0;const s=i.length;let n=0,r,o=0;for(;o<s;++o)if(r=i[o],r!==void 0){n=r.length;let a=0;for(;a<n;++a)e[t++]=r[a]}return e},Vs=(...i)=>{const e=i.length;let t,s=0;for(;e>s;++s)if(t=i[s],t!==void 0)return t;throw ye(20)},Vv=(function(){const i=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let s=i,n=0,r;return function(o){if(r=t.get(o),r===void 0)for(t.set(o,r=[s=o]),n=0;(s=e(s))!==i;)r[++n]=s;return r}})();function Rl(...i){return _p(ce(),...i)}const pu=(()=>{const i=new WeakMap;let e=!1,t="",s=0;return n=>(e=i.get(n),e==null&&(s=(t=n.toString()).length,e=s>28&&t.indexOf("[native code] }")===s-15,i.set(n,e)),e)})(),R=(i,e)=>Te(i)?i.then(e):e(i),le=(...i)=>{let e,t,s,n=0,r=i.length;for(;n<r;++n)e=i[n],Te(e=i[n])&&(t===void 0?t=e:s===void 0?s=[t,e]:s.push(e));return s===void 0?t:Promise.all(s)},zv=(i,e)=>new zt(i,0,e),kr=(i,e)=>new zt(i,1,e),Ap=(i,e)=>new zt(i,2,e),Uv=(i,e)=>new zt(i,3,e),Qv=(i,e)=>new zt(i,3,yp(e)),Mo=(i,e)=>new zt(e,5,i),Hv=(i,...e)=>new lb(i,e),fu=new WeakMap,yp=i=>(e,t,s)=>{let n=fu.get(e);if(n===void 0&&fu.set(e,n=new WeakMap),n.has(s))return n.get(s);const r=i(e,t,s);return n.set(s,r),r},Pt={instance:zv,singleton:kr,transient:Ap,callback:Uv,cachedCallback:Qv,aliasTo:Mo,defer:Hv},Hr=function(i){return function(t){t.register(kr(this,this),Mo(this,i))}},xi="au:annotation",Ks=(i,e)=>e===void 0?`${xi}:${i}`:`${xi}:${i}:${e}`,qv=(i,e)=>{const t=Vt(xi,i);t===void 0?Cr([e],i,xi):t.push(e)},Wv=Qr({name:"au:annotation",appendTo:qv,set(i,e,t){Cr(t,i,Ks(e))},get:(i,e)=>Vt(Ks(e),i),getKeys(i){let e=Vt(xi,i);return e===void 0&&Cr(e=[],i,xi),e},isKey:i=>i.startsWith(xi),keyFor:Ks}),Dt="au:resource",si=(i,e,t)=>`${Dt}:${i}`,Cp={annotation:Wv},kp=Object.prototype.hasOwnProperty;function pt(i,e,t,s){let n=Vt(Ks(i),t);return n===void 0?(n=e[i],n===void 0?(n=t[i],n===void 0||!kp.call(t,i)?s():n):n):n}function Lt(i,e,t){let s=Vt(Ks(i),e);return s===void 0?(s=e[i],s===void 0||!kp.call(e,i)?t():s):s}function Kt(i,e,t){const s=e[i];return s===void 0?t():s}const cs=Symbol.for("au:registrable"),Kv={singleton:i=>new zt(i,1,i)};class ts{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===ts.DEFAULT?ts.DEFAULT:new ts(e.inheritParentResources??!1,e.defaultResolver??Kv.singleton)}}ts.DEFAULT=ts.from({});const Gv=i=>new rr(null,ts.from(i)),Yv=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let Jv=0,be=null;class rr{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++Jv,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const s in e.res)this.registerResolver(s,e.res[s]);this._resolvers.set(Di,Zv)}register(...e){var u,h,p,d;if(++this._registerDepth===100)throw ye(6,...e);let t,s,n,r,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!Pi(t))if(Qn(t))t.register(this);else if((c=Vt(Dt,t))!=null)c.register(this);else if(tb(t)){const g=(u=t[Symbol.metadata])==null?void 0:u[cs];if(Qn(g))g.register(this);else if(J((h=t.$au)==null?void 0:h.type)){const f=t.$au,_=(t.aliases??H).concat(f.aliases??H);let b=`${Dt}:${f.type}:${f.name}`;if(this.has(b,!1)){(p=globalThis.console)==null||p.warn(ye(7,b));continue}for(Mo(t,b).register(this),this.has(t,!1)||kr(t,t).register(this),r=0,o=_.length;r<o;++r){if(b=`${Dt}:${f.type}:${_[r]}`,this.has(b,!1)){(d=globalThis.console)==null||d.warn(ye(7,b));continue}Mo(t,b).register(this)}}else kr(t,t).register(this)}else for(s=Object.keys(t),r=0,o=s.length;r<o;++r)n=t[s[r]],Pi(n)&&(Qn(n)?n.register(this):this.register(n));return--this._registerDepth,this}registerResolver(e,t,s=!1){Dn(e);const n=this._resolvers,r=n.get(e);if(r==null){if(n.set(e,t),Va(e)){if(this.res[e]!==void 0)throw ye(7,e);this.res[e]=t}}else r instanceof zt&&r._strategy===4?r._state.push(t):n.set(e,new zt(e,4,[r,t]));return s&&this._disposableResolvers.set(e,t),t}deregister(e){Dn(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),Va(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const s=this.getResolver(e);if(s==null)return!1;if(s.getFactory){const n=s.getFactory(this);return n==null?!1:(n.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(Dn(e),e.resolve!==void 0)return e;const s=be;let n=be=this,r,o;try{for(;n!=null;)if(r=n._resolvers.get(e),r==null){if(n._parent==null)return o=mu(e)?this:n,t?this._jitRegister(e,o):null;n=n._parent}else return r}finally{be=s}return null}has(e,t=!1){var s;return this._resolvers.has(e)||Va(e)&&e in this.res||((t&&((s=this._parent)==null?void 0:s.has(e,!0)))??!1)}get(e){if(Dn(e),e.$isResolver)return e.resolve(this,this);const t=be;let s=be=this,n,r;try{for(;s!=null;)if(n=s._resolvers.get(e),n==null){if(s._parent==null)return r=mu(e)?this:s,n=this._jitRegister(e,r),n.resolve(s,this);s=s._parent}else return n.resolve(s,this)}finally{be=t}throw ye(8,e)}getAll(e,t=!1){Dn(e);const s=be,n=be=this;let r=n,o,a=H;try{if(t){for(;r!=null;)o=r._resolvers.get(e),o!=null&&(a=a.concat(_u(o,r,n))),r=r._parent;return a}for(;r!=null;)if(o=r._resolvers.get(e),o==null){if(r=r._parent,r==null)return H}else return _u(o,r,n)}finally{be=s}return H}invoke(e,t){if(pu(e))throw ye(15,e);const s=be;be=this;{let n,r;try{n=Xi(e).map(o=>this.get(r=o))}catch(o){throw un(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(r)}`),be=s,o}try{return t===void 0?new e(...n):new e(...n,...t)}catch(o){throw un(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{be=s}}try{return t===void 0?new e(...Xi(e).map($r,this)):new e(...Xi(e).map($r,this),...t)}finally{be=s}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(pu(e))throw ye(15,e);this._factories.set(e,t=new Xv(e,Xi(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===ts.DEFAULT?new rr(this,this.config):new rr(this,ts.from({...this.config,inheritParentResources:!1})):new rr(this,ts.from(e??this.config))}disposeResolvers(){var r;const e=this._resolvers,t=this._disposableResolvers;let s,n;for([n,s]of t.entries())(r=s.dispose)==null||r.call(s),e.delete(n);t.clear()}useResources(e){const t=e.res;for(const s in t)this.registerResolver(s,t[s])}find(e,t){var o,a;const s=J(t)?`${Dt}:${e}:${t}`:e;let n=this,r=n.res[s];return r==null&&(n=n.root,r=n.res[s]),r==null?null:((a=(o=r.getFactory)==null?void 0:o.call(r,n))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const s=Qn(e);if(!Z(e)&&!s)throw ye(9,e);if(Yv.has(e.name))throw ye(10,e);if(s){const r=e.register(t,e);if(!(r instanceof Object)||r.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw ye(11,e)}return r}if(e.$isInterface)throw ye(12,e.friendlyName);const n=this.config.defaultResolver(e,t);return t._resolvers.set(e,n),n}}class Xv{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const s=be;be=e;let n;{let r,o;try{r=this.dependencies.map(a=>e.get(o=a))}catch(a){throw un(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),be=s,a}try{return t===void 0?n=new this.Type(...r):n=new this.Type(...r,...t),this.transformers==null?n:this.transformers.reduce(gu,n)}catch(a){throw un(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{be=s}}try{return t===void 0?n=new this.Type(...this.dependencies.map($r,e)):n=new this.Type(...this.dependencies.map($r,e),...t),this.transformers==null?n:this.transformers.reduce(gu,n)}finally{be=s}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function gu(i,e){return e(i)}function Dn(i){if(i==null)throw ye(14)}function $r(i){return this.get(i)}function S(...i){if(be==null)throw ye(16,...i);if(i.length===1)try{return be.get(i[0])}catch(e){throw un(`[DEV:aurelia] resolve() call error for: ${String(i[0])}`),e}else{let e;try{return i.map(t=>be.get(e=t))}catch(t){throw un(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return i.length===1?be.get(i[0]):i.map($r,be)}const _u=(i,e,t)=>{if(i instanceof zt&&i._strategy===4){const s=i._state,n=s.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=s[o].resolve(e,t);return r}return[i.resolve(e,t)]},Zv={$isResolver:!0,resolve(i,e){return e}},Qn=i=>Z(i==null?void 0:i.register),eb=i=>Qn(i)&&typeof i.registerInRequestor=="boolean",mu=i=>eb(i)&&i.registerInRequestor,tb=i=>i.prototype!==void 0,Va=i=>J(i)&&i.indexOf(":")>0;class sb{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,yp(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:s,_key:n}=this;return this._container=this._key=void 0,s.registerResolver(n,new zt(n,e,t))}}const Fn=i=>{const e=i.slice(),t=Object.keys(i),s=t.length;let n;for(let r=0;r<s;++r)n=t[r],dn(n)||(e[n]=i[n]);return e},ko=Ks("di:paramtypes"),ib=i=>Vt(ko,i),$p=i=>Vt("design:paramtypes",i),vu=i=>{var e;return(e=i.metadata)[ko]??(e[ko]=[])},Xi=i=>{const e=Ks("di:dependencies");let t=Vt(e,i);if(t===void 0){const s=i.inject;if(s===void 0){const n=$p(i),r=ib(i);if(n===void 0)if(r===void 0){const o=Object.getPrototypeOf(i);Z(o)&&o!==Function.prototype?t=Fn(Xi(o)):t=[]}else t=Fn(r);else if(r===void 0)t=Fn(n);else{t=Fn(n);let o=r.length,a,l=0;for(;l<o;++l)a=r[l],a!==void 0&&(t[l]=a);const c=Object.keys(r);let u;for(l=0,o=c.length,l=0;l<o;++l)u=c[l],dn(u)||(t[u]=r[u])}}else t=Fn(s);Cr(t,i,e)}return t},hs=(i,e)=>{const t=Z(i)?i:e,s=(J(i)?i:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:s,toString:()=>`InterfaceSymbol<${s}>`,register:t!=null?(r,o)=>t(new sb(r,o??n)):void 0};return n},ii=(...i)=>(e,t)=>{switch(t.kind){case"class":{const s=vu(t);let n,r=0;for(;r<i.length;++r)n=i[r],n!==void 0&&(s[r]=n);break}case"field":{const s=vu(t),n=i[0];n!==void 0&&(s[t.name]=n);break}default:throw ye(22,String(t.name),t.kind)}},lt=(Mv(),{createContainer:Gv,getDesignParamtypes:$p,getDependencies:Xi,createInterface:hs,inject:ii,transient(i){return i.register=function(e){return Ap(i,i).register(e,i)},i.registerInRequestor=!1,i},singleton(i,e=ob){return i.register=function(t){return kr(i,i).register(t,i)},i.registerInRequestor=e.scoped,i}}),Di=hs("IContainer"),nb=Di;function bu(i,e){return lt.transient(i)}function rb(i,e){return i==null?bu:bu(i)}const ob={scoped:!1},wu=lt.singleton;function ab(i,e){return Z(i)?wu(i):function(t,s){return wu(t,i)}}class zt{get $isResolver(){return!0}constructor(e,t,s){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=s}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw ye(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const s=e.getFactory(this._state);if(s===null)throw ye(4,this._key);return s.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw ye(5,this._strategy)}}getFactory(e){var t,s;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((s=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:s.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class $e{get friendlyName(){return this._name}constructor(e,t=null,s=null){this._name=e,this._instance=t,this._Type=s}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw ye(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class lb{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const H=Qr([]),Ge=Qr({});function dt(){}const xn=hs("IPlatform");function qr(i){return function(e){function t(s,n){ii(t)(s,n)}return t.$isResolver=!0,t.resolve=function(s,n){return i(e,s,n)},t}}const Rc=(i,e=!1)=>{function t(s,n){ii(t)(s,n)}return t.$isResolver=!0,t.resolve=(s,n)=>n.getAll(i,e),t},Sp=qr((i,e,t)=>{if(t.has(i,!0))return t.get(i)}),cb=qr((i,e,t)=>t.has(i,!1)?t.get(i):void 0),pn=qr((i,e,t)=>t.has(i,!1)?t.get(i):t.root.get(i)),hb=qr((i,e,t)=>t.has(i,!1)?t.get(i):t.root.has(i,!1)?t.root.get(i):void 0),ub=qr((i,e,t)=>t===t.root?t.getAll(i,!1):t.has(i,!1)?t.getAll(i,!1).concat(t.root.getAll(i,!1)):t.root.getAll(i,!1));function Qi(i,e,t,s,n,r){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=s.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=i?s.static?i:i.prototype:null,u=c?Object.getOwnPropertyDescriptor(c,s.name):{},h,p=!1,d=t.length-1;d>=0;d--){var g={};for(var f in s)g[f]=f==="access"?{}:s[f];for(var f in s.access)g.access[f]=s.access[f];g.addInitializer=function(b){if(p)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(b||null))};var _=(0,t[d])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(u.get=h),(h=o(_.set))&&(u.set=h),(h=o(_.init))&&n.unshift(h)}else(h=o(_))&&(a==="field"?n.unshift(h):u[l]=h)}c&&Object.defineProperty(c,s.name,u),p=!0}function db(i,e,t){for(var s=arguments.length>2,n=0;n<e.length;n++)t=s?e[n].call(i,t):e[n].call(i);return s?t:void 0}const or=0,ar=1,lr=2,an=3,cr=4,hr=5,pb=6,fb=Qr({trace:or,debug:ar,info:lr,warn:an,error:cr,fatal:hr,none:pb}),xp=hs("ILogConfig",i=>i.instance(new bb("no-colors",an))),gb=hs("ISink"),_b=hs("ILogEventFactory",i=>i.singleton(Ab)),Le=hs("ILogger",i=>i.singleton(yb)),mb=hs("ILogScope"),vb=Qr({key:Ks("logger-sink-handles"),define(i,e){Cr(e.handles,i,this.key)},getHandles(i){return Vt(this.key,i.constructor)}}),As=Rl({red(i){return`\x1B[31m${i}\x1B[39m`},green(i){return`\x1B[32m${i}\x1B[39m`},yellow(i){return`\x1B[33m${i}\x1B[39m`},blue(i){return`\x1B[34m${i}\x1B[39m`},magenta(i){return`\x1B[35m${i}\x1B[39m`},cyan(i){return`\x1B[36m${i}\x1B[39m`},white(i){return`\x1B[37m${i}\x1B[39m`},grey(i){return`\x1B[90m${i}\x1B[39m`}});class bb{constructor(e,t){this.colorOptions=e,this.level=t}}const za=(function(){const i={"no-colors":Rl({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:Rl({TRC:As.grey("TRC"),DBG:As.grey("DBG"),INF:As.white("INF"),WRN:As.yellow("WRN"),ERR:As.red("ERR"),FTL:As.red("FTL"),QQQ:As.grey("???")})};return(e,t)=>e<=or?i[t].TRC:e<=ar?i[t].DBG:e<=lr?i[t].INF:e<=an?i[t].WRN:e<=cr?i[t].ERR:e<=hr?i[t].FTL:i[t].QQQ})(),Au=(i,e)=>e==="no-colors"?i.join("."):i.map(As.cyan).join("."),Ua=(i,e)=>e==="no-colors"?new Date(i).toISOString():As.grey(new Date(i).toISOString());class wb{constructor(e,t,s,n,r,o){this.severity=e,this.message=t,this.optionalParams=s,this.scope=n,this.colorOptions=r,this.timestamp=o}toString(){const{severity:e,message:t,scope:s,colorOptions:n,timestamp:r}=this;return s.length===0?`${Ua(r,n)} [${za(e,n)}] ${t}`:`${Ua(r,n)} [${za(e,n)} ${Au(s,n)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:s,scope:n,colorOptions:r,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&s instanceof Error?l=s:c=s;const u=n.length===0?"":` ${Au(n,r)}`;let h=`${Ua(o,r)} [${za(t,r)}${u}] ${c}`;if(a===void 0||a.length===0)return l===null?[h]:[h,l];let p=0;for(;h.includes("%s");)h=h.replace("%s",String(a[p++]));return l!==null?[h,l,...a.slice(p)]:[h,...a.slice(p)]}}class Ab{constructor(){this.config=S(xp)}createLogEvent(e,t,s,n){return new wb(t,s,n,e.scope,this.config.colorOptions,Date.now())}}let yb=(()=>{var i;let e=[],t,s,n,r,o,a;return i=class{constructor(c=S(xp),u=S(_b),h=S(Rc(gb)),p=S(Sp(mb))??[],d=null){this.scope=(db(this,e),p),this._scopedLoggers=ce();let g,f,_,b,v,$;if(this.config=c,this._factory=u,this.sinks=h,d===null){this.root=this,this.parent=this,g=this._traceSinks=[],f=this._debugSinks=[],_=this._infoSinks=[],b=this._warnSinks=[],v=this._errorSinks=[],$=this._fatalSinks=[];for(const m of h){const y=vb.getHandles(m);((y==null?void 0:y.includes(or))??!0)&&g.push(m),((y==null?void 0:y.includes(ar))??!0)&&f.push(m),((y==null?void 0:y.includes(lr))??!0)&&_.push(m),((y==null?void 0:y.includes(an))??!0)&&b.push(m),((y==null?void 0:y.includes(cr))??!0)&&v.push(m),((y==null?void 0:y.includes(hr))??!0)&&$.push(m)}}else this.root=d.root,this.parent=d,g=this._traceSinks=d._traceSinks,f=this._debugSinks=d._debugSinks,_=this._infoSinks=d._infoSinks,b=this._warnSinks=d._warnSinks,v=this._errorSinks=d._errorSinks,$=this._fatalSinks=d._fatalSinks}trace(c,...u){this.config.level<=or&&this._emit(this._traceSinks,or,c,u)}debug(c,...u){this.config.level<=ar&&this._emit(this._debugSinks,ar,c,u)}info(c,...u){this.config.level<=lr&&this._emit(this._infoSinks,lr,c,u)}warn(c,...u){this.config.level<=an&&this._emit(this._warnSinks,an,c,u)}error(c,...u){this.config.level<=cr&&this._emit(this._errorSinks,cr,c,u)}fatal(c,...u){this.config.level<=hr&&this._emit(this._fatalSinks,hr,c,u)}scopeTo(c){const u=this._scopedLoggers;let h=u[c];return h===void 0&&(h=u[c]=new i(this.config,this._factory,null,this.scope.concat(c),this)),h}_emit(c,u,h,p){const d=Z(h)?h():h,g=this._factory.createLogEvent(this,u,d,p);for(let f=0,_=c.length;f<_;++f)c[f].handleEvent(g)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Ui],s=[Ui],n=[Ui],r=[Ui],o=[Ui],a=[Ui],Qi(i,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),Qi(i,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),Qi(i,null,n,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),Qi(i,null,r,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),Qi(i,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),Qi(i,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),i})();const Cb=hs(i=>i.singleton(Sb)),kb=i=>i;class $b{constructor(e){this._promiseCache=new Map,this._objectCache=new Map,this._transform=e}transform(e){if(e instanceof Promise)return this._transformPromise(e);if(typeof e=="object"&&e!==null)return this._transformObject(e);throw ye(21,e)}_transformPromise(e){if(this._promiseCache.has(e))return this._promiseCache.get(e);const t=e.then(s=>this._transformObject(s));return this._promiseCache.set(e,t),t.then(s=>{this._promiseCache.set(e,s)}),t}_transformObject(e){if(this._objectCache.has(e))return this._objectCache.get(e);const t=this._transform(this._analyze(e));return this._objectCache.set(e,t),t instanceof Promise&&t.then(s=>{this._objectCache.set(e,s)}),t}_analyze(e){if(e==null)throw ye(21,e);if(typeof e!="object")return new yu(e,[]);let t,s,n,r;const o=[];for(const a in e){switch(typeof(t=e[a])){case"object":if(t===null)continue;s=Z(t.register),n=!1,r=null;break;case"function":s=Z(t.register),n=t.prototype!==void 0,r=Vt(Dt,t)??null;break;default:continue}o.push(new xb(a,t,s,n,r))}return new yu(e,o)}}class Sb{constructor(){this.transformers=new Map}load(e,t=kb){const s=this.transformers;let n=s.get(t);return n===void 0&&s.set(t,n=new $b(t)),n.transform(e)}dispose(){this.transformers.clear()}}class yu{constructor(e,t){this.raw=e,this.items=t}}class xb{constructor(e,t,s,n,r){this.key=e,this.value=t,this.isRegistry=s,this.isConstructable=n,this.definition=r}}class Eb{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const En=hs("IEventAggregator",i=>i.singleton(Ib));class Ib{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw ye(18,e);if(J(e)){let s=this.eventLookup[e];if(s!==void 0){s=s.slice();const n=s.length;for(let r=0;r<n;r++)s[r](t,e)}}else{const s=this.messageHandlers.slice(),n=s.length;for(let r=0;r<n;r++)s[r].handle(e)}}subscribe(e,t){if(!e)throw ye(19,e);let s,n;return J(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),s=t,n=this.eventLookup[e]):(s=new Eb(e,t),n=this.messageHandlers),n.push(s),{dispose(){const r=n.indexOf(s);r!==-1&&n.splice(r,1)}}}subscribeOnce(e,t){const s=this.subscribe(e,(n,r)=>{s.dispose(),t(n,r)});return s}}const Ep="AccessThis",Pb="AccessBoundary",Tc="AccessGlobal",Oc="AccessScope",Rb="ArrayLiteral",Tb="ObjectLiteral",Ob="PrimitiveLiteral",Bb="New",Mb="Template",Lb="Unary",Nb="CallScope",Db="CallMember",Fb="CallFunction",jb="CallGlobal",ga="AccessMember",Ip="AccessKeyed",Vb="TaggedTemplate",zb="Binary",Ub="Conditional",Qb="Assign",Hb="ArrowFunction",qb="ValueConverter",Wb="BindingBehavior",Pp="ArrayBindingPattern",Rp="ObjectBindingPattern",Tp="BindingIdentifier",Kb="ForOfStatement",Gb="Interpolation",Op="ArrayDestructuring",Yb="ObjectDestructuring",Jb="DestructuringAssignmentLeaf",Xb="Custom";class Bp{constructor(e){this.value=e,this.$kind=Xb}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class Zb{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=Wb,this.key=`_bb_${t}`}}class ew{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=qb}}class tw{constructor(e,t,s="="){this.target=e,this.value=t,this.op=s,this.$kind=Qb}}class sw{constructor(e,t,s){this.condition=e,this.yes=t,this.no=s,this.$kind=Ub}}class iw{constructor(e){this.name=e,this.$kind=Tc}}class ur{constructor(e=0){this.ancestor=e,this.$kind=Ep}}class nw{constructor(){this.$kind=Pb}}class dr{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=Oc}}const Mp=i=>i.$kind===Tc||(i.$kind===ga||i.$kind===Ip)&&i.accessGlobal;class Tl{constructor(e,t,s=!1){this.object=e,this.name=t,this.optional=s,this.$kind=ga,this.accessGlobal=Mp(e)}}class Lp{constructor(e,t,s=!1){this.object=e,this.key=t,this.optional=s,this.$kind=Ip,this.accessGlobal=Mp(e)}}class rw{constructor(e,t){this.func=e,this.args=t,this.$kind=Bb}}class Np{constructor(e,t,s=0,n=!1){this.name=e,this.args=t,this.ancestor=s,this.optional=n,this.$kind=Nb}}class Lo{constructor(e,t,s,n=!1,r=!1){this.object=e,this.name=t,this.args=s,this.optionalMember=n,this.optionalCall=r,this.$kind=Db}}class $o{constructor(e,t,s=!1){this.func=e,this.args=t,this.optional=s,this.$kind=Fb}}class ow{constructor(e,t){this.name=e,this.args=t,this.$kind=jb}}class aw{constructor(e,t,s){this.operation=e,this.left=t,this.right=s,this.$kind=zb}}class Cu{constructor(e,t,s=0){this.operation=e,this.expression=t,this.pos=s,this.$kind=Lb}}class je{constructor(e){this.value=e,this.$kind=Ob}}je.$undefined=new je(void 0);je.$null=new je(null);je.$true=new je(!0);je.$false=new je(!1);je.$empty=new je("");class Ol{constructor(e){this.elements=e,this.$kind=Rb}}Ol.$empty=new Ol(H);class Bl{constructor(e,t){this.keys=e,this.values=t,this.$kind=Tb}}Bl.$empty=new Bl(H,H);class No{constructor(e,t=H){this.cooked=e,this.expressions=t,this.$kind=Mb}}No.$empty=new No([""]);class Dp{constructor(e,t,s,n=H){this.cooked=e,this.func=s,this.expressions=n,this.$kind=Vb,e.raw=t}}class lw{constructor(e){this.elements=e,this.$kind=Pp}}class cw{constructor(e,t){this.keys=e,this.values=t,this.$kind=Rp}}class Do{constructor(e){this.name=e,this.$kind=Tp}}class hw{constructor(e,t,s){this.declaration=e,this.iterable=t,this.semiIdx=s,this.$kind=Kb}}class uw{constructor(e,t=H){this.parts=e,this.expressions=t,this.$kind=Gb,this.isMulti=t.length>1,this.firstExpression=t[0]}}class dw{constructor(e,t,s,n){this.$kind=e,this.list=t,this.source=s,this.initializer=n}}class Fp{constructor(e,t,s){this.target=e,this.source=t,this.initializer=s,this.$kind=Jb}}class Ml{constructor(e,t,s=!1){this.args=e,this.body=t,this.rest=s,this.$kind=Hb}}const Ll=String,So=()=>Object.create(null),pe=(i,...e)=>new Error(`AUR${Ll(i).padStart(4,"0")}: ${fw(i,...e)}`),pw={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},fw=(i,...e)=>{var s;let t=pw[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Ll(l[a.slice(1)]):l=Ll(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t},In=lt.createInterface("IExpressionParser");class jp{constructor(){this._expressionLookup=So(),this._forOfLookup=So(),this._interpolationLookup=So()}parse(e,t){let s;switch(t){case Up:return new Bp(e);case Fo:return s=this._interpolationLookup[e],s===void 0&&(s=this._interpolationLookup[e]=this.$parse(e,t)),s;case Cs:return s=this._forOfLookup[e],s===void 0&&(s=this._forOfLookup[e]=this.$parse(e,t)),s;default:{if(e.length===0){if(t===bw||t===ku)return je.$empty;throw Mw()}return s=this._expressionLookup[e],s===void 0&&(s=this._expressionLookup[e]=this.$parse(e,t)),s}}}$parse(e,t){return ie=e,Y=0,is=e.length,vt=0,Ri=0,M=6291456,ge="",he=Ti(0),re=!0,se=!1,Hn=!0,Mc=-1,Ce(61,t===void 0?ku:t)}}jp.register=Hr(In);function Bc(i){switch(i){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return i}}const gw=je.$false,_w=je.$true,mw=je.$null,Vp=je.$undefined,pr=new ur(0),Qa=new ur(1),vw=new nw,$s="None",Fo="Interpolation",Cs="IsIterator",zp="IsChainable",bw="IsFunction",ku="IsProperty",Up="IsCustom";let ie="",Y=0,is=0,vt=0,Ri=0,M=6291456,ge="",he,re=!0,se=!1,Hn=!0,Mc=-1;const Sr=String.fromCharCode,Ti=i=>ie.charCodeAt(i),Ss=()=>ie.slice(Ri,Y),ww="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Ce(i,e){if(e===Up)return new Bp(ie);if(Y===0){if(e===Fo)return Ew();if(V(),M&4194304)throw Tw()}re=577>i,se=!1,Hn=579>i;let t=!1,s,n=0;if(M&131072){const r=Wi[M&63];V(),s=new Cu(r,Ce(579,e)),re=!1}else{e:switch(M){case 12296:n=vt,re=!1,Hn=!1;do switch(V(),++n,M){case 65547:if(V(),(M&12288)===0)throw vs();break;case 12:case 13:throw vs();case 2162702:if(se=!0,V(),(M&12288)===0){s=n===0?pr:n===1?Qa:new ur(n),t=!0;break e}break;default:if(M&2097152){s=n===0?pr:n===1?Qa:new ur(n);break e}throw Ow()}while(M===12296);case 4096:{const r=ge;if(e===Cs)s=new Do(r);else if(Hn&&ww.includes(r))s=new iw(r);else{if(Hn&&r==="import")throw jw();s=new dr(r,n)}if(re=!se,V(),Yt(53)){if(M===524298)throw Kp();const o=se,a=vt;++vt;const l=Ce(62,$s);se=o,vt=a,re=!1,s=new Ml([new Do(r)],l)}break}case 12:throw Hw();case 13:throw Nl();case 12293:switch(re=!1,V(),vt){case 0:s=pr;break;case 1:s=Qa;break;default:s=new ur(vt);break}break;case 12294:re=!1,V(),s=vw;break;case 2688009:s=Cw(e);break;case 2688020:s=ie.search(/\s+of\s+/)>Y?Aw():kw(e);break;case 524298:s=xw(e);break;case 2163762:s=new No([ge]),re=!1,V();break;case 2163763:s=Ha(e,s,!1);break;case 16384:case 32768:s=new je(ge),re=!1,V();break;case 8194:case 8195:case 8193:case 8192:s=Wi[M&63],re=!1,V();break;case 8196:{V();const r=Ce(578,e);let o;M===2688009?o=St():(o=[],V()),s=new rw(r,o),re=!1;break}default:throw Y>=is?Bw():qa()}if(e===Cs)return Sw(s);switch(M){case 2228282:case 2228283:s=new Cu(Wi[M&63],s,1),V(),re=!1;break}if(579<i)return s;if(M===12||M===13)throw vs();if(s.$kind===Ep)switch(M){case 2162702:if(se=!0,re=!1,V(),(M&13312)===0)throw Lc();if(M&12288)s=new dr(ge,s.ancestor),V();else if(M===2688009)s=new $o(s,St(),!0);else if(M===2688020)s=xo(s,!0);else throw Eo();break;case 65547:if(re=!se,V(),(M&12288)===0)throw vs();s=new dr(ge,s.ancestor),V();break;case 12:case 13:throw vs();case 2688009:s=new $o(s,St(),t);break;case 2688020:s=xo(s,t);break;case 2163762:s=$u(s);break;case 2163763:s=Ha(e,s,!0);break}for(;(M&65536)>0;)switch(M){case 2162702:s=yw(s);break;case 65547:if(V(),(M&12288)===0)throw vs();s=Qp(s,!1);break;case 12:case 13:throw vs();case 2688009:if(i===578)return s;s.$kind===Oc?s=new Np(s.name,St(),s.ancestor,!1):s.$kind===ga?s=new Lo(s.object,s.name,St(),s.optional,!1):s.$kind===Tc?s=new ow(s.name,St()):s=new $o(s,St(),!1);break;case 2688020:s=xo(s,!1);break;case 2163762:if(se)throw Eo();s=$u(s);break;case 2163763:if(se)throw Eo();s=Ha(e,s,!0);break}}if(M===12||M===13)throw vs();if(577<i)return s;for(;(M&262144)>0;){const r=M;if((r&960)<=i)break;V(),s=new aw(Wi[r&63],s,Ce(r&960,e)),re=!1}if(63<i)return s;if(Yt(6291480)){const r=Ce(62,e);jt(6291478),s=new sw(s,r,Ce(62,e)),re=!1}if(62<i)return s;switch(M){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!re)throw Lw();const r=Wi[M&63];V(),s=new tw(s,Ce(62,e),r);break}}if(61<i)return s;for(;Yt(6291482);){if(M===6291456)throw Nw();const r=ge;V();const o=new Array;for(;Yt(6291478);)o.push(Ce(62,e));s=new ew(s,r,o)}for(;Yt(6291481);){if(M===6291456)throw Dw();const r=ge;V();const o=new Array;for(;Yt(6291478);)o.push(Ce(62,e));s=new Zb(s,r,o)}if(M!==6291456){if(e===Fo&&M===7340047)return s;if(e===zp&&M===6291479){if(Y===is)throw qa();return Mc=Y-1,s}throw Ss()==="of"?Fw():qa()}return s}function Aw(){const i=[],e=new dw(Op,i,void 0,void 0);let t="",s=!0,n=0;for(;s;)switch(V(),M){case 7340053:s=!1,r();break;case 6291475:r();break;case 4096:t=Ss();break;default:throw Uw()}return jt(7340053),e;function r(){t!==""?(i.push(new Fp(new Tl(pr,t),new Lp(pr,new je(n++)),void 0)),t=""):n++}}function St(){const i=se;V();const e=[];for(;M!==7340048&&(e.push(Ce(62,$s)),!!Yt(6291475)););return jt(7340048),re=!1,se=i,e}function xo(i,e){const t=se;return V(),i=new Lp(i,Ce(62,$s),e),jt(7340053),re=!t,se=t,i}function yw(i){if(se=!0,re=!1,V(),(M&13312)===0)throw Lc();if(M&12288)return Qp(i,!0);if(M===2688009)return i.$kind===Oc?new Np(i.name,St(),i.ancestor,!0):i.$kind===ga?new Lo(i.object,i.name,St(),i.optional,!0):new $o(i,St(),!0);if(M===2688020)return xo(i,!0);throw Eo()}function Qp(i,e){const t=ge;switch(M){case 2162702:{se=!0,re=!1;const s=Y,n=Ri,r=M,o=he,a=ge,l=re,c=se;if(V(),(M&13312)===0)throw Lc();return M===2688009?new Lo(i,t,St(),e,!0):(Y=s,Ri=n,M=r,he=o,ge=a,re=l,se=c,new Tl(i,t,e))}case 2688009:return re=!1,new Lo(i,t,St(),e,!1);default:return re=!se,V(),new Tl(i,t,e)}}function Cw(i){V();const e=Y,t=Ri,s=M,n=he,r=ge,o=se,a=[];let l=1,c=!1;e:for(;;){if(M===13){if(V(),M!==4096)throw vs();if(a.push(new Do(ge)),V(),M===6291475)throw Qw();if(M!==7340048||(V(),M!==53))throw Nl();V();const p=se,d=vt;++vt;const g=Ce(62,$s);return se=p,vt=d,re=!1,new Ml(a,g,!0)}switch(M){case 4096:a.push(new Do(ge)),V();break;case 7340048:V();break e;case 524298:case 2688020:V(),l=4;break;case 6291475:l=2,c=!0;break e;case 2688009:l=2;break e;default:V(),l=2;break}switch(M){case 6291475:if(V(),c=!0,l===1)break;break e;case 7340048:V();break e;case 4194352:l===1&&(l=3);break e;case 53:if(c)throw fo();V(),l=2;break e;default:l===1&&(l=2);break e}}if(M===53){if(l===1){if(V(),M===524298)throw Kp();const p=se,d=vt;++vt;const g=Ce(62,$s);return se=p,vt=d,re=!1,new Ml(a,g)}throw fo()}else if(l===1&&a.length===0)throw Wp(53);if(c)switch(l){case 2:throw fo();case 3:throw Eu();case 4:throw Iu()}Y=e,Ri=t,M=s,he=n,ge=r,se=o;const u=se,h=Ce(62,i);if(se=u,jt(7340048),M===53)switch(l){case 2:throw fo();case 3:throw Eu();case 4:throw Iu()}return h}function kw(i){const e=se;V();const t=new Array;for(;M!==7340053;)if(Yt(6291475)){if(t.push(Vp),M===7340053)break}else if(t.push(Ce(62,i===Cs?$s:i)),Yt(6291475)){if(M===7340053)break}else break;return se=e,jt(7340053),i===Cs?new lw(t):(re=!1,new Ol(t))}const $w=[Pp,Rp,Tp,Op,Yb];function Sw(i){if(!$w.includes(i.$kind)||M!==4204596)throw xu(i.$kind);V();const e=i,t=Ce(61,zp);return new hw(e,t,Mc)}function xw(i){const e=se,t=new Array,s=new Array;for(V();M!==7340047;){if(t.push(ge),M&49152)V(),jt(6291478),s.push(Ce(62,i===Cs?$s:i));else if(M&12288){const n=he,r=M,o=Y;V(),Yt(6291478)?s.push(Ce(62,i===Cs?$s:i)):(he=n,M=r,Y=o,s.push(Ce(580,i===Cs?$s:i)))}else throw Vw();M!==7340047&&jt(6291475)}return se=e,jt(7340047),i===Cs?new cw(t,s):(re=!1,new Bl(t,s))}function Ew(){const i=[],e=[],t=is;let s="";for(;Y<t;){switch(he){case 36:if(Ti(Y+1)===123){i.push(s),s="",Y+=2,he=Ti(Y),V();const n=Ce(61,Fo);e.push(n);continue}else s+="$";break;case 92:s+=Sr(Bc(z()));break;default:s+=Sr(he)}z()}return e.length?(i.push(s),new uw(i,e)):null}function Ha(i,e,t){const s=se,n=[ge];jt(2163763);const r=[Ce(62,i)];for(;(M=Rw())!==2163762;)n.push(ge),jt(2163763),r.push(Ce(62,i));return n.push(ge),re=!1,se=s,t?(V(),new Dp(n,n,e,r)):(V(),new No(n,r))}function $u(i){re=!1;const e=[ge];return V(),new Dp(e,e,i)}function V(){for(;Y<is;)if(Ri=Y,(M=Ww[he]())!=null)return;M=6291456}function z(){return he=Ti(++Y)}function Iw(){for(;Kw[z()];);const i=qw[ge=Ss()];return i===void 0?4096:i}function Su(i){let e=he;if(i===!1){do e=z();while(e<=57&&e>=48);if(e!==46)return ge=parseInt(Ss(),10),32768;if(e=z(),Y>=is)return ge=parseInt(Ss().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=z();while(e<=57&&e>=48);else he=Ti(--Y);return ge=parseFloat(Ss()),32768}function Pw(){const i=he;z();let e=0;const t=new Array;let s=Y;for(;he!==i;)if(he===92)t.push(ie.slice(s,Y)),z(),e=Bc(he),z(),t.push(Sr(e)),s=Y;else{if(Y>=is)throw zw();z()}const n=ie.slice(s,Y);return z(),t.push(n),ge=t.join(""),16384}function Hp(){let i=!0,e="";for(;z()!==96;)if(he===36)if(Y+1<is&&Ti(Y+1)===123){Y++,i=!1;break}else e+="$";else if(he===92)e+=Sr(Bc(z()));else{if(Y>=is)throw qp();e+=Sr(he)}return z(),ge=e,i?2163762:2163763}const Rw=()=>{if(Y>=is)throw qp();return Y--,Hp()},Yt=i=>M===i?(V(),!0):!1,jt=i=>{if(M===i)V();else throw Wp(i)},Tw=()=>pe(151,ie),Nl=()=>pe(152,ie),vs=()=>pe(153,ie),Ow=()=>pe(154,ie),Bw=()=>pe(155,ie),qa=()=>pe(156,Ss(),Y,ie),Mw=()=>pe(157),Lw=()=>pe(158,ie),Nw=()=>pe(159,ie),Dw=()=>pe(160,ie),Fw=()=>pe(161,ie),jw=()=>pe(162,ie),xu=i=>pe(163,ie,i),Vw=()=>pe(164,ie),zw=()=>pe(165,ie),qp=()=>pe(166,ie),Wp=i=>pe(167,Wi[i&63],ie),Uw=()=>pe(170,Ss(),Y,ie),Lc=()=>pe(171,Ss(),Y-1,ie),Eo=()=>pe(172,ie),fo=()=>pe(173,ie),Eu=()=>pe(174,ie),Iu=()=>pe(175,ie),Qw=()=>pe(176,ie),Kp=()=>pe(178,ie),Hw=()=>pe(179,Y-1,ie),Wi=[gw,_w,mw,Vp,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],qw=Object.assign(So(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:Ww,IdParts:Kw}=(()=>{const i=()=>{throw pe(168,ie)};i.notMapped=!0;const e={IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const u=l.length;for(let h=0;h<u;h+=2){const p=l[h];let d=l[h+1];d=d>0?d:p+1,o&&o.fill(c,p,d)}},s=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),n=o=>()=>(z(),o),r=new Array(65535);return r.fill(i,0,65535),t(r,null,e.Skip,()=>(z(),null)),t(r,null,e.IdStart,Iw),t(r,null,e.Digit,()=>Su(!1)),r[34]=r[39]=()=>Pw(),r[96]=()=>Hp(),r[33]=()=>z()!==61?131121:z()!==61?6553951:(z(),6553953),r[61]=()=>z()===62?(z(),53):he!==61?4194352:z()!==61?6553950:(z(),6553952),r[38]=()=>z()!==38?6291481:(z(),6553885),r[124]=()=>z()!==124?6291482:(z(),6553820),r[63]=()=>{if(z()===46){const o=Ti(Y+1);return o<=48||o>=57?(z(),2162702):6291480}return he!==63?6291480:(z(),6553755)},r[46]=()=>z()<=57&&he>=48?Su(!0):he===46?z()!==46?12:(z(),13):65547,r[60]=()=>z()!==61?6554018:(z(),6554020),r[62]=()=>z()!==61?6554019:(z(),6554021),r[37]=n(6554157),r[40]=n(2688009),r[41]=n(7340048),r[42]=()=>z()===61?(z(),4194360):he===42?(z(),6554223):6554156,r[43]=()=>z()===43?(z(),2228282):he!==61?2490856:(z(),4194358),r[44]=n(6291475),r[45]=()=>z()===45?(z(),2228283):he!==61?2490857:(z(),4194359),r[47]=()=>z()!==61?6554158:(z(),4194361),r[58]=n(6291478),r[59]=n(6291479),r[91]=n(2688020),r[93]=n(7340053),r[123]=n(524298),r[125]=n(7340047),{CharScanners:r,IdParts:s}})(),us=lt.createInterface,Pn=Object.freeze,{aliasTo:Pu,singleton:Nc}=Pt,Nt="Interpolation",Gp="IsFunction",ds="IsProperty",Ki="custom-element",Fi=Pn({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),_a=us("ITemplateCompiler"),Yp=us("IAttrMapper"),Ae=(i,...e)=>{const t=String(i).padStart(4,"0"),s=Yw(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/0088-to-0723/aur${t}`;return new Error(`AUR${t}: ${s}

For more information, see: ${n}`)},Gw={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",723:"Template compilation error: Invalid comma-separated class binding syntax in {{0}}. It resulted in no valid class names after parsing.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},Yw=(i,...e)=>{var s;let t=Gw[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=Jw(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function Jw(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var Jp,Xp,Zp,ef,tf;class Dc{constructor(e,t,s,n){if(this.chars=e,this.repeat=t,this.isSymbol=s,this.isInverted=n,n)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class Xw{constructor(){this.parts=H,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=H):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const s=this._currentRecord;s[e]===void 0?s[e]=t:s[e]+=t}next(e){const t=this._currentRecord;let s;t[e]!==void 0&&(s=this._partsRecord,s[e]===void 0?s[e]=[t[e]]:s[e].push(t[e]),t[e]=void 0)}}class Fc{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,s=t.length;let n=null,r=0;for(;r<s;++r)if(n=t[r],e.equals(n.charSpec))return n;return null}append(e,t){const s=this._patterns;s.includes(t)||s.push(t);let n=this.findChild(e);return n==null&&(n=new Fc(e,t),this._nextStates.push(n),e.repeat&&n._nextStates.push(n)),n}findMatches(e,t){const s=[],n=this._nextStates,r=n.length;let o=0,a=null,l=0,c=0;for(;l<r;++l)if(a=n[l],a.charSpec.has(e))if(s.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return s}}let Ru=class{constructor(e){this.text=e;const t=this._len=e.length,s=this._specs=[];let n=0;for(;t>n;++n)s.push(new Dc(e[n],!1,!1,!1))}eachChar(e){const t=this._len,s=this._specs;let n=0;for(;t>n;++n)e(s[n])}},Zw=class{constructor(e){this.text="PART",this._spec=new Dc(e,!0,!1,!0)}eachChar(e){e(this._spec)}};class eA{constructor(e){this.text=e,this._spec=new Dc(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class tA{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const sA=us("ISyntaxInterpreter",i=>i.singleton(iA));class iA{constructor(){this._rootState=new Fc(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((p,d)=>p.pattern>d.pattern?1:-1);const t=e.length;let s,n,r,o,a,l,c,u=0,h;for(;t>u;){for(s=this._rootState,n=e[u],r=n.pattern,o=new tA,a=this._parse(n,o),l=a.length,c=p=>s=s.append(p,r),h=0;l>h;++h)a[h].eachChar(c);s._types=o,s._isEndpoint=!0,++u}}interpret(e){const t=new Xw,s=e.length;let n=this._initialStates,r=0,o;for(;r<s&&(n=this._getNextStates(n,e.charAt(r),t),n.length!==0);++r);return n=n.filter(nA),n.length>0&&(n.sort(rA),o=n[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,s){const n=[];let r=null;const o=e.length;let a=0;for(;a<o;++a)r=e[a],n.push(...r.findMatches(t,s));return n}_parse(e,t){const s=[],n=e.pattern,r=n.length,o=e.symbols;let a=0,l=0,c="";for(;a<r;)c=n.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&n.slice(a,a+4)==="PART"?(l=a=a+4,s.push(new Zw(o)),++t.dynamics):++a:a!==l?(s.push(new Ru(n.slice(l,a))),++t.statics,l=a):(s.push(new eA(n.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(s.push(new Ru(n.slice(l,a))),++t.statics),s}}function nA(i){return i._isEndpoint}function rA(i,e){const t=i._types,s=e._types;return t.statics!==s.statics?s.statics-t.statics:t.dynamics!==s.dynamics?s.dynamics-t.dynamics:t.symbols!==s.symbols?s.symbols-t.symbols:0}class At{constructor(e,t,s,n,r=null){this.rawName=e,this.rawValue=t,this.target=s,this.command=n,this.parts=r}}const oA=us("IAttributePattern"),jc=us("IAttributeParser",i=>i.singleton(aA));class aA{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=S(sA),this._container=S(Di)}registerPattern(e,t){if(this._initialized)throw Ae(88);const s=this._patterns;for(const{pattern:n}of e){if(s[n]!=null)throw Ae(89,n);s[n]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let s=this._cache[e];s==null&&(s=this._cache[e]=this._interpreter.interpret(e));const n=s.pattern;return n==null?new At(e,t,e,null,null):this._patterns[n].pattern[n](e,t,s.parts)}}const ni=Pn({name:si("attribute-pattern"),create(i,e){return{register(t){t.get(jc).registerPattern(i,e),Nc(oA,e).register(t)}}}});class Dl{"PART.PART"(e,t,s){return new At(e,t,s[0],s[1])}"PART.PART.PART"(e,t,s){return new At(e,t,`${s[0]}.${s[1]}`,s[2])}}Jp=Symbol.metadata;Dl[Jp]={[cs]:ni.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],Dl)};class Fl{ref(e,t,s){return new At(e,t,"element","ref")}"PART.ref"(e,t,s){let n=s[0];return n==="view-model"&&(n="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new At(e,t,n,"ref")}}Xp=Symbol.metadata;Fl[Xp]={[cs]:ni.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],Fl)};class jl{"PART.trigger:PART"(e,t,s){return new At(e,t,s[0],"trigger",s)}"PART.capture:PART"(e,t,s){return new At(e,t,s[0],"capture",s)}}Zp=Symbol.metadata;jl[Zp]={[cs]:ni.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],jl)};class Tu{":PART"(e,t,s){return new At(e,t,s[0],"bind")}}ef=Symbol.metadata;Tu[ef]={[cs]:ni.create([{pattern:":PART",symbols:":"}],Tu)};class Ou{"@PART"(e,t,s){return new At(e,t,s[0],"trigger")}"@PART:PART"(e,t,s){return new At(e,t,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}tf=Symbol.metadata;Ou[tf]={[cs]:ni.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],Ou)};const Vl=It.get,Bu=It.define,sf="ra",nf="rb",rf="rc",of="rd",af="re",lf="rf",Vc="rg",cf="ri",hf="rj",uf="rk",df="rl",pf="ha",ff="hb",gf="hc",lA="hd",_f="he",mf="hf",vf="hg",bf="hs",wf="hp",Af="svb",Be=Pn({hydrateElement:sf,hydrateAttribute:nf,hydrateTemplateController:rf,hydrateLetElement:of,setProperty:af,interpolation:lf,propertyBinding:Vc,letBinding:cf,refBinding:hf,iteratorBinding:uf,multiAttr:df,textBinding:pf,listenerBinding:ff,attributeBinding:gf,stylePropertyBinding:lA,setAttribute:_f,setClassAttribute:mf,setStyleAttribute:vf,spreadTransferedBinding:bf,spreadElementProp:wf,spreadValueBinding:Af}),Rn=us("Instruction");class _s{constructor(e,t){this.from=e,this.to=t,this.type=lf}}class Wr{constructor(e,t,s){this.from=e,this.to=t,this.mode=s,this.type=Vc}}class cA{constructor(e,t,s){this.forOf=e,this.to=t,this.props=s,this.type=uf}}class hA{constructor(e,t){this.from=e,this.to=t,this.type=hf}}class Hi{constructor(e,t){this.value=e,this.to=t,this.type=af}}class uA{constructor(e,t,s){this.value=e,this.to=t,this.command=s,this.type=df}}class dA{constructor(e,t,s,n,r,o){this.res=e,this.props=t,this.projections=s,this.containerless=n,this.captures=r,this.data=o,this.type=sf}}class Wa{constructor(e,t,s){this.res=e,this.alias=t,this.props=s,this.type=nf}}class pA{constructor(e,t,s,n){this.def=e,this.res=t,this.alias=s,this.props=n,this.type=rf}}class fA{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=of}}class Mu{constructor(e,t){this.from=e,this.to=t,this.type=cf}}class gA{constructor(e){this.from=e,this.type=pf}}class yf{constructor(e,t,s,n){this.from=e,this.to=t,this.capture=s,this.modifier=n,this.type=ff}}class Lu{constructor(e,t){this.value=e,this.to=t,this.type=_f}}class Nu{constructor(e){this.value=e,this.type=mf}}class Du{constructor(e){this.value=e,this.type=vf}}class zc{constructor(e,t,s){this.attr=e,this.from=t,this.to=s,this.type=gf}}class Fu{constructor(){this.type=bf}}class ju{constructor(e){this.instruction=e,this.type=wf}}class zl{constructor(e,t){this.target=e,this.from=t,this.type=Af}}class jo{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return J(e)?(s=e,n={name:s}):(s=e.name,n=e),new jo(t,Vs(Ul(t,"name"),s),Re(Ul(t,"aliases"),n.aliases,t.aliases),ln(s))}register(e,t){const s=this.Type,n=typeof t=="string"?ln(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${Ae(157,this.name)}`):e.register(e.has(s,!1)?null:Nc(s,s),Pu(s,n),...r.map(o=>Pu(s,ln(o))))}}const Je="binding-command",Io=si(Je),ln=i=>`${Io}:${i}`,Ul=(i,e)=>Vl(Cp.annotation.keyFor(e),i),_A=(()=>{const i="__au_static_resource__",e=(t,s,n)=>{var o;let r=Vl(i,t);return r==null&&((o=t.$au)==null?void 0:o.type)===s&&(r=n(t.$au,t),Bu(r,t,i)),r};return Pn({name:Io,keyFrom:ln,define(t,s){const n=jo.create(t,s),r=n.Type;return Bu(n,r,Io,Dt),r},getAnnotation:Ul,find(t,s){const n=t.find(Je,s);return n==null?null:Vl(Io,n)??e(n,Je,jo.create)??null},get(t,s){try{return t.get(pn(ln(s)))}catch(n){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,s),n}return t.get(pn(ln(s)))}})})();class Cf{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Wr(t.parse(o,ds),r,1)}}Cf.$au={type:Je,name:"one-time"};class kf{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Wr(t.parse(o,ds),r,2)}}kf.$au={type:Je,name:"to-view"};class $f{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Wr(t.parse(o,ds),r,4)}}$f.$au={type:Je,name:"from-view"};class Sf{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?De(r):o,e.bindable==null?r=s.map(e.node,r)??De(r):r=e.bindable.name,new Wr(t.parse(o,ds),r,6)}}Sf.$au={type:Je,name:"two-way"};class xf{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr,r=e.bindable;let o=n.rawValue,a=n.target,l,c;return o=o===""?De(a):o,r==null?(c=s.isTwoWay(e.node,a)?6:2,a=s.map(e.node,a)??De(a)):(l=e.def.defaultBindingMode??0,c=r.mode===0||r.mode==null?l==null||l===0?2:l:r.mode,a=r.name),new Wr(t.parse(o,ds),a,J(c)?Fi[c]??0:c)}}xf.$au={type:Je,name:"bind"};class Ef{constructor(){this._attrParser=S(jc)}get ignoreAttr(){return!1}build(e,t){const s=e.bindable===null?De(e.attr.target):e.bindable.name,n=t.parse(e.attr.rawValue,"IsIterator");let r=H;if(n.semiIdx>-1){const o=e.attr.rawValue.slice(n.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),u=this._attrParser.parse(l,c);r=[new uA(c,u.target,u.command)]}}return new cA(n,s,r)}}Ef.$au={type:Je,name:"for"};class If{get ignoreAttr(){return!0}build(e,t){var s;return new yf(t.parse(e.attr.rawValue,Gp),e.attr.target,!1,((s=e.attr.parts)==null?void 0:s[2])??null)}}If.$au={type:Je,name:"trigger"};class Pf{get ignoreAttr(){return!0}build(e,t){var s;return new yf(t.parse(e.attr.rawValue,Gp),e.attr.target,!0,((s=e.attr.parts)==null?void 0:s[2])??null)}}Pf.$au={type:Je,name:"capture"};class Rf{get ignoreAttr(){return!0}build(e,t){const s=e.attr,n=s.target;let r=s.rawValue;return r=r===""?De(n):r,new zc(n,t.parse(r,ds),n)}}Rf.$au={type:Je,name:"attr"};class Tf{get ignoreAttr(){return!0}build(e,t){return new zc("style",t.parse(e.attr.rawValue,ds),e.attr.target)}}Tf.$au={type:Je,name:"style"};class Of{get ignoreAttr(){return!0}build(e,t){let s=e.attr.target;if(s.includes(",")){const n=s.split(",").filter(r=>r.length>0);if(n.length===0)throw Ae(723);s=n.join(" ")}return new zc("class",t.parse(e.attr.rawValue,ds),s)}}Of.$au={type:Je,name:"class"};class Bf{get ignoreAttr(){return!0}build(e,t){return new hA(t.parse(e.attr.rawValue,ds),e.attr.target)}}Bf.$au={type:Je,name:"ref"};class Mf{get ignoreAttr(){return!1}build(e){return new zl(e.attr.target,e.attr.rawValue)}}Mf.$au={type:Je,name:"spread"};const mA=us("ITemplateElementFactory",i=>i.singleton(vA)),Vu={};class vA{constructor(){this.p=S(xn),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var s;if(J(e)){let n=Vu[e];if(n===void 0){const r=this._template;r.innerHTML=e;const o=r.content.firstElementChild;t(o)?(this._template=this.t(),n=r):(r.content.removeChild(o),n=o),Vu[e]=n}return n.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const n=this.t();return n.content.appendChild(e),n}return(s=e.parentNode)==null||s.removeChild(e),e.cloneNode(!0);function t(n){if(n==null||n.nodeName!=="TEMPLATE"||n.nextElementSibling!=null)return!0;const o=n.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=n.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const Ka="au-start",Ga="au-end",Ya=(i,e,t)=>i.insertBefore(e,t),zu=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},gi=(i,e)=>i.content.appendChild(e),Uu=(i,e)=>{const t=e.length;let s=0;for(;t>s;)i.content.appendChild(e[s]),++s},Qu=i=>i.nodeType===1,Hu=i=>i.nodeType===3,jn="au-slot",qu="default",Vn=(i=>()=>`anonymous-${++i}`)(0);class Lf{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var h,p;if(e.template==null||e.needsCompile===!1)return e;const s=new Vo(e,t,null,null,void 0),n=J(e.template)||!e.enhance?s._templateFactory.createTemplate(e.template):e.template,r=n.nodeName===Ja&&n.content!=null,o=r?n.content:n,a=kA.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(p=(h=a[c]).compiling)==null||p.call(h,n),++c;if(n.hasAttribute(Ql))throw Ae(701,e);return this._compileLocalElement(o,s),this._compileNode(o,s),{...e,name:e.name||Vn(),dependencies:(e.dependencies??H).concat(s.deps??H),instructions:s.rows,surrogates:r?this._compileSurrogate(n,s):H,template:n,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(e,t,s,n,r){const o=new Vo(e,s,null,null,void 0),a=[],l=r??o._findElement(n.nodeName.toLowerCase()),c=l!==null,u=o._exprParser,h=t.length;let p=0,d,g=null,f,_,b,v,$,m=null,y,O,P,N;for(;h>p;++p){if(d=t[p],P=d.target,N=d.rawValue,P==="...$attrs"){a.push(new Fu);continue}if(m=o._getCommand(d),m!==null&&m.ignoreAttr){L.node=n,L.attr=d,L.bindable=null,L.def=null,a.push(m.build(L,o._exprParser,o._attrMapper));continue}if(c&&(b=o._getBindables(l),v=b.attrs[P],v!==void 0)){m==null?(y=u.parse(N,Nt),a.push(new ju(y==null?new Hi(N,v.name):new _s(y,v.name)))):(L.node=n,L.attr=d,L.bindable=v,L.def=l,a.push(new ju(m.build(L,o._exprParser,o._attrMapper))));continue}if(g=o._findAttr(P),g!==null){if(g.isTemplateController)throw Ae(9998,P);b=o._getBindables(g),O=g.noMultiBindings===!1&&m===null&&Xa(N),O?_=this._compileMultiBindings(n,N,g,o):($=b.primary,m===null?(y=u.parse(N,Nt),_=[y===null?new Hi(N,$.name):new _s(y,$.name)]):(L.node=n,L.attr=d,L.bindable=$,L.def=g,_=[m.build(L,o._exprParser,o._attrMapper)])),(f??(f=[])).push(new Wa(this.resolveResources?g:g.name,g.aliases!=null&&g.aliases.includes(P)?P:void 0,_));continue}if(m==null)if(y=u.parse(N,Nt),y!=null)a.push(new _s(y,o._attrMapper.map(n,P)??De(P)));else switch(P){case"class":a.push(new Nu(N));break;case"style":a.push(new Du(N));break;default:a.push(new Lu(N,P))}else L.node=n,L.attr=d,L.bindable=null,L.def=null,a.push(m.build(L,o._exprParser,o._attrMapper))}return go(),f!=null?f.concat(a):a}_compileSurrogate(e,t){const s=[],n=e.attributes,r=t._exprParser;let o=n.length,a=0,l,c,u,h,p=null,d,g,f,_,b=null,v,$,m,y;for(;o>a;++a){if(l=n[a],c=l.name,u=l.value,h=t._attrParser.parse(c,u),m=h.target,y=h.rawValue,wA[m])throw Ae(702,c);if(b=t._getCommand(h),b!==null&&b.ignoreAttr){L.node=e,L.attr=h,L.bindable=null,L.def=null,s.push(b.build(L,t._exprParser,t._attrMapper));continue}if(p=t._findAttr(m),p!==null){if(p.isTemplateController)throw Ae(703,m);f=t._getBindables(p),$=p.noMultiBindings===!1&&b===null&&Xa(y),$?g=this._compileMultiBindings(e,y,p,t):(_=f.primary,b===null?(v=r.parse(y,Nt),g=v===null?y===""?[]:[new Hi(y,_.name)]:[new _s(v,_.name)]):(L.node=e,L.attr=h,L.bindable=_,L.def=p,g=[b.build(L,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(d??(d=[])).push(new Wa(this.resolveResources?p:p.name,p.aliases!=null&&p.aliases.includes(m)?m:void 0,g));continue}if(b===null)if(v=r.parse(y,Nt),v!=null)e.removeAttribute(c),--a,--o,s.push(new _s(v,t._attrMapper.map(e,m)??De(m)));else switch(c){case"class":s.push(new Nu(y));break;case"style":s.push(new Du(y));break;default:s.push(new Lu(y,c))}else L.node=e,L.attr=h,L.bindable=null,L.def=null,s.push(b.build(L,t._exprParser,t._attrMapper))}return go(),d!=null?d.concat(s):s}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let s=e.firstChild;for(;s!==null;)s=this._compileNode(s,t);break}}return e.nextSibling}_compileLet(e,t){const s=e.attributes,n=s.length,r=[],o=t._exprParser;let a=!1,l=0,c,u,h,p,d,g,f,_;for(;n>l;++l){if(c=s[l],h=c.name,p=c.value,h==="to-binding-context"){a=!0;continue}if(u=t._attrParser.parse(h,p),g=u.target,f=u.rawValue,d=t._getCommand(u),d!==null){if(u.command==="bind")r.push(new Mu(o.parse(f,ds),De(g)));else throw Ae(704,u);continue}_=o.parse(f,Nt),_===null&&console.warn(`[DEV:aurelia] Property "${g}" is declared with literal string ${f}. Did you mean ${g}.bind="${f}"?`),r.push(new Mu(_===null?new je(f):_,De(g)))}return t.rows.push([new fA(r,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var x,te,ht,tt,Ht,uo,zi,Mn;const s=e.nextSibling,n=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),r=t._findElement(n),o=r!==null,a=o&&r.shadowOptions!=null,l=r==null?void 0:r.capture,c=l!=null&&typeof l!="boolean",u=l?[]:H,h=t._exprParser,p=this.debug?dt:()=>{e.removeAttribute(v),--_,--f};let d=e.attributes,g,f=d.length,_=0,b,v,$,m,y,O,P=null,N=!1,D,j,fe,Ne,Ee,we,Ie,G=null,T,ue,F,ae,ct=!0,A=!1,k=!1,w=!1,E,U=0;if(n==="slot"){if(t.root.def.shadowOptions==null)throw Ae(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(E={},ct=(x=r.processContent)==null?void 0:x.call(r.Type,e,t.p,E),d=e.attributes,f=d.length);f>_;++_){switch(b=d[_],v=b.name,$=b.value,v){case"as-element":case"containerless":p(),A=A||v==="containerless";continue}if(m=t._attrParser.parse(v,$),G=t._getCommand(m),F=m.target,ae=m.rawValue,l&&(!c||c&&l(F))){if(G!=null&&G.ignoreAttr){p(),u.push(m);continue}if(k=F!==jn&&F!=="slot"&&((U=F.indexOf("..."))===-1||U===0&&F==="...$attrs"),k&&(T=t._getBindables(r),T.attrs[F]==null&&!((te=t._findAttr(F))!=null&&te.isTemplateController))){p(),u.push(m);continue}}if(F==="...$attrs"){(y??(y=[])).push(new Fu),p();continue}if(G!=null&&G.ignoreAttr){L.node=e,L.attr=m,L.bindable=null,L.def=null,(y??(y=[])).push(G.build(L,t._exprParser,t._attrMapper)),p();continue}if(F.indexOf("...")===0){if(o&&(F=F.slice(3))!=="$element"){(O??(O=[])).push(new zl("$bindables",F==="$bindables"?ae:F)),p();continue}throw(F==="$bindable"||F==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${F} on <${e.nodeName}>, did you mean "$bindables"?`),Ae(720,F)}if(o){if(T=t._getBindables(r),D=T.attrs[F],D!==void 0){G===null?(we=h.parse(ae,Nt),(O??(O=[])).push(we==null?new Hi(ae,D.name):new _s(we,D.name))):(L.node=e,L.attr=m,L.bindable=D,L.def=r,(O??(O=[])).push(G.build(L,t._exprParser,t._attrMapper))),p(),P=t._findAttr(F),P!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${F}" on custom element "${r.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(F==="$bindables"){if(G!=null){L.node=e,L.attr=m,L.bindable=null,L.def=r;{const K=G.build(L,t._exprParser,t._attrMapper);K instanceof zl||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${r.name}" with command ${m.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(O??(O=[])).push(K)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${r.name}>" is ignored.`);p();continue}}if(F==="$bindables")throw Ae(721,e.nodeName,F,ae);if(P=t._findAttr(F),P!==null){T=t._getBindables(P),N=P.noMultiBindings===!1&&G===null&&Xa(ae),N?fe=this._compileMultiBindings(e,ae,P,t):(ue=T.primary,G===null?(we=h.parse(ae,Nt),fe=we===null?ae===""?[]:[new Hi(ae,ue.name)]:[new _s(we,ue.name)]):(L.node=e,L.attr=m,L.bindable=ue,L.def=P,fe=[G.build(L,t._exprParser,t._attrMapper)])),p(),P.isTemplateController?(Ne??(Ne=[])).push(new pA(bA,this.resolveResources?P:P.name,void 0,fe)):(j??(j=[])).push(new Wa(this.resolveResources?P:P.name,P.aliases!=null&&P.aliases.includes(F)?F:void 0,fe));continue}if(G===null){we=h.parse(ae,Nt),we!=null&&(p(),(y??(y=[])).push(new _s(we,t._attrMapper.map(e,F)??De(F))));continue}L.node=e,L.attr=m,L.bindable=null,L.def=null,(y??(y=[])).push(G.build(L,t._exprParser,t._attrMapper)),p()}go(),this._shouldReorderAttrs(e,y)&&y!=null&&y.length>1&&this._reorder(e,y),o&&(Ie=new dA(this.resolveResources?r:r.name,O??H,null,A,u,E)),(y!=null||Ie!=null||j!=null)&&(g=H.concat(Ie??H,j??H,y??H),w=!0);let C;if(Ne!=null){f=Ne.length-1,_=f,Ee=Ne[_];let K;Wu(e)?(K=t.t(),Uu(K,[t._marker(),t._comment(Ka),t._comment(Ga)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?K=e:(K=t.t(),gi(K,e)));const po=K,Ot=t._createChild(g==null?[]:[g]);let Ln,Bt,di=!1,pi,Mt,qt,Wt,Nn,Ls,fi=0,uu=0,He=e.firstChild,du=!1;if(ct!==!1)for(;He!==null;){if(Bt=Qu(He)?He.getAttribute(jn):null,di=Bt!==null||o&&!a,Ln=He.nextSibling,di){if(!o)throw Ae(706,Bt,n);(ht=He.removeAttribute)==null||ht.call(He,jn),du=Hu(He)&&He.textContent.trim()==="",du||((tt=Mt??(Mt={}))[Ht=Bt||qu]??(tt[Ht]=[])).push(He),e.removeChild(He)}He=Ln}if(Mt!=null){pi={};for(Bt in Mt){for(K=t.t(),qt=Mt[Bt],fi=0,uu=qt.length;uu>fi;++fi)Wt=qt[fi],Wt.nodeName==="TEMPLATE"?Wt.attributes.length>0?gi(K,Wt):gi(K,Wt.content):gi(K,Wt);Ls=t._createChild(),this._compileNode(K.content,Ls),pi[Bt]={name:Vn(),type:Ki,template:K,instructions:Ls.rows,needsCompile:!1}}Ie.projections=pi}if(w&&(o&&(A||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),C=!o||!r.containerless&&!A&&ct!==!1,C)if(e.nodeName===Ja)this._compileNode(e.content,Ot);else for(He=e.firstChild;He!==null;)He=this._compileNode(He,Ot);for(Ee.def={name:Vn(),type:Ki,template:po,instructions:Ot.rows,needsCompile:!1};_-- >0;)Ee=Ne[_],K=t.t(),Nn=t._marker(),Uu(K,[Nn,t._comment(Ka),t._comment(Ga)]),Ee.def={name:Vn(),type:Ki,template:K,needsCompile:!1,instructions:[[Ne[_+1]]]};t.rows.push([Ee])}else{g!=null&&t.rows.push(g);let K=e.firstChild,po,Ot,Ln=!1,Bt=null,di,pi,Mt,qt,Wt,Nn=!1,Ls=0,fi=0;if(ct!==!1)for(;K!==null;){if(Ot=Qu(K)?K.getAttribute(jn):null,Ln=Ot!==null||o&&!a,po=K.nextSibling,Ln){if(!o)throw Ae(706,Ot,n);(uo=K.removeAttribute)==null||uo.call(K,jn),Nn=Hu(K)&&K.textContent.trim()==="",Nn||((zi=di??(di={}))[Mn=Ot||qu]??(zi[Mn]=[])).push(K),e.removeChild(K)}K=po}if(di!=null){Bt={};for(Ot in di){for(qt=t.t(),pi=di[Ot],Ls=0,fi=pi.length;fi>Ls;++Ls)Mt=pi[Ls],Mt.nodeName===Ja?Mt.attributes.length>0?gi(qt,Mt):gi(qt,Mt.content):gi(qt,Mt);Wt=t._createChild(),this._compileNode(qt.content,Wt),Bt[Ot]={name:Vn(),type:Ki,template:qt,instructions:Wt.rows,needsCompile:!1}}Ie.projections=Bt}if(w&&(o&&(A||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),C=!o||!r.containerless&&!A&&ct!==!1,C&&e.childNodes.length>0)for(K=e.firstChild;K!==null;)K=this._compileNode(K,t)}return s}_compileText(e,t){const s=e.parentNode,n=t._exprParser.parse(e.textContent,Nt),r=e.nextSibling;let o,a,l,c,u;if(n!==null){for({parts:o,expressions:a}=n,(u=o[0])&&Ya(s,t._text(u),e),l=0,c=a.length;c>l;++l)zu(s,e,[t._marker(),t._text(" ")]),(u=o[l+1])&&Ya(s,t._text(u),e),t.rows.push([new gA(a[l])]);s.removeChild(e)}return r}_compileMultiBindings(e,t,s,n){const r=n._getBindables(s),o=t.length,a=[];let l,c,u=0,h=0,p,d,g,f;for(let _=0;_<o;++_)if(h=t.charCodeAt(_),h===92)++_;else if(h===58){for(l=t.slice(u,_);t.charCodeAt(++_)<=32;);for(u=_;_<o;++_)if(h=t.charCodeAt(_),h===92)++_;else if(h===59){c=t.slice(u,_);break}if(c===void 0&&(c=t.slice(u)),d=n._attrParser.parse(l,c),g=n._getCommand(d),f=r.attrs[d.target],f==null)throw Ae(707,d.target,s.name);for(g===null?(p=n._exprParser.parse(c,Nt),a.push(p===null?new Hi(c,f.name):new _s(p,f.name))):(L.node=e,L.attr=d,L.bindable=f,L.def=s,a.push(g.build(L,n._exprParser,n._attrMapper)));_<o&&t.charCodeAt(++_)<=32;);u=_,l=void 0,c=void 0}return go(),a}_compileLocalElement(e,t){const s=t.root.def.name,n=e,r=ja(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(o===0)return;if(o===n.childElementCount)throw Ae(708,s);const a=new Set,l=[];for(const u of r){if(u.parentNode!==n)throw Ae(709,s);const h=CA(s,u,a),p=u.content,d=ja(p.querySelectorAll("bindable")),g=new Set,f=new Set,_=d.reduce((v,$)=>{if($.parentNode!==p)throw Ae(710,h);const m=$.getAttribute("name");if(m===null)throw Ae(711,$,h);const y=$.getAttribute("attribute");if(y!==null&&f.has(y)||g.has(m))throw Ae(712,g,y);y!==null&&f.add(y),g.add(m);const O=ja($.attributes).filter(P=>!Ku.includes(P.name));return O.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${O.map(P=>P.name).join(", ")} will be ignored for ${$.outerHTML}. Only ${Ku.join(", ")} are processed.`),$.remove(),v[m]={name:m,attribute:y??void 0,mode:$.getAttribute("mode")??"default"},v},{});class b{}b.$au={type:Ki,name:h,template:u,bindables:_},Reflect.defineProperty(b,"name",{value:bp(h)}),l.push(b),n.removeChild(u)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?H:[t.root.def.Type]);for(const u of l)u.dependencies=c.concat(l.filter(h=>h!==u)),t._addLocalDep(u)}_shouldReorderAttrs(e,t){const s=e.nodeName;return s==="INPUT"&&AA[e.type]===1||s==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(n=>n.type===Vc&&n.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const s=t;let n,r,o=0,a;for(let l=0;l<s.length&&o<3;l++)switch(a=s[l],a.to){case"model":case"value":case"matcher":n=l,o++;break;case"checked":r=l,o++;break}r!==void 0&&n!==void 0&&r<n&&([s[n],s[r]]=[s[r],s[n]]);break}case"SELECT":{const s=t;let n=0,r=0,o=0,a;for(let l=0;l<s.length&&o<2;++l){switch(a=s[l],a.to){case"multiple":r=l,o++;break;case"value":n=l,o++;break}o===2&&n<r&&([s[r],s[n]]=[s[n],s[r]])}}}}_markAsTarget(e,t){return Ya(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(Wu(e))return e;const s=e.parentNode,n=t._marker();return zu(s,e,[n,t._comment(Ka),t._comment(Ga)]),s.removeChild(e),n}}Lf.register=Hr(_a);const Ja="TEMPLATE",Wu=i=>i.nodeValue==="au*";class Vo{constructor(e,t,s,n,r){var a;this.hasSlot=!1,this.deps=null;const o=s!==null;if(this.c=t,this.root=n===null?this:n,this.def=e,this.parent=s,this._resourceResolver=o?s._resourceResolver:t.get(Nf),this._commandResolver=o?s._commandResolver:t.get(yA),this._templateFactory=o?s._templateFactory:t.get(mA),this._attrParser=o?s._attrParser:t.get(jc),this._exprParser=o?s._exprParser:t.get(In),this._attrMapper=o?s._attrMapper:t.get(Yp),this._logger=o?s._logger:t.get(Le),typeof((a=(this.p=o?s.p:t.get(xn)).document)==null?void 0:a.nodeType)!="number")throw Ae(722);this.localEls=o?s.localEls:new Set,this.rows=r??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new Vo(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const Xa=i=>{const e=i.length;let t=0,s=0;for(;e>s;){if(t=i.charCodeAt(s),t===92)++s;else{if(t===58)return!0;if(t===36&&i.charCodeAt(s+1)===123)return!1}++s}return!1},go=()=>{L.node=L.attr=L.bindable=L.def=null},bA={name:"unnamed",type:Ki},L={node:null,attr:null,bindable:null,def:null},wA={id:!0,name:!0,"au-slot":!0,"as-element":!0},AA={checkbox:1,radio:1},Nf=us("IResourceResolver"),yA=us("IBindingCommandResolver",i=>{class e{constructor(){this._cache=new WeakMap}get(s,n){let r=this._cache.get(s);return r||this._cache.set(s,r={}),n in r?r[n]:r[n]=_A.get(s,n)}}return i.singleton(e)}),Ku=Pn(["name","attribute","mode"]),Ql="as-custom-element",CA=(i,e,t)=>{const s=e.getAttribute(Ql);if(s===null||s==="")throw Ae(715,i);if(t.has(s))throw Ae(716,s,i);return t.add(s),e.removeAttribute(Ql),s},Gu=us("ITemplateCompilerHooks"),kA=Pn({name:si("compiler-hooks"),define(i){return{register(e){Nc(Gu,i).register(e)}}},findAll(i){return i.get(ub(Gu))}}),$A=Object.prototype.hasOwnProperty,Js=Reflect.defineProperty;function ns(i,e,t){return Js(i,e,{configurable:!0,writable:!0,value:t}),t}function ys(i,e,t){e in i||ns(i,e,t)}const Df=Object.assign,Uc=Object.freeze,fn=String,ma=lt.createInterface,SA=It.get,xA=It.define,Q=(i,...e)=>new Error(`AUR${fn(i).padStart(4,"0")}: ${IA(i,...e)}`),EA={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},IA=(i,...e)=>{var s;let t=EA[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=fn(l[a.slice(1)]):l=fn(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};class Oe{constructor(e,t,s,n){this.parent=e,this.bindingContext=t,this.overrideContext=s,this.isBoundary=n}static getContext(e,t,s){if(e==null)throw Q(203);let n=e.overrideContext,r=e;if(s>0){for(;s>0;)if(s--,r=r.parent,r==null)return;return n=r.overrideContext,t in n?n:r.bindingContext}for(;r!=null&&!r.isBoundary&&!(t in r.overrideContext)&&!(t in r.bindingContext);)r=r.parent;return r==null?e.bindingContext:(n=r.overrideContext,t in n?n:r.bindingContext)}static create(e,t,s){if(e==null)throw Q(204);return new Oe(null,e,t??new Ju,s??!1)}static fromParent(e,t,s=new Ju){if(e==null)throw Q(203);return new Oe(e,t,s,!1)}}class Yu{constructor(e,t){e!==void 0&&(this[e]=t)}}class Ju{}const{astAssign:xr,astEvaluate:ve,astBind:ri,astUnbind:oi}=(()=>{const i="AccessThis",e="AccessBoundary",t="AccessGlobal",s="AccessScope",n="ArrayLiteral",r="ObjectLiteral",o="PrimitiveLiteral",l="Template",c="Unary",u="CallScope",h="CallMember",p="CallFunction",d="CallGlobal",g="AccessMember",f="AccessKeyed",_="TaggedTemplate",b="Binary",v="Conditional",$="Assign",m="ArrowFunction",y="ValueConverter",O="BindingBehavior",P="ArrayBindingPattern",N="ObjectBindingPattern",D="BindingIdentifier",j="ForOfStatement",fe="Interpolation",Ne="ArrayDestructuring",Ee="ObjectDestructuring",we="DestructuringAssignmentLeaf",Ie="Custom",G=Oe.getContext;function T(A,k,w,E){var U;switch(A.$kind){case i:{let C=k.overrideContext,x=k,te=A.ancestor;for(;te--&&C;)x=x.parent,C=(x==null?void 0:x.overrideContext)??null;return te<1&&x?x.bindingContext:void 0}case e:{let C=k;for(;C!=null&&!C.isBoundary;)C=C.parent;return C?C.bindingContext:void 0}case s:{const C=G(k,A.name,A.ancestor);E!==null&&E.observe(C,A.name);const x=C[A.name];if(x==null){if(A.name==="$host")throw Q(105);return x}return w!=null&&w.boundFn&&Z(x)?x.bind(C):x}case t:return globalThis[A.name];case d:{const C=globalThis[A.name];if(Z(C))return C(...A.args.map(x=>T(x,k,w,E)));if(!(w!=null&&w.strict)&&C==null)return;throw Q(107)}case n:return A.elements.map(C=>T(C,k,w,E));case r:{const C={};for(let x=0;x<A.keys.length;++x)C[A.keys[x]]=T(A.values[x],k,w,E);return C}case o:return A.value;case"New":{const C=T(A.func,k,w,E);if(Z(C))return new C(...A.args.map(x=>T(x,k,w,E)));throw Q(107)}case l:{let C=A.cooked[0];for(let x=0;x<A.expressions.length;++x)C+=fn(T(A.expressions[x],k,w,E)),C+=A.cooked[x+1];return C}case c:{const C=T(A.expression,k,w,E);switch(A.operation){case"void":return;case"typeof":return typeof C;case"!":return!C;case"-":return-C;case"+":return+C;case"--":if(E!=null)throw Q(113);return ue(A.expression,k,w,E,C-1)+A.pos;case"++":if(E!=null)throw Q(113);return ue(A.expression,k,w,E,C+1)-A.pos;default:throw Q(109,A.operation)}}case u:{const C=G(k,A.name,A.ancestor);if(C==null){if(w!=null&&w.strict)throw Q(114,A.name,C);return}const x=C[A.name];if(Z(x))return x.apply(C,A.args.map(te=>T(te,k,w,E)));if(x==null){if(w!=null&&w.strict&&!A.optional)throw Q(111,A.name);return}throw Q(111,A.name)}case h:{const C=T(A.object,k,w,E);if(C==null&&w!=null&&w.strict&&!A.optionalMember)throw Q(114,A.name,C);const x=C==null?void 0:C[A.name];if(x==null){if(!A.optionalCall&&(w!=null&&w.strict))throw Q(111,A.name);return}if(!Z(x))throw Q(111,A.name);const te=x.apply(C,A.args.map(ht=>T(ht,k,w,E)));return _e(C)&&ct.includes(A.name)&&(E==null||E.observeCollection(C)),te}case p:{const C=T(A.func,k,w,E);if(Z(C))return C(...A.args.map(x=>T(x,k,w,E)));if(C==null){if(!A.optional&&(w!=null&&w.strict))throw Q(107);return}throw Q(107)}case m:return(...x)=>{const te=A.args,ht=A.rest,tt=te.length-1,Ht=te.reduce((zi,Mn,K)=>(ht&&K===tt?zi[Mn.name]=x.slice(K):zi[Mn.name]=x[K],zi),{}),uo=Oe.fromParent(k,Ht);return T(A.body,uo,w,E)};case g:{const C=T(A.object,k,w,E);if(C==null){if(!A.optional&&(w!=null&&w.strict))throw Q(114,A.name,C);return}E!==null&&!A.accessGlobal&&E.observe(C,A.name);const x=C[A.name];return w!=null&&w.boundFn&&Z(x)?x.bind(C):x}case f:{const C=T(A.object,k,w,E),x=T(A.key,k,w,E);if(C==null){if(!A.optional&&(w!=null&&w.strict))throw Q(115,x,C);return}return E!==null&&!A.accessGlobal&&E.observe(C,x),C[x]}case _:{const C=A.expressions.map(te=>T(te,k,w,E)),x=T(A.func,k,w,E);if(!Z(x))throw Q(110);return x(A.cooked,...C)}case b:{const C=A.left,x=A.right;switch(A.operation){case"&&":return T(C,k,w,E)&&T(x,k,w,E);case"||":return T(C,k,w,E)||T(x,k,w,E);case"??":return T(C,k,w,E)??T(x,k,w,E);case"==":return T(C,k,w,E)==T(x,k,w,E);case"===":return T(C,k,w,E)===T(x,k,w,E);case"!=":return T(C,k,w,E)!=T(x,k,w,E);case"!==":return T(C,k,w,E)!==T(x,k,w,E);case"instanceof":{const te=T(x,k,w,E);return Z(te)?T(C,k,w,E)instanceof te:!1}case"in":{const te=T(x,k,w,E);return Pi(te)?T(C,k,w,E)in te:!1}case"+":return T(C,k,w,E)+T(x,k,w,E);case"-":return T(C,k,w,E)-T(x,k,w,E);case"*":return T(C,k,w,E)*T(x,k,w,E);case"/":return T(C,k,w,E)/T(x,k,w,E);case"%":return T(C,k,w,E)%T(x,k,w,E);case"**":return T(C,k,w,E)**T(x,k,w,E);case"<":return T(C,k,w,E)<T(x,k,w,E);case">":return T(C,k,w,E)>T(x,k,w,E);case"<=":return T(C,k,w,E)<=T(x,k,w,E);case">=":return T(C,k,w,E)>=T(x,k,w,E);default:throw Q(108,A.operation)}}case v:return T(A.condition,k,w,E)?T(A.yes,k,w,E):T(A.no,k,w,E);case $:{let C=T(A.value,k,w,E);if(A.op!=="="){if(E!=null)throw Q(113);const x=T(A.target,k,w,E);switch(A.op){case"/=":C=x/C;break;case"*=":C=x*C;break;case"+=":C=x+C;break;case"-=":C=x-C;break;default:throw Q(108,A.op)}}return ue(A.target,k,w,E,C)}case y:return(U=w==null?void 0:w.useConverter)==null?void 0:U.call(w,A.name,"toView",T(A.expression,k,w,E),A.args.map(C=>T(C,k,w,E)));case O:return T(A.expression,k,w,E);case D:return A.name;case j:return T(A.iterable,k,w,E);case fe:if(A.isMulti){let C=A.parts[0],x=0;for(;x<A.expressions.length;++x)C+=fn(T(A.expressions[x],k,w,E)),C+=A.parts[x+1];return C}else return`${A.parts[0]}${T(A.firstExpression,k,w,E)}${A.parts[1]}`;case we:return T(A.target,k,w,E);case Ne:return A.list.map(C=>T(C,k,w,E));case P:case N:case Ee:default:return;case Ie:return A.evaluate(k,w,E)}}function ue(A,k,w,E,U){var C;switch(A.$kind){case s:{if(A.name==="$host")throw Q(106);const x=G(k,A.name,A.ancestor);return x[A.name]=U}case g:{const x=T(A.object,k,w,E);if(x==null){if(w!=null&&w.strict)throw Q(116,A.name);ue(A.object,k,w,E,{[A.name]:U})}else Pi(x)&&(A.name==="length"&&_e(x)&&!isNaN(U)?x.splice(U):x[A.name]=U);return U}case f:{const x=T(A.object,k,w,E),te=T(A.key,k,w,E);if(x==null){if(w!=null&&w.strict)throw Q(116,te);return ue(A.object,k,w,E,{[te]:U}),U}if(_e(x)){if(te==="length"&&!isNaN(U))return x.splice(U),U;if(dn(te))return x.splice(te,1,U),U}return x[te]=U}case $:return ue(A.value,k,w,E,U),ue(A.target,k,w,E,U);case y:return U=(C=w==null?void 0:w.useConverter)==null?void 0:C.call(w,A.name,"fromView",U,A.args.map(x=>T(x,k,w,E))),ue(A.expression,k,w,E,U);case O:return ue(A.expression,k,w,E,U);case Ne:case Ee:{const x=A.list,te=x.length;let ht,tt;for(ht=0;ht<te;ht++)switch(tt=x[ht],tt.$kind){case we:ue(tt,k,w,E,U);break;case Ne:case Ee:{if(typeof U!="object"||U===null)throw Q(112);let Ht=T(tt.source,Oe.create(U),w,null);Ht===void 0&&tt.initializer&&(Ht=T(tt.initializer,k,w,null)),ue(tt,k,w,E,Ht);break}}break}case we:{if(A instanceof Fp){if(U==null)return;if(typeof U!="object")throw Q(112);let x=T(A.source,Oe.create(U),w,E);x===void 0&&A.initializer&&(x=T(A.initializer,k,w,E)),ue(A.target,k,w,E,x)}else{if(U==null)return;if(typeof U!="object")throw Q(112);const x=A.indexOrProperties;let te;if(dn(x)){if(!Array.isArray(U))throw Q(112);te=U.slice(x)}else te=Object.entries(U).reduce((ht,[tt,Ht])=>(x.includes(tt)||(ht[tt]=Ht),ht),{});ue(A.target,k,w,E,te)}break}case Ie:return A.assign(k,w,U);default:return}}function F(A,k,w){var E,U,C;switch(A.$kind){case O:{(E=w.bindBehavior)==null||E.call(w,A.name,k,A.args.map(x=>T(x,k,w,null))),F(A.expression,k,w);break}case y:{(U=w.bindConverter)==null||U.call(w,A.name),F(A.expression,k,w);break}case j:{F(A.iterable,k,w);break}case Ie:(C=A.bind)==null||C.call(A,k,w)}}function ae(A,k,w){var E,U,C;switch(A.$kind){case O:{(E=w.unbindBehavior)==null||E.call(w,A.name,k),ae(A.expression,k,w);break}case y:{(U=w.unbindConverter)==null||U.call(w,A.name),ae(A.expression,k,w);break}case j:{ae(A.iterable,k,w);break}case Ie:(C=A.unbind)==null||C.call(A,k,w)}}const ct="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:T,astAssign:ue,astBind:F,astUnbind:ae}})(),PA=i=>{const e=i.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{ns(e,t,()=>{throw Q(99,t)})})},Za="pending",RA="running",Xu="completed",qn="canceled",Ff=Promise.resolve();let el=!1,Hl=!1;const ut=[];let Gs=0,Qs=null,Ys=[],zo=null,Hs=null;const Uo=()=>{el||(el=!0,Ff.then(()=>{el=!1,Hl=!0,TA()}))},fr=i=>{if(Qs&&ut.length===0&&Gs===0)if(Qs=null,Ys.length>0){const e=Ys;Ys=[],e.length===1?Hs(e[0]):Hs(new AggregateError(e,"One or more tasks failed."))}else zo(i)},TA=()=>{const i=!Hl;Hl=!1,Qs??(Qs=new Promise((n,r)=>{zo=n,Hs=r}));let e=-ut.length;const t=ut.length===0;for(;ut.length>0;){if(++e>1e4){const r=new Error("Potential deadlock detected. More than 10000 extra tasks were queued from within tasks.");throw ut.length=0,Hs==null||Hs(r),Qs=null,r}const n=ut.shift();if(typeof n=="function")try{n()}catch(r){Ys.push(r)}else n.run()}const s=Ys.slice();if(fr(!t),i&&s.length>0)throw s.length===1?s[0]:new AggregateError(s,"One or more tasks failed.")},OA=()=>Qs||(ut.length>0||Gs>0?Qs??(Qs=new Promise((i,e)=>{zo=i,Hs=e})):Ff.then(()=>ut.length>0||Gs>0?Qs??(Qs=new Promise((i,e)=>{zo=i,Hs=e})):!1)),rs=i=>{Uo(),ut.push(i)},gr=(i,e)=>{const t=new jf(i,e==null?void 0:e.delay);return t.delay!=null&&t.delay>0?(++Gs,t._timerId=setTimeout(()=>{if(--Gs,t._timerId=void 0,t.status===qn){fr(!0);return}ut.push(t),Uo()},t.delay)):(ut.push(t),Uo()),t};let Zu=class extends Error{constructor(e){super(`Task ${e.id} was canceled.`),this.task=e}},jf=class Vf{get result(){return this._result}get status(){return this._status}constructor(e,t){this.callback=e,this.delay=t,this.id=++Vf._taskId,this._status=Za,this._result=new Promise((s,n)=>{this._resolve=s,this._reject=n})}run(){if(this._status!==Za)throw new Error(`Cannot run task in ${this._status} state`);this._status=RA;let e;try{e=this.callback()}catch(t){this._status=qn,this._reject(t),Ys.push(t);return}e instanceof Promise?(++Gs,e.then(t=>{this._status=Xu,this._resolve(t)}).catch(t=>{this._status=qn,this._reject(t),Ys.push(t)}).finally(()=>{--Gs,fr(!0)})):(this._status=Xu,this._resolve(e))}cancel(){if(this._timerId!==void 0){clearTimeout(this._timerId),--Gs,this._timerId=void 0,this._status=qn;const e=new Zu(this);return this._reject(e),this._result.catch(dt),fr(!0),!0}if(this._status===Za){const e=ut.indexOf(this);if(e>-1){ut.splice(e,1),this._status=qn;const t=new Zu(this);return this._reject(t),this._result.catch(dt),fr(!0),!0}}return!1}};jf._taskId=0;const BA=(i,e)=>{const t=new va(i,Math.max(e==null?void 0:e.interval,0));return t._start(),t};class va{constructor(e,t){this._callback=e,this._interval=t,this.id=++va._nextId,this._canceled=!1,this._nextResolvers=[]}run(){try{this._callback()}catch(e){Ys.push(e);return}}_start(){this._canceled||(this._timerId=setTimeout(()=>{this._tick(),this._canceled||this._start()},this._interval))}_tick(){ut.push(this),Uo();const e=this._nextResolvers.splice(0);for(const t of e)t()}next(){return this._canceled?Promise.resolve():new Promise(e=>this._nextResolvers.push(e))}cancel(){this._canceled=!0,this._timerId!==void 0&&(clearTimeout(this._timerId),this._timerId=void 0);const e=this._nextResolvers.splice(0);for(const t of e)t()}}va._nextId=0;const zf=lt.createInterface("ICoercionConfiguration"),ba=0,ai=1,MA=2,LA=4,Qc=Uc({None:ba,Observer:ai,Node:MA,Layout:LA});function Oi(i=0){const e=Array(i);let t=0;for(;t<i;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let NA=!1;const Ut=(()=>{function i(a,l){return a==null?r:r(a)}function e(){return ns(this,"subs",new o)}function t(a){return this.subs.add(a)}function s(a){return this.subs.remove(a)}const n=new WeakSet;function r(a,l){if(!n.has(a)){n.add(a);const c=a.prototype;Js(c,"subs",{get:e}),ys(c,"subscribe",t),ys(c,"unsubscribe",s)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const u of this._subs.slice(0))u.handleChange(l,c)}notifyCollection(l,c){const u=this._subs.slice(0),h=u.length;let p=0;for(;p<h;++p)u[p].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return i})();class Uf{constructor(e){this.owner=e,this.type=ai,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.length;(this._value=n)!==s&&(this.subs.notifyDirty(),this.subs.notify(this._value,s))}}Qf(Uf);class Hc{constructor(e){this.owner=e,this.type=ai,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw Q(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.size;(this._value=n)!==s&&this.subs.notify(this._value,s)}}Qf(Hc);function Qf(i){const e=i.prototype;return ys(e,"subscribe",DA),ys(e,"unsubscribe",FA),Ut(i,null)}function DA(i){this.subs.add(i)&&this.subs.count===1&&this.owner.subscribe(this)}function FA(i){this.subs.remove(i)&&this.subs.count===0&&this.owner.subscribe(this)}const _r=(()=>{const i=Symbol.for("__au_arr_obs__"),e=Array[i]??ns(Array,i,new WeakMap);function t(f,_){return f===_?0:(f=f===null?"null":f.toString(),_=_===null?"null":_.toString(),f<_?-1:1)}function s(f,_){return f===void 0?_===void 0?0:1:_===void 0?-1:0}function n(f,_,b,v,$){let m,y,O,P,N,D,j;for(D=b+1;D<v;D++){for(m=f[D],y=_[D],j=D-1;j>=b&&(O=f[j],P=_[j],N=$(O,m),N>0);j--)f[j+1]=O,_[j+1]=P;f[j+1]=m,_[j+1]=y}}function r(f,_,b,v,$){let m=0,y=0,O,P,N,D,j,fe,Ne,Ee,we,Ie,G,T,ue,F,ae,ct,A,k,w;for(;;){if(v-b<=10){n(f,_,b,v,$);return}m=b+(v-b>>1),O=f[b],D=_[b],P=f[v-1],j=_[v-1],N=f[m],fe=_[m],Ne=$(O,P),Ne>0&&(Ie=O,G=D,O=P,D=j,P=Ie,j=G),Ee=$(O,N),Ee>=0?(Ie=O,G=D,O=N,D=fe,N=P,fe=j,P=Ie,j=G):(we=$(P,N),we>0&&(Ie=P,G=j,P=N,j=fe,N=Ie,fe=G)),f[b]=O,_[b]=D,f[v-1]=N,_[v-1]=fe,T=P,ue=j,F=b+1,ae=v-1,f[m]=f[F],_[m]=_[F],f[F]=T,_[F]=ue;e:for(y=F+1;y<ae;y++)if(ct=f[y],A=_[y],k=$(ct,T),k<0)f[y]=f[F],_[y]=_[F],f[F]=ct,_[F]=A,F++;else if(k>0){do{if(ae--,ae==y)break e;w=f[ae],k=$(w,T)}while(k>0);f[y]=f[ae],_[y]=_[ae],f[ae]=ct,_[ae]=A,k<0&&(ct=f[y],A=_[y],f[y]=f[F],_[y]=_[F],f[F]=ct,_[F]=A,F++)}v-ae<F-b?(r(f,_,ae,v,$),v=F):(r(f,_,b,F,$),b=ae)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const f=o.push,_=o.unshift,b=o.pop,v=o.shift,$=o.splice,m=o.reverse,y=o.sort;l={push:function(...O){const P=e.get(this);if(P===void 0)return f.apply(this,O);const N=this.length,D=O.length;if(D===0)return N;this.length=P.indexMap.length=N+D;let j=N;for(;j<this.length;)this[j]=O[j-N],P.indexMap[j]=-2,j++;return P.notify(),this.length},unshift:function(...O){const P=e.get(this);if(P===void 0)return _.apply(this,O);const N=O.length,D=new Array(N);let j=0;for(;j<N;)D[j++]=-2;_.apply(P.indexMap,D);const fe=_.apply(this,O);return P.notify(),fe},pop:function(){const O=e.get(this);if(O===void 0)return b.call(this);const P=O.indexMap,N=b.call(this),D=P.length-1;return P[D]>-1&&(P.deletedIndices.push(P[D]),P.deletedItems.push(N)),b.call(P),O.notify(),N},shift:function(){const O=e.get(this);if(O===void 0)return v.call(this);const P=O.indexMap,N=v.call(this);return P[0]>-1&&(P.deletedIndices.push(P[0]),P.deletedItems.push(N)),v.call(P),O.notify(),N},splice:function(...O){const P=O[0],N=O[1],D=e.get(this);if(D===void 0)return $.apply(this,O);const j=this.length,fe=P|0,Ne=fe<0?Math.max(j+fe,0):Math.min(fe,j),Ee=D.indexMap,we=O.length,Ie=we===0?0:we===1?j-Ne:N;let G=Ne;if(Ie>0){const ue=G+Ie;for(;G<ue;)Ee[G]>-1&&(Ee.deletedIndices.push(Ee[G]),Ee.deletedItems.push(this[G])),G++}if(G=0,we>2){const ue=we-2,F=new Array(ue);for(;G<ue;)F[G++]=-2;$.call(Ee,P,N,...F)}else $.apply(Ee,O);const T=$.apply(this,O);return(Ie>0||G>0)&&D.notify(),T},reverse:function(){const O=e.get(this);if(O===void 0)return m.call(this),this;const P=this.length,N=P/2|0;let D=0;for(;D!==N;){const j=P-D-1,fe=this[D],Ne=O.indexMap[D],Ee=this[j],we=O.indexMap[j];this[D]=Ee,O.indexMap[D]=we,this[j]=fe,O.indexMap[j]=Ne,D++}return O.notify(),this},sort:function(O){const P=e.get(this);if(P===void 0)return y.call(this,O),this;let N=this.length;if(N<2)return this;r(this,P.indexMap,0,N,s);let D=0;for(;D<N&&this[D]!==void 0;)D++;(O===void 0||!Z(O))&&(O=t),r(this,P.indexMap,0,D,O);let j=!1;for(D=0,N=P.indexMap.length;N>D;++D)if(P.indexMap[D]!==D){j=!0;break}return(j||NA)&&P.notify(),this}};for(const O of a)Js(l[O],"observing",{value:!0})}let u=!1;const h="__au_arr_on__";function p(){if(l===void 0&&c(),!(SA(h,Array)??!1)){xA(!0,Array,h);for(const f of a)o[f].observing!==!0&&ns(o,f,l[f])}}class d{constructor(_){this.type=ai,u||(u=!0,p()),this.indexObservers={},this.collection=_,this.indexMap=Oi(_.length),this.lenObs=void 0,e.set(_,this)}notify(){const _=this.subs;_.notifyDirty();const b=this.indexMap,v=this.collection,$=v.length;this.indexMap=Oi($),_.notifyCollection(v,b)}getLengthObserver(){return this.lenObs??(this.lenObs=new Uf(this))}getIndexObserver(_){var b;return(b=this.indexObservers)[_]??(b[_]=new g(this,_))}}Ut(d,null);class g{constructor(_,b){this.owner=_,this.index=b,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(_){if(_===this.getValue())return;const b=this.owner,v=this.index,$=b.indexMap;$[v]>-1&&$.deletedIndices.push($[v]),$[v]=-2,b.collection[v]=_,b.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(_,b){const v=this.index;if(b[v]===v)return;const m=this.value,y=this.value=this.getValue();m!==y&&this.subs.notify(y,m)}subscribe(_){this.subs.add(_)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(_){this.subs.remove(_)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return Ut(g,null),function(_){let b=e.get(_);return b===void 0&&(e.set(_,b=new d(_)),p()),b}})(),Qo=(()=>{const i=Symbol.for("__au_set_obs__"),e=Set[i]??ns(Set,i,new WeakMap),{add:t,clear:s,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(c){const u=e.get(this);if(u===void 0)return t.call(this,c),this;const h=this.size;return t.call(this,c),this.size===h?this:(u.indexMap[h]=-2,u.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return s.call(this);if(this.size>0){const h=c.indexMap;let p=0;for(const d of this.keys())h[p]>-1&&(h.deletedIndices.push(h[p]),h.deletedItems.push(d)),p++;s.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return n.call(this,c);if(this.size===0)return!1;let p=0;const d=u.indexMap;for(const g of this.keys()){if(g===c){d[p]>-1&&(d.deletedIndices.push(d[p]),d.deletedItems.push(g)),d.splice(p,1);const f=n.call(this,c);return f===!0&&u.notify(),f}p++}return!1}};function a(c){for(const u of r)ns(c,u,o[u])}class l{constructor(u){this.type=ai,this.collection=u,this.indexMap=Oi(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,p=this.collection,d=p.size;this.indexMap=Oi(d),u.notifyCollection(p,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new Hc(this))}}return Ut(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),Ho=(()=>{const i=Symbol.for("__au_map_obs__"),e=Map[i]??ns(Map,i,new WeakMap),{set:t,clear:s,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(c,u){const h=e.get(this);if(h===void 0)return t.call(this,c,u),this;const p=this.get(c),d=this.size;if(t.call(this,c,u),this.size===d){let f=0;for(const _ of this.entries()){if(_[0]===c)return _[1]!==p&&(h.indexMap.deletedIndices.push(h.indexMap[f]),h.indexMap.deletedItems.push(_),h.indexMap[f]=-2,h.notify()),this;f++}return this}return h.indexMap[d]=-2,h.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return s.call(this);if(this.size>0){const h=c.indexMap;let p=0;for(const d of this.keys())h[p]>-1&&(h.deletedIndices.push(h[p]),h.deletedItems.push(d)),p++;s.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return n.call(this,c);if(this.size===0)return!1;let p=0;const d=u.indexMap;for(const g of this.keys()){if(g===c){d[p]>-1&&(d.deletedIndices.push(d[p]),d.deletedItems.push(g)),d.splice(p,1);const f=n.call(this,c);return f===!0&&u.notify(),f}++p}return!1}};function a(c){for(const u of r)ns(c,u,o[u])}class l{constructor(u){this.type=ai,this.collection=u,this.indexMap=Oi(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,p=this.collection,d=p.size;this.indexMap=Oi(d),u.notifyCollection(p,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new Hc(this))}}return Ut(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),ed=(()=>{class i{constructor(u){this.version=0,this.count=0,this.o=new Map,this.b=u}add(u){this.o.has(u)||(u.subscribe(this.b),++this.count),this.o.set(u,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,u){u.unsubscribe(this.b)}function t(c,u){this.version!==c&&(u.unsubscribe(this.b),this.o.delete(u))}function s(){return ns(this,"obs",new i(this))}function n(c,u){this.obs.add(this.oL.getObserver(c,u))}function r(c){let u;if(_e(c))u=_r(c);else if(Sn(c))u=Qo(c);else if(Ws(c))u=Ho(c);else throw Q(210,c);this.obs.add(u)}function o(c){this.obs.add(c)}function a(){throw Q(99,"handleChange")}function l(){throw Q(99,"handleCollectionChange")}return function(u,h){const p=u.prototype;return ys(p,"observe",n),ys(p,"observeCollection",r),ys(p,"subscribeTo",o),Js(p,"obs",{get:s}),ys(p,"handleChange",a),ys(p,"handleCollectionChange",l),u}})();function Tt(i,e){return i==null?ed:ed(i,e)}let ee=null;const Zi=[];let Ps=!1;function jA(){Ps=!1}function VA(){Ps=!0}function qc(){return ee}function Wc(i){if(i==null)throw Q(206);if(ee==null){ee=i,Zi[0]=ee,Ps=!0;return}if(ee===i)throw Q(207);Zi.push(i),ee=i,Ps=!0}function Kc(i){if(i==null)throw Q(208);if(ee!==i)throw Q(209);Zi.pop(),ee=Zi.length>0?Zi[Zi.length-1]:null,Ps=ee!=null}const zA=Uc({get current(){return ee},get connecting(){return Ps},enter:Wc,exit:Kc,pause:jA,resume:VA}),gn=Reflect.get,UA=Object.prototype.toString,ql=new WeakMap,QA="__au_nw__",HA="__au_nw";function Hf(i){switch(UA.call(i)){case"[object Object]":return i.constructor[QA]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Tn="__raw__";function X(i){return Hf(i)?wa(i):i}function wa(i){return ql.get(i)??qA(i)}function ne(i){return i[Tn]??i}function ot(i){return Hf(i)&&i[Tn]||i}function Gc(i,e){if(e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||i.constructor[`${HA}_${fn(e)}__`]===!0)return!0;const t=Reflect.getOwnPropertyDescriptor(i,e);return(t==null?void 0:t.configurable)===!1&&t.writable===!1}function qA(i){const e=_e(i)?KA:Ws(i)||Sn(i)?m0:WA,t=new Proxy(i,e);return ql.set(i,t),ql.set(t,t),t}const WA={get(i,e,t){if(e===Tn)return i;const s=qc();return!Ps||Gc(i,e)||s==null?gn(i,e,t):(s.observe(i,e),X(gn(i,e,t)))},deleteProperty(i,e){return console.warn("[DEV:aurelia] deletion of a property will not always be working with Aurelia observation system, as it depends on getter/setter installation."),delete i[e]}},KA={get(i,e,t){if(e===Tn)return i;if(!Ps||Gc(i,e)||ee==null)return gn(i,e,t);switch(e){case"length":return ee.observe(i,"length"),i.length;case"map":return GA;case"includes":return XA;case"indexOf":return ZA;case"lastIndexOf":return e0;case"every":return YA;case"filter":return JA;case"find":return s0;case"findIndex":return t0;case"flat":return i0;case"flatMap":return n0;case"join":return r0;case"push":return a0;case"pop":return o0;case"reduce":return g0;case"reduceRight":return _0;case"reverse":return u0;case"shift":return l0;case"unshift":return c0;case"slice":return f0;case"splice":return h0;case"some":return d0;case"sort":return p0;case"keys":return qf;case"values":case Symbol.iterator:return Wl;case"entries":return Kl}return ee.observe(i,e),X(gn(i,e,t))},ownKeys(i){var e;return(e=qc())==null||e.observe(i,"length"),Reflect.ownKeys(i)}};function GA(i,e){const t=ne(this),s=t.map((n,r)=>ot(i.call(e,X(n),r,this)));return xe(ee,t),X(s)}function YA(i,e){const t=ne(this),s=t.every((n,r)=>i.call(e,X(n),r,this));return xe(ee,t),s}function JA(i,e){const t=ne(this),s=t.filter((n,r)=>ot(i.call(e,X(n),r,this)));return xe(ee,t),X(s)}function XA(i){const e=ne(this),t=e.includes(ot(i));return xe(ee,e),t}function ZA(i){const e=ne(this),t=e.indexOf(ot(i));return xe(ee,e),t}function e0(i){const e=ne(this),t=e.lastIndexOf(ot(i));return xe(ee,e),t}function t0(i,e){const t=ne(this),s=t.findIndex((n,r)=>ot(i.call(e,X(n),r,this)));return xe(ee,t),s}function s0(i,e){const t=ne(this),s=t.find((n,r)=>i(X(n),r,this),e);return xe(ee,t),X(s)}function i0(){const i=ne(this);return xe(ee,i),X(i.flat())}function n0(i,e){const t=ne(this);return xe(ee,t),wa(t.flatMap((s,n)=>X(i.call(e,X(s),n,this))))}function r0(i){const e=ne(this);return xe(ee,e),e.join(i)}function o0(){return X(ne(this).pop())}function a0(...i){return ne(this).push(...i)}function l0(){return X(ne(this).shift())}function c0(...i){return ne(this).unshift(...i)}function h0(...i){return X(ne(this).splice(...i))}function u0(...i){return X(ne(this).reverse())}function d0(i,e){const t=ne(this),s=t.some((n,r)=>ot(i.call(e,X(n),r,this)));return xe(ee,t),s}function p0(i){const e=ne(this),t=e.sort(i);return xe(ee,e),X(t)}function f0(i,e){const t=ne(this);return xe(ee,t),wa(t.slice(i,e))}function g0(i,e){const t=ne(this),s=t.reduce((n,r,o)=>i(n,X(r),o,this),e);return xe(ee,t),X(s)}function _0(i,e){const t=ne(this),s=t.reduceRight((n,r,o)=>i(n,X(r),o,this),e);return xe(ee,t),X(s)}const m0={get(i,e,t){if(e===Tn)return i;const s=qc();if(!Ps||Gc(i,e)||s==null)return gn(i,e,t);switch(e){case"size":return s.observe(i,"size"),i.size;case"clear":return C0;case"delete":return k0;case"forEach":return v0;case"add":if(Sn(i))return y0;break;case"get":if(Ws(i))return w0;break;case"set":if(Ws(i))return A0;break;case"has":return b0;case"keys":return qf;case"values":return Wl;case"entries":return Kl;case Symbol.iterator:return Ws(i)?Kl:Wl}return X(gn(i,e,t))}};function v0(i,e){const t=ne(this);return xe(ee,t),t.forEach((s,n)=>{i.call(e,X(s),X(n),this)})}function b0(i){const e=ne(this);return xe(ee,e),e.has(ot(i))}function w0(i){const e=ne(this);return xe(ee,e),X(e.get(ot(i)))}function A0(i,e){return X(ne(this).set(ot(i),ot(e)))}function y0(i){return X(ne(this).add(ot(i)))}function C0(){return X(ne(this).clear())}function k0(i){return X(ne(this).delete(ot(i)))}function qf(){const i=ne(this);xe(ee,i);const e=i.keys();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:X(s),done:n}},[Symbol.iterator](){return this}}}function Wl(){const i=ne(this);xe(ee,i);const e=i.values();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:X(s),done:n}},[Symbol.iterator](){return this}}}function Kl(){const i=ne(this);xe(ee,i);const e=i.entries();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:[X(s[0]),X(s[1])],done:n}},[Symbol.iterator](){return this}}}const xe=(i,e)=>i==null?void 0:i.observeCollection(e),$0=Uc({getProxy:wa,getRaw:ne,wrap:X,unwrap:ot,rawKey:Tn});class qo{constructor(e,t,s,n,r="async"){this.type=ai,this._oldValue=void 0,this._value=void 0,this._notified=!1,this._isQueued=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=X(e),this.$get=t,this.$set=s,this.oL=n,this._flush=r}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1,this._notified=!1),this._value)}setValue(e){if(Z(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),Is(e,this._value)||(this.$set.call(this._obj,e),this.run());else throw Q(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.compute(),this._isDirty=!1,this._notified=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll(),this._oldValue=void 0,this._notified=!0)}run(){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,rs(()=>{this._isQueued=!1,this._run()}))}_run(){var n;const e=this._value,t=this._oldValue,s=this.compute();this._isDirty=!1,(!this._notified||!Is(s,e))&&((n=this._callback)==null||n.call(this,s,t),this.subs.notify(s,t),this._oldValue=this._value=s,this._notified=!0)}compute(){this.obs.version++;try{return Wc(this),this._value=ot(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),Kc(this)}}}Tt(qo,null),Ut(qo,null);const S0=(()=>{const i=new WeakMap,e=t=>Nv(t)?t:String(t);return{get:(t,s)=>{var n;return(n=i.get(t))==null?void 0:n.get(e(s))},_getFlush:(t,s)=>{var n,r;return(r=(n=i.get(t))==null?void 0:n.get(e(s)))==null?void 0:r.flush},set:(t,s,n)=>{i.has(t)||i.set(t,new Map),i.get(t).set(e(s),n)}}})(),Yc=ma("IDirtyChecker",i=>i.callback(()=>{throw Q(217)})),x0={timeoutsPerCheck:25};class E0{static register(e){e.register(Pt.singleton(this,this),Pt.aliasTo(this,Yc))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=S(xn),this.check=()=>{if(++this._elapsedFrames<x0.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked.slice(0),t=e.length;let s,n=0;for(;n<t;++n)s=e[n],s.isDirty()&&s.flush()},Ut(td,null)}createProperty(e,t){return new td(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=BA(this.check,{interval:0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class td{constructor(e,t,s){this.obj=t,this.key=s,this.type=ba,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw Q(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class I0{get doNotCache(){return!0}constructor(e,t){this.type=ba,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class Wf{constructor(){this.type=ba}getValue(e,t){return e[t]}setValue(e,t,s){t[s]=e}}class Jc{constructor(e,t){this.type=ai,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var s,n;this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig));const t=this._value;if(this._observing){if(Is(e,this._value))return;this._value=e,this.subs.notifyDirty(),this.subs.notify(e,t),Is(e,this._value)&&((s=this._callback)==null||s.call(this,e,t))}else this._value=this._obj[this._key]=e,(n=this._callback)==null||n.call(this,e,t)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],Js(this._obj,this._key,{enumerable:!0,configurable:!0,get:Df(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(Js(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}Ut(Jc,null);const Gl=new Wf,On=ma("IObserverLocator",i=>i.singleton(T0)),Xc=ma("INodeObserverLocator",i=>i.cachedCallback(e=>(e.getAll(Le).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new P0)));class P0{handles(){return!1}getObserver(){return Gl}getAccessor(){return Gl}}const R0=ma("IComputedObserverLocator",i=>i.singleton(class{getObserver(t,s,n,r){const o=new qo(t,n.get,n.set,r,S0._getFlush(t,s));return Js(t,s,{enumerable:n.enumerable,configurable:!0,get:Df((()=>o.getValue()),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class T0{constructor(){this._adapters=[],this._dirtyChecker=S(Yc),this._nodeObserverLocator=S(Xc),this._computedObserverLocator=S(R0)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw Q(199,t);if(!mp(e))return new I0(e,Z(t)?"":t);if(Z(t))return new qo(e,t,void 0,this);const s=Kf(e);let n=s[t];return n===void 0&&(n=this.createObserver(e,t),n.doNotCache||(s[t]=n)),n}getAccessor(e,t){var n;const s=(n=e.$observers)==null?void 0:n[t];return s!==void 0?s:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):Gl}getArrayObserver(e){return _r(e)}getMapObserver(e){return Ho(e)}getSetObserver(e){return Qo(e)}createObserver(e,t){var n,r;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(_e(e))return _r(e).getLengthObserver();break;case"size":if(Ws(e))return Ho(e).getLengthObserver();if(Sn(e))return Qo(e).getLengthObserver();break;default:if(_e(e)&&dn(t))return _r(e).getIndexObserver(Number(t));break}let s=id(e,t);if(s===void 0){let o=sd(e);for(;o!==null&&(s=id(o,t),s===void 0);)o=sd(o)}if(s!==void 0&&!$A.call(s,"value")){let o=this._getAdapterObserver(e,t,s);return o==null&&(o=(r=(n=s.get)==null?void 0:n.getObserver)==null?void 0:r.call(n,e)),o??(s.configurable?this._computedObserverLocator.getObserver(e,t,s,this):this._dirtyChecker.createProperty(e,t))}return new Jc(e,t)}_getAdapterObserver(e,t,s){if(this._adapters.length>0)for(const n of this._adapters){const r=n.getObserver(e,t,s,this);if(r!=null)return r}return null}}const Zc=i=>{let e;return _e(i)?e=_r(i):Ws(i)?e=Ho(i):Sn(i)&&(e=Qo(i)),e},sd=Object.getPrototypeOf,id=Object.getOwnPropertyDescriptor,Kf=i=>{let e=i.$observers;return e===void 0&&Js(i,"$observers",{value:e=ce()}),e};class O0{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var s;if(this.stopped)throw Q(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(s=this._cleanupTask)==null||s.call(void 0),Wc(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,Kc(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Q(226);this.run()}else this.runCount=0}},this.stop=()=>{var s;(s=this._cleanupTask)==null||s.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}Tt(O0,null);class nd{constructor(e,t,s,n){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=s,this._callback=n}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=ve(this.ast,this._scope,this,this);this.obs.clear(),Is(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}Tt(nd,null),PA(nd);const zn="pending",Po="running",tl="completed",_o="canceled",sl=new Map,rd=i=>()=>{throw Bi(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${i}'.`)};class eh{constructor(e,t={}){var s,n;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(r=>{this[r]=r in t?t[r]:e[r]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(r=>{var o;this[r]=r in t?t[r]:((o=e[r])==null?void 0:o.bind(e))??rd(r)}),this.performanceNow="performanceNow"in t?t.performanceNow:((n=(s=e.performance)==null?void 0:s.now)==null?void 0:n.bind(e.performance))??rd("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new th(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let s=sl.get(e);return s===void 0&&sl.set(e,s=new eh(e,t)),s}static set(e,t){sl.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class th{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(il)&&this._pending.every(il)&&this._delayed.every(il)}constructor(e,t,s){this.platform=e,this.$request=t,this.$cancel=s,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new L0(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));let s;for(;this._processing.length>0;)if((s=this._processing.shift()).run(),s.status===Po)if(s.suspend===!0){this._suspenderTask=s,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const n=this._yieldPromise;this._yieldPromise=void 0,n.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=Jf()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:s,preempt:n,persistent:r,suspend:o}={...N0,...t};if(n){if(s>0)throw F0();if(r)throw j0()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new M0(this._tracer,this,a,a+s,n,r,o,e);return n?this._processing[this._processing.length]=l:s===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Bi(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Bi(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const s=this._yieldPromise;this._yieldPromise=void 0,s.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class od extends Error{constructor(e){super("Task was canceled."),this.task=e}}let B0=0;class M0{get result(){const e=this._result;if(e===void 0)switch(this._status){case zn:{const t=this._result=Jf();return this._resolve=t.resolve,this._reject=t.reject,t}case Po:throw Bi("Trying to await task from within task will cause a deadlock.");case tl:return this._result=Promise.resolve();case _o:return this._result=Promise.reject(new od(this))}return e}get status(){return this._status}constructor(e,t,s,n,r,o,a,l){this.taskQueue=t,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=l,this.id=++B0,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=zn,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==zn)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Bi(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:s,callback:n,_resolve:r,_reject:o,createdTime:a}=this;let l;this._status=Po;try{l=n(e-a),l instanceof Promise?l.then(c=>{this.persistent?s._resetPersistentTask(this):(t?this._status=_o:this._status=tl,this.dispose()),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),r!==void 0&&r(c)}).catch(c=>{if(this.persistent||this.dispose(),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?s._resetPersistentTask(this):(t?this._status=_o:this._status=tl,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),r!==void 0&&r(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===zn){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=_o,this.dispose(),t!==void 0&&t(new od(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===Po&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=zn,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class L0{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,s){if(t instanceof th){const n=t._processing.length,r=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${n} pending=${r} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${s}] ${c}`)}else{const n=t.id,r=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,u=t._status,h=`id=${n} created=${r} queue=${o} preempt=${a} persistent=${l} status=${u} suspend=${c}`;this.console.log(`${e}[T.${s}] ${h}`)}}}const N0={delay:0,preempt:!1,persistent:!1,suspend:!1};let Gf,Yf;const D0=(i,e)=>{Gf=i,Yf=e},Jf=()=>{const i=new Promise(D0);return i.resolve=Gf,i.reject=Yf,i},il=i=>i.persistent,F0=()=>Bi("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),j0=()=>Bi("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Bi=i=>new Error(i);class qs extends eh{static getOrCreate(e,t={}){let s=qs._lookup.get(e);return s===void 0&&qs._lookup.set(e,s=new qs(e,t)),s}static set(e,t){qs._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const s=n=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${n}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(n=>this[n]=n in t?t[n]:e[n]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(n=>{var r;return this[n]=n in t?t[n]:((r=e[n])==null?void 0:r.bind(e))??s(n)}),this.domQueue=(()=>{let n=!1,r=-1;const o=()=>{n=!0,r===-1&&(r=this.requestAnimationFrame(l))},a=()=>{n=!1,r>-1&&(this.cancelAnimationFrame(r),r=-1)},l=()=>{r=-1,n===!0&&(n=!1,c.flush())},c=new th(this,o,a);return c})()}}qs._lookup=new WeakMap;const{default:sh,oneTime:Aa,toView:Se,fromView:Rs,twoWay:Xf}=Fi,Xe=It.get,ya=It.has,Qt=It.define,{annotation:V0}=Cp,Os=V0.keyFor,Kr=Object,Mi=String,Zf=Kr.prototype,$i=Zf.hasOwnProperty,ps=Kr.freeze,eg=Kr.assign,tg=Kr.getOwnPropertyNames,ih=Kr.keys,ad=ce(),Yl=(i,e,t)=>{if(ad[e]===!0)return!0;if(!J(e))return!1;const s=e.slice(0,5);return ad[e]=s==="aria-"||s==="data-"||t.isStandardSvgAttribute(i,e)},Jl=i=>{throw i},sg=Reflect.defineProperty,bt=(i,e,t)=>(sg(i,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),ig=(i,e,t)=>i.addSignalListener(e,t),ng=(i,e,t)=>i.removeSignalListener(e,t),z0="Interpolation",U0="IsIterator",Q0="IsFunction",os="IsProperty",ld="pending",nl="running",nh=Qc.Observer,li=Qc.Node,fs=Qc.Layout,B=(i,...e)=>{const t=Mi(i).padStart(4,"0"),s=q0(i,...e),n=`https://docs.aurelia.io/developer-guides/error-messages/runtime-html/aur${t}`;return new Error(`AUR${t}: ${s}

For more information, see: ${n}`)},H0={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},q0=(i,...e)=>{var s;let t=H0[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=W0(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Mi(l[a.slice(1)]):l=Mi(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function W0(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function ke(i,e){let t;function s(n,r){var c;let o;switch(r.kind){case"getter":case"field":{const u=r.name;if(typeof u!="string")throw B(227);o=u;break}case"class":if(t==null)throw B(228);if(typeof t=="string")o=t;else{const u=t.name;if(!u)throw B(229);if(typeof u!="string")throw B(227);o=u}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=r.metadata)[zs]??(c[zs]=ce());l[o]=ks.create(o,a)}if(arguments.length>1){t={},s(i,e);return}else if(J(i))return t=i,s;return t=i===void 0?{}:i,s}const zs=Os("bindables"),mt=ps({name:zs,keyFrom:i=>`${zs}:${i}`,from(...i){const e={},t=Array.isArray;function s(o){e[o]=ks.create(o)}function n(o,a){e[o]=a instanceof ks?a:ks.create(o,a===!0?{}:a)}function r(o){t(o)?o.forEach(a=>J(a)?s(a):n(a.name,a)):o instanceof ks?e[o.name]=o:o!==void 0&&ih(o).forEach(a=>n(a,o[a]))}return i.forEach(r),e},getAll(i){const e=[],t=Vv(i);let s=t.length,n;for(;--s>=0;){n=t[s];const r=Xe(zs,n);r!=null&&e.push(...Object.values(r))}return e},_add(i,e){let t=Xe(zs,e);t==null&&Qt(t=ce(),e,zs),t[i.name]=i}});class ks{constructor(e,t,s,n,r,o){this.attribute=e,this.callback=t,this.mode=s,this.primary=n,this.name=r,this.set=o}static create(e,t={}){const s=t.mode??Se;return new ks(t.attribute??wp(e),t.callback??`${e}Changed`,J(s)?Fi[s]??sh:s,t.primary??!1,t.name??e,t.set??K0(t))}}const Xl={key:Os("coercer"),define(i,e){Qt(i[e].bind(i),i,Xl.key)},for(i){return Xe(Xl.key,i)}};function K0(i={}){const e=i.type??null;if(e==null)return dt;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const s=e.coerce;t=typeof s=="function"?s.bind(e):Xl.for(e)??dt;break}}return t===dt?t:G0(t,i.nullable)}function G0(i,e){return function(t,s){return s!=null&&s.enableCoercion?(e??!((s==null?void 0:s.coerceNullish)??!1))&&t==null?t:i(t,s):t}}const oe=lt.createInterface,gs=Pt.singleton,Xs=Pt.aliasTo,rh=Pt.instance,me=(i,e,t)=>i.registerResolver(e,t),Y0="custom-element",J0="custom-attribute",Zs=(i,e,t,s="__au_static_resource__")=>{var r;let n=Xe(s,i);return n==null&&((r=i.$au)==null?void 0:r.type)===e&&(n=t(i.$au,i),Qt(n,i,s)),n};class mr{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return J(e)?(s=e,n={name:s}):(s=e.name,n=e),new mr(t,Vs(cd(t,"name"),s),Re(cd(t,"aliases"),n.aliases,t.aliases),rg.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?vr(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${B(156,this.name)}`):e.register(e.has(s,!1)?null:gs(s,s),Xs(s,n),...r.map(o=>Xs(s,vr(o))))}}const Et="binding-behavior",Gi=si(Et),cd=(i,e)=>Xe(Os(e),i),vr=i=>`${Gi}:${i}`,rg=ps({name:Gi,keyFrom:vr,isType(i){var e;return Z(i)&&(ya(Gi,i)||((e=i.$au)==null?void 0:e.type)===Et)},define(i,e){const t=mr.create(i,e),s=t.Type;return Qt(t,s,Gi,Dt),s},getDefinition(i){const e=Xe(Gi,i)??Zs(i,Et,mr.create);if(e===void 0)throw B(151,i);return e},find(i,e){const t=i.find(Et,e);return t==null?null:Xe(Gi,t)??Zs(t,Et,mr.create)??null},get(i,e){try{return i.get(pn(vr(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return i.get(pn(vr(e)))}}),rl=new Map,Ca=i=>({type:Et,name:i});class ka{bind(e,t){rl.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=rl.get(t),rl.delete(t)}}class og extends ka{get mode(){return Aa}}og.$au=Ca("oneTime");class ag extends ka{get mode(){return Se}}ag.$au=Ca("toView");class lg extends ka{get mode(){return Rs}}lg.$au=Ca("fromView");class cg extends ka{get mode(){return Xf}}cg.$au=Ca("twoWay");const ol=new WeakMap,X0=200;class hg{constructor(){this._platform=S(xn)}bind(e,t,s,n){var a;const r={type:"debounce",delay:s??X0,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:J(n)?[n]:n??H},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):ol.set(t,o)}unbind(e,t){var s;(s=ol.get(t))==null||s.dispose(),ol.delete(t)}}hg.$au={type:Et,name:"debounce"};const Wo=oe("ISignaler",i=>i.singleton(Z0));class Z0{constructor(){this.signals=ce()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let s;for(s of t.keys())s.handleChange(void 0,void 0)}addSignalListener(e,t){var s;((s=this.signals)[e]??(s[e]=new Set)).add(t)}removeSignalListener(e,t){var s;(s=this.signals[e])==null||s.delete(t)}}class ug{constructor(){this._lookup=new Map,this._signaler=S(Wo)}bind(e,t,...s){if(!("handleChange"in t))throw B(817);if(s.length===0)throw B(818);this._lookup.set(t,s);let n;for(n of s)ig(this._signaler,n,t)}unbind(e,t){const s=this._lookup.get(t);this._lookup.delete(t);let n;for(n of s)ng(this._signaler,n,t)}}ug.$au={type:Et,name:"signal"};const al=new WeakMap,ey=200;class dg{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=S(xn))}bind(e,t,s,n){var a;const r={type:"throttle",delay:s??ey,now:this._now,queue:this._taskQueue,signals:J(n)?[n]:n??H},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):al.set(t,o)}unbind(e,t){var s;(s=al.get(t))==null||s.dispose(),al.delete(t)}}dg.$au={type:Et,name:"throttle"};const Zl=oe("IAppTask");class hd{constructor(e,t,s){this.c=void 0,this.slot=e,this.k=t,this.cb=s}register(e){return this.c=e.register(rh(Zl,this))}run(){const e=this.k,t=this.cb;return e===null?t():t(this.c.get(e))}}const mo=ps({creating:_i("creating"),hydrating:_i("hydrating"),hydrated:_i("hydrated"),activating:_i("activating"),activated:_i("activated"),deactivating:_i("deactivating"),deactivated:_i("deactivated")});function _i(i){function e(t,s){return Z(s)?new hd(i,t,s):new hd(i,null,t)}return e}const Fe=xn;class ty{}const Ft=(()=>{const i=new WeakMap;let e=!1;return new class{get hideProp(){return e}set hideProp(t){e=t}get(t,s){var n;return((n=i.get(t))==null?void 0:n[s])??null}set(t,s,n){const r=i.get(t)??(i.set(t,new ty),i.get(t));if(s in r)throw new Error(`Node already associated with a controller, remove the ref "${s}" first before associating with another controller`);return e||(t.$au??(t.$au=r)),r[s]=n}}})(),Bn=oe("INode"),ec=(()=>{const i=new WeakMap;return ps({add(e,t){let s=i.get(e);s==null&&i.set(e,s=[]),s.push(t)},getDefinitions(e){return i.get(e)??H}})})();class Li{get type(){return J0}constructor(e,t,s,n,r,o,a,l,c,u,h){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.defaultBindingMode=r,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=u,this.containerStrategy=h}static create(e,t){let s,n;J(e)?(s=e,n={name:s}):(s=e.name,n=e);const r=Vs(bs(t,"defaultBindingMode"),n.defaultBindingMode,t.defaultBindingMode,Se);for(const o of Object.values(mt.from(n.bindables)))mt._add(o,t);return new Li(t,Vs(bs(t,"name"),s),Re(bs(t,"aliases"),n.aliases,t.aliases),cn(s),J(r)?Fi[r]??sh:r,Vs(bs(t,"isTemplateController"),n.isTemplateController,t.isTemplateController,!1),mt.from(...mt.getAll(t),bs(t,"bindables"),t.bindables,n.bindables),Vs(bs(t,"noMultiBindings"),n.noMultiBindings,t.noMultiBindings,!1),Re(ec.getDefinitions(t),t.watches),Re(bs(t,"dependencies"),n.dependencies,t.dependencies),Vs(bs(t,"containerStrategy"),n.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const s=this.Type,n=typeof t=="string"?cn(t):this.key,r=this.aliases;e.has(n,!1)?(Li.warnDuplicate&&e.get(Le).warn(B(154,this.name)),console.warn(`[DEV:aurelia] ${B(154,this.name)}`)):e.register(e.has(s,!1)?null:gs(s,s),Xs(s,n),...r.map(o=>Xs(s,cn(o))))}toString(){return`au:ca:${this.name}`}}Li.warnDuplicate=!0;const Ze="custom-attribute",_n=si(Ze),cn=i=>`${_n}:${i}`,bs=(i,e)=>Xe(Os(e),i),sy=i=>{var e;return Z(i)&&(ya(_n,i)||((e=i.$au)==null?void 0:e.type)===Ze)},pg=(i,e)=>Ft.get(i,cn(e))??void 0,oh=(i,e)=>{const t=Li.create(i,e),s=t.Type;return Qt(t,s,_n,Dt),s},ah=i=>{const e=Xe(_n,i)??Zs(i,Ze,Li.create);if(e===void 0)throw B(759,i);return e},iy=(i,e)=>{let t="",s="";if(J(e))t=cn(e),s=e;else{const r=ah(e);t=r.key,s=r.name}let n=i;for(;n!==null;){const r=Ft.get(n,t);if(r!=null&&r.is(s))return r;n=Yo(n)}return null},Gr=ps({name:_n,keyFrom:cn,isType:sy,for:pg,closest:iy,define:oh,getDefinition:ah,annotate(i,e,t){Qt(t,i,Os(e))},getAnnotation:bs,find(i,e){const t=i.find(Ze,e);return t===null?null:Xe(_n,t)??Zs(t,Ze,Li.create)??null}}),qi=oe("ILifecycleHooks");class ny{constructor(e,t){this.definition=e,this.instance=t}}class lh{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const s=new Set;let n=t.prototype;for(;n!==Zf;){for(const r of tg(n))r!=="constructor"&&!r.startsWith("_")&&s.add(r);n=Object.getPrototypeOf(n)}return new lh(t,s)}}const ud=(()=>{const i=new WeakMap,e=new WeakMap;return ps({define(t,s){const n=lh.create(t,s),r=n.Type;return e.set(r,n),{register(o){gs(qi,r).register(o)}}},resolve(t){let s=i.get(t);if(s===void 0){i.set(t,s=new ry);const n=t.root,r=n===t?t.getAll(qi):t.has(qi,!1)?n.getAll(qi).concat(t.getAll(qi)):n.getAll(qi);let o,a,l,c,u;for(o of r){a=e.get(o.constructor),l=new ny(a,o);for(c of a.propertyNames)u=s[c],u===void 0?s[c]=[l]:u.push(l)}}return s}})})();class ry{}class br{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return J(e)?(s=e,n={name:s}):(s=e.name,n=e),new br(t,Vs(tc(t,"name"),s),Re(tc(t,"aliases"),n.aliases,t.aliases),fg.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?wr(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${B(155,this.name)}`):e.register(e.has(s,!1)?null:gs(s,s),Xs(s,n),...r.map(o=>Xs(s,wr(o))))}}const en="value-converter",Yi=si(en),tc=(i,e)=>Xe(Os(e),i),wr=i=>`${Yi}:${i}`,fg=ps({name:Yi,keyFrom:wr,isType(i){var e;return Z(i)&&(ya(Yi,i)||((e=i.$au)==null?void 0:e.type)===en)},define(i,e){const t=br.create(i,e),s=t.Type;return Qt(t,s,Yi,Dt),s},getDefinition(i){const e=Xe(Yi,i)??Zs(i,en,br.create);if(e===void 0)throw B(152,i);return e},annotate(i,e,t){Qt(t,i,Os(e))},getAnnotation:tc,find(i,e){const t=i.find(en,e);return t==null?null:Xe(Yi,t)??Zs(t,en,br.create)??null},get(i,e){try{return i.get(pn(wr(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return i.get(pn(wr(e)))}});class oy{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.isBound&&this.b.updateSource(this._value)}handleChange(e,t){const s=this.b;e!==ve(s.ast,s._scope,s,null)&&(this._value=e,this._flushQueue.add(this))}}const ci=(()=>{function i(e){this._scope=e}return e=>{bt(e.prototype,"useScope",i)}})(),Bs=(()=>{class i{}const e=new WeakMap,t=new WeakMap,s=new WeakMap;function n(p){return this.l.get(p)}function r(p,d){let g=t.get(p);return g==null&&t.set(p,g=new i),g[d]??(g[d]=rg.get(p.l,d))}function o(p,d,g){var b;const f=r(this,p);if(f==null)throw B(101,p);let _=s.get(this);if(_==null&&s.set(this,_={}),_[p])throw B(102,p);(b=f.bind)==null||b.call(f,d,this,...g)}function a(p,d){var _;const g=r(this,p),f=s.get(this);(_=g==null?void 0:g.unbind)==null||_.call(g,d,this),f!=null&&(f[p]=!1)}function l(p,d){let g=e.get(p);return g==null&&e.set(p,g=new i),g[d]??(g[d]=fg.get(p.l,d))}function c(p){const d=l(this,p);if(d==null)throw B(103,p);const g=d.signals;if(g!=null){const f=this.l.get(Wo),_=g.length;let b=0;for(;b<_;++b)f.addSignalListener(g[b],this)}}function u(p){const d=l(this,p);if((d==null?void 0:d.signals)===void 0)return;const g=this.l.get(Wo);let f=0;for(;f<d.signals.length;++f)g.removeSignalListener(d.signals[f],this)}function h(p,d,g,f){var $,m;const _=l(this,p);if(_==null)throw B(103,p);const b=_.withContext===!0;let v=null;switch(b&&(v={source:this.l.get(ei).controller.viewModel,binding:this}),d){case"toView":return"toView"in _?b?_.toView(g,v,...f):_.toView(g,...f):g;case"fromView":return"fromView"in _?b?($=_.fromView)==null?void 0:$.call(_,g,v,...f):(m=_.fromView)==null?void 0:m.call(_,g,...f):g}}return p=>{const d=p.prototype;bt(d,"get",n),bt(d,"bindBehavior",o),bt(d,"unbindBehavior",a),bt(d,"bindConverter",c),bt(d,"unbindConverter",u),bt(d,"useConverter",h)}})(),ay=oe("IFlushQueue",i=>i.singleton(ly));class ly{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(cy)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const cy=function(i,e,t){t.delete(i),i.flush()},hi=(()=>{const i=new WeakSet,e=(s,n,r)=>{let o,a,l,c=!1;const u=()=>n(l),h=d=>{l=d,r.isBound?(a=o,o=gr(u,{delay:s.delay}),a==null||a.cancel()):u()},p=h.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return h.flush=()=>{c=(o==null?void 0:o.status)===ld,p(),c&&u()},h},t=(s,n,r)=>{let o,a,l=0,c=0,u,h=!1;const p=()=>s.now(),d=()=>n(u),g=_=>{u=_,r.isBound?(c=p()-l,a=o,c>s.delay?(l=p(),d()):o=gr(()=>{l=p(),d()},{delay:s.delay-c}),a==null||a.cancel()):d()},f=g.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return g.flush=()=>{h=(o==null?void 0:o.status)===ld,f(),h&&d()},g};return(s,n)=>{bt(s.prototype,"limit",function(r){if(i.has(this))throw B(9996);i.add(this);const o=n(this,r),a=r.signals,l=a.length>0?this.get(Wo):null,c=this[o],u=(...d)=>c.call(this,...d),h=r.type==="debounce"?e(r,u,this):t(r,u,this),p=l?{handleChange:h.flush}:null;return this[o]=h,l&&a.forEach(d=>ig(l,d,p)),{dispose:()=>{l&&a.forEach(d=>ng(l,d,p)),i.delete(this),h.dispose(),delete this[o]}}})}})(),ui=((i=new WeakSet)=>e=>function(){i.has(this)||(i.add(this),e.call(this))})();class xt{constructor(e,t,s,n,r,o,a,l,c){this.targetAttribute=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._isQueued=!1,this._value=void 0,this.boundFn=!1,this._isMulti=!1,this.l=t,this.ast=n,this._controller=e,this.target=r,this.oL=s,(this._isMulti=a.indexOf(" ")>-1)&&!xt._splitString.has(a)&&xt._splitString.set(a,a.split(" "))}updateTarget(e){const t=this.target,s=this.targetAttribute,n=this.targetProperty;switch(s){case"class":if(this._isMulti){const r=!!e;for(const o of xt._splitString.get(n))t.classList.toggle(o,r)}else t.classList.toggle(n,!!e);break;case"style":{let r="",o=Mi(e);J(o)&&o.includes("!important")&&(r="important",o=o.replace("!important","")),t.style.setProperty(n,o,r);break}default:e==null?t.removeAttribute(s):t.setAttribute(s,Mi(e))}}handleChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,rs(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),e!==this._value&&(this._value=e,this.updateTarget(e))})))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ri(this.ast,e,this),this.mode&(Se|Aa)&&this.updateTarget(this._value=ve(this.ast,e,this,(this.mode&Se)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,oi(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,this.obs.clearAll())}}xt.mix=ui(()=>{ci(xt),hi(xt,()=>"updateTarget"),Tt(xt,null),Bs(xt)});xt._splitString=new Map;class hy{constructor(e,t,s,n,r,o,a,l){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.strict=l,this.isBound=!1,this._scope=void 0,this._isQueued=!1,this._controller=e,this.oL=s,this._targetObserver=s.getAccessor(r,o);const c=n.expressions,u=this.partBindings=Array(c.length),h=c.length;let p=0;for(;h>p;++p)u[p]=new bi(c[p],r,o,t,s,l,this)}_handlePartChange(){if(!this.isBound)return;if(this._controller.state!==Jt&&(this._targetObserver.type&fs)>0){if(this._isQueued)return;this._isQueued=!0,rs(()=>{this._isQueued=!1,this.isBound&&this.updateTarget()})}else this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast,s=this.target,n=this.targetProperty,r=t.parts,o=e.length;let a="",l=0;if(o===1)a=r[0]+e[0]._evaluate()+r[1];else for(a=r[0];o>l;++l)a+=e[l]._evaluate()+r[l+1];this._targetObserver.setValue(a,s,n)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,s=t.length;let n=0;for(;s>n;++n)t[n].bind(e);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let s=0;for(;t>s;++s)e[s].unbind()}useAccessor(e){this._targetObserver=e}}class bi{constructor(e,t,s,n,r,o,a){this.ast=e,this.target=t,this.targetProperty=s,this.strict=o,this.owner=a,this.mode=Se,this.isBound=!1,this._value="",this.boundFn=!1,this._isDirty=!1,this.l=n,this.oL=r}updateTarget(){this.owner._handlePartChange()}handleChange(){this.isBound&&(this._isDirty=!0,this.updateTarget())}handleCollectionChange(){this.isBound&&(this._isDirty=!0,this.updateTarget())}_evaluate(){if(!this._isDirty)return this._value;this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&Se)>0?this:null);return this.obs.clear(),this._value=e,_e(e)&&this.observeCollection(e),this._isDirty=!1,this._value}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ri(this.ast,e,this),this._value=ve(this.ast,this._scope,this,(this.mode&Se)>0?this:null),_e(this._value)&&this.observeCollection(this._value),this._isDirty=!1,this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this._value=void 0,this._isDirty=!1,oi(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}bi.mix=ui(()=>{ci(bi),hi(bi,()=>"updateTarget"),Tt(bi,null),Bs(bi)});class wi{constructor(e,t,s,n,r,o,a){this.p=n,this.ast=r,this.target=o,this.strict=a,this.isBound=!1,this.mode=Se,this._isQueued=!1,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=s}updateTarget(e){var n,r;const t=this.target,s=this._value;this._value=e,this._needsRemoveNode&&((n=s.parentNode)==null||n.removeChild(s),this._needsRemoveNode=!1),e instanceof this.p.Node&&((r=t.parentNode)==null||r.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Mi(e??"")}handleChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,rs(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),e!==this._value&&this.updateTarget(e)})))}handleCollectionChange(){this.isBound&&(this._isQueued||(this._isQueued=!0,rs(()=>{if(this._isQueued=!1,!this.isBound)return;this.obs.version++;const e=this._value=ve(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),_e(e)&&this.observeCollection(e),this.updateTarget(e)})))}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ri(this.ast,e,this);const t=this._value=ve(this.ast,this._scope,this,(this.mode&Se)>0?this:null);_e(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,oi(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll())}}wi.mix=ui(()=>{ci(wi),hi(wi,()=>"updateTarget"),Tt(wi,null),Bs(wi)});class Ai{constructor(e,t,s,n,r,o){this.ast=s,this.targetProperty=n,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=r}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=ve(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,ri(this.ast,e,this),this._value=ve(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,oi(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}Ai.mix=ui(()=>{ci(Ai),hi(Ai,()=>"updateTarget"),Tt(Ai,null),Bs(Ai)});class nt{constructor(e,t,s,n,r,o,a,l){this.ast=n,this.target=r,this.targetProperty=o,this.mode=a,this.strict=l,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._isQueued=!1,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this.oL=s}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){xr(this.ast,this._scope,this,null,e)}handleChange(){if(!this.isBound)return;if(this._controller.state!==Jt&&(this._targetObserver.type&fs)>0){if(this._isQueued)return;this._isQueued=!0,rs(()=>{this._isQueued=!1,this.isBound&&this._handleChange()})}else this._handleChange()}_handleChange(){this.obs.version++;const e=ve(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ri(this.ast,e,this);const t=this.oL,s=this.mode;let n=this._targetObserver;n||(s&Rs?n=t.getObserver(this.target,this.targetProperty):n=t.getAccessor(this.target,this.targetProperty),this._targetObserver=n);const r=(s&Se)>0;s&(Se|Aa)&&this.updateTarget(ve(this.ast,this._scope,this,r?this:null)),s&Rs&&(n.subscribe(this._targetSubscriber??(this._targetSubscriber=new oy(this,this.l.get(ay)))),r||this.updateSource(n.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),oi(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw B(9995);this._targetSubscriber=e}}nt.mix=ui(()=>{ci(nt),hi(nt,i=>i.mode&Rs?"updateSource":"updateTarget"),Tt(nt,null),Bs(nt)});class yi{constructor(e,t,s,n,r){this.oL=t,this.ast=s,this.target=n,this.strict=r,this.isBound=!1,this._scope=void 0,this.l=e}updateSource(){this.isBound?(this.obs.version++,xr(this.ast,this._scope,this,this,this.target),this.obs.clear()):xr(this.ast,this._scope,this,null,null)}handleChange(){this.isBound&&this.updateSource()}handleCollectionChange(){this.isBound&&this.updateSource()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ri(this.ast,e,this),this.isBound=!0,this.updateSource()}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),ve(this.ast,this._scope,this,null)===this.target&&this.updateSource(),oi(this.ast,this._scope,this),this._scope=void 0)}}yi.mix=ui(()=>{Tt(yi,null),hi(yi,()=>"updateSource"),ci(yi),Bs(yi)});class uy{constructor(e,t=!1,s){this.prevent=e,this.capture=t,this.onError=s}}class tn{constructor(e,t,s,n,r,o,a){this.ast=t,this.target=s,this.targetEvent=n,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=r,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let s=ve(this.ast,this._scope,this,null);delete t.$event,Z(s)&&(s=s(e)),s!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(s){this._options.onError(e,s)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ri(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,oi(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}tn.mix=ui(function(){ci(tn),hi(tn,()=>"callSource"),Bs(tn)});const $a=oe("IEventModifier"),gg=oe("IKeyMapping",i=>i.instance({meta:ps(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,s)=>{let n=String.fromCharCode(s+65);return e[s+65]=n,n=String.fromCharCode(s+97),e[s+97]=e[n]=n,e},{})}}));class ch{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=S(gg),this._mouseButtons=["left","middle","right"]}static register(e){e.register(gs($a,ch))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue;case"left":case"middle":case"right":if(s.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&s[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}class hh{constructor(){this._mapping=S(gg),this.type=["keydown","keyup"]}static register(e){e.register(gs($a,hh))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}if(this._mapping.meta.includes(o)){if(s[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==s.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${s.key}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}class uh{constructor(){this.type=["$ALL"]}static register(e){e.register(gs($a,uh))}getHandler(e){const t=e.split(/[:+.]/);return(s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${s.type}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0})}}const _g=oe("IEventModifierHandler",i=>i.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class dh{constructor(){this._reg=S(Rc($a)).reduce((e,t)=>((_e(t.type)?t.type:[t.type]).forEach(n=>e[n]=t),e),{})}static register(e){e.register(gs(_g,dh))}getHandler(e,t){var s;return J(t)?((s=this._reg[e]??this._reg.$ALL)==null?void 0:s.getHandler(t))??null:null}}const dy={register(i){i.register(dh,ch,hh,uh)}},yt=oe("IViewFactory");class Sa{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=Sa.maxCacheSize:J(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let s;return t!=null&&t.length>0?(s=t.pop(),s):(s=Ye.$view(this,e),s)}}Sa.maxCacheSize=65535;const py=(()=>{const i=(e,t)=>e.document.createComment(t);return e=>{const t=i(e,"au-end");return t.$start=i(e,"au-start"),t}})(),vo=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},mg=(i,e)=>new i.ownerDocument.defaultView.MutationObserver(e),fy=i=>i.nodeType===1,vg="default",gy="au-slot",bg=oe("IAuSlotsInfo");class wg{constructor(e){this.projectedSlots=e}}const _y=oe("IAuSlotWatcher");class xa{static create(e,t,s,n,r,o,a,l){const c=[],u=n.renderers,h=d=>{let g=d,f=e;for(;f!=null&&g>0;)f=f.parent,--g;if(f==null)throw B(9999);return f},p=d=>{var v;const g=h(d),f=new xa(g),_=r.compileSpread(g.controller.definition,((v=g.instruction)==null?void 0:v.captures)??H,g.controller.container,t,s);let b;for(b of _)switch(b.type){case Be.spreadTransferedBinding:p(d+1);break;case Be.spreadElementProp:u[b.instruction.type].render(f,hn(t),b.instruction,o,a,l);break;default:u[b.type].render(f,t,b,o,a,l)}c.push(f)};return p(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw B(9999);this._innerBindings.forEach(s=>s.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==vi)throw B(9998);this.$controller.addChild(e)}}class Zt{constructor(e,t,s,n,r,o,a){this.target=t,this.targetKeys=s,this.ast=n,this.strict=a,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=r,this.l=o}updateTarget(){this.obs.version++;const e=ve(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this.isBound=!0,this._scope=e,ri(this.ast,e,this);const t=ve(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,oi(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let s;if(!mp(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(s in this._bindingCache)(o=this._bindingCache[s])==null||o.unbind();return}let n,r=this._scopeCache.get(e);r==null&&this._scopeCache.set(e,r=Oe.fromParent(this._scope,e));for(s of this.targetKeys)n=this._bindingCache[s],s in e?(n==null&&(n=this._bindingCache[s]=new nt(this._controller,this.l,this.oL,(a=Zt._astCache)[s]??(a[s]=new dr(s,0)),this.target,s,Fi.toView,this.strict)),n.bind(r)):t&&(n==null||n.unbind())}}Zt.mix=ui(()=>{ci(Zt),hi(Zt,()=>"updateTarget"),Tt(Zt,null),Bs(Zt)});Zt._astCache={};const dd=(i,e,t,s)=>{i.addEventListener(e,t,s)},pd=(i,e,t,s)=>{i.removeEventListener(e,t,s)},ph=i=>{let e;const t=i.prototype;bt(t,"subscribe",function(s){var n;if(this.subs.add(s)&&this.subs.count===1){for(e of this._config.events)dd(this._el,e,this);this._listened=!0,(n=this._start)==null||n.call(this)}}),bt(t,"unsubscribe",function(s){var n;if(this.subs.remove(s)&&this.subs.count===0){for(e of this._config.events)pd(this._el,e,this);this._listened=!1,(n=this._stop)==null||n.call(this)}}),bt(t,"useConfig",function(s){if(this._config=s,this._listened){for(e of this._config.events)pd(this._el,e,this);for(e of this._config.events)dd(this._el,e,this)}})},Ea=i=>{bt(i.prototype,"subscribe",dt),bt(i.prototype,"unsubscribe",dt)};class Ia{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=li|fs,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,s=this.obj.classList,n=Ag(this._value),r=n.length;let o=0,a;if(r>0)for(;o<r;o++)a=n[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,s.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&s.remove(a)}}Ea(Ia);function Ag(i){if(J(i))return fd(i);if(typeof i!="object")return H;if(_e(i)){const s=i.length;if(s>0){const n=[];let r=0;for(;s>r;++r)n.push(...Ag(i[r]));return n}else return H}const e=[];let t;for(t in i)i[t]&&(t.includes(" ")?e.push(...fd(t)):e.push(t));return e}function fd(i){const e=i.match(/\S+/g);return e===null?H:e}const yg=i=>({$isResolver:!0,resolve(e,t){return t.get(ei).controller.container.get(cb(i))}}),Cg=oe("IRenderer");function Ve(i,e){var s;const t=i[s=Symbol.metadata]??(i[s]=Object.create(null));return t[cs]={register(n){gs(Cg,i).register(n)}},i}function as(i,e,t){return J(e)?i.parse(e,t):e}function Pa(i){return i.viewModel!=null?i.viewModel:i}function my(i,e){if(e==="element")return i;switch(e){case"controller":return hn(i);case"view":throw B(750);case"component":return hn(i).viewModel;default:{const t=pg(i,e);if(t!==void 0)return t.viewModel;const s=hn(i,{name:e});if(s===void 0)throw B(751,e);return s.viewModel}}}const vy=Ve(class{constructor(){this.target=Be.setProperty}render(e,t,s){var r;const n=Pa(t);((r=n.$observers)==null?void 0:r[s.to])!==void 0?n.$observers[s.to].setValue(s.value):n[s.to]=s.value}}),by=Ve(class{constructor(){this._rendering=S(ji),this.target=Be.hydrateElement}render(e,t,s,n,r,o){let a,l,c;const u=s.res,h=s.projections,p=e.container;switch(typeof u){case"string":if(a=W.find(p,u),a==null)throw B(752,s,e);break;default:a=u}const g=s.containerless||a.containerless?Er(t):null,f=Vy(n,e,t,s,g,h==null?void 0:new wg(ih(h)));l=f.invoke(a.Type),c=Ye.$el(f,l,t,s,a,g);const _=this._rendering.renderers,b=s.props,v=b.length;let $=0,m;for(;v>$;)m=b[$],_[m.type].render(e,c,m,n,r,o),++$;e.addChild(c)}}),wy=Ve(class{constructor(){this._rendering=S(ji),this.target=Be.hydrateAttribute}render(e,t,s,n,r,o){let a=e.container,l;switch(typeof s.res){case"string":if(l=Gr.find(a,s.res),l==null)throw B(753,s,e);break;default:l=s.res}const c=Eg(n,l,e,t,s,void 0,void 0),u=Ye.$attr(c.ctn,c.vm,t,l);Ft.set(t,l.key,u);const h=this._rendering.renderers,p=s.props,d=p.length;let g=0,f;for(;d>g;)f=p[g],h[f.type].render(e,u,f,n,r,o),++g;e.addChild(u)}}),Ay=Ve(class{constructor(){this._rendering=S(ji),this.target=Be.hydrateTemplateController}render(e,t,s,n,r,o){var v,$;let a=e.container,l;switch(typeof s.res){case"string":if(l=Gr.find(a,s.res),l==null)throw B(754,s,e);break;default:l=s.res}const c=this._rendering.getViewFactory(s.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),u=Er(t),h=Eg(n,l,e,t,s,c,u),p=Ye.$attr(h.ctn,h.vm,t,l);Ft.set(u,l.key,p),($=(v=h.vm).link)==null||$.call(v,e,p,t,s);const d=this._rendering.renderers,g=s.props,f=g.length;let _=0,b;for(;f>_;)b=g[_],d[b.type].render(e,p,b,n,r,o),++_;e.addChild(p)}}),yy=Ve(class{constructor(){this.target=Be.hydrateLetElement,Ai.mix()}render(e,t,s,n,r,o){t.remove();const a=s.instructions,l=s.toBindingContext,c=e.container,u=a.length;let h,p,d=0;for(;u>d;)h=a[d],p=as(r,h.from,os),e.addBinding(new Ai(c,o,p,h.to,l,e.strict??!1)),++d}}),Cy=Ve(class{constructor(){this.target=Be.refBinding,yi.mix()}render(e,t,s,n,r,o){e.addBinding(new yi(e.container,o,as(r,s.from,os),my(t,s.to),e.strict??!1))}}),ky=Ve(class{constructor(){this.target=Be.interpolation,bi.mix()}render(e,t,s,n,r,o){const a=e.container,l=new hy(e,a,o,as(r,s.from,z0),Pa(t),s.to,Se,e.strict??!1);if(s.to==="class"&&l.target.nodeType>0){const c=a.get(yg(Ko));l.useAccessor(new Ia(l.target,c))}e.addBinding(l)}}),$y=Ve(class{constructor(){this.target=Be.propertyBinding,nt.mix()}render(e,t,s,n,r,o){const a=e.container,l=new nt(e,a,o,as(r,s.from,os),Pa(t),s.to,s.mode,e.strict??!1);if(s.to==="class"&&l.target.nodeType>0){const c=a.get(yg(Ko));l.useTargetObserver(new Ia(l.target,c))}e.addBinding(l)}}),Sy=Ve(class{constructor(){this.target=Be.iteratorBinding,nt.mix()}render(e,t,s,n,r,o){e.addBinding(new nt(e,e.container,o,as(r,s.forOf,U0),Pa(t),s.to,Se,e.strict??!1))}}),xy=Ve(class{constructor(){this.target=Be.textBinding,wi.mix()}render(e,t,s,n,r,o){e.addBinding(new wi(e,e.container,o,n,as(r,s.from,os),t,e.strict??!1))}}),Ey=oe("IListenerBindingOptions",i=>i.singleton(class{constructor(){this.p=S(Fe),this.prevent=!1,this.onError=(e,t)=>{const s=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(s),!s.defaultPrevented)throw t}}})),Iy=Ve(class{constructor(){this.target=Be.listenerBinding,this._modifierHandler=S(_g),this._defaultOptions=S(Ey),tn.mix()}render(e,t,s,n,r){e.addBinding(new tn(e.container,as(r,s.from,Q0),t,s.to,new uy(this._defaultOptions.prevent,s.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(s.to,s.modifier),e.strict??!1))}}),Py=Ve(class{constructor(){this.target=Be.setAttribute}render(e,t,s){t.setAttribute(s.to,s.value)}}),Ry=Ve(class{constructor(){this.target=Be.setClassAttribute}render(e,t,s){Fy(t.classList,s.value)}}),Ty=Ve(class{constructor(){this.target=Be.setStyleAttribute}render(e,t,s){t.style.cssText+=s.value}}),Oy=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],By=Ve(class{constructor(){this.target=Be.stylePropertyBinding,nt.mix()}render(e,t,s,n,r,o){if(Oy.includes(s.to)){e.addBinding(new My(e,e.container,o,as(r,s.from,os),t.style,s.to,Se,e.strict??!1));return}e.addBinding(new nt(e,e.container,o,as(r,s.from,os),t.style,s.to,Se,e.strict??!1))}});class My extends nt{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const Ly=Ve(class{constructor(){this.target=Be.attributeBinding,xt.mix()}render(e,t,s,n,r,o){const a=e.container,l=a.has(Ko,!1)?a.get(Ko):null;e.addBinding(new xt(e,a,o,as(r,s.from,os),t,s.attr,l==null?s.to:s.to.split(/\s/g).map(c=>l[c]??c).join(" "),Se,e.strict??!1))}}),Ny=Ve(class{constructor(){this._compiler=S(_a),this._rendering=S(ji),this.target=Be.spreadTransferedBinding}render(e,t,s,n,r,o){xa.create(e.container.get(ei),t,void 0,this._rendering,this._compiler,n,r,o).forEach(a=>e.addBinding(a))}}),Dy=Ve(class{constructor(){this.target=Be.spreadValueBinding,Zt.mix()}render(e,t,s,n,r,o){const a=s.target;if(a==="$bindables")e.addBinding(new Zt(e,t.viewModel,ih(t.definition.bindables),r.parse(s.from,os),o,e.container,e.strict??!1));else throw B(820,a)}});function Fy(i,e){const t=e.length;let s=0;for(let n=0;n<t;++n)e.charCodeAt(n)===32?(n!==s&&i.add(e.slice(s,n)),s=n+1):n+1===t&&i.add(e.slice(s))}const kg="IController",$g="IInstruction",jy="IRenderLocation",Sg="ISlotsInfo";function Vy(i,e,t,s,n,r){const o=e.container.createChild();return Xr(o,t,i),me(o,Yr,new $e(kg,e)),me(o,Rn,new $e($g,s)),me(o,at,n==null?Pg:new Ig(n)),me(o,yt,Rg),me(o,bg,r==null?Tg:new $e(Sg,r)),o}class xg{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw B(755);if(!J(e.name)||e.name.length===0)throw B(756);return e}}function Eg(i,e,t,s,n,r,o,a){const l=t instanceof Ye?t:t.$controller,c=l.container.createChild();return Xr(c,s,i),me(c,Yr,new $e(kg,l)),me(c,Rn,new $e($g,n)),me(c,at,o==null?Pg:new $e(jy,o)),me(c,yt,r==null?Rg:new xg(r)),me(c,bg,Tg),{vm:c.invoke(e.Type),ctn:c}}class Ig{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const Pg=new Ig(null),Rg=new xg(null),Tg=new $e(Sg,new wg(H)),ji=oe("IRendering",i=>i.singleton(zy));class zy{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(Cg,!1).reduce((e,t)=>{var s;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[s=t.target]??(e[s]=t),e},ce()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=S(Di).root,t=this._platform=e.get(Fe);this._exprParser=e.get(In),this._observerLocator=e.get(On),this._marker=t.document.createElement("au-m"),this._empty=new ul(t,t.document.createDocumentFragment())}compile(e,t){const s=t.get(_a),n=this._compilationCache;let r=n.get(e);return r==null&&n.set(e,r=Me.create(e.needsCompile?s.compile(e,t):e)),r}getViewFactory(e,t){return new Sa(t,Me.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new ul(this._platform,this._transformMarker(e.template));let t,s=!1;const n=this._fragmentCache,r=this._platform,o=r.document;if(n.has(e))t=n.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof r.Node?a.nodeName==="TEMPLATE"?(t=a.content,s=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),J(a)&&(l.innerHTML=a),t=l.content,s=!0),this._transformMarker(t),n.set(e,t)}return t==null?this._empty:new ul(this._platform,s?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,s,n){const r=s.instructions,o=this.renderers,a=t.length;let l=0,c=0,u=r.length,h,p,d;if(a!==u)throw B(757,a,u);if(n!=null&&(h=s.surrogates,(u=h.length)>0))for(c=0;u>c;)p=h[c],o[p.type].render(e,n,p,this._platform,this._exprParser,this._observerLocator),++c;if(a>0)for(;a>l;){for(h=r[l],d=t[l],c=0,u=h.length;u>c;)p=h[c],o[p.type].render(e,d,p,this._platform,this._exprParser,this._observerLocator),++c;++l}}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let s;for(;(s=t.nextNode())!=null;)s.nodeValue==="au*"&&s.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),s);return e}}const gd=oe("IShadowDOMStyles"),Uy=oe("IShadowDOMGlobalStyles",i=>i.instance({applyTo:dt})),{enter:Qy,exit:Hy}=zA,{wrap:qy,unwrap:Wy}=$0;class Og{get value(){return this._value}constructor(e,t,s,n,r="async"){this.obj=e,this.$get=s,this.isBound=!1,this._isQueued=!1,this._computeDepth=0,this._value=void 0,this._callback=n,this.oL=t,this._flush=r}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(this.isBound){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,rs(()=>{this._isQueued=!1,this._run()}))}}_run(){if(!this.isBound)return;const e=this.obj,t=this._value;if(++this._computeDepth>100)throw new Error("AURXXXX: Possible infinitely recursive side-effect detected in a watcher.");const s=this.compute();Is(s,t)||this._callback.call(e,s,t,e),this._isQueued||(this._computeDepth=0)}compute(){this.obs.version++;try{return Qy(this),this._value=Wy(this.$get.call(void 0,qy(this.obj),this))}finally{this.obs.clear(),Hy(this)}}}Tt(Og,null);class sc{get value(){return this._value}constructor(e,t,s,n,r,o="async"){this.scope=e,this.l=t,this.oL=s,this.isBound=!1,this._isQueued=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=n,this._callback=r,this._flush=o}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){if(this.isBound){if(this._flush==="sync"){this._run();return}this._isQueued||(this._isQueued=!0,rs(()=>{this._isQueued=!1,this._run()}))}}_run(){if(!this.isBound)return;const e=this._expression,t=this.obj,s=this._value;this.obs.version++;const n=ve(e,this.scope,this,this);this.obs.clear(),Is(n,s)||(this._value=n,this._callback.call(t,n,s,t))}bind(){this.isBound||(this.obs.version++,this._value=ve(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}Tt(sc,null),Bs(sc);class Ye{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(Jt|Ci))>0&&(this.state&Ar)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case vi:return`[${this.definition.name}]`;case _t:return this.definition.name;case qe:return this.viewFactory.name}switch(this.vmKind){case vi:return`${this.parent.name}>[${this.definition.name}]`;case _t:return`${this.parent.name}>${this.definition.name}`;case qe:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===qe?sn.none:new sn(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,s,n,r,o,a){this.container=e,this.vmKind=t,this.definition=s,this.viewFactory=n,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.mountTarget=Bg,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=ll,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=r,this._vmHooks=t===qe?sn.none:new sn(r),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(ji)}static getCached(e){return Ns.get(e)}static getCachedOrThrow(e){const t=Ye.getCached(e);if(t===void 0)throw B(500,e);return t}static $el(e,t,s,n,r=void 0,o=null){if(Ns.has(t))return Ns.get(t);if(r==null)try{r=Fg(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${s.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}me(e,r.Type,new $e(r.key,t,r.Type));const a=new Ye(e,_t,r,null,t,s,o),l=e.get(Sp(ei));return r.dependencies.length>0&&e.register(...r.dependencies),me(e,ei,new $e("IHydrationContext",new Mg(a,n,l))),Ns.set(t,a),(n==null||n.hydrate!==!1)&&a._hydrateCustomElement(n),a}static $attr(e,t,s,n){if(Ns.has(t))return Ns.get(t);n=n??ah(t.constructor),me(e,n.Type,new $e(n.key,t,n.Type));const r=new Ye(e,vi,n,null,t,s,null);return n.dependencies.length>0&&e.register(...n.dependencies),Ns.set(t,r),r._hydrateCustomAttribute(),r}static $view(e,t=void 0){const s=new Ye(e.container,qe,null,e,null,null,null);return s.parent=t??null,s._hydrateSynthetic(),s}_hydrateCustomElement(e){this.logger=this.container.get(Le).root,this.debug=this.logger.config.level<=fb.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,s=this._vm,n=this.definition;this.scope=Oe.create(s,null,!0),n.watches.length>0&&vd(this,t,n,s),_d(this,n,s),this._lifecycleHooks=ud.resolve(t),t.register(n.Type),n.injectable!==null&&me(t,n.injectable,new $e("definition.injectable",s)),(e==null||e.hydrate!==!1)&&(this._hydrate(),this._hydrateChildren())}_hydrate(){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(e1,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const e=this.definition,t=this._compiledDef=this._rendering.compile(e,this.container),s=t.shadowOptions,n=t.hasSlots,r=t.containerless,o=this.host;let a=this.location;if(r&&a==null&&(a=this.location=Er(o)),Ct(o,Ue,this),Ct(o,e.key,this),s!==null||n){if(a!=null)throw B(501);Ct(this.shadowRoot=o.attachShadow(s??Jy),Ue,this),Ct(this.shadowRoot,e.key,this),this.mountTarget=Kn}else a!=null?(o!==a&&(Ct(a,Ue,this),Ct(a,e.key,this)),this.mountTarget=Gn):this.mountTarget=Wn;this._vm.$controller=this,this.nodes=this._rendering.createNodes(t),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(t1,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(bd,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&vd(this,this.container,e,t),_d(this,e,t),t.$controller=this,this._lifecycleHooks=ud.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(bd,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,s){switch(this.state){case ll:case nn:if(!(t===null||t.isActive))return;this.state=Jt;break;case Ci:return;case Fs:throw B(502,this.name);default:throw B(503,this.name,Xy(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(Le).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case _t:this.scope.parent=s??null;break;case vi:this.scope=s??null;break;case qe:if(s==null)throw B(504,this.name);this.hasLockedScope||(this.scope=s);break}this.$initiator=e,this._enterActivating();let n;return this.vmKind!==qe&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),n=le(...this._lifecycleHooks.binding.map(s1,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),n=le(n,this._vm.binding(this.$initiator,this.parent))),Te(n)?(this._ensurePromise(),n.then(()=>{this._isBindingDone=!0,this.state!==Jt?this._leaveActivating():this.bind()}).catch(r=>{this._reject(r)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,s;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==qe&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),s=le(...this._lifecycleHooks.bound.map(i1,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),s=le(s,this._vm.bound(this.$initiator,this.parent))),Te(s)){this._ensurePromise(),s.then(()=>{this.isBound=!0,this.state!==Jt?this._leaveActivating():this._attach()}).catch(n=>{this._reject(n)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case Wn:this.host.append(...e);break;case Kn:this.shadowRoot.append(...e);break;case Gn:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){switch(this.debug&&this.logger.trace("attach()"),this.mountTarget){case Wn:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case Kn:{const s=this.container;(s.has(gd,!1)?s.get(gd):s.get(Uy)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Gn:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==qe&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=le(...this._lifecycleHooks.attaching.map(n1,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=le(t,this._vm.attaching(this.$initiator,this.parent))),Te(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(s=>{this._reject(s)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let s;switch(this.state&~rn){case Ci:this.state=Ar;break;case Jt:this.state=Ar,s=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case ll:case nn:case Fs:case nn|Fs:return;default:throw B(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let n=0,r;if(this.children!==null)for(n=0;n<this.children.length;++n)this.children[n].deactivate(e,this);return R(s,()=>{if(this.isBound&&(this.vmKind!==qe&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),r=le(...this._lifecycleHooks.detaching.map(o1,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),r=le(r,this._vm.detaching(this.$initiator,this.parent)))),Te(r)&&(this._ensurePromise(),e._enterDetaching(),r.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case _t:case qe:this.nodes.remove(),this.nodes.unlink()}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case vi:this.scope=null;break;case qe:this.hasLockedScope||(this.scope=null),(this.state&rn)===rn&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case _t:this.scope.parent=null;break}this.state=nn,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(cl=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,cl(),cl=void 0)}_reject(e){this.$promise!==void 0&&(hl=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,hl(e),hl=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==Jt){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==qe&&this._lifecycleHooks.attached!=null&&(mi=le(...this._lifecycleHooks.attached.map(r1,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),mi=le(mi,this._vm.attached(this.$initiator))),Te(mi)){this._ensurePromise(),mi.then(()=>{this.state=Ci,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),mi=void 0;return}mi=void 0,this.state=Ci,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==qe&&e._lifecycleHooks.unbinding!=null&&(t=le(...e._lifecycleHooks.unbinding.map(a1,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=le(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Te(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(s=>{this._reject(s)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case vi:case _t:return this.definition.name===e;case qe:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===_t&&(Ct(e,Ue,this),Ct(e,this.definition.key,this)),this.host=e,this.mountTarget=Wn,this}setShadowRoot(e){return this.vmKind===_t&&(Ct(e,Ue,this),Ct(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=Kn,this}setLocation(e){return this.vmKind===_t&&(Ct(e,Ue,this),Ct(e,this.definition.key,this)),this.location=e,this.mountTarget=Gn,this}release(){this.state|=rn}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&Fs)!==Fs&&(this.state|=Fs,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(Zy),this.children=null),this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(Ns.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}const Ns=new WeakMap,Bg=0,Wn=1,Kn=2,Gn=3,Yn=ps({none:Bg,host:Wn,shadowRoot:Kn,location:Gn}),Ky=hb(zf);function _d(i,e,t){var u,h;const s=e.bindables,n=tg(s),r=n.length;if(r===0)return;const o=i.container.get(On),a="propertiesChanged"in t,l=i.vmKind===qe?void 0:i.container.get(Ky),c=a?(()=>{let p={},d=!1,g=0;const f=()=>{d||(d=!0,rs(()=>{var b;d=!1;const _=p;p={},g=0,i.isBound&&((b=t.propertiesChanged)==null||b.call(t,_),g>0&&f())}))};return(_,b,v)=>{p[_]={newValue:b,oldValue:v},g++,f()}})():dt;for(let p=0;p<r;++p){const d=n[p],g=s[d],f=g.callback,_=o.getObserver(t,d);if(g.set!==dt&&((u=_.useCoercer)==null?void 0:u.call(_,g.set,l))!==!0)throw B(507,d);if(t[f]!=null||t.propertyChanged!=null||a){const b=(v,$)=>{var m,y;i.isBound&&((m=t[f])==null||m.call(t,v,$),(y=t.propertyChanged)==null||y.call(t,d,v,$),c(d,v,$))};if(((h=_.useCallback)==null?void 0:h.call(_,b))!==!0)throw B(508,d)}}}const md=new Map,Gy=i=>{let e=md.get(i);return e==null&&(e=new dr(i,0),md.set(i,e)),e};function vd(i,e,t,s){const n=e.get(On),r=e.get(In),o=t.watches,a=i.vmKind===_t?i.scope:Oe.create(s,null,!0),l=o.length;let c,u,h,p,d=0;for(;l>d;++d){if({expression:c,callback:u,flush:p}=o[d],u=Z(u)?u:Reflect.get(s,u),!Z(u))throw B(506,u);Z(c)?i.addBinding(new Og(s,n,c,u,p)):(h=J(c)?r.parse(c,os):Gy(c),i.addBinding(new sc(a,e,n,h,u,p)))}}function Yy(i){return i instanceof Ye&&i.vmKind===_t}function Ra(i){return Dg(i==null?void 0:i.constructor)}class sn{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}sn.none=new sn({});const Jy={mode:"open"},_t="customElement",vi="customAttribute",qe="synthetic",ll=0,Jt=1,Ci=2,Ar=4,nn=8,rn=16,Fs=32;function Xy(i){const e=[];return(i&Jt)===Jt&&e.push("activating"),(i&Ci)===Ci&&e.push("activated"),(i&Ar)===Ar&&e.push("deactivating"),(i&nn)===nn&&e.push("deactivated"),(i&rn)===rn&&e.push("released"),(i&Fs)===Fs&&e.push("disposed"),e.length===0?"none":e.join("|")}const Yr=oe("IController"),ei=oe("IHydrationContext");class Mg{constructor(e,t,s){this.instruction=t,this.parent=s,this.controller=e}}function Zy(i){i.dispose()}function bd(i){i.instance.created(this._vm,this)}function e1(i){i.instance.hydrating(this._vm,this)}function t1(i){i.instance.hydrated(this._vm,this)}function s1(i){return i.instance.binding(this._vm,this.$initiator,this.parent)}function i1(i){return i.instance.bound(this._vm,this.$initiator,this.parent)}function n1(i){return i.instance.attaching(this._vm,this.$initiator,this.parent)}function r1(i){return i.instance.attached(this._vm,this.$initiator)}function o1(i){return i.instance.detaching(this._vm,this.$initiator,this.parent)}function a1(i){return i.instance.unbinding(this._vm,this.$initiator,this.parent)}let cl,hl,mi;const Ct=Ft.set,l1=oe("IEventTarget",i=>i.cachedCallback(e=>e.has(mn,!0)?e.get(mn).host:e.get(Fe).document)),at=oe("IRenderLocation"),Ko=oe("ICssClassMapping"),Go=new WeakMap;function Yo(i){if(Go.has(i))return Go.get(i);let e=0,t=i.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(i.parentNode===null&&i.nodeType===11){const s=hn(i,{optional:!0});if(s==null)return null;if(s.mountTarget===Yn.shadowRoot)return Yo(s.host)}return i.parentNode}function c1(i,e){if(i.platform!==void 0&&!(i instanceof i.platform.Node)){const t=i.childNodes;for(let s=0,n=t.length;s<n;++s)Go.set(t[s],e)}else Go.set(i,e)}function Er(i){if(Lg(i))return i;const e=i.ownerDocument.createComment("au-end"),t=e.$start=i.ownerDocument.createComment("au-start"),s=i.parentNode;return s!==null&&(s.replaceChild(e,i),s.insertBefore(t,e)),e}function Lg(i){return i.textContent==="au-end"}class ul{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const s=(this.f=t).querySelectorAll("au-m");let n=0,r=s.length,o=this.t=Array(r),a,l;for(;r>n;)l=s[n],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[n]=a,++n;const c=t.childNodes,u=this.childNodes=Array(r=c.length);for(n=0;r>n;)u[n]=c[n],++n;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,e.appendChild(s),s!==r);)s=n}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let s,n=this._firstChild;for(;n!==null&&(s=n.nextSibling,e.appendChild(n),n!==t);)n=s}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,Lg(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const Jr=oe("IWindow",i=>i.callback(e=>e.get(Fe).window)),h1=oe("ILocation",i=>i.callback(e=>e.get(Jr).location)),u1=oe("IHistory",i=>i.callback(e=>e.get(Jr).history)),Xr=(i,e,t=i.get(Fe))=>(me(i,t.HTMLElement,me(i,t.Element,me(i,Bn,new $e("ElementResolver",e)))),i);function et(i){return function(e,t){return t.addInitializer(function(){Ng(i,this)}),e}}const dl=new WeakMap;class Me{get type(){return Y0}constructor(e,t,s,n,r,o,a,l,c,u,h,p,d,g,f,_,b,v,$){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=u,this.surrogates=h,this.bindables=p,this.containerless=d,this.shadowOptions=g,this.hasSlots=f,this.enhance=_,this.watches=b,this.strict=v,this.processContent=$}static create(e,t=null){if(t===null){const n=e;if(J(n))throw B(761,e);const r=Kt("name",n,Jo);Z(n.Type)?t=n.Type:t=jg(bp(r));for(const o of Object.values(mt.from(n.bindables)))mt._add(o,t);return new Me(t,r,Re(n.aliases),Kt("key",n,()=>Ji(r)),pt("capture",n,t,$t),pt("template",n,t,kt),Re(n.instructions),Re(ft(t,"dependencies"),n.dependencies),Kt("injectable",n,kt),Kt("needsCompile",n,fl),Re(n.surrogates),mt.from(ft(t,"bindables"),n.bindables),pt("containerless",n,t,$t),Kt("shadowOptions",n,kt),Kt("hasSlots",n,$t),Kt("enhance",n,$t),Kt("watches",n,p1),Kt("strict",n,pl),Lt("processContent",t,kt))}if(J(e))return new Me(t,e,Re(ft(t,"aliases"),t.aliases),Ji(e),Lt("capture",t,$t),Lt("template",t,kt),Re(ft(t,"instructions"),t.instructions),Re(ft(t,"dependencies"),t.dependencies),Lt("injectable",t,kt),Lt("needsCompile",t,fl),Re(ft(t,"surrogates"),t.surrogates),mt.from(...mt.getAll(t),ft(t,"bindables"),t.bindables),Lt("containerless",t,$t),Lt("shadowOptions",t,kt),Lt("hasSlots",t,$t),Lt("enhance",t,$t),Re(ec.getDefinitions(t),t.watches),Lt("strict",t,pl),Lt("processContent",t,kt));const s=Kt("name",e,Jo);for(const n of Object.values(mt.from(e.bindables)))mt._add(n,t);return new Me(t,s,Re(ft(t,"aliases"),e.aliases,t.aliases),Ji(s),pt("capture",e,t,$t),pt("template",e,t,kt),Re(ft(t,"instructions"),e.instructions,t.instructions),Re(ft(t,"dependencies"),e.dependencies,t.dependencies),pt("injectable",e,t,kt),pt("needsCompile",e,t,fl),Re(ft(t,"surrogates"),e.surrogates,t.surrogates),mt.from(...mt.getAll(t),ft(t,"bindables"),t.bindables,e.bindables),pt("containerless",e,t,$t),pt("shadowOptions",e,t,kt),pt("hasSlots",e,t,$t),pt("enhance",e,t,$t),Re(e.watches,ec.getDefinitions(t),t.watches),pt("strict",e,t,pl),pt("processContent",e,t,kt))}static getOrCreate(e){if(e instanceof Me)return e;if(dl.has(e))return dl.get(e);const t=Me.create(e);return dl.set(e,t),Qt(t,t.Type,Ue),t}register(e,t){const s=this.Type,n=typeof t=="string"?Ji(t):this.key,r=this.aliases;if(e.has(n,!1)){console.warn(B(153,this.name));return}e.register(e.has(s,!1)?null:gs(s,s),Xs(s,n),...r.map(o=>Xs(s,Ji(o))))}toString(){return`au:ce:${this.name}`}}const d1={name:void 0,searchParents:!1,optional:!1},kt=()=>null,pl=()=>{},$t=()=>!1,fl=()=>!0,p1=()=>H,Ni="custom-element",Ue=si(Ni),Ji=i=>`${Ue}:${i}`,Jo=(i=>()=>`unnamed-${++i}`)(0),f1=(i,e,t)=>{Qt(t,i,Os(e))},Ng=(i,e)=>{const t=Me.create(i,e),s=t.Type;return Qt(t,s,Ue,Dt),s},Dg=i=>{var e;return Z(i)&&(ya(Ue,i)||((e=i.$au)==null?void 0:e.type)===Ni)},hn=(i,e=d1)=>{if(e.name===void 0&&e.searchParents!==!0){const s=Ft.get(i,Ue);if(s===null){if(e.optional===!0)return null;throw B(762,i)}return s}if(e.name!==void 0){if(e.searchParents!==!0){const r=Ft.get(i,Ue);if(r===null)throw B(763,i);return r.is(e.name)?r:void 0}let s=i,n=!1;for(;s!==null;){const r=Ft.get(s,Ue);if(r!==null&&(n=!0,r.is(e.name)))return r;s=Yo(s)}if(n)return;throw B(764,i)}let t=i;for(;t!==null;){const s=Ft.get(t,Ue);if(s!==null)return s;t=Yo(t)}throw B(765,i)},ft=(i,e)=>Xe(Os(e),i),Fg=i=>{const e=Xe(Ue,i)??Zs(i,Ni,Me.create);if(e==null)throw B(760,i);return e},g1=()=>{const i={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(i,!0)?t.get(i):null}}}};return i},jg=(function(){const i={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,s=e){const n=class{};return i.value=t,sg(n,"name",i),s!==e&&eg(n.prototype,s),n}})(),W=ps({name:Ue,keyFrom:Ji,isType:Dg,for:hn,define:Ng,getDefinition:Fg,annotate:f1,getAnnotation:ft,generateName:Jo,createInjectable:g1,generateType:jg,find(i,e){const t=i.find(Ni,e);return t==null?null:Xe(Ue,t)??Zs(t,Ni,Me.create)??null}}),mn=oe("IAppRoot");class wd{get controller(){return this._controller}constructor(e,t,s,n=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=n;const r=this.host=e.host;s.prepare(this),me(t,l1,new $e("IEventTarget",r)),Xr(t,r,this.platform=this._createPlatform(t,r)),this._hydratePromise=R(this._runAppTasks("creating"),()=>{e.allowActionlessForm||r.addEventListener("submit",p=>{const d=p.target,g=!d.getAttribute("action");d.tagName==="FORM"&&g&&p.preventDefault()},!1);const o=n?t:t.createChild(),a=e.component;let l;Z(a)?l=o.invoke(a):l=e.component;const c={hydrate:!1,projections:null},u=n?Me.create({name:Jo(),template:this.host,enhance:!0,strict:e.strictBinding}):void 0,h=this._controller=Ye.$el(o,l,r,c,u);return h._hydrateCustomElement(c),R(this._runAppTasks("hydrating"),()=>(h._hydrate(),R(this._runAppTasks("hydrated"),()=>{h._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return R(this._hydratePromise,()=>R(this._runAppTasks("activating"),()=>R(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return R(this._runAppTasks("deactivating"),()=>R(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,s=this._useOwnAppTasks&&!t.has(Zl,!1)?[]:t.getAll(Zl);return le(...s.reduce((n,r)=>(r.slot===e&&n.push(r.run()),n),[]))}_createPlatform(e,t){let s;if(e.has(Fe,!1))s=e.get(Fe);else{if(t.ownerDocument.defaultView===null)throw B(769);s=new qs(t.ownerDocument.defaultView),e.register(rh(Fe,s))}return s}dispose(){var e;(e=this._controller)==null||e.dispose()}}const Ad=oe("IAurelia");let _1=class ic{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw B(767);return this.next}return this._root}constructor(e=lt.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(Ad,!0)||e.has(ic,!0))throw B(768);me(e,Ad,new $e("IAurelia",this)),me(e,ic,new $e("Aurelia",this)),me(e,mn,this._rootProvider=new $e("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new wd(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),s=me(t,mn,new $e("IAppRoot")),n=new wd({host:e.host,component:e.component},t,s,!0);return R(n.activate(),()=>n)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw B(770);return Te(this._startPromise)?this._startPromise:this._startPromise=R(this.stop(),()=>(Ft.hideProp||Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,R(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(Te(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=R(t.deactivate(),()=>R(OA(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._stopPromise=void 0,this._dispatchEvent(t,"au-stopped",t.host)}))}}dispose(){if(this._isRunning||this._isStopping)throw B(771);this.container.dispose()}_dispatchEvent(e,t,s){const n=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(n)}};const Vg=oe("ISVGAnalyzer",i=>i.singleton(m1));class m1{isStandardSvgAttribute(e,t){return!1}}class zg{constructor(){this.fns=[],this._tagAttrMap=ce(),this._globalAttrMap=ce(),this.svg=S(Vg),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,s,n,r;for(n in e){t=e[n],s=(o=this._tagAttrMap)[n]??(o[n]=ce());for(r in t){if(s[r]!==void 0)throw yd(r,n);s[r]=t[r]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const s in e){if(t[s]!==void 0)throw yd(s,"*");t[s]=e[s]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return v1(e,t)||this.fns.length>0&&this.fns.some(s=>s(e,t))}map(e,t){var s;return((s=this._tagAttrMap[e.nodeName])==null?void 0:s[t])??this._globalAttrMap[t]??(Yl(e,t,this.svg)?t:null)}}zg.register=Hr(Yp);function v1(i,e){switch(i.nodeName){case"INPUT":switch(i.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return i.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function yd(i,e){return B(719,i,e)}const b1={register(i){i.register(Lf,zg,Ug)}};class w1{constructor(e,t,s){this.attrs=e,this.bindables=t,this.primary=s}}class Ug{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new Cd),t in s._element?s._element[t]:s._element[t]=W.find(e,t)}attr(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new Cd),t in s._attr?s._attr[t]:s._attr[t]=Gr.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const s=e.bindables,n=ce();let r,o,a=!1,l,c;for(o in s){if(r=s[o],c=r.attribute,r.primary===!0){if(a)throw B(714,e);a=!0,l=r}else!a&&l==null&&(l=r);n[c]=ks.create(o,r)}r==null&&e.type==="custom-attribute"&&(l=n.value=ks.create("value",{mode:e.defaultBindingMode??sh})),this._bindableCache.set(e,t=new w1(n,s,l??null))}return t}}Ug.register=Hr(Nf);class Cd{constructor(){this._element=ce(),this._attr=ce()}}const gl=ce();class Ir{static forNs(e){return gl[e]??(gl[e]=new Ir(e))}constructor(e){this.ns=e,this.type=li|fs}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,s){e==null?t.removeAttributeNS(this.ns,s):t.setAttributeNS(this.ns,s,e)}}Ea(Ir);class Qg{constructor(){this.type=li|fs}getValue(e,t){return e.getAttribute(t)}setValue(e,t,s){e==null?t.removeAttribute(s):t.setAttribute(s,e)}}Ea(Qg);const Ro=new Qg;class Ei{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const s=e.length;let n=0,r;for(;s>n;)r=e[n],r.selected&&(t[t.length]=$i.call(r,"model")?r.model:r.value),++n;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,s,n){this.type=li|nh|fs,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=n,this._config=s}getValue(){return this._observing?this._value:this._el.multiple?Ei._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,s=_e(e),n=t.matcher??Ei._defaultMatcher,r=t.options;let o=r.length;for(;o-- >0;){const a=r[o],l=$i.call(a,"model")?a.model:a.value;if(s){a.selected=e.findIndex(c=>!!n(l,c))!==-1;continue}a.selected=!!n(l,e)}}syncValue(){const e=this._el,t=e.options,s=t.length,n=this._value;let r=0;if(e.multiple){if(!(n instanceof Array))return!0;let l;const c=e.matcher||Ei._defaultMatcher,u=[];for(;r<s;)l=t[r],l.selected&&u.push($i.call(l,"model")?l.model:l.value),++r;let h;for(r=0;r<n.length;)h=n[r],u.findIndex(p=>!!c(h,p))===-1?n.splice(r,1):++r;for(r=0;r<u.length;)h=u[r],n.findIndex(p=>!!c(h,p))===-1&&n.push(h),++r;return!1}let o=null,a;for(;r<s;){if(a=t[r],a.selected){o=$i.call(a,"model")?a.model:a.value;break}++r}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=mg(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw B(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}ph(Ei),Ut(Ei,null);const A1="--";class Hg{constructor(e){this.obj=e,this.type=li|fs,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],s=/url\([^)]+$/;let n=0,r="",o,a,l,c;for(;n<e.length;){if(o=e.indexOf(";",n),o===-1&&(o=e.length),r+=e.substring(n,o),n=o+1,s.test(r)){r+=";";continue}a=r.indexOf(":"),l=r.substring(0,a).trim(),c=r.substring(a+1).trim(),t.push([l,c]),r=""}return t}_getStyleTuplesFromObject(e){let t,s;const n=[];for(s in e)if(t=e[s],t!=null){if(J(t)){if(s.startsWith(A1)){n.push([s,t]);continue}n.push([wp(s),t]);continue}n.push(...this._getStyleTuples(t))}return n}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const s=[];let n=0;for(;t>n;++n)s.push(...this._getStyleTuples(e[n]));return s}return H}_getStyleTuples(e){return J(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):H}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,s=this._getStyleTuples(e);let n,r=this.version;this._oldValue=e;let o,a,l,c=0;const u=s.length;for(;c<u;++c)o=s[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=r;if(this.styles=t,this.version+=1,r===0)return;r-=1;for(n in t)!$i.call(t,n)||t[n]!==r||this.obj.style.removeProperty(n)}}setProperty(e,t){let s="";t!=null&&Z(t.indexOf)&&t.includes("!important")&&(s="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,s)}bind(){this._value=this._oldValue=this.obj.style.cssText}}Ea(Hg);class nc{constructor(e,t,s){this.type=li|nh|fs,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=s}getValue(){return this._value}setValue(e){Is(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}ph(nc),Ut(nc,null);const kd=(()=>{const i="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return eg(ce(),{"xlink:actuate":["actuate",i],"xlink:arcrole":["arcrole",i],"xlink:href":["href",i],"xlink:role":["role",i],"xlink:show":["show",i],"xlink:title":["title",i],"xlink:type":["type",i],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),qg=new Wf;qg.type=li|fs;class fh{constructor(){this.allowDirtyCheck=!0,this._events=ce(),this._globalEvents=ce(),this._overrides=ce(),this._globalOverrides=ce(),this._locator=S(nb),this._platform=S(Fe),this._dirtyChecker=S(Yc),this.svg=S(Vg);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:rc,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:Ei,events:["change"],default:""}},TEXTAREA:{value:t}});const s={events:["change","input","blur","keyup","paste"],default:""},n={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:n,scrollLeft:n,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,s){const n=this._events;let r;if(J(e))r=n[e]??(n[e]=ce()),r[t]==null?r[t]=s:bo(e,t);else for(const o in e){r=n[o]??(n[o]=ce());const a=e[o];for(t in a)r[t]==null?r[t]=a[t]:bo(o,t)}}useConfigGlobal(e,t){const s=this._globalEvents;if(typeof e=="object")for(const n in e)s[n]==null?s[n]=e[n]:bo("*",n);else s[e]==null?s[e]=t:bo("*",e)}getAccessor(e,t,s){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??Ge))return this.getObserver(e,t,s);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),Ro;default:{const n=kd[t];return n!==void 0?Ir.forNs(n[1]):Yl(e,t,this.svg)?Ro:qg}}}overrideAccessor(e,t){var n,r;let s;if(J(e))s=(n=this._overrides)[e]??(n[e]=ce()),s[t]=!0;else for(const o in e)for(const a of e[o])s=(r=this._overrides)[o]??(r[o]=ce()),s[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var s;return((s=this._events[e.tagName])==null?void 0:s[t])??this._globalEvents[t]}getNodeObserver(e,t,s){var o;const n=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let r;return n!=null?(r=new(n.type??nc)(e,t,n,s,this._locator),r.doNotCache||(Kf(e)[t]=r),r):null}getObserver(e,t,s){switch(t){case"class":return new Ia(e);case"css":case"style":return new Hg(e)}const n=this.getNodeObserver(e,t,s);if(n!=null)return n;const r=kd[t];if(r!==void 0)return Ir.forNs(r[1]);if(Yl(e,t,this.svg))return Ro;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw B(652,t)}else return new Jc(e,t)}}fh.register=Hr(Xc);function y1(i,e){if(i instanceof Array)return e.getArrayObserver(i);if(i instanceof Map)return e.getMapObserver(i);if(i instanceof Set)return e.getSetObserver(i)}function bo(i,e){throw B(653,i,e)}function $d(i,e){return i===e}class rc{constructor(e,t,s,n){this.type=li|nh|fs,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=n,this._config=s}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,s=$i.call(t,"model")?t.model:t.value,n=t.type==="radio",r=t.matcher!==void 0?t.matcher:$d;if(n)t.checked=!!r(e,s);else if(e===!0)t.checked=!0;else{let o=!1;if(_e(e))o=e.findIndex(a=>!!r(a,s))!==-1;else if(e instanceof Set){for(const a of e)if(r(a,s)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(r(l,s)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,s=$i.call(t,"model")?t.model:t.value,n=t.checked,r=t.matcher!==void 0?t.matcher:$d;if(t.type==="checkbox"){if(_e(e)){const o=e.findIndex(a=>!!r(a,s));n&&o===-1?e.push(s):!n&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(r(l,s)===!0){a=l;break}n&&a===o?e.add(s):!n&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(r(l,s)===!0){o=l;break}}e.set(o,n);return}e=n}else if(n)e=s;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){_l=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,_l),_l=void 0}_observe(){var t,s,n,r,o;const e=this._el;(n=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((s=e.$observers)==null?void 0:s.value)))==null||n.subscribe(this),(r=this._collectionObserver)==null||r.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=y1(this._value,this.oL))==null||o.subscribe(this))}}ph(rc),Ut(rc,null);let _l;class Wg{bind(e,t){if(!(t instanceof nt))throw B(9994,t);t.useTargetObserver(Ro)}}Wg.$au={type:Et,name:"attr"};class Kg{bind(e,t){if(!("handleEvent"in t))throw B(801);t.self=!0}unbind(e,t){t.self=!1}}Kg.$au={type:Et,name:"self"};class Gg{constructor(){this._observerLocator=S(On),this._nodeObserverLocator=S(Xc)}bind(e,t,...s){if(!(this._nodeObserverLocator instanceof fh))throw B(9993);if(s.length===0)throw B(802);if(!(t instanceof nt)||!(t.mode&Rs))throw B(803);const n=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(n==null)throw B(9992,t);const r=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);r.useConfig({readonly:n.readonly,default:n.default,events:s}),t.useTargetObserver(r)}}Gg.$au={type:Et,name:"updateTrigger"};class Xo{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=S(yt),this._location=S(at)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,R(this.pending,()=>{var s;this._wantsDeactivate=!1,this.pending=void 0,(s=this.view)==null||s.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,s=this.$controller,n=this._swapId++,r=()=>!this._wantsDeactivate&&this._swapId===n+1;let o;return R(this.pending,()=>this.pending=R(t==null?void 0:t.deactivate(t,s),()=>{var a;if(r()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),R(o.activate(o,s,s.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}Xo.$au={type:Ze,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:i=>i===""||!!i&&i!=="false"}}};class Yg{constructor(){this._factory=S(yt)}link(e,t,s,n){const r=e.children,o=r[r.length-1];if(o instanceof Xo)o.elseFactory=this._factory;else if(o.viewModel instanceof Xo)o.viewModel.elseFactory=this._factory;else throw B(810)}}Yg.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function C1(i){i.dispose()}const k1=["BindingBehavior","ValueConverter"];class Jg{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=S(at),this._parent=S(Yr),this._factory=S(yt),this._resolver=S(S1);const t=S(Rn).props[0].props[0];if(t!==void 0){const{to:s,value:n,command:r}=t;if(s==="key")if(r===null)this.key=n;else if(r==="bind")this.key=S(In).parse(n,os);else throw B(775,r);else throw B(776,s)}}binding(e,t){const s=this._parent.bindings,n=s.length;let r,o,a=0;for(;n>a;++a)if(r=s[a],r.target===this&&r.targetProperty==="items"){o=this.forOf=r.ast,this._forOfBinding=r;let c=o.iterable;for(;c!=null&&k1.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=ve(l,this.$controller.scope,r,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(void 0),this._activateAllViews(e,this._normalizedItems??H)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(void 0),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const s=this.$controller;if(s.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=ve(this.forOf.iterable,s.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(this.key===null?t:void 0),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const s=t.length,n=this.key,r=n!==null,o=this._oldScopes,a=this._scopes;if(r||e===void 0){const l=this.local,u=this._normalizedItems.length,p=this.forOf.declaration,d=this._forOfBinding,g=this._hasDestructuredLocal;e=Oi(u);let f=0;if(s===0)for(;f<u;++f)e[f]=-2;else if(u===0)for(f=0;f<s;++f)e.deletedIndices.push(f),e.deletedItems.push(To(g,p,o[f],d,l));else if(r){const _=Array(s);for(f=0;f<s;++f)_[f]=Td(g,n,p,o[f],d,l);const b=Array(s);for(f=0;f<u;++f)b[f]=Td(g,n,p,a[f],d,l);for(f=0;f<u;++f)_.includes(b[f])?e[f]=_.indexOf(b[f]):e[f]=-2;for(f=0;f<s;++f)b.includes(_[f])||(e.deletedIndices.push(f),e.deletedItems.push(To(g,p,o[f],d,l)))}else{for(f=0;f<u;++f)o.includes(a[f])?e[f]=o.indexOf(a[f]):e[f]=-2;for(f=0;f<s;++f)a.includes(o[f])||(e.deletedIndices.push(f),e.deletedItems.push(To(g,p,o[f],d,l)))}}if(e.deletedIndices.length>0){const l=R(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));Te(l)&&l.catch(Jl)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,s=this._observingInnerItems,n;s&&(t=this._innerItems=ve(this._innerItemsExpression,e,this._forOfBinding,null)??null,s=this._observingInnerItems=!Is(this.items,t));const r=this._observer;if(this.$controller.isActive){const l=s?t:this.items;n=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),r!==n&&(r==null||r.unsubscribe(this),n==null||n.subscribe(this))}else r==null||r.unsubscribe(this),this._observer=void 0}_createScopes(e){const t=this._scopes;this._oldScopes=t.slice();const s=this._normalizedItems,n=s.length,r=this._scopes=Array(s.length),o=this._scopeMap,a=new Map,l=this.$controller.scope,c=this._forOfBinding,u=this.forOf,h=this.local,p=this._hasDestructuredLocal;if(e===void 0){const d=this.key;if(d!==null){const f=Array(n);if(typeof d=="string")for(let _=0;_<n;++_)f[_]=s[_][d];else for(let _=0;_<n;++_){const b=ac(s[_],u,l,c,h,p);oc(p,u.declaration,b,c,h,s[_]),f[_]=ve(d,b,c,null)}for(let _=0;_<n;++_)r[_]=Od(o,a,f[_],s[_],u,l,c,h,p)}else for(let f=0;f<n;++f)r[f]=Od(o,a,s[f],s[f],u,l,c,h,p)}else{const d=t.length;for(let g=0;g<n;++g){const f=e[g];f>=0&&f<d?r[g]=t[f]:r[g]=ac(s[g],u,l,c,h,p),oc(p,u.declaration,r[g],c,h,s[g])}}o.clear(),this._scopeMap=a}_normalizeToArray(){const e=this.items;if(_e(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(s,n)=>{t[n]=s}),this._normalizedItems=t}_activateAllViews(e,t){let s,n,r,o;const{$controller:a,_factory:l,_location:c,_scopes:u}=this,h=t.length,p=this.views=Array(h);for(let d=0;d<h;++d)r=p[d]=l.create().setLocation(c),r.nodes.unlink(),o=u[d],Ao(o.overrideContext,d,h),n=r.activate(e??r,a,o),Te(n)&&(s??(s=[])).push(n);if(s!==void 0)return s.length===1?s[0]:Promise.all(s)}_deactivateAllViews(e){let t,s,n,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)n=o[r],n.release(),s=n.deactivate(e??n,a),Te(s)&&(t??(t=[])).push(s);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,s,n;const{$controller:r,views:o}=this,a=e.deletedIndices.slice().sort(P1),l=a.length;let c=0;for(;l>c;++c)n=o[a[c]],n.release(),s=n.deactivate(n,r),Te(s)&&(t??(t=[])).push(s);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,s,n,r=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:u,_oldViews:h}=this,p=e.length;for(;p>r;++r)e[r]===-2&&(n=a.create(),c.splice(r,0,n));if(c.length!==p)throw B(814,[c.length,p]);let d=0;for(r=0;r<e.length;++r)(d=e[r])!==-2&&(c[r]=h[d]);const g=$1(e),f=g.length;let _,b=f-1;for(r=p-1;r>=0;--r)n=c[r],_=c[r+1],e[r]===-2?(n.nodes.link((_==null?void 0:_.nodes)??l),n.setLocation(l),Ao(u[r].overrideContext,r,p),s=n.activate(n,o,u[r]),Te(s)&&(t??(t=[])).push(s)):b<0||r!==g[b]?(n.nodes.link((_==null?void 0:_.nodes)??l),Ao(n.scope.overrideContext,r,p),n.nodes.insertBefore(n.location)):(Ao(n.scope.overrideContext,r,p),--b);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(C1),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}Jg.$au={type:Ze,name:"repeat",isTemplateController:!0,bindables:["items"]};let Zo=16,ms=new Int32Array(Zo),wo=new Int32Array(Zo);function $1(i){const e=i.length;e>Zo&&(Zo=e,ms=new Int32Array(e),wo=new Int32Array(e));let t=0,s=0,n=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(s=i[r],s!==-2){if(o=ms[t],n=i[o],n!==-2&&n<s){wo[r]=o,ms[++t]=r;continue}for(a=0,l=t;a<l;)c=a+l>>1,n=i[ms[c]],n!==-2&&n<s?a=c+1:l=c;n=i[ms[a]],(s<n||n===-2)&&(a>0&&(wo[r]=ms[a-1]),ms[a]=r)}r=++t;const u=new Int32Array(r);for(s=ms[t-1];t-- >0;)u[t]=s,s=wo[s];for(;r-- >0;)ms[r]=0;return u}class Sd{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const Ao=(i,e,t)=>{i.$index=e,i.$length=t},S1=oe("IRepeatableHandlerResolver",i=>i.singleton(x1));class x1{constructor(){this._handlers=S(Rc(E1))}resolve(e){if(xd.handles(e))return xd;if(Ed.handles(e))return Ed;if(Id.handles(e))return Id;if(Pd.handles(e))return Pd;if(Rd.handles(e))return Rd;const t=this._handlers.find(s=>s.handles(e));return t!==void 0?t:I1}}const E1=oe("IRepeatableHandler"),xd={handles:_e,getObserver:Zc,iterate(i,e){const t=i.length;let s=0;for(;s<t;++s)e(i[s],s,i)}},Ed={handles:Sn,getObserver:Zc,iterate(i,e){let t=0,s;for(s of i.keys())e(s,t++,i)}},Id={handles:Ws,getObserver:Zc,iterate(i,e){let t=0,s;for(s of i.entries())e(s,t++,i)}},Pd={handles:Dv,iterate(i,e){let t=0;for(;t<i;++t)e(t,t,i)}},Rd={handles:i=>i==null,iterate(){}},I1={handles(i){return!1},iterate(i,e){throw B(777,i)}},oc=(i,e,t,s,n,r)=>{i?xr(e,t,s,null,r):t.bindingContext[n]=r},To=(i,e,t,s,n)=>i?ve(e,t,s,null):t.bindingContext[n],Td=(i,e,t,s,n,r)=>typeof e=="string"?To(i,t,s,n,r)[e]:ve(e,s,n,null),Od=(i,e,t,s,n,r,o,a,l)=>{let c=i.get(t);if(c===void 0?c=ac(s,n,r,o,a,l):c instanceof Oe?i.delete(t):c.length===1?(c=c[0],i.delete(t)):c=c.shift(),e.has(t)){const u=e.get(t);u instanceof Oe?e.set(t,[u,c]):u.push(c)}else e.set(t,c);return oc(l,n.declaration,c,o,a,s),c},ac=(i,e,t,s,n,r)=>{if(r){const o=Oe.fromParent(t,new Yu,new Sd);xr(e.declaration,o,s,null,i)}return Oe.fromParent(t,new Yu(n,i),new Sd)},P1=(i,e)=>i-e;class Xg{constructor(){this.view=S(yt).create().setLocation(S(at))}valueChanged(e,t){const s=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(s.isActive&&n!=null)for(r=Oe.fromParent(s.scope,e===void 0?{}:e),a=n.length;a>o;++o)n[o].bind(r)}attaching(e,t){const{$controller:s,value:n}=this,r=Oe.fromParent(s.scope,n===void 0?{}:n);return this.view.activate(e,s,r)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}Xg.$au={type:Ze,name:"with",isTemplateController:!0,bindables:["value"]};class gh{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=S(yt),this._location=S(at)}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return this.queue(()=>s.activate(e,n,n.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),s=this.activeCases,n=s.length;if(!t)return n>0&&s[0].id===e.id?this._clearActiveCases(null):void 0;if(n>0&&s[0].id<e.id)return;const r=[];let o=e.fallThrough;if(!o)r.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,u=a.length;c<u&&o;c++){const h=a[c];r.push(h),o=h.fallThrough}}return R(this._clearActiveCases(null,r),()=>(this.activeCases=r,this._activateCases(null)))}swap(e,t){const s=[];let n=!1;for(const o of this.cases)if((n||o.isMatch(t))&&(s.push(o),n=o.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return s.length===0&&r!==void 0&&s.push(r),R(this.activeCases.length>0?this._clearActiveCases(e,s):void 0,()=>{if(this.activeCases=s,s.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const s=this.activeCases,n=s.length;if(n===0)return;const r=t.scope;return n===1?s[0].activate(e,r):le(...s.map(o=>o.activate(e,r)))}_clearActiveCases(e,t=[]){const s=this.activeCases,n=s.length;if(n!==0){if(n===1){const r=s[0];return t.includes(r)?void 0:(s.length=0,r.deactivate(e))}return R(le(...s.reduce((r,o)=>(t.includes(o)||r.push(o.deactivate(e)),r),[])),()=>{s.length=0})}}queue(e){const t=this.promise;let s;s=this.promise=R(R(t,e),()=>{this.promise===s&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}gh.$au={type:Ze,name:"switch",isTemplateController:!0,bindables:["value"]};let R1=0;const Zg=["value",{name:"fallThrough",mode:Aa,set(i){switch(i){case"true":return!0;case"false":return!1;default:return!!i}}}];class _h{constructor(){this.id=++R1,this.fallThrough=!1,this.view=void 0,this._factory=S(yt),this._locator=S(On),this._location=S(at),this._logger=S(Le).scopeTo(`Case-#${this.id}`)}link(e,t,s,n){const r=e.parent,o=r==null?void 0:r.viewModel;if(o instanceof gh)this.$switch=o,this.linkToSwitch(o);else throw B(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return _e(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var s;_e(e)?((s=this._observer)==null||s.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(e??s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}oh({name:"case",bindables:Zg,isTemplateController:!0},_h);class e_ extends _h{linkToSwitch(e){if(e.defaultCase!==void 0)throw B(816);e.defaultCase=this}}oh({name:"default-case",bindables:Zg,isTemplateController:!0},e_);var t_,s_,i_;class mh{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=S(yt),this._location=S(at),this._platform=S(Fe),this.logger=S(Le).scopeTo("promise.resolve")}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return R(s.activate(e,n,this.viewScope=Oe.fromParent(n.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var c,u;const t=this.value;if(!Te(t)){this.logger.warn(`The value '${Mi(t)}' is not a promise. No change will be done.`);return}const s=this.fulfilled,n=this.rejected,r=this.pending,o=this.viewScope;let a;const l=()=>{le(a=(this.preSettledTask=gr(()=>le(s==null?void 0:s.deactivate(e),n==null?void 0:n.deactivate(e),r==null?void 0:r.activate(e,o)))).result.catch(h=>{throw h}),t.then(h=>{if(this.value!==t)return;const p=()=>{this.postSettlePromise=(this.postSettledTask=gr(()=>le(r==null?void 0:r.deactivate(e),n==null?void 0:n.deactivate(e),s==null?void 0:s.activate(e,o,h)))).result};this.preSettledTask.status===nl?a.then(p):(this.preSettledTask.cancel(),p())},h=>{if(this.value!==t)return;const p=()=>{this.postSettlePromise=(this.postSettledTask=gr(()=>le(r==null?void 0:r.deactivate(e),s==null?void 0:s.deactivate(e),n==null?void 0:n.activate(e,o,h)))).result};this.preSettledTask.status===nl?a.then(p):(this.preSettledTask.cancel(),p())}))};((c=this.postSettledTask)==null?void 0:c.status)===nl?this.postSettlePromise.then(l):((u=this.postSettledTask)==null||u.cancel(),l())}detaching(e,t){var s,n;return(s=this.preSettledTask)==null||s.cancel(),(n=this.postSettledTask)==null||n.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}mh.$au={type:Ze,name:"promise",isTemplateController:!0,bindables:["value"]};class n_{constructor(){this.view=void 0,this._factory=S(yt),this._location=S(at)}link(e,t,s,n){vh(e).pending=this}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}n_.$au={type:Ze,name:"pending",isTemplateController:!0,bindables:{value:{mode:Se}}};class r_{constructor(){this.view=void 0,this._factory=S(yt),this._location=S(at)}link(e,t,s,n){vh(e).fulfilled=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}r_.$au={type:Ze,name:"then",isTemplateController:!0,bindables:{value:{mode:Rs}}};class o_{constructor(){this.view=void 0,this._factory=S(yt),this._location=S(at)}link(e,t,s,n){vh(e).rejected=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}o_.$au={type:Ze,name:"catch",isTemplateController:!0,bindables:{value:{mode:Rs}}};function vh(i){const e=i.parent,t=e==null?void 0:e.viewModel;if(t instanceof mh)return t;throw B(813)}class lc{"promise.resolve"(e,t){return new At(e,t,"promise","bind")}}t_=Symbol.metadata;lc[t_]={[cs]:ni.create([{pattern:"promise.resolve",symbols:""}],lc)};class cc{then(e,t){return new At(e,t,"then","from-view")}}s_=Symbol.metadata;cc[s_]={[cs]:ni.create([{pattern:"then",symbols:""}],cc)};class hc{catch(e,t){return new At(e,t,"catch","from-view")}}i_=Symbol.metadata;hc[i_]={[cs]:ni.create([{pattern:"catch",symbols:""}],hc)};class a_{constructor(){this._needsApply=!1,this._element=S(Bn),this._platform=S(Fe)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,s=this.value;s&&!t?e.focus():!s&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}a_.$au={type:Ze,name:"focus",bindables:{value:{mode:Xf}}};class l_{constructor(){this.position="beforeend",this.strict=!1;const e=S(yt),t=S(at),s=S(Fe);this._platform=s,this._resolvedTarget=s.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=py(s)),c1(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const s=R(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Te(s)&&s.catch(Jl)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const s=R(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Te(s)&&s.catch(Jl)}_activating(e,t){const{activating:s,callbackContext:n,view:r}=this;return R(s==null?void 0:s.call(n,t,r),()=>this._activate(e,t))}_activate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.insertBefore(this._targetLocation);else return R(n.activate(e??n,s,s.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:s,view:n}=this;return t==null?void 0:t.call(s,e,n)}_deactivating(e,t){const{deactivating:s,callbackContext:n,view:r}=this;return R(s==null?void 0:s.call(n,t,r),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.remove();else return R(n.deactivate(e,s),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:s,view:n}=this;return R(t==null?void 0:t.call(s,e,n),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let s=this.target,n=this.renderContext;if(s===""){if(this.strict)throw B(811);return t.body}if(J(s)){let r=t;J(n)&&(n=t.querySelector(n)),n instanceof e.Node&&(r=n),s=r.querySelector(s)}if(s instanceof e.Node)return s;if(s==null){if(this.strict)throw B(812);return t.body}return s}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const s=this._targetLocation,n=s.$start,r=e.parentNode,o=[n,s];switch(t){case"beforeend":vo(e,null,o);break;case"afterbegin":vo(e,e.firstChild,o);break;case"beforebegin":vo(r,e,o);break;case"afterend":vo(r,e.nextSibling,o);break;default:throw B(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}l_.$au={type:Ze,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let T1;class Ta{constructor(){var h,p,d,g;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=S(ei),t=S(at),s=S(Rn),n=S(ji),r=this.name=s.data.name,o=(h=s.projections)==null?void 0:h[vg],a=(d=(p=e.instruction)==null?void 0:p.projections)==null?void 0:d[r],l=e.controller.container;let c,u;a==null?(u=l.createChild({inheritParentResources:!0}),c=n.getViewFactory(o??T1??(T1=Me.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),u),this._hasProjection=!1):(u=l.createChild(),u.useResources(e.parent.controller.container),me(u,ei,new $e(void 0,e.parent)),c=n.getViewFactory(a,u),this._hasProjection=!0,this._slotwatchers=((g=l.getAll(_y,!1))==null?void 0:g.filter(f=>f.slotName==="*"||f.slotName===r))??H),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=H)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let s=t.$start.nextSibling;for(;s!=null&&s!==t;)s.nodeType!==8&&e.push(s),s=s.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var r;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((r=t.parent)==null?void 0:r.viewModel)instanceof Ta;)t=t.parent.parent;const s=t.scope.bindingContext;let n;this._hasProjection&&(n=this._hdrContext.controller.scope.parent,(this._outerScope=Oe.fromParent(n,n.bindingContext)).overrideContext.$host=this.expose??s)}attaching(e,t){return R(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{(this._hasSlotWatcher||Z(this.slotchange))&&(this._slotwatchers.forEach(s=>s.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(s=>s.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=mg(t,s=>{O1(e,s)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var n;const e=this.nodes,t=new Set(this._subs);let s;this._attached&&((n=this.slotchange)==null||n.call(void 0,this.name,e));for(s of t)s.handleSlotChange(this,e)}}Ta.$au={type:Ni,name:"au-slot",template:null,containerless:!0,processContent(i,e,t){t.name=i.getAttribute("name")??vg;let s=i.firstChild,n=null;for(;s!==null;)n=s.nextSibling,fy(s)&&s.hasAttribute(gy)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${s.nodeName} au-slot>".`,"This element will be ignored and removed"),i.removeChild(s)),s=n},bindables:["expose","slotchange"]};const yo=(i,e)=>i.compareDocumentPosition(e),O1=(i,e)=>{for(const{addedNodes:t,removedNodes:s,nextSibling:n}of e){let r=0,o=t.length,a;for(;r<o;++r)if(a=t[r],yo(i.$start,a)===4&&yo(i,a)===2)return!0;if(s.length>0&&n!=null&&yo(i.$start,n)===4&&yo(i,n)===2)return!0}};class c_{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=S(Di),this.parent=S(Yr),this._host=S(Bn),this._location=S(at),this._platform=S(Fe),this._rendering=S(ji),this._instruction=S(Rn),this._contextFactory=S(rb(M1)),this._compiler=S(_a),this._hydrationContext=S(ei),this._exprParser=S(In),this._observerLocator=S(On),this._attached=!1}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._attached=!0,this._composing=R(this.queue(new Bd(this.template,this.component,this.model,void 0),e),s=>{this._contextFactory._isCurrent(s)&&(this._composing=void 0)})}detaching(e){this._attached=!1;const t=this._composition,s=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,R(s,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(this._attached&&!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===_t){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=R(this._composing,()=>R(this.queue(new Bd(this.template,this.component,this.model,e),void 0),s=>{this._contextFactory._isCurrent(s)&&(this._composing=void 0)}))}}queue(e,t){const s=this._contextFactory,n=this._composition;return R(s.create(e),r=>s._isCurrent(r)?R(this.compose(r),o=>s._isCurrent(r)?R(o.activate(t),()=>s._isCurrent(r)?(this._composition=o,R(n==null?void 0:n.deactivate(t),()=>r)):R(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),r))):(o.controller.dispose(),r)):r)}compose(e){const{_template:t,_component:s,_model:n}=e.change,{_container:r,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,s),u=r.createChild(),h=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(h,a);let p;c==null?p=this.tag==null?Er(h):null:p=c.containerless?Er(h):null;const d=()=>{var _;if(h.remove(),p!=null){let b=p.$start.nextSibling,v=null;for(;b!==null&&b!==p;)v=b.nextSibling,b.remove(),b=v;(_=p.$start)==null||_.remove(),p.remove()}},g=this._createComponentInstance(u,typeof s=="string"?c.Type:s,h,p),f=()=>{const _=l.captures??H;if(c!==null){const b=c.capture,[v,$]=_.reduce((y,O)=>{const P=!(O.target in c.bindables)&&(b===!0||Z(b)&&!!b(O.target));return y[P?0:1].push(O),y},[[],[]]),m=Ye.$el(u,g,h,{projections:l.projections,captures:v},c,p);return this._createSpreadBindings(h,c,$).forEach(y=>m.addBinding(y)),new Ld(m,y=>m.activate(y??m,o,o.scope.parent),y=>R(m.deactivate(y??m,o),d),y=>{var O;return(O=g.activate)==null?void 0:O.call(g,y)},e)}else{const b=Me.create({name:W.generateName(),template:t}),v=this._rendering.getViewFactory(b,u),$=Ye.$view(v,o),m=this.scopeBehavior==="auto"?Oe.fromParent(this.parent.scope,g):Oe.create(g);return $.setHost(h),p==null?this._createSpreadBindings(h,b,_).forEach(y=>$.addBinding(y)):$.setLocation(p),new Ld($,y=>$.activate(y??$,o,m),y=>R($.deactivate(y??$,o),d),y=>{var O;return(O=g.activate)==null?void 0:O.call(g,y)},e)}};return"activate"in g?R(g.activate(n),()=>f()):f()}_createComponentInstance(e,t,s,n){if(t==null)return new B1;if(typeof t=="object")return t;const r=this._platform;Xr(e,s,r),me(e,at,new $e("IRenderLocation",n));const o=e.invoke(t);return me(e,t,new $e("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const n=W.find(e,t);if(n==null)throw B(806,t);return n}const s=Z(t)?t:t==null?void 0:t.constructor;return W.isType(s,void 0)?W.getDefinition(s,null):null}_createSpreadBindings(e,t,s){const n=new Mg(this.$controller,{projections:null,captures:s},this._hydrationContext.parent);return xa.create(n,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}c_.$au={type:Ni,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:i=>{if(i==="scoped"||i==="auto")return i;throw B(805,i)}},{name:"composing",mode:Rs},{name:"composition",mode:Rs},"tag"]};class B1{}class M1{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return R(e.load(),t=>new L1(++this.id,t))}invalidate(){this.id++}}class Bd{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}load(){return Te(this._template)||Te(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new Md(e,t,this._model,this._src)):new Md(this._template,this._component,this._model,this._src)}}class Md{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}}class L1{constructor(e,t){this.id=e,this.change=t}}class Ld{constructor(e,t,s,n,r){this.controller=e,this.start=t,this.stop=s,this.update=n,this.context=r,this.state=0}activate(e){if(this.state!==0)throw B(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw B(808);default:this.state=-1}}}const N1=oe("ISanitizer",i=>i.singleton(class{sanitize(){throw B(99,"sanitize")}}));class h_{constructor(){this._sanitizer=S(N1)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}h_.$au={type:en,name:"sanitize"};class u_{constructor(){this.el=S(Bn),this.p=S(Fe),this._isActive=!1,this._isQueued=!1,this.$val="",this.$prio="",this.update=()=>{this._isQueued=!1,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=S(Rn);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){this._isActive=!1,this._isQueued=!1}valueChanged(){this._isActive&&!this._isQueued&&(this._isQueued=!0,rs(this.update))}}u_.$au={type:Ze,name:"show",bindables:["value"],aliases:["hide"]};const D1=[b1,E0,fh],F1=[Fl,Dl,jl,dy],j1=[xf,Cf,$f,kf,Sf,Ef,Bf,If,Pf,Of,Tf,Rf,Mf],V1=[hg,og,ag,lg,ug,dg,cg,h_,Xo,Yg,Jg,Xg,gh,_h,e_,mh,n_,r_,o_,lc,cc,hc,Wg,Kg,Gg,c_,l_,a_,u_,Ta],z1=[$y,Sy,Cy,ky,vy,by,wy,Ay,yy,Iy,Ly,Py,Ry,Ty,By,xy,Ny,Dy],U1=d_(dt);function d_(i){return{optionsProvider:i,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return i(t),e.register(rh(zf,t.coercingOptions),jp,...D1,...V1,...F1,...j1,...z1)},customize(e){return d_(e??i)}}}const Q1=qs.getOrCreate(globalThis);function H1(){return lt.createContainer().register(Pt.instance(Fe,Q1),U1)}class yr extends _1{constructor(e=H1()){super(e)}static app(e){return new yr().app(e)}static enhance(e){return new yr().enhance(e)}static register(...e){return new yr().register(...e)}app(e){if(W.isType(e)){const t=W.getDefinition(e);let s=document.querySelector(t.name);return s===null&&(s=document.body),super.app({host:s,component:e})}return super.app(e)}}const p_="my-app",uc=`<template>\r
    <app-header></app-header>\r
    <main>\r
        <au-viewport></au-viewport>\r
\r
    </main>\r
    <toast-notifications></toast-notifications>\r
    <payment-methods></payment-methods>\r
    <app-footer></app-footer>\r
</template>`,f_=[],g_={};let ml;function q1(i){ml||(ml=W.define({name:p_,template:uc,dependencies:f_,bindables:g_})),i.register(ml)}const W1=Object.freeze(Object.defineProperty({__proto__:null,bindables:g_,default:uc,dependencies:f_,name:p_,register:q1,template:uc},Symbol.toStringTag,{value:"Module"})),__="app-header",dc=`<template>\r
    <header class="main-header">\r
        <div class="header-content">\r
            <div class="header-left">\r
                <button class="hamburger-btn" aria-label="Open menu" aria-expanded.bind="isMobileMenuOpen" click.trigger="toggleMobileMenu()">\r
                    <img src.bind="hamburgerUrl" alt="Menu" class="hamburger-icon" />\r
                </button>\r
                <a class="logo-link" goto="/" href="/" aria-label="Home">\r
                    <img src.bind="logoUrl" alt="Logo" class="header-logo" />\r
                </a>\r
            </div>\r
            <category-navigation></category-navigation>\r
            <div class="header-spacer"></div>\r
            <div class="header-right">\r
                <cart-icon count.bind="cartCount"></cart-icon>\r
                <currency-selector></currency-selector>\r
                <button class="header-signin sign-in-button" type="button" click.trigger="goToLogin($event)">\r
                    SIGN IN\r
                    <span class="user-icon" aria-hidden="true">\r
                        <svg class="user-icon-outline" width="22" height="22" viewBox="0 0 24 24" fill="none"\r
                            stroke="#23243a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
                            <circle cx="12" cy="8" r="4" />\r
                            <path d="M4 20c0-2.5 3.5-4 8-4s8 1.5 8 4" />\r
                        </svg>\r
                        <svg class="user-icon-filled" width="22" height="22" viewBox="0 0 24 24" fill="#23243a">\r
                            <circle cx="12" cy="8" r="4" />\r
                            <path d="M4 20c0-2.5 3.5-4 8-4s8 1.5 8 4" />\r
                        </svg>\r
                    </span>\r
                </button>\r
            </div>\r
        </div>\r
        <!-- Mobile overlay and drawer -->\r
        <div if.bind="isMobileMenuOpen" class="mobile-overlay" click.trigger="closeMobileMenu()"></div>\r
        <aside class="mobile-drawer \${isMobileMenuOpen ? 'open' : ''}" role="dialog" aria-modal="true">\r
            <div class="mobile-drawer-header">\r
                <a class="logo-link" goto="/" href="/" aria-label="Home">\r
                    <img src.bind="logoUrl" alt="Logo" class="header-logo" />\r
                </a>\r
                <button class="drawer-close" aria-label="Close" click.trigger="closeMobileMenu()"></button>\r
            </div>\r
            <nav class="mobile-nav">\r
                <ul class="mobile-categories">\r
                    <li repeat.for="cat of ['CURRENCY','ITEMS','ACCOUNTS','SERVICES','SWAP','SELL']" class="mobile-cat-item">\${cat}</li>\r
                </ul>\r
            </nav>\r
            <div class="mobile-actions">\r
                <cart-icon count.bind="cartCount"></cart-icon>\r
                <currency-selector></currency-selector>\r
                <button class="header-signin sign-in-button" type="button" click.trigger="goToLogin($event)">SIGN IN</button>\r
            </div>\r
        </aside>\r
    </header>\r
</template>`,m_=[],v_={};let vl;function K1(i){vl||(vl=W.define({name:__,template:dc,dependencies:m_,bindables:v_})),i.register(vl)}const G1=Object.freeze(Object.defineProperty({__proto__:null,bindables:v_,default:dc,dependencies:m_,name:__,register:K1,template:dc},Symbol.toStringTag,{value:"Module"}));class Nd{constructor(e,t,s,n){this.name=e,this.isOptional=t,this.isStar=s,this.pattern=n}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class b_{constructor(e,t,s){this.path=e,this.caseSensitive=t,this.handler=s}}class w_{get residualEndpoint(){return this._residualEndpoint}set residualEndpoint(e){if(this._residualEndpoint!==null)throw new Error("Residual endpoint is already set");this._residualEndpoint=e}constructor(e,t){this.route=e,this.params=t,this._residualEndpoint=null}equalsOrResidual(e){return e!=null&&this===e||this._residualEndpoint===e}}class Oa{constructor(e,t){this.endpoint=e;const s=Object.create(null);for(const n in t){const r=t[n];s[n]=r!=null?decodeURIComponent(r):r}this.params=Object.freeze(s)}}class bh{constructor(e,t,s,n){var r;this.chars=e,this.states=t,this.skippedStates=s,this.result=n,this.params=null,this.isConstrained=!1,this.satisfiesConstraints=null,this.head=t[t.length-1],this.endpoint=(r=this.head)==null?void 0:r.endpoint}advance(e){const{chars:t,states:s,skippedStates:n,result:r}=this;let o=null,a=0;const l=s[s.length-1];function c(u,h){if(u.isMatch(e)&&(++a===1?o=u:r.add(new bh(t.concat(e),s.concat(u),h===null?n:n.concat(h),r))),l.segment===null&&u.isOptional&&u.nextStates!==null){if(u.nextStates.length>1)throw ea(`${u.nextStates.length} nextStates`);const p=u.nextStates[0];if(!p.isSeparator)throw ea("Not a separator");if(p.nextStates!==null)for(const d of p.nextStates)c(d,u)}}if(l.isDynamic&&c(l,null),l.nextStates!==null)for(const u of l.nextStates)c(u,null);o!==null&&(s.push(this.head=o),t.push(e),this.isConstrained=this.isConstrained||o.isDynamic&&o.segment.isConstrained,o.endpoint!==null&&(this.endpoint=o.endpoint)),a===0&&r.remove(this)}_finalize(){function e(t,s){const n=s.nextStates;if(n!==null){if(n.length===1&&n[0].segment===null)e(t,n[0]);else for(const r of n)if(r.isOptional&&r.endpoint!==null){if(t.push(r),r.nextStates!==null)for(const o of r.nextStates)e(t,o);break}}}return e(this.skippedStates,this.head),this.isConstrained?(this._getParams(),this.satisfiesConstraints):!0}_getParams(){var r;let e=this.params;if(e!=null)return e;const{states:t,chars:s,endpoint:n}=this;e={},this.satisfiesConstraints=!0;for(const o of n.params)e[o.name]=void 0;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(l.isDynamic){const c=l.segment,u=c.name;if(e[u]===void 0?e[u]=s[o]:e[u]+=s[o],!(l.isConstrained&&!Object.is((r=t[o+1])==null?void 0:r.segment,c)))continue;this.satisfiesConstraints=this.satisfiesConstraints&&l.satisfiesConstraint(e[u])}}return this.satisfiesConstraints&&(this.params=e),e}compareTo(e){const t=this.states,s=e.states;for(let l=0,c=0,u=Math.max(t.length,s.length);l<u;++l){let h=t[l];if(h===void 0)return 1;let p=s[c];if(p===void 0)return-1;let d=h.segment,g=p.segment;if(d===null){if(g===null){++c;continue}if((h=t[++l])===void 0)return 1;d=h.segment}else if(g===null){if((p=s[++c])===void 0)return-1;g=p.segment}if(d.kind<g.kind)return 1;if(d.kind>g.kind)return-1;++c}const n=this.skippedStates,r=e.skippedStates,o=n.length,a=r.length;if(o<a)return 1;if(o>a)return-1;for(let l=0;l<o;++l){const c=n[l],u=r[l];if(c.length<u.length)return 1;if(c.length>u.length)return-1}return 0}}function Y1(i){return i.head.endpoint!==null}function J1(i,e){return i.compareTo(e)}class X1{get isEmpty(){return this.candidates.length===0}constructor(e){this.candidates=[],this.candidates=[new bh([""],[e],[],this)]}getSolution(){const e=this.candidates.filter(t=>Y1(t)&&t._finalize());return e.length===0?null:(e.sort(J1),e[0])}add(e){this.candidates.push(e)}remove(e){this.candidates.splice(this.candidates.indexOf(e),1)}advance(e){const t=this.candidates.slice();for(const s of t)s.advance(e)}}const Xt="$$residue",Dd=/^:(?<name>[^?\s{}]+)(?:\{\{(?<constraint>.+)\}\})?(?<optional>\?)?$/g;class Z1{constructor(){this.rootState=new wh(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(e,t=!1){var r,o;let s,n;if(e instanceof Array)for(const a of e)n=this.$add(a,!1),s=n.params,!(!t||(((r=s[s.length-1])==null?void 0:r.isStar)??!1))&&(n.residualEndpoint=this.$add({...a,path:`${a.path}/*${Xt}`},!0));else n=this.$add(e,!1),s=n.params,t&&!(((o=s[s.length-1])==null?void 0:o.isStar)??!1)&&(n.residualEndpoint=this.$add({...e,path:`${e.path}/*${Xt}`},!0));this.cache.clear()}$add(e,t){var u;const s=e.path,n=this.endpointLookup;if(n.has(s))throw ea(`Cannot add duplicate path '${s}'.`);const r=new b_(s,e.caseSensitive===!0,e.handler),o=s===""?[""]:s.split("/").filter(eC),a=[];let l=this.rootState;for(const h of o)switch(l=l.append(null,"/"),h.charAt(0)){case":":{Dd.lastIndex=0;const p=Dd.exec(h),{name:d,optional:g}=(p==null?void 0:p.groups)??{},f=g==="?";if(d===Xt)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${Xt}' is used.`);const _=(u=p==null?void 0:p.groups)==null?void 0:u.constraint,b=_!=null?new RegExp(_):null;a.push(new Nd(d,f,!1,b)),l=new sC(d,f,b).appendTo(l);break}case"*":{const p=h.slice(1);let d;if(p===Xt){if(!t)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${Xt}' is used.`);d=1}else d=2;a.push(new Nd(p,!0,!0,null)),l=new iC(p,d).appendTo(l);break}default:{l=new tC(h,r.caseSensitive).appendTo(l);break}}const c=new w_(r,a);return l.setEndpoint(c),n.set(s,c),c}recognize(e){let t=this.cache.get(e);return t===void 0&&this.cache.set(e,t=this.$recognize(e)),t}$recognize(e){e.startsWith("/")||(e=`/${e}`),e.length>1&&e.endsWith("/")&&(e=e.slice(0,-1));const t=new X1(this.rootState);for(let o=0,a=e.length;o<a;++o){const l=e.charAt(o);if(t.advance(l),t.isEmpty)return null}const s=t.getSolution();if(s===null)return null;const{endpoint:n}=s,r=s._getParams();return new Oa(n,r)}getEndpoint(e){return this.endpointLookup.get(e)??null}}class wh{constructor(e,t,s){switch(this.prevState=e,this.segment=t,this.value=s,this.nextStates=null,this.endpoint=null,this.isConstrained=!1,t==null?void 0:t.kind){case 3:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=t.optional,this.isConstrained=t.isConstrained;break;case 2:case 1:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=e===null?0:e.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1;break}}append(e,t){let s,n=this.nextStates;return n===null?(s=void 0,n=this.nextStates=[]):e===null?s=n.find(r=>r.value===t):s=n.find(r=>{var o;return(o=r.segment)==null?void 0:o.equals(e)}),s===void 0&&n.push(s=new wh(this,e,t)),s}setEndpoint(e){if(this.endpoint!==null)throw ea(`Cannot add ambiguous route. The pattern '${e.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=e,this.isOptional&&(this.prevState.setEndpoint(e),this.prevState.isSeparator&&this.prevState.prevState!==null&&this.prevState.prevState.setEndpoint(e))}isMatch(e){const t=this.segment;switch(t==null?void 0:t.kind){case 3:return!this.value.includes(e);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(e)}}satisfiesConstraint(e){return this.isConstrained?this.segment.satisfiesPattern(e):!0}}function eC(i){return i.length>0}class tC{get kind(){return 4}constructor(e,t){this.value=e,this.caseSensitive=t}appendTo(e){const{value:t,value:{length:s}}=this;if(this.caseSensitive)for(let n=0;n<s;++n)e=e.append(this,t.charAt(n));else for(let n=0;n<s;++n){const r=t.charAt(n);e=e.append(this,r.toUpperCase()+r.toLowerCase())}return e}equals(e){return e.kind===4&&e.caseSensitive===this.caseSensitive&&e.value===this.value}}class sC{get kind(){return 3}constructor(e,t,s){if(this.name=e,this.optional=t,this.pattern=s,s===void 0)throw new Error("Pattern is undefined");this.isConstrained=s!==null}appendTo(e){return e=e.append(this,"/"),e}equals(e){return e.kind===3&&e.optional===this.optional&&e.name===this.name}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class iC{constructor(e,t){this.name=e,this.kind=t}appendTo(e){return e=e.append(this,""),e}equals(e){return(e.kind===2||e.kind===1)&&e.name===this.name}}const ea=i=>new Error(i),Zr={3e3:"hydrated",3001:"attaching",3002:"detaching",3003:"dispose",3050:"created",3051:"activating - self",3052:"activating - via initiator",3053:"deactivating - self",3054:"deactivating - via initiator",3055:"disposing",3056:"canUnload(next:%s) - invoking %s hooks",3057:"canLoad(next:%s) - invoking %s hooks",3058:"unloading(next:%s) - invoking %s hooks",3059:"loading(next:%s) - invoking %s hooks",3100:"baseHref set to path: %s",3101:"starting listening to %s",3102:"stopping listening to %s",3103:"pushing to history state: %s (title: '%s', url: '%s')",3104:"replacing history state: %s (title: '%s', url: '%s')",3105:"pushing to history state: NOT_SERIALIZABLE (title: '%s', url: '%s')",3106:"replacing history state: NOT_SERIALIZABLE (title: '%s', url: '%s')",3150:"created",3151:"Node changed from %s to %s",3152:"The given context is nullish (%s); resolving to root RouteContext",3153:"The given context (%s) is an instance of RouteContext; resolving to it",3154:"The given context is a node (nodeName:%s); resolving RouteContext from controller's RenderContext",3155:"Failed to resolve RouteContext from node %s; error: %s",3156:"The given context is a custom element viewmodel (name:%s); resolving RouteContext from controller's RenderContext",3157:"The given context is a custom element controller (name:%s); resolving RouteContext from controller's RenderContext",3158:"Resolving viewport agent for the request: %s",3159:"Creating component agent for the node: %s",3160:"Registering viewport: %s",3161:"Skipping registering viewport: %s; it is already registered",3162:"Unregistering viewport: %s",3163:"Skipping unregistering viewport: %s; it is not registered",3164:"Recognizing path: %s",3165:"Adding route: %s",3166:"Unable to eagerly generate path for %s; reasons: %s",3167:"The provided container has no registered IAppRoot. RouteContext.setRoot can only be used after Aurelia.app was called, on a container that is within that app's component tree.",3168:'A root RouteContext is already registered. A possible cause is the RouterConfiguration being registered more than once in the same container tree. If you have a multi-rooted app, make sure you register RouterConfiguration only in the "forked" containers and not in the common root.',3169:"The provided IAppRoot does not (yet) have a controller. A possible cause is calling this API manually before Aurelia.start() is called",3170:"Invalid context type: %s",3171:"Invariant violation: RouteNode should be set immediately after the RouteContext is created. Context: %s",3172:"RouteContext has no ViewportAgent: %s",3173:"Invalid route config. When the component property is a lazy import, the path must be specified.",3174:`Failed to resolve %s at:
%s`,3175:"%s does not appear to be a component or CustomElement recognizable by Aurelia; make sure to use the @customElement decorator for your class if not using conventions.",3200:"Publishing event: %s",3201:"Invoking subscriber #%s (event: %s)",3250:"Loading instruction: %s",3251:"Checking if the route %s is active in context %s",3252:"Resolving existing RouteContext for %s",3253:"Creating new RouteContext for %s",3254:"Ignoring navigation triggered by '%s' because it is the same URL as the previous navigation which was triggered by 'api'.",3255:"Reusing promise/resolve/reject from the previously failed transition %s",3256:"Scheduling transition: %s",3257:"Transition succeeded: %s",3258:"Running transition: %s",3259:"Aborting transition %s because a new transition was queued in response to the NavigationStartEvent",3260:"Compiling viewport instructions tree %s",3261:"invoking canUnload on %s nodes",3262:"invoking canLoad on %s nodes",3263:"invoking unloading on %s nodes",3264:"invoking loading on %s nodes",3265:"invoking swapping on %s nodes",3266:"finalizing transition",3267:"navigation %s",3268:"navigation %s; finished.",3269:"scheduling next transition: %s",3270:"Transition %s failed with error: %s",3271:"Root RouteContext is not set. Did you forget to register RouteConfiguration, or try to navigate before calling Aurelia.start()?",3300:"created",3301:"Nothing to activate at %s",3302:"Activating existing component agent at %s",3303:"Activating next component agent at %s",3304:"Nothing to deactivate at %s",3305:"Deactivating existing component agent at %s",3306:"Already deactivating at %s",3307:"Deactivating current component agent at %s",3308:"Cannot handle the request %s due to viewport name mismatch %s",3309:"Cannot handle the request %s as componentName not included in usedBy %s",3310:"Viewport %s can handle the request %s",3311:"Viewport is not available as it is inactive",3312:"Viewport is not available as an update is scheduled for %s",3313:"Invoking on children at %s",3314:"Invoking on existing component at %s",3315:"Finished invoking on children, now invoking on own component at %s",3316:"Finished at %s",3317:"Nothing to unload at %s",3318:"Invoking on next component at %s",3319:"Nothing to load at %s",3320:"Compiling residue for %s; plan is set to %s",3321:"Delaying residue compilation for %s until activate",3322:"Finished own component; invoking on children at %s",3323:"Finished at %s",3324:"Invoking on children at %s",3325:"Invoking on existing component at %s",3326:"Finished invoking on children, now invoking on own component at %s",3327:"Finished at %s",3328:"Nothing to unload at %s",3329:"Invoking on next component at %s",3330:"Nothing to load at %s",3331:"Finished own component; invoking on children at %s",3332:"Finished at %s",3333:"Invoking on the current component at %s",3334:"Nothing to deactivate at %s",3335:"Already deactivating at %s",3336:"Invoking canLoad(), loading() and activate() on the next component at %s",3337:"Invoking on the next component at %s",3338:"Nothing to activate at %s",3339:"Running activate on next instead, because there is nothing to deactivate at %s",3340:"Running deactivate on current instead, because there is nothing to activate at %s",3341:"Skipping this level and swapping children instead at %s",3342:"Swapping current and next at %s",3343:"Processing dynamic children at %s",3344:"Scheduling update for %s; plan is set to %s",3345:"Cancelling update for %s",3346:"setting currState to State.currIsEmpty at %s",3347:"setting currState to State.currIsActive at %s",3348:"setting currState to State.currIsActive and reassigning curCA at %s",3349:"disposing at %s",3350:"Unexpected viewport activation outside of a transition context at %s",3351:"Unexpected viewport deactivation outside of a transition context at %s",3352:"Unexpected state at %s of %s",3353:"Unexpected guardsResult %s at %s",3354:"canLoad returned redirect result %s by the component agent %s",3400:"Invalid component %s: must be either a class, a custom element ViewModel, or a (partial) custom element definition",3401:"Neither the route '%s' matched any configured route at '%s' nor a fallback is configured for the viewport '%s' - did you forget to add '%s' to the routes list of the route decorator of '%s'?",3402:"'%s' did not match any configured route or registered component name at '%s' - did you forget to add '%s' to the routes list of the route decorator of '%s'?",3403:'Invalid instruction type %s for "toUrlComponent" operation. If you are seeing this error, then it is probably because of an internal bug. Please report it.',3404:"The given instruction is not compatible for eagerly generating path: %s",3450:"No endpoint found for path '%s'",3500:"Expected %s at index %s of '%s', but got: '%s' (rest='%s')",3501:"Unexpected '%s' at index %s of '%s'",3502:"Unexpected expression kind %s",3550:"Invalid operation, the configuration from the get hook is already applied.",3551:"When retrieving the RouteConfig for a component name, a RouteContext (that can resolve it) must be provided",3552:"Could not find a CustomElement named '%s' in the current container scope of %s. This means the component is neither registered at Aurelia startup nor via the 'dependencies' decorator or static property.",3553:"RouteContext must be provided when resolving an imported module",3554:'Invalid route config property: "%s". Expected %s, but got %s.',3555:"Invalid route config: expected an object or string, but got: %s",3556:'Unknown route config property: "%s.%s". Please specify known properties only.',3557:`Unknown redirect route config property: "%s.%s". Only 'path' and 'redirectTo' should be specified for redirects.`,3558:"Invalid operation, the component is not yet resolved for the navigation strategy (id: %s)."};function I(i,e,...t){const s=Zr[e]??"Unknown event";i.trace(`AUR${e}: ${s}`,...t)}function Us(i,e,...t){const s=Zr[e]??"Unknown event";i.debug(`AUR${e}: ${s}`,...t)}function Fd(i,e,...t){{const s=Zr[e];i.warn(`AUR${e}: ${s}`,...t)}}function A_(i,e,...t){{const s=Zr[e];i.error(`AUR${e}: ${s}`,...t)}}function q(i,...e){{let t=Zr[i],s=0;for(;t.includes("%s")||s<e.length;)t=t.replace("%s",String(e[s++]));return`AUR${i}: ${t}`}}function Co(i,e){throw e.error(i),i}class We{constructor(e,t,s){this._stack=e,this._cb=t,this._done=!1,this._next=null,this._head=s??this}static _start(e){return new We(0,e,null)}_push(){let e=this;do++e._stack,e=e._next;while(e!==null)}_pop(){let e=this;do--e._stack===0&&e._invoke(),e=e._next;while(e!==null)}_invoke(){const e=this._cb;e!==null&&(this._cb=null,e(this),this._done=!0)}_continueWith(e){return this._next===null?this._next=new We(this._stack,e,this._head):this._next._continueWith(e)}_start(){return this._head._push(),this._head._pop(),this}}function pc(i,e){i=i.slice(),e=e.slice();const t=[];for(;i.length>0;){const s=i.shift(),n=s.context.vpa;if(t.every(r=>r.context.vpa!==n)){const r=e.findIndex(o=>o.context.vpa===n);r>=0?t.push(...e.splice(0,r+1)):t.push(s)}}return t.push(...e),t}function y_(i){try{return JSON.stringify(i)}catch{return Object.prototype.toString.call(i)}}function on(i){return typeof i=="string"?[i]:i}function jd(i){return typeof i=="string"?i:i[0]}function ta(i,e,t){const s=t?new URLSearchParams(i):i;if(e==null)return s;for(const[n,r]of Object.entries(e))if(r!=null){if(_e(r)){for(const o of r)s.append(n,o);continue}s.append(n,r)}return s}function Vd(i,e){if(e==null)return i;for(const[t,s]of Object.entries(e))if(s!=null)if(i[t]==null)i[t]=s;else{const n=i[t];i[t]=[..._e(n)?n:[n],..._e(s)?s:[s]]}return i}const Jn=Fi.toView,nC=Fi.fromView;function Ba(i){return typeof i=="object"&&i!==null&&!Ra(i)}function Ma(i){return Ba(i)&&Object.prototype.hasOwnProperty.call(i,"name")===!0}function La(i){return Ba(i)&&Object.prototype.hasOwnProperty.call(i,"component")===!0}function C_(i){return Ba(i)&&Object.prototype.hasOwnProperty.call(i,"redirectTo")===!0}function eo(i){return Ba(i)&&Object.prototype.hasOwnProperty.call(i,"component")===!0}function Ke(i,e,t){throw new Error(q(3554,e,i,y_(t)))}function Oo(i,e){if(i==null)throw new Error(q(3555,i));const t=Object.keys(i);for(const s of t){const n=i[s],r=[e,s].join(".");switch(s){case"id":case"viewport":case"redirectTo":typeof n!="string"&&Ke("string",r,n);break;case"caseSensitive":case"nav":typeof n!="boolean"&&Ke("boolean",r,n);break;case"data":(typeof n!="object"||n===null)&&Ke("object",r,n);break;case"title":switch(typeof n){case"string":case"function":break;default:Ke("string or function",r,n)}break;case"path":if(n instanceof Array)for(let o=0;o<n.length;++o)typeof n[o]!="string"&&Ke("string",`${r}[${o}]`,n[o]);else typeof n!="string"&&Ke("string or Array of strings",r,n);break;case"component":bl(n,r,"component");break;case"routes":{n instanceof Array||Ke("Array",r,n);for(const o of n){const a=`${r}[${n.indexOf(o)}]`;bl(o,a,"component")}break}case"transitionPlan":switch(typeof n){case"string":switch(n){case"none":case"replace":case"invoke-lifecycles":break;default:Ke("string('none'|'replace'|'invoke-lifecycles') or function",r,n)}break;case"function":break;default:Ke("string('none'|'replace'|'invoke-lifecycles') or function",r,n)}break;case"fallback":bl(n,r,"fallback");break;default:throw new Error(q(3556,e,s))}}}function rC(i,e){if(i==null)throw new Error(q(3555,i));const t=Object.keys(i);for(const s of t){const n=i[s],r=[e,s].join(".");switch(s){case"path":if(n instanceof Array)for(let o=0;o<n.length;++o)typeof n[o]!="string"&&Ke("string",`${r}[${o}]`,n[o]);else typeof n!="string"&&Ke("string or Array of strings",r,n);break;case"redirectTo":typeof n!="string"&&Ke("string",r,n);break;default:throw new Error(q(3557,e,s))}}}function bl(i,e,t){switch(typeof i){case"function":break;case"object":if(i instanceof Promise||i instanceof so)break;if(C_(i)){rC(i,e);break}if(La(i)){Oo(i,e);break}!Ra(i)&&!Ma(i)&&Ke(`an object with at least a '${t}' property (see Routeable)`,e,i);break;case"string":break;default:Ke("function, object or string (see Routeable)",e,i)}}function k_(i,e){if(i===e)return!0;if(typeof i!=typeof e||i===null||e===null||Object.getPrototypeOf(i)!==Object.getPrototypeOf(e))return!1;const t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(let n=0,r=t.length;n<r;++n){const o=t[n];if(o!==s[n]||i[o]!==e[o])return!1}return!0}const $_="au-nav-id";class oC{constructor(e,t,s){this._events=e,this._serial=t,this._inner=s,this._disposed=!1}dispose(){if(!this._disposed){this._disposed=!0,this._inner.dispose();const e=this._events._subscriptions;e.splice(e.indexOf(this),1)}}}const Na=lt.createInterface("IRouterEvents",i=>i.singleton(aC));class aC{constructor(){this._subscriptionSerial=0,this._subscriptions=[],this._ea=S(En),this._logger=S(Le).scopeTo("RouterEvents")}publish(e){I(this._logger,3200,e),this._ea.publish(e.name,e)}subscribe(e,t){const s=new oC(this,++this._subscriptionSerial,this._ea.subscribe(e,n=>{I(this._logger,3201,s._serial,e),t(n)}));return this._subscriptions.push(s),s}}class lC{get name(){return"au:router:location-change"}constructor(e,t,s,n){this.id=e,this.url=t,this.trigger=s,this.state=n}toString(){return`LocationChangeEvent(id:${this.id},url:'${this.url}',trigger:'${this.trigger}')`}}class cC{get name(){return"au:router:navigation-start"}constructor(e,t,s,n){this.id=e,this.instructions=t,this.trigger=s,this.managedState=n}toString(){return`NavigationStartEvent(id:${this.id},instructions:'${this.instructions}',trigger:'${this.trigger}')`}}class hC{get name(){return"au:router:navigation-end"}constructor(e,t,s){this.id=e,this.instructions=t,this.finalInstructions=s}toString(){return`NavigationEndEvent(id:${this.id},instructions:'${this.instructions}',finalInstructions:'${this.finalInstructions}')`}}class uC{get name(){return"au:router:navigation-cancel"}constructor(e,t,s){this.id=e,this.instructions=t,this.reason=s}toString(){return`NavigationCancelEvent(id:${this.id},instructions:'${this.instructions}',reason:${String(this.reason)})`}}class dC{get name(){return"au:router:navigation-error"}constructor(e,t,s){this.id=e,this.instructions=t,this.error=s}toString(){return`NavigationErrorEvent(id:${this.id},instructions:'${this.instructions}',error:${String(this.error)})`}}const S_=lt.createInterface("IBaseHref"),x_=lt.createInterface("ILocationManager",i=>i.singleton(pC));class pC{constructor(){this._eventId=0,this._logger=S(Le).root.scopeTo("LocationManager"),this._events=S(Na),this._history=S(u1),this._location=S(h1),this._window=S(Jr),this._baseHref=S(S_),this._event=S(kh).useUrlFragmentHash?"hashchange":"popstate",Us(this._logger,3100,this._baseHref.href)}startListening(){I(this._logger,3101,this._event),this._window.addEventListener(this._event,this,!1)}stopListening(){I(this._logger,3102,this._event),this._window.removeEventListener(this._event,this,!1)}handleEvent(e){this._events.publish(new lC(++this._eventId,this.getPath(),this._event,"state"in e?e.state:null))}pushState(e,t,s){s=this.addBaseHref(s);try{const n=JSON.stringify(e);I(this._logger,3103,n,t,s)}catch{Fd(this._logger,3105,t,s)}this._history.pushState(e,t,s)}replaceState(e,t,s){s=this.addBaseHref(s);try{const n=JSON.stringify(e);I(this._logger,3104,n,t,s)}catch{Fd(this._logger,3106,t,s)}this._history.replaceState(e,t,s)}getPath(){const{pathname:e,search:t,hash:s}=this._location;return this.removeBaseHref(`${e}${fC(t)}${s}`)}addBaseHref(e){let t,s=this._baseHref.href;return s.endsWith("/")&&(s=s.slice(0,-1)),s.length===0?t=e:(e.startsWith("/")&&(e=e.slice(1)),t=`${s}/${e}`),t}removeBaseHref(e){const t=this._baseHref.pathname;return e.startsWith(t)&&(e=e.slice(t.length)),E_(e)}}function E_(i){let e,t,s;return(s=i.indexOf("?"))>=0||(s=i.indexOf("#"))>=0?(e=i.slice(0,s),t=i.slice(s)):(e=i,t=""),e.endsWith("/")?e=e.slice(0,-1):e.endsWith("/index.html")&&(e=e.slice(0,-11)),`${e}${t}`}function fC(i){return i.length>0&&!i.startsWith("?")?`?${i}`:i}const Bo=H;class es{get path(){const e=this._path;if(e.length>0)return e;const t=W.getDefinition(this._component);return this._path=[t.name,...t.aliases]}get component(){return this._getComponent()}constructor(e,t,s,n,r,o,a,l,c,u,h,p){this.id=e,this._path=t,this.title=s,this.redirectTo=n,this.caseSensitive=r,this.transitionPlan=o,this.viewport=a,this.data=l,this.routes=c,this.fallback=u,this.nav=p,this._configurationFromHookApplied=!1,this._currentComponent=null,this._component=h,this._isNavigationStrategy=h instanceof so}static _create(e,t){if(typeof e=="string"||e instanceof Array){const s=on(e),n=(t==null?void 0:t.redirectTo)??null,r=(t==null?void 0:t.caseSensitive)??!1,o=jd((t==null?void 0:t.id)??(s instanceof Array?s[0]:s)),a=(t==null?void 0:t.title)??null,l=(t==null?void 0:t.transitionPlan)??null,c=(t==null?void 0:t.viewport)??vn,u=(t==null?void 0:t.data)??{},h=(t==null?void 0:t.routes)??Bo;return new es(o,s,a,n,r,l,c,u,h,(t==null?void 0:t.fallback)??null,t,(t==null?void 0:t.nav)??!0)}else if(typeof e=="object"){const s=e;Oo(s,"");const n=on(s.path??(t==null?void 0:t.path)??H),r=s.title??(t==null?void 0:t.title)??null,o=s.redirectTo??(t==null?void 0:t.redirectTo)??null,a=s.caseSensitive??(t==null?void 0:t.caseSensitive)??!1,l=s.id??(t==null?void 0:t.id)??(n instanceof Array?n[0]:n),c=s.transitionPlan??(t==null?void 0:t.transitionPlan)??null,u=s.viewport??(t==null?void 0:t.viewport)??vn,h={...t==null?void 0:t.data,...s.data},p=[...s.routes??Bo,...(t==null?void 0:t.routes)??Bo];return new es(l,n,r,o,a,c,u,h,p,s.fallback??(t==null?void 0:t.fallback)??null,s.component??t??null,s.nav??!0)}else Ke("string, function/class or object","",e)}_applyChildRouteConfig(e,t){Oo(e,this.path[0]??"");const s=on(e.path??this.path);return new es(jd(e.id??this.id??s),s,e.title??this.title,e.redirectTo??this.redirectTo,e.caseSensitive??this.caseSensitive,e.transitionPlan??this.transitionPlan??(t==null?void 0:t.transitionPlan)??null,e.viewport??this.viewport,e.data??this.data,e.routes??this.routes,e.fallback??this.fallback??(t==null?void 0:t.fallback)??null,this._component,e.nav??this.nav)}_getTransitionPlan(e,t,s){if(o(e,t)&&k_(e.params,t.params))return"none";if(s!=null)return s;const n=this.transitionPlan??"replace";return typeof n=="function"?n(e,t):n;function r(a){return a.replace(`/*${Xt}`,"")}function o(a,l){const c=a.finalPath,u=l.finalPath;return c.length===0||u.length===0||r(c)===r(u)}}_applyFromConfigurationHook(e,t,s){if(this._configurationFromHookApplied)throw new Error(q(3550));if(typeof e.getRouteConfig=="function")return R(e.getRouteConfig(t,s),n=>{if(this._configurationFromHookApplied=!0,n==null)return;let r=(t==null?void 0:t.path)??"";typeof r!="string"&&(r=r[0]),Oo(n,r),this.id=n.id??this.id,this._path=on(n.path??this.path),this.title=n.title??this.title,this.redirectTo=n.redirectTo??this.redirectTo,this.caseSensitive=n.caseSensitive??this.caseSensitive,this.transitionPlan=n.transitionPlan??this.transitionPlan,this.viewport=n.viewport??this.viewport,this.data=n.data??this.data,this.routes=n.routes??this.routes,this.fallback=n.fallback??this.fallback,this.nav=n.nav??this.nav})}_clone(){return new es(this.id,this.path,this.title,this.redirectTo,this.caseSensitive,this.transitionPlan,this.viewport,this.data,this.routes,this.fallback,this._component,this.nav)}_getFallback(e,t,s){const n=this.fallback;return typeof n=="function"&&!W.isType(n)?n(e,t,s):n}_getComponentName(){try{return this._getComponent().name}catch{return"UNRESOLVED-NAVIGATION-STRATEGY"}}_getComponent(e,t,s,n){if(e==null){if(this._currentComponent!=null)return this._currentComponent;if(this._isNavigationStrategy)throw new Error(q(3558,this.id));return this._currentComponent=this._component}return this._currentComponent??(this._currentComponent=this._isNavigationStrategy?this._component.getComponent(e,t,s,n):this._component)}_handleNavigationStart(){this._isNavigationStrategy&&(this._currentComponent=null)}toString(){let e=`RConf(id: ${this.id}, isNavigationStrategy: ${this._isNavigationStrategy}`;return e+=`, path: [${this.path.join(",")}]`,this.redirectTo&&(e+=`, redirectTo: ${this.redirectTo}`),this.caseSensitive&&(e+=`, caseSensitive: ${this.caseSensitive}`),this.transitionPlan!=null&&(e+=`, transitionPlan: ${this.transitionPlan}`),e+=`, viewport: ${this.viewport}`,this._currentComponent!=null&&(e+=`, component: ${this._currentComponent.name}`),`${e})`}}const ki={name:si("route-configuration"),isConfigured(i){return It.has(ki.name,i)},configure(i,e){const t=es._create(i,e);return It.define(t,e,ki.name),e},getConfig(i){return ki.isConfigured(i)||ki.configure({},i),It.get(ki.name,i)}};function gC(i){return function(e,t){return t.addInitializer(function(){ki.configure(i,this)}),e}}function Pr(i,e,t,s,n){if(C_(i))return es._create(i,null);const[r,o]=Rr(i,n);return r.type===5?es._create({...i,nav:!1},null):R(o,a=>{const l=a.Type,c=ki.getConfig(l);return La(i)?c._applyChildRouteConfig(i,t):e?c._clone():!c._configurationFromHookApplied&&r.type===4&&typeof i.getRouteConfig=="function"?R(c._applyFromConfigurationHook(i,t,s),()=>c):c})}function Rr(i,e){const t=I_(i);let s;switch(t.type){case 5:return[t,null];case 0:{if(e==null)throw new Error(q(3551));let r=e.component.dependencies.find(o=>Ma(o)&&o.name===t.value)??W.find(e.container,t.value);if(r===null)throw new Error(q(3552,t.value,e));r instanceof Me||(r=Me.create(r),W.define(r)),s=r;break}case 2:s=t.value;break;case 4:s=W.getDefinition(t.value.constructor);break;case 3:if(e==null)throw new Error(q(3553));s=e._resolveLazy(t.value);break}return[t,s]}function I_(i){return La(i)?I_(i.component):st.create(i)}const sa=["?","#","/","+","(",")","@","!","=",",","&","'","~",";"];class _C{get _done(){return this._rest.length===0}constructor(e){this._input=e,this._buffers=[],this._bufferIndex=0,this._index=0,this._rest=e}_startsWith(...e){const t=this._rest;return e.some(function(s){return t.startsWith(s)})}_consumeOptional(e){return this._startsWith(e)?(this._rest=this._rest.slice(e.length),this._index+=e.length,this._append(e),!0):!1}_consume(e){this._consumeOptional(e)||this._expect(`'${e}'`)}_expect(e){throw new Error(q(3500,e,this._index,this._input,this._rest,this._rest))}_ensureDone(){if(!this._done)throw new Error(q(3501,this._rest,this._index,this._input))}_advance(){const e=this._rest[0];this._rest=this._rest.slice(1),++this._index,this._append(e)}_record(){this._buffers[this._bufferIndex++]=""}_playback(){const e=--this._bufferIndex,t=this._buffers,s=t[e];return t[e]="",s}_discard(){this._buffers[--this._bufferIndex]=""}_append(e){const t=this._bufferIndex,s=this._buffers;for(let n=0;n<t;++n)s[n]+=e}}const zd=new Map;class Ii{get kind(){return"Route"}constructor(e,t,s,n){this.isAbsolute=e,this.root=t,this.queryParams=s,this.fragment=n}static parse(e){const t=e.toString();let s=zd.get(t);return s===void 0&&zd.set(t,s=Ii._$parse(e)),s}static _$parse(e){const t=e.path;if(t==="")return new Ii(!1,Tr.Empty,e.query,e.fragment);const s=new _C(t);s._record();const n=s._consumeOptional("/"),r=Da._parse(s);return s._ensureDone(),s._discard(),new Ii(n,r,e.query,e.fragment)}toInstructionTree(e){return new rt(e,this.isAbsolute,this.root._toInstructions(0,0),ta(this.queryParams,e.queryParams,!0),this.fragment??e.fragment)}}class Da{get kind(){return"CompositeSegment"}constructor(e){this.siblings=e}static _parse(e){e._record();const t=e._consumeOptional("+"),s=[];do s.push(ia._parse(e));while(e._consumeOptional("+"));return!t&&s.length===1?(e._discard(),s[0]):(e._discard(),new Da(s))}_toInstructions(e,t){switch(this.siblings.length){case 0:return[];case 1:return this.siblings[0]._toInstructions(e,t);case 2:return[...this.siblings[0]._toInstructions(e,0),...this.siblings[1]._toInstructions(0,t)];default:return[...this.siblings[0]._toInstructions(e,0),...this.siblings.slice(1,-1).flatMap(function(s){return s._toInstructions(0,0)}),...this.siblings[this.siblings.length-1]._toInstructions(0,t)]}}}class ia{get kind(){return"ScopedSegment"}constructor(e,t){this.left=e,this.right=t}static _parse(e){e._record();const t=Ah._parse(e);if(e._consumeOptional("/")){const s=ia._parse(e);return e._discard(),new ia(t,s)}return e._discard(),t}_toInstructions(e,t){const s=this.left._toInstructions(e,0),n=this.right._toInstructions(0,t);let r=s[s.length-1];for(;r.children.length>0;)r=r.children[r.children.length-1];return r.children.push(...n),s}}class Ah{get kind(){return"SegmentGroup"}constructor(e){this.expression=e}static _parse(e){if(e._record(),e._consumeOptional("(")){const t=Da._parse(e);return e._consume(")"),e._discard(),new Ah(t)}return e._discard(),Tr._parse(e)}_toInstructions(e,t){return this.expression._toInstructions(e+1,t+1)}}class Tr{get kind(){return"Segment"}static get Empty(){return new Tr(Or.Empty,Br.Empty,!0)}constructor(e,t,s){this.component=e,this.viewport=t,this.scoped=s}static _parse(e){e._record();const t=Or._parse(e),s=Br._parse(e),n=!e._consumeOptional("!");return e._discard(),new Tr(t,s,n)}_toInstructions(e,t){return[Qe.create({component:this.component.name,params:this.component.parameterList._toObject(),viewport:this.viewport.name,open:e,close:t})]}}class Or{get kind(){return"Component"}static get Empty(){return new Or("",Mr.Empty)}constructor(e,t){switch(this.name=e,this.parameterList=t,e.charAt(0)){case":":this.isParameter=!0,this.isStar=!1,this.isDynamic=!0,this.parameterName=e.slice(1);break;case"*":this.isParameter=!1,this.isStar=!0,this.isDynamic=!0,this.parameterName=e.slice(1);break;default:this.isParameter=!1,this.isStar=!1,this.isDynamic=!1,this.parameterName=e;break}}static _parse(e){if(e._record(),e._record(),!e._done)if(e._startsWith("./"))e._advance();else if(e._startsWith("../"))e._advance(),e._advance();else for(;!e._done&&!e._startsWith(...sa);)e._advance();const t=e._playback();t.length===0&&e._expect("component name");const s=Mr._parse(e);return e._discard(),new Or(t,s)}}class Br{get kind(){return"Viewport"}static get Empty(){return new Br("")}constructor(e){this.name=e}static _parse(e){e._record();let t=null;if(e._consumeOptional("@")){for(e._record();!e._done&&!e._startsWith(...sa);)e._advance();t=decodeURIComponent(e._playback()),t.length===0&&e._expect("viewport name")}return e._discard(),new Br(t)}}class Mr{get kind(){return"ParameterList"}static get Empty(){return new Mr([])}constructor(e){this.expressions=e}static _parse(e){e._record();const t=[];if(e._consumeOptional("(")){do if(t.push(na._parse(e,t.length)),!e._consumeOptional(","))break;while(!e._done&&!e._startsWith(")"));e._consume(")")}return e._discard(),new Mr(t)}_toObject(){const e={};for(const t of this.expressions)e[t.key]=t.value;return e}}class na{get kind(){return"Parameter"}static get Empty(){return new na("","")}constructor(e,t){this.key=e,this.value=t}static _parse(e,t){for(e._record(),e._record();!e._done&&!e._startsWith(...sa);)e._advance();let s=e._playback();s.length===0&&e._expect("parameter key");let n;if(e._consumeOptional("=")){for(e._record();!e._done&&!e._startsWith(...sa);)e._advance();n=decodeURIComponent(e._playback()),n.length===0&&e._expect("parameter value")}else n=s,s=t.toString();return e._discard(),new na(s,n)}}class mC{constructor(e,t){this.viewportName=e,this.componentName=t}toString(){return`VR(viewport:'${this.viewportName}',component:'${this.componentName}')`}}const Ud=new WeakMap;class ra{get _currState(){return this._state&16256}set _currState(e){this._state=this._state&127|e}get _nextState(){return this._state&127}set _nextState(e){this._state=this._state&16256|e}constructor(e,t,s){this.viewport=e,this.hostController=t,this._isActive=!1,this._curCA=null,this._nextCA=null,this._state=8256,this._$plan="replace",this._currNode=null,this._nextNode=null,this._currTransition=null,this._cancellationPromise=null,this._logger=s.container.get(Le).scopeTo(`ViewportAgent<${s.routeConfigContext._friendlyPath}>`),I(this._logger,3300)}static for(e,t){let s=Ud.get(e);if(s===void 0){const n=Ye.getCachedOrThrow(e);Ud.set(e,s=new ra(e,n,t))}return s}_activateFromViewport(e,t){const s=this._currTransition;s!==null&&Gt(s),this._isActive=!0;const n=this._logger.scopeTo("activateFromViewport()");switch(this._nextState){case 64:switch(this._currState){case 8192:I(n,3301,this);return;case 4096:return I(n,3302,this),this._curCA._activate(e,t);default:this._unexpectedState("activateFromViewport 1")}case 2:{if(this._currTransition===null)throw new Error(q(3350,this));I(n,3303,this);const r=We._start(a=>{this._activate(e,this._currTransition,a)}),o=new Promise(a=>{r._continueWith(()=>{a()})});return r._start()._done?void 0:o}default:this._unexpectedState("activateFromViewport 2")}}_deactivateFromViewport(e,t){const s=this._currTransition;s!==null&&Gt(s),this._isActive=!1;const n=this._logger.scopeTo("deactivateFromViewport()");switch(this._currState){case 8192:I(n,3304,this);return;case 4096:return I(n,3305,this),this._curCA._deactivate(e,t);case 128:I(n,3306,this);return;default:{if(this._currTransition===null)throw new Error(q(3351,this));I(n,3307,this);const r=We._start(a=>{this._deactivate(e,this._currTransition,a)}),o=new Promise(a=>{r._continueWith(()=>{a()})});return r._start()._done?void 0:o}}}_handles(e){if(!this._isAvailable())return!1;const t=this.viewport,s=e.viewportName,n=t.name,r=this._logger.scopeTo("handles()");if(s!==vn&&n!==s)return I(r,3308,e,n),!1;const o=t.usedBy;return o.length>0&&!o.split(",").includes(e.componentName)?(I(r,3309,e,o),!1):(I(r,3310,n,e),!0)}_isAvailable(){const e=this._logger.scopeTo("isAvailable()");return this._isActive?this._nextState!==64?(I(e,3312,this._nextNode),!1):!0:(I(e,3311),!1)}_canUnload(e,t){if(this._currTransition===null&&(this._currTransition=e),Gt(e),e.guardsResult!==!0)return;t._push();const s=this._logger.scopeTo("canUnload()");R(this._cancellationPromise,()=>{We._start(n=>{I(s,3313,this);for(const r of this._currNode.children)r.context.vpa._canUnload(e,n)})._continueWith(n=>{switch(this._currState){case 4096:switch(I(s,3314,this),this._$plan){case"none":this._currState=1024;return;case"invoke-lifecycles":case"replace":this._currState=2048,n._push(),We._start(r=>{I(s,3315,this),this._curCA._canUnload(e,this._nextNode,r)})._continueWith(()=>{I(s,3316,this),this._currState=1024,n._pop()})._start();return}case 8192:I(s,3317,this);return;default:e._handleError(new Error(`Unexpected state at canUnload of ${this}`))}})._continueWith(()=>{t._pop()})._start()})}_canLoad(e,t){if(this._currTransition===null&&(this._currTransition=e),Gt(e),e.guardsResult!==!0)return;t._push();const s=this._logger.scopeTo("canLoad()");We._start(n=>{switch(this._nextState){case 32:switch(I(s,3318,this),this._nextState=16,this._$plan){case"none":return;case"invoke-lifecycles":return this._curCA._canLoad(e,this._nextNode,n);case"replace":n._push(),R(this._nextNode.context._createComponentAgent(this.hostController,this._nextNode),r=>{(this._nextCA=r)._canLoad(e,this._nextNode,n),n._pop()})}case 64:I(s,3319,this);return;default:this._unexpectedState("canLoad")}})._continueWith(n=>{if(e.guardsResult!==!0){I(s,3354,e.guardsResult,this._nextCA);return}const r=this._nextNode;switch(this._$plan){case"none":case"invoke-lifecycles":{I(s,3320,r,this._$plan),n._push();const o=r.context;R(o.routeConfigContext.allResolved,()=>R(R(le(...r.residue.splice(0).map(a=>Si(this._logger,r,a))),()=>le(...o.getAvailableViewportAgents().reduce((a,l)=>{const c=l.viewport,u=c.default;return u===null||a.push(Si(this._logger,r,Qe.create({component:u,viewport:c.name}))),a},[]))),()=>{n._pop()}));return}case"replace":I(s,3321,r);return}})._continueWith(n=>{switch(this._nextState){case 16:I(s,3322,this),this._nextState=8;for(const r of this._nextNode.children)r.context.vpa._canLoad(e,n);return;case 64:return;default:this._unexpectedState("canLoad")}})._continueWith(()=>{I(s,3323,this),t._pop()})._start()}_unloading(e,t){Gt(e),Un(this,e),t._push();const s=this._logger.scopeTo("unloading()");We._start(n=>{I(s,3324,this);for(const r of this._currNode.children)r.context.vpa._unloading(e,n)})._continueWith(n=>{switch(this._currState){case 1024:switch(I(s,3325,this),this._$plan){case"none":this._currState=256;return;case"invoke-lifecycles":case"replace":this._currState=512,n._push(),We._start(r=>{I(s,3326,this),this._curCA._unloading(e,this._nextNode,r)})._continueWith(()=>{I(s,3327,this),this._currState=256,n._pop()})._start();return}case 8192:I(s,3328,this);for(const r of this._currNode.children)r.context.vpa._unloading(e,t);return;default:this._unexpectedState("unloading")}})._continueWith(()=>{t._pop()})._start()}_loading(e,t){Gt(e),Un(this,e),t._push();const s=this._logger.scopeTo("loading()");We._start(n=>{switch(this._nextState){case 8:switch(I(s,3329,this),this._nextState=4,this._$plan){case"none":return;case"invoke-lifecycles":return this._curCA._loading(e,this._nextNode,n);case"replace":return this._nextCA._loading(e,this._nextNode,n)}case 64:I(s,3330,this);return;default:this._unexpectedState("loading")}})._continueWith(n=>{switch(this._nextState){case 4:I(s,3331,this),this._nextState=2;for(const r of this._nextNode.children)r.context.vpa._loading(e,n);return;case 64:return;default:this._unexpectedState("loading")}})._continueWith(()=>{I(s,3332,this),t._pop()})._start()}_deactivate(e,t,s){Gt(t),Un(this,t),s._push();const n=this._logger.scopeTo("deactivate()");switch(this._currState){case 256:switch(I(n,3333,this),this._currState=128,this._$plan){case"none":case"invoke-lifecycles":s._pop();return;case"replace":{const r=this.hostController,o=this._curCA;t._run(()=>R(o._deactivate(e,r),()=>{e===null&&o._dispose()}),()=>{s._pop()})}}return;case 8192:I(n,3334,this),s._pop();return;case 128:I(n,3335,this),s._pop();return;default:this._unexpectedState("deactivate")}}_activate(e,t,s){Gt(t),Un(this,t),s._push();const n=this._logger.scopeTo("activate()");if(this._nextState===32){I(n,3336,this),We._start(r=>{this._canLoad(t,r)})._continueWith(r=>{this._loading(t,r)})._continueWith(r=>{this._activate(e,t,r)})._continueWith(()=>{s._pop()})._start();return}switch(this._nextState){case 2:I(n,3337,this),this._nextState=1,We._start(r=>{switch(this._$plan){case"none":case"invoke-lifecycles":return;case"replace":{const o=this.hostController;t._run(()=>(r._push(),this._nextCA._activate(e,o)),()=>{r._pop()})}}})._continueWith(r=>{this._processDynamicChildren(t,r)})._continueWith(()=>{s._pop()})._start();return;case 64:I(n,3338,this),s._pop();return;default:this._unexpectedState("activate")}}_swap(e,t){const s=this._logger.scopeTo("swap()");if(this._currState===8192){I(s,3339,this),this._activate(null,e,t);return}if(this._nextState===64){I(s,3340,this),this._deactivate(null,e,t);return}switch(Gt(e),Un(this,e),this._currState===256&&this._nextState===2||this._unexpectedState("swap"),this._currState=128,this._nextState=1,this._$plan){case"none":case"invoke-lifecycles":{I(s,3341,this);const n=pc(this._nextNode.children,this._currNode.children);for(const r of n)r.context.vpa._swap(e,t);return}case"replace":{I(s,3342,this);const n=this.hostController,r=this._curCA,o=this._nextCA;t._push(),We._start(a=>{e._run(()=>(a._push(),R(r._deactivate(null,n),()=>r._dispose())),()=>{a._pop()})})._continueWith(a=>{e._run(()=>(a._push(),o._activate(null,n)),()=>{a._pop()})})._continueWith(a=>{this._processDynamicChildren(e,a)})._continueWith(()=>{t._pop()})._start();return}}}_processDynamicChildren(e,t){I(this._logger,3343,this);const s=this._nextNode;e._run(()=>{t._push();const n=s.context;return R(n.routeConfigContext.allResolved,()=>{const r=s.children.slice();return R(le(...s.residue.splice(0).map(o=>Si(this._logger,s,o))),()=>R(le(...n.getAvailableViewportAgents().reduce((o,a)=>{const l=a.viewport,c=l.default;return c===null||o.push(Si(this._logger,s,Qe.create({component:c,viewport:l.name}))),o},[])),()=>s.children.filter(o=>!r.includes(o))))})},n=>{We._start(r=>{for(const o of n)e._run(()=>(r._push(),o.context.vpa._canLoad(e,r)),()=>{r._pop()})})._continueWith(r=>{if(e.guardsResult===!0)for(const o of n)e._run(()=>(r._push(),o.context.vpa._loading(e,r)),()=>{r._pop()})})._continueWith(r=>{if(e.guardsResult===!0)for(const o of n)e._run(()=>(r._push(),o.context.vpa._activate(null,e,r)),()=>{r._pop()})})._continueWith(()=>{t._pop()})._start()})}_scheduleUpdate(e,t){var n;switch(this._nextState){case 64:this._nextNode=t,this._nextState=32;break;default:this._unexpectedState("scheduleUpdate 1")}switch(this._currState){case 8192:case 4096:case 1024:break;default:this._unexpectedState("scheduleUpdate 2")}const s=((n=this._curCA)==null?void 0:n._routeNode)??null;s===null||s.component!==t.component?this._$plan="replace":this._$plan=t.context.routeConfigContext.config._getTransitionPlan(s,t,e.transitionPlan),I(this._logger,3344,this)}_cancelUpdate(){var s,n;this._currNode!==null&&this._currNode.children.forEach(function(r){r.context.vpa._cancelUpdate()}),this._nextNode!==null&&this._nextNode.children.forEach(function(r){r.context.vpa._cancelUpdate()}),I(this._logger,3345,this._nextNode);let e=null,t=null;switch(this._currState){case 8192:case 4096:this._currTransition=null;break;case 2048:case 1024:this._currState=4096,this._currTransition=null;break;case 512:case 256:case 128:e=R((s=this._curCA)==null?void 0:s._deactivate(null,this.hostController),()=>{var r;(r=this._curCA)==null||r._dispose(),this._currState=8192,this._curCA=null});break}switch(this._nextState){case 64:case 32:case 16:case 8:this._nextNode=null,this._nextState=64;break;case 4:case 2:case 1:{t=R((n=this._nextCA)==null?void 0:n._deactivate(null,this.hostController),()=>{var r;(r=this._nextCA)==null||r._dispose(),this._$plan="replace",this._nextState=64,this._nextCA=null,this._nextNode=null});break}}e!==null&&t!==null&&(this._cancellationPromise=R(le(e,t),()=>{this._currTransition=null,this._cancellationPromise=null}))}_endTransition(){if(this._currNode!==null&&this._currNode.children.forEach(function(e){e.context.vpa._endTransition()}),this._nextNode!==null&&this._nextNode.children.forEach(function(e){e.context.vpa._endTransition()}),this._currTransition!==null){const e=this._logger.scopeTo("endTransition()");switch(Gt(this._currTransition),this._nextState){case 64:switch(this._currState){case 8192:case 128:I(e,3346,this),this._currState=8192,this._curCA=null;break;default:this._unexpectedState("endTransition 1")}break;case 1:switch(this._currState){case 8192:case 128:switch(this._$plan){case"none":I(e,3347,this),this._currState=4096;break;case"invoke-lifecycles":I(e,3347,this),this._currState=4096,this._curCA._routeNode=this._nextNode;break;case"replace":I(e,3348,this),this._currState=4096,this._curCA=this._nextCA;break}this._currNode=this._nextNode;break;default:this._unexpectedState("endTransition 2")}break;default:this._unexpectedState("endTransition 3")}this._$plan="replace",this._nextState=64,this._nextNode=null,this._nextCA=null,this._currTransition=null}}toString(){return`VPA(state:${vC(this._state)},plan:'${this._$plan}',n:${this._nextNode},c:${this._currNode},viewport:${this.viewport})`}_dispose(){var e;I(this._logger,3349,this),(e=this._curCA)==null||e._dispose()}_unexpectedState(e){throw new Error(q(3352,e,this))}}function Un(i,e){if(e.guardsResult!==!0)throw new Error(q(3353,e.guardsResult,i))}function Gt(i){if(i.error!==void 0&&!i.erredWithUnknownRoute)throw i.error}const Qd=new Map;function vC(i){let e=Qd.get(i);return e===void 0&&Qd.set(i,e=bC(i)),e}function bC(i){const e=[];return(i&8192)===8192&&e.push("currIsEmpty"),(i&4096)===4096&&e.push("currIsActive"),(i&2048)===2048&&e.push("currCanUnload"),(i&1024)===1024&&e.push("currCanUnloadDone"),(i&512)===512&&e.push("currUnload"),(i&256)===256&&e.push("currUnloadDone"),(i&128)===128&&e.push("currDeactivate"),(i&64)===64&&e.push("nextIsEmpty"),(i&32)===32&&e.push("nextIsScheduled"),(i&16)===16&&e.push("nextCanLoad"),(i&8)===8&&e.push("nextCanLoadDone"),(i&4)===4&&e.push("nextLoad"),(i&2)===2&&e.push("nextLoadDone"),(i&1)===1&&e.push("nextActivate"),e.join("|")}class Lr{get root(){return this._tree.root}get isInstructionsFinalized(){return this._isInstructionsFinalized}constructor(e,t,s,n,r,o,a,l,c,u,h,p,d){this.path=e,this.finalPath=t,this.context=s,this._originalInstruction=n,this.instruction=r,this.params=o,this.queryParams=a,this.fragment=l,this.data=c,this._viewport=u,this.title=h,this.component=p,this.residue=d,this._version=1,this._isInstructionsFinalized=!1,this.children=[],this._originalInstruction??(this._originalInstruction=r)}static create(e){const{[Xt]:t,...s}=e.params??{};return new Lr(e.path,e.finalPath,e.context,e.originalInstruction??e.instruction,e.instruction,Object.freeze(s),e.queryParams??to,e.fragment??null,Object.freeze(e.data??Ge),e._viewport??null,e.title??null,e.component,e.residue??[])}contains(e,t=!1){var s,n;if(this.context.routeConfigContext===e.options.context.routeConfigContext){const r=this.children,o=e.children;for(let a=0,l=r.length;a<l;++a)for(let c=0,u=o.length;c<u;++c){const h=o[c],p=t?(s=h.recognizedRoute)==null?void 0:s.route.endpoint:null,d=r[a+c]??null,g=d!==null?d.isInstructionsFinalized?d.instruction:d._originalInstruction:null,f=(n=g==null?void 0:g.recognizedRoute)==null?void 0:n.route.endpoint;if(a+c<l&&(((p==null?void 0:p.equalsOrResidual(f))??!1)||((g==null?void 0:g.contains(h))??!1))){if(c+1===u)return!0}else break}}return this.children.some(function(r){return r.contains(e,t)})}_appendChild(e){this.children.push(e),e._setTree(this._tree)}_clearChildren(){for(const e of this.children)e._clearChildren(),e.context.vpa._cancelUpdate();this.children.length=0}getTitle(e){const t=[...this.children.map(s=>s.getTitle(e)),typeof this.title=="function"?this.title.call(void 0,this):this.title].filter(s=>s!==null);return t.length===0?null:t.join(e)}computeAbsolutePath(){if(this.context.routeConfigContext.isRoot)return"";const e=this.context.parent.node.computeAbsolutePath(),t=this.instruction.toUrlComponent(!1);return e.length>0?t.length>0?`${e}/${t}`:e:t}_setTree(e){this._tree=e;for(const t of this.children)t._setTree(e)}_finalizeInstruction(){this._isInstructionsFinalized=!0;const e=this.children.map(s=>s._finalizeInstruction()),t=this.instruction._clone();return t.children.splice(0,t.children.length,...e),this.instruction=t}_clone(){const e=new Lr(this.path,this.finalPath,this.context,this._originalInstruction,this.instruction,this.params,this.queryParams,this.fragment,this.data,this._viewport,this.title,this.component,[...this.residue]),t=this.children,s=t.length;for(let n=0;n<s;++n)e.children.push(t[n]._clone());return e._version=this._version+1,e.context.node===this&&(e.context.node=e),e}toString(){var n,r,o;const e=[],t=((n=this.context)==null?void 0:n.routeConfigContext.config._getComponentName())??"";t.length>0&&e.push(`c:'${t}'`);const s=((r=this.context)==null?void 0:r.routeConfigContext.config.path)??"";return s.length>0&&e.push(`path:'${s}'`),this.children.length>0&&e.push(`children:[${this.children.map(String).join(",")}]`),this.residue.length>0&&e.push(`residue:${this.residue.map(function(a){return typeof a=="string"?`'${a}'`:String(a)}).join(",")}`),`RN(ctx:'${(o=this.context)==null?void 0:o.routeConfigContext._friendlyPath}',${e.join(",")})`}}class yh{constructor(e,t,s,n){this.options=e,this.queryParams=t,this.fragment=s,this.root=n}contains(e,t=!1){return this.root.contains(e,t)}_clone(){const e=new yh(this.options._clone(),this.queryParams,this.fragment,this.root._clone());return e.root._setTree(this),e}_finalizeInstructions(){return new rt(this.options,!0,this.root.children.map(e=>e._finalizeInstruction()),this.queryParams,this.fragment)}_mergeQuery(e){this.queryParams=Object.freeze(ta(this.queryParams,e,!0))}toString(){return this.root.toString()}}function Si(i,e,t){var s;switch(i.trace("createAndAppendNodes(node:%s,vi:%s",e,t),t.component.type){case 0:switch(t.component.value){case"..":e=((s=e.context.parent)==null?void 0:s.node)??e,e._clearChildren();case".":return le(...t.children.map(n=>Si(i,e,n)));default:{i.trace("createAndAppendNodes invoking createNode");const n=e.context,r=t._clone();let o=t.recognizedRoute;if(o!==null)return Ds(i,e,js(i,e,t,o,r));if(t.children.length===0){const d=n.routeConfigContext._generateViewportInstruction(t);if(d!==null){e._tree._mergeQuery(d.query);const g=d.vi;return g.children.push(...t.children),Ds(i,e,js(i,e,g,g.recognizedRoute,t))}}let a=0,l=t.component.value,c=t;for(;c.children.length===1&&(c=c.children[0],c.component.type===0);)++a,l=`${l}/${c.component.value}`;o=n.routeConfigContext.recognize(l),i.trace("createNode recognized route: %s",o);const u=(o==null?void 0:o.residue)??null;i.trace("createNode residue:",u);const h=u===null;if(o===null||u===l){const d=n.routeConfigContext._generateViewportInstruction({component:t.component.value,params:t.params??Ge,open:t.open,close:t.close,viewport:t.viewport,children:t.children});if(d!==null)return e._tree._mergeQuery(d.query),Ds(i,e,js(i,e,d.vi,d.vi.recognizedRoute,t));const g=t.component.value;if(g==="")return;let f=t.viewport;(f===null||f.length===0)&&(f=vn);const _=n.getFallbackViewportAgent(f),b=_!==null?_.viewport._getFallback(t,e,n):n.routeConfigContext.config._getFallback(t,e,n);if(b===null)throw new Ch(q(3401,g,n.routeConfigContext._friendlyPath,f,g,n.routeConfigContext.component.name));if(typeof b=="string"){i.trace(`Fallback is set to '${b}'. Looking for a recognized route.`);const v=n.routeConfigContext.childRoutes.find(m=>m.id===b);if(v!==void 0)return Ds(i,e,Hd(i,v,e,t));i.trace(`No route configuration for the fallback '${b}' is found; trying to recognize the route.`);const $=n.routeConfigContext.recognize(b,!0);if($!==null&&$.residue!==b)return Ds(i,e,js(i,e,t,$,null))}return i.trace(`The fallback '${b}' is not recognized as a route; treating as custom element name.`),R(Pr(b,!1,n.routeConfigContext.config,null,n.routeConfigContext),v=>Ds(i,e,Hd(i,v,e,t)))}o.residue=null,t.component.value=h?l:l.slice(0,-(u.length+1));let p=!h;for(let d=0;d<a;++d){const g=t.children[0];if((u==null?void 0:u.startsWith(g.component.value))??!1){p=!1;break}t.viewport=g.viewport,t.children=g.children}return p&&t.children.unshift(Qe.create(u)),t.recognizedRoute=o,i.trace("createNode after adjustment vi:%s",t),Ds(i,e,js(i,e,t,o,r))}}case 3:case 4:case 2:{const n=e.context;return R(Rr(t.component.value,n.routeConfigContext)[1],r=>{const{vi:o,query:a}=n.routeConfigContext._generateViewportInstruction({component:r,params:t.params??Ge,open:t.open,close:t.close,viewport:t.viewport,children:t.children});return e._tree._mergeQuery(a),Ds(i,e,js(i,e,o,o.recognizedRoute,t))})}}}function js(i,e,t,s,n,r=s.route.endpoint.route){const o=e.context,a=e._tree;return R(r.handler,l=>{var m;if(r.handler=l,i.trace("creatingConfiguredNode(rdc:%s, vi:%s)",l,t),l.redirectTo===null){const y=(((m=t.viewport)==null?void 0:m.length)??0)>0,O=y?t.viewport:l.viewport;return R(Rr(l._getComponent(t,o,e,s.route),o.routeConfigContext)[1],P=>{const N=o._resolveViewportAgent(new mC(O,P.name));y||(t.viewport=N.viewport.name);const D=o.container.get(xs);return R(D.getRouteContext(N,P,null,N.hostController.container,o.routeConfigContext.config,o,l),j=>{i.trace("createConfiguredNode setting the context node");const fe=j.node=Lr.create({path:s.route.endpoint.route.path,finalPath:r.path,context:j,instruction:t,originalInstruction:n,params:s.route.params,queryParams:a.queryParams,fragment:a.fragment,data:l.data,_viewport:O,component:P,title:l.title,residue:t.children.slice()});return fe._setTree(e._tree),i.trace("createConfiguredNode(vi:%s) -> %s",t,fe),fe})})}const c=Ii.parse(fc.parse(r.path)),u=Ii.parse(fc.parse(l.redirectTo));let h,p;const d=[];switch(c.root.kind){case"ScopedSegment":case"Segment":h=c.root;break;default:throw new Error(q(3502,c.root.kind))}switch(u.root.kind){case"ScopedSegment":case"Segment":p=u.root;break;default:throw new Error(q(3502,u.root.kind))}let g,f,_=!1,b=!1;for(;!(_&&b);){if(_)g=null;else if(h.kind==="Segment")g=h,_=!0;else if(h.left.kind==="Segment")switch(g=h.left,h.right.kind){case"ScopedSegment":case"Segment":h=h.right;break;default:throw new Error(q(3502,h.right.kind))}else throw new Error(q(3502,h.left.kind));if(b)f=null;else if(p.kind==="Segment")f=p,b=!0;else if(p.left.kind==="Segment")switch(f=p.left,p.right.kind){case"ScopedSegment":case"Segment":p=p.right;break;default:throw new Error(q(3502,p.right.kind))}else throw new Error(q(3502,p.left.kind));f!==null&&(f.component.isDynamic&&((g==null?void 0:g.component.isDynamic)??!1)?d.push(s.route.params[f.component.parameterName]):d.push(f.component.name))}const v=d.filter(Boolean).join("/"),$=o.routeConfigContext.recognize(v);if($===null)throw new Ch(q(3402,v,o.routeConfigContext._friendlyPath,v,o.routeConfigContext.component.name));return js(i,e,Qe.create({recognizedRoute:$,component:v,children:t.children,viewport:t.viewport,open:t.open,close:t.close}),$,n)})}function Ds(i,e,t){return R(t,s=>(i.trace("appendNode($childNode:%s)",s),e._appendChild(s),s.context.vpa._scheduleUpdate(e._tree.options,s)))}function Hd(i,e,t,s){const n=new ca(new Oa(new w_(new b_(e.path[0],e.caseSensitive,e),[]),Ge),null);return s.children.length=0,js(i,t,s,n,null)}const to=Object.freeze(new URLSearchParams);function wC(i){return Pi(i)&&Object.prototype.hasOwnProperty.call(i,$_)===!0}function qd(i,e){return{...i,[$_]:e}}class Ch extends Error{}class oa{get erredWithUnknownRoute(){return this._erredWithUnknownRoute}constructor(e,t,s,n,r,o,a,l,c,u,h,p,d,g,f){this.id=e,this.prevInstructions=t,this.instructions=s,this.finalInstructions=n,this.instructionsChanged=r,this.trigger=o,this.options=a,this.managedState=l,this.previousRouteTree=c,this.routeTree=u,this.promise=h,this.resolve=p,this.reject=d,this.guardsResult=g,this.error=f,this._erredWithUnknownRoute=!1}static _create(e){return new oa(e.id,e.prevInstructions,e.instructions,e.finalInstructions,e.instructionsChanged,e.trigger,e.options,e.managedState,e.previousRouteTree,e.routeTree,e.promise,e.resolve,e.reject,e.guardsResult,void 0)}_run(e,t){if(this.guardsResult===!0)try{const s=e();s instanceof Promise?s.then(t).catch(n=>{this._handleError(n)}):t(s)}catch(s){this._handleError(s)}}_handleError(e){this._erredWithUnknownRoute=e instanceof Ch,this.reject(this.error=e)}toString(){return`T(id:${this.id},trigger:'${this.trigger}',instructions:${this.instructions})`}}const xs=lt.createInterface("IRouter",i=>i.singleton(aa));class aa{get _ctx(){const e=this._$ctx;if(e!==null)return e;if(!this._container.has(wt,!0))throw new Error(q(3271));return this._$ctx=this._container.get(wt)}get routeTree(){let e=this._routeTree;if(e===null){const t=this._ctx;e=this._routeTree=new yh(ss.create(this.options,{}),to,null,Lr.create({path:"",finalPath:"",context:t,instruction:null,component:W.getDefinition(t.routeConfigContext.config.component),title:t.routeConfigContext.config.title}))}return e}get currentTr(){return this._currentTr??(this._currentTr=oa._create({id:0,prevInstructions:this._instructions,instructions:this._instructions,finalInstructions:this._instructions,instructionsChanged:!0,trigger:"api",options:ss.create(this.options,{}),managedState:null,previousRouteTree:this.routeTree._clone(),routeTree:this.routeTree,resolve:null,reject:null,promise:null,guardsResult:!0,error:void 0}))}set currentTr(e){this._currentTr=e}get isNavigating(){return this._isNavigating}constructor(){this._$ctx=null,this._routeTree=null,this._currentTr=null,this._navigated=!1,this._navigationId=0,this._nextTr=null,this._locationChangeSubscription=null,this._hasTitleBuilder=!1,this._activeContexts=[],this._isNavigating=!1,this._container=S(Di),this._p=S(Fe),this._logger=S(Le).root.scopeTo("Router"),this._events=S(Na),this._locationMgr=S(x_),this.options=S(kh),this._routeConfigLookup=new WeakMap,this._vpaLookup=new Map,this._instructions=rt.create("",this.options,null,null),this._container.registerResolver(aa,Pt.instance(aa,this))}_resolveContext(e){return Es.resolve(this._ctx,e)}start(e){if(this._hasTitleBuilder=typeof this.options.buildTitle=="function",this._locationMgr.startListening(),this._locationChangeSubscription=this._events.subscribe("au:router:location-change",t=>{this._p.taskQueue.queueTask(()=>{const s=wC(t.state)?t.state:null,n=this.options,r=ss.create(n,{historyStrategy:"replace"}),o=rt.create(t.url,n,r,this._ctx);this._enqueue(o,t.trigger,s,null)})}),!this._navigated&&e)return this.load(this._locationMgr.getPath(),{historyStrategy:this.options.historyStrategy!=="none"?"replace":"none"})}stop(){var e;this._locationMgr.stopListening(),(e=this._locationChangeSubscription)==null||e.dispose()}load(e,t){return R(this.createViewportInstructions(e,t??null),s=>(I(this._logger,3250,s),this._enqueue(s,"api",null,null)))}isActive(e,t){const s=this._resolveContext(t),n=e instanceof rt?e:this.createViewportInstructions(e,{context:s,historyStrategy:this.options.historyStrategy});return I(this._logger,3251,n,s),this.routeTree.contains(n,!1)}getRouteContext(e,t,s,n,r,o,a){const l=n.get(Le).scopeTo("RouteContext");return R(this.getRouteConfigContext(a,t,s,n,r,(o==null?void 0:o.routeConfigContext)??null),c=>{let u=this._vpaLookup.get(e);u===void 0&&this._vpaLookup.set(e,u=new WeakMap);let h=u.get(c);if(h!==void 0)return I(l,3252,c),h;I(l,3253,c);const p=n.has(wt,!0)?n.get(wt):null;return u.set(c,h=new Es(e,p,n,this,c,this._locationMgr)),h})}getRouteConfigContext(e,t,s,n,r,o){return R(e instanceof es&&!e._isNavigationStrategy?e:Pr(typeof(s==null?void 0:s.getRouteConfig)=="function"?s:t.Type,!1,r,null,o),a=>{let l=this._routeConfigLookup.get(a);return l!=null||(l=new SC(o,t,a,n,this),this._routeConfigLookup.set(a,l)),l})}generatePath(e,t){return R(this.createViewportInstructions(gc(e),{context:t??this._ctx},!0),s=>s.toUrl(!0,this.options._urlParser))}createViewportInstructions(e,t,s){if(e instanceof rt)return e;let n=(t==null?void 0:t.context)??null;return n!==null&&(n=t.context=this._resolveContext(n)),(n??this._$ctx).createViewportInstructions(e,t,s)}_enqueue(e,t,s,n){const r=this.currentTr,o=this._logger;if(t!=="api"&&r.trigger==="api"&&r.instructions.equals(e))return Us(o,3254,t),!0;let a,l,c;const u=this.options.restorePreviousRouteTreeOnError;n===null||n.erredWithUnknownRoute||n.error!=null&&u?c=new Promise(function(p,d){a=p,l=d}):(Us(o,3255,n),c=n.promise,a=n.resolve,l=n.reject);const h=this._nextTr=oa._create({id:++this._navigationId,trigger:t,managedState:s,prevInstructions:r.finalInstructions,finalInstructions:e,instructionsChanged:!r.finalInstructions.equals(e),instructions:e,options:e.options,promise:c,resolve:a,reject:l,previousRouteTree:this.routeTree,routeTree:this._routeTree=this.routeTree._clone(),guardsResult:!0,error:void 0});if(Us(o,3256,h),!this._isNavigating)try{this._run(h)}catch(p){h._handleError(p)}return h.promise.then(p=>(Us(o,3257,h),p)).catch(p=>{if(A_(o,3270,h,p),h.erredWithUnknownRoute)this._cancelNavigation(h);else if(this._isNavigating=!1,this._events.publish(new dC(h.id,h.instructions,p)),u)this._cancelNavigation(h);else{const d=this._nextTr;d!==null?d.previousRouteTree=h.previousRouteTree:this._routeTree=h.previousRouteTree}throw p})}_run(e){this.currentTr=e,this._nextTr=null,this._isNavigating=!0;for(const n of this._activeContexts)n.routeConfigContext._handleNavigationStart();let t=this._resolveContext(e.options.context);const s=this._logger.scopeTo("run()");if(I(s,3258,e),this._events.publish(new cC(e.id,e.instructions,e.trigger,e.managedState)),this._nextTr!==null)return Us(s,3259,e),this._run(this._nextTr);e._run(()=>{const n=e.finalInstructions;I(s,3260,n);const r=this._ctx,o=e.routeTree;o.options=n.options,o.queryParams=r.node._tree.queryParams=n.queryParams,o.fragment=r.node._tree.fragment=n.fragment;const a=t.container.get(Le).scopeTo("RouteTree");n.isAbsolute&&(t=r),t===r&&(o.root._setTree(o),r.node=o.root);const l=t.routeConfigContext.allResolved instanceof Promise?" - awaiting promise":"";return a.trace(`updateRouteTree(rootCtx:%s,rt:%s,vit:%s)${l}`,r,o,n),R(t.routeConfigContext.allResolved,()=>P_(a,n,t,r.node))},()=>{const n=e.previousRouteTree.root.children,r=e.routeTree.root.children,o=pc(n,r);We._start(a=>{I(s,3261,n.length);for(const l of n)l.context.vpa._canUnload(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(a=>{I(s,3262,r.length);for(const l of r)l.context.vpa._canLoad(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(a=>{I(s,3263,n.length);for(const l of n)l.context.vpa._unloading(e,a)})._continueWith(a=>{I(s,3264,r.length);for(const l of r)l.context.vpa._loading(e,a)})._continueWith(a=>{I(s,3265,o.length);for(const l of o)l.context.vpa._swap(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(()=>{I(s,3266),o.forEach(function(l){l.context.vpa._endTransition()}),this._navigated=!0,this._instructions=e.finalInstructions=e.routeTree._finalizeInstructions(),this._isNavigating=!1;const a=e.finalInstructions.toUrl(!0,this.options._urlParser);switch(e.options._getHistoryStrategy(this._instructions)){case"none":break;case"push":this._locationMgr.pushState(qd(e.options.state,e.id),this.updateTitle(e),a);break;case"replace":this._locationMgr.replaceState(qd(e.options.state,e.id),this.updateTitle(e),a);break}this._events.publish(new hC(e.id,e.instructions,this._instructions)),e.resolve(!0),this._runNextTransition()})._start()})}updateTitle(e=this.currentTr){const t=this._getTitle(e);return t.length>0&&(this._p.document.title=t),this._p.document.title}_getTitle(e=this.currentTr){let t;if(this._hasTitleBuilder)t=this.options.buildTitle(e)??"";else switch(typeof e.options.title){case"function":t=e.options.title.call(void 0,e.routeTree.root)??"";break;case"string":t=e.options.title;break;default:t=e.routeTree.root.getTitle(e.options.titleSeparator)??"";break}return t}_subscribeNavigationStart(e){this._activeContexts.push(e)}_unsubscribeNavigationStart(e){const t=this._activeContexts.indexOf(e);t>-1&&this._activeContexts.splice(t,1)}_cancelNavigation(e){I(this._logger.scopeTo("cancelNavigation()"),3267,e);const s=e.previousRouteTree.root.children,n=e.routeTree.root.children;pc(s,n).forEach(function(a){a.context.vpa._cancelUpdate()}),this._instructions=e.prevInstructions,this._routeTree=e.previousRouteTree,this._isNavigating=!1;const o=e.guardsResult;if(this._events.publish(new uC(e.id,e.instructions,`guardsResult is ${o}`)),o===!1)e.resolve(!1),this._runNextTransition();else{let a;if(this._navigated&&(e.erredWithUnknownRoute||e.error!=null&&this.options.restorePreviousRouteTreeOnError))a=e.prevInstructions;else{if(o===!0)return;a=o}R(this._enqueue(a,"api",e.managedState,e),()=>{I(this._logger,3268,e)})}}_runNextTransition(){this._nextTr!==null&&(I(this._logger,3269,this._nextTr),this._p.taskQueue.queueTask(()=>{const e=this._nextTr;if(e!==null)try{this._run(e)}catch(t){e._handleError(t)}}))}}function P_(i,e,t,s){return i.trace("updateNode(ctx:%s,node:%s)",t,s),s.queryParams=e.queryParams,s.fragment=e.fragment,s.context.routeConfigContext.isRoot||s.context.vpa._scheduleUpdate(s._tree.options,s),s.context===t?(s._clearChildren(),R(le(...e.children.map(n=>Si(i,s,n))),()=>le(...t.getAvailableViewportAgents().reduce((n,r)=>{const o=r.viewport,a=o.default;return a===null||n.push(Si(i,s,Qe.create({component:a,viewport:o.name}))),n},[])))):le(...s.children.map(n=>P_(i,e,t,n)))}class Fa{constructor(e,t,s){this.path=e,this.query=t,this.fragment=s,this.id=`${e}?${(t==null?void 0:t.toString())??""}#${s??""}`}toString(){return this.id}static _create(e){let t=null;const s=e.indexOf("#");if(s>=0){const o=e.slice(s+1);t=decodeURIComponent(o),e=e.slice(0,s)}let n=null;const r=e.indexOf("?");if(r>=0){const o=e.slice(r+1);e=e.slice(0,r),n=Object.freeze(new URLSearchParams(o))}return new Fa(e,n??to,t)}}function R_(i,e,t){let s;typeof i=="string"?s=i:(s=i.path,e=i.query,t=i.fragment),e??(e=to);let n=e.toString();n=n===""?"":`?${n}`;const r=t!=null&&t.length>0?`#${encodeURIComponent(t)}`:"";return`${s}${n}${r}`}const fc=Object.freeze({parse(i){return Fa._create(i)},stringify(i,e,t){return R_(i,e,t)}}),AC=Object.freeze({parse(i){const e=i.indexOf("#");if(e>=0){const t=i.slice(e+1);i=decodeURIComponent(t)}return Fa._create(i)},stringify(i,e,t){return`/#/${R_(i,e,t)}`}});function yC(i,e){return typeof e=="function"?e(i):e}const kh=lt.createInterface("RouterOptions");class la{constructor(e,t,s,n,r,o,a){this.useUrlFragmentHash=e,this.useHref=t,this.historyStrategy=s,this.buildTitle=n,this.useNavigationModel=r,this.activeClass=o,this.restorePreviousRouteTreeOnError=a,this._urlParser=e?AC:fc}static create(e){return new la(e.useUrlFragmentHash??!1,e.useHref??!0,e.historyStrategy??"push",e.buildTitle??null,e.useNavigationModel??!0,e.activeClass??null,e.restorePreviousRouteTreeOnError??!0)}toString(){return`RO(${[["historyStrategy","history"]].map(([e,t])=>{const s=this[e];return`${t}:${typeof s=="function"?s:`'${s}'`}`}).join(",")})`}}class ss{constructor(e,t,s,n,r,o,a,l){this.historyStrategy=e,this.title=t,this.titleSeparator=s,this.context=n,this.queryParams=r,this.fragment=o,this.state=a,this.transitionPlan=l}static create(e,t){return new ss(t.historyStrategy??e.historyStrategy,t.title??null,t.titleSeparator??" | ",t.context??null,t.queryParams??null,t.fragment??"",t.state??null,t.transitionPlan??null)}_clone(){return new ss(this.historyStrategy,this.title,this.titleSeparator,this.context,{...this.queryParams},this.fragment,this.state===null?null:{...this.state},this.transitionPlan)}_getHistoryStrategy(e){return yC(e,this.historyStrategy)}}const vn="default";class Qe{constructor(e,t,s,n,r,o,a){this.open=e,this.close=t,this.recognizedRoute=s,this.component=n,this.viewport=r,this.params=o,this.children=a}static create(e){var s;if(e instanceof Qe)return e;if(eo(e)){const n=st.create(e.component),r=((s=e.children)==null?void 0:s.map(Qe.create))??[];return new Qe(e.open??0,e.close??0,e.recognizedRoute??null,n,e.viewport??null,Object.freeze(e.params??null),r)}const t=st.create(e);return new Qe(0,0,null,t,null,null,[])}contains(e){const t=this.children,s=e.children;if(t.length<s.length||!this.component.equals(e.component))return!1;const n=this.viewport??null,r=e.viewport??null;if(n!==null&&r!==null&&n!==r)return!1;for(let o=0,a=s.length;o<a;++o)if(!t[o].contains(s[o]))return!1;return!0}equals(e){const t=this.children,s=e.children;if(t.length!==s.length||!this.component.equals(e.component)||this.viewport!==e.viewport||!k_(this.params,e.params))return!1;for(let n=0,r=t.length;n<r;++n)if(!t[n].equals(s[n]))return!1;return!0}_clone(){return new Qe(this.open,this.close,this.recognizedRoute,this.component._clone(),this.viewport,this.params,[...this.children])}toUrlComponent(e=!0){const t=this.component.toUrlComponent(),s=this.viewport,n=t.length===0||s===null||s.length===0||s===vn?"":`@${s}`,r=`${"(".repeat(this.open)}${t}${CC(this.params)}${n}${")".repeat(this.close)}`,o=e?this.children.map(a=>a.toUrlComponent()).join("+"):"";return r.length>0?o.length>0?`${r}/${o}`:r:o}toString(){const e=`c:${this.component}`,t=this.viewport===null||this.viewport.length===0?"":`viewport:${this.viewport}`,s=this.children.length===0?"":`children:[${this.children.map(String).join(",")}]`;return`VPI(${[e,t,s].filter(Boolean).join(",")})`}}function CC(i){if(i===null)return"";const e=Object.keys(i),t=e.length;if(t===0)return"";const s=Array(t),n=[],r=[];for(const o of e)dn(o)?n.push(Number(o)):r.push(o);for(let o=0;o<t;++o){const a=n.indexOf(o);if(a>-1)s[o]=i[o],n.splice(a,1);else{const l=r.shift();s[o]=`${l}=${i[l]}`}}return`(${s.join(",")})`}class rt{constructor(e,t,s,n,r){this.options=e,this.isAbsolute=t,this.children=s,this.queryParams=n,this.fragment=r,Object.freeze(n)}static create(e,t,s,n,r){s=s instanceof ss?s:ss.create(t,s??Ge);let o=s.context;!(o instanceof Es)&&n!=null&&(o=s.context=Es.resolve(n,o));const a=o!=null;if(e instanceof Array){const l=e.length,c=new Array(l),u=new URLSearchParams(s.queryParams??Ge),h=new Array(l);for(let p=0;p<l;p++){const d=e[p];h[p]=R(a?o.routeConfigContext._generateViewportInstruction(d,r):null,g=>{g!==null?(c[p]=g.vi,ta(u,g.query,!1)):c[p]=Qe.create(d)})}return R(le(...h),()=>new rt(s,!1,c,u,s.fragment))}return typeof e=="string"?Ii.parse(t._urlParser.parse(e)).toInstructionTree(s):R(a?o.routeConfigContext._generateViewportInstruction(eo(e)?{...e,params:e.params??Ge}:{component:e,params:Ge},r):null,l=>{const c=new URLSearchParams(s.queryParams??Ge);return l!==null?new rt(s,!1,[l.vi],ta(c,l.query,!1),s.fragment):new rt(s,!1,[Qe.create(e)],c,s.fragment)})}equals(e){const t=this.children,s=e.children;if(t.length!==s.length)return!1;for(let n=0,r=t.length;n<r;++n)if(!t[n].equals(s[n]))return!1;return!0}toUrl(e,t){let s="";if(!e){const r=[];let o=this.options.context;if(o!=null&&!(o instanceof Es))throw new Error("Invalid operation; incompatible navigation context.");for(;o!=null&&!o.routeConfigContext.isRoot;){const a=o.vpa,l=a._currState===4096?a._currNode:a._nextNode;if(l==null)throw new Error("Invalid operation; nodes of the viewport agent are not set.");r.splice(0,0,l.instruction.toUrlComponent()),o=o.parent}r[0]===""&&r.splice(0,1),s=r.join("/")}const n=this.toPath();return t.stringify(s.length>0?`${s}/${n}`:n,this.queryParams,this.fragment)}toPath(){return this.children.map(e=>e.toUrlComponent()).join("+")}toString(){return`[${this.children.map(String).join(",")}]`}}class so{constructor(e){this.getComponent=e}}class st{constructor(e,t){this.type=e,this.value=t}static create(e){if(e instanceof st)return e;if(typeof e=="string")return new st(0,e);if(Pi(e)||Ke("function/class or object","",e),e instanceof so)return new st(5,e);if(typeof e=="function")if(W.isType(e)){const t=W.getDefinition(e);return new st(2,t)}else return st.create(e());if(e instanceof Promise)return new st(3,e);if(eo(e)){const t=Qe.create(e);return new st(1,t)}if(Ra(e))return new st(4,e);if(e instanceof Me)return new st(2,e);if(Ma(e)){const t=Me.create(e);return W.define(t),new st(2,t)}throw new Error(q(3400,y_(e)))}equals(e){switch(this.type){case 5:case 2:case 4:case 3:case 0:return this.type===e.type&&this.value===e.value;case 1:return this.type===e.type&&this.value.equals(e.value)}}_clone(){return new st(this.type,this.value)}toUrlComponent(){switch(this.type){case 2:return this.value.name;case 4:case 3:case 5:throw new Error(q(3403,this.type));case 1:return this.value.toUrlComponent();case 0:return this.value}}toString(){switch(this.type){case 2:return`CEDef(name:'${this.value.name}')`;case 5:return"NS";case 3:return"Promise";case 4:return`VM(name:'${W.getDefinition(this.value.constructor).name}')`;case 1:return this.value.toString();case 0:return`'${this.value}'`}}}class kC{constructor(e,t,s,n,r){this._instance=e,this._controller=t,this._routeNode=s,this._ctx=n,this._routerOptions=r,this._logger=t.container.get(Le).scopeTo(`ComponentAgent<${n.routeConfigContext._friendlyPath}>`),I(this._logger,3050);const o=t.lifecycleHooks;this._canLoadHooks=(o.canLoad??[]).map(a=>a.instance),this._loadHooks=(o.loading??[]).map(a=>a.instance),this._canUnloadHooks=(o.canUnload??[]).map(a=>a.instance),this._unloadHooks=(o.unloading??[]).map(a=>a.instance),this._hasCanLoad="canLoad"in e,this._hasLoad="loading"in e,this._hasCanUnload="canUnload"in e,this._hasUnload="unloading"in e}_activate(e,t){const s=this._controller,n=this._ctx.vpa.hostController;switch(s.mountTarget){case Yn.host:case Yn.shadowRoot:n.host.appendChild(s.host);break;case Yn.location:n.host.append(s.location.$start,s.location);break;case Yn.none:throw new Error("Invalid mount target for routed component")}if(e===null)return I(this._logger,3051),this._controller.activate(this._controller,t);I(this._logger,3052),this._controller.activate(e,t)}_deactivate(e,t){var n,r,o,a;const s=this._controller;if((n=s.host)==null||n.remove(),(r=s.location)==null||r.remove(),(a=(o=s.location)==null?void 0:o.$start)==null||a.remove(),e===null)return I(this._logger,3053),s.deactivate(s,t);I(this._logger,3054),s.deactivate(e,t)}_dispose(){I(this._logger,3055),this._controller.dispose()}_canUnload(e,t,s){I(this._logger,3056,t,this._canUnloadHooks.length),s._push();let n=Promise.resolve();for(const r of this._canUnloadHooks)s._push(),n=n.then(()=>new Promise(o=>{if(e.guardsResult!==!0){s._pop(),o();return}e._run(()=>r.canUnload(this._instance,t,this._routeNode),a=>{e.guardsResult===!0&&a===!1&&(e.guardsResult=!1),s._pop(),o()})}));this._hasCanUnload&&(s._push(),n=n.then(()=>{if(e.guardsResult!==!0){s._pop();return}e._run(()=>this._instance.canUnload(t,this._routeNode),r=>{e.guardsResult===!0&&r===!1&&(e.guardsResult=!1),s._pop()})})),s._pop()}_canLoad(e,t,s){I(this._logger,3057,t,this._canLoadHooks.length);const n=this._ctx.root;s._push();let r=Promise.resolve();for(const o of this._canLoadHooks)s._push(),r=r.then(()=>new Promise(a=>{if(e.guardsResult!==!0){s._pop(),a();return}e._run(()=>o.canLoad(this._instance,t.params,t,this._routeNode),l=>{e.guardsResult===!0&&l!=null&&l!==!0&&(e.guardsResult=l===!1?!1:rt.create(l,this._routerOptions,null,n)),s._pop(),a()})}));this._hasCanLoad&&(s._push(),r=r.then(()=>{if(e.guardsResult!==!0){s._pop();return}e._run(()=>this._instance.canLoad(t.params,t,this._routeNode),o=>{e.guardsResult===!0&&o!=null&&o!==!0&&(e.guardsResult=o===!1?!1:rt.create(o,this._routerOptions,null,n)),s._pop()})})),s._pop()}_unloading(e,t,s){I(this._logger,3058,t,this._unloadHooks.length),s._push();for(const n of this._unloadHooks)e._run(()=>(s._push(),n.unloading(this._instance,t,this._routeNode)),()=>{s._pop()});this._hasUnload&&e._run(()=>(s._push(),this._instance.unloading(t,this._routeNode)),()=>{s._pop()}),s._pop()}_loading(e,t,s){I(this._logger,3059,t,this._loadHooks.length),s._push();for(const n of this._loadHooks)e._run(()=>(s._push(),n.loading(this._instance,t.params,t,this._routeNode)),()=>{s._pop()});this._hasLoad&&e._run(()=>(s._push(),this._instance.loading(t.params,t,this._routeNode)),()=>{s._pop()}),s._pop()}}const wt=lt.createInterface("IRouteContext"),T_=Object.freeze(["string","object","function"]);function $C(i){if(i==null)return!1;const e=i.params,t=i.component;return typeof e=="object"&&e!==null&&t!=null&&T_.includes(typeof t)&&!(t instanceof Promise)&&!(t instanceof so)}function gc(i){_e(i)||(i=[i]);const e=i.length;for(let s=0;s<e;++s){const n=t(i[s]);if(n==null)throw new Error(q(3404,i));i[s]=n}return i;function t(s){let n;return typeof s=="string"||typeof s=="function"?(n=s,s=null):n=s.component,n==null||!T_.includes(typeof n)||n instanceof Promise||n instanceof so?null:{...s,component:n,params:(s==null?void 0:s.params)??Ge}}}class Es{get isRoot(){return this.parent===null}get node(){const e=this._node;if(e===null)throw new Error(q(3171,this));return e}set node(e){(this._prevNode=this._node)!==e&&(this._node=e,I(this._logger,3151,this._prevNode,e))}get vpa(){const e=this._vpa;if(e===null)throw new Error(q(3172,this));return e}constructor(e,t,s,n,r,o){this.parent=t,this._router=n,this.routeConfigContext=r,this._locationMgr=o,this._childViewportAgents=[],this._prevNode=null,this._node=null,this._vpa=e,t===null?this.root=this:this.root=t.root,this._logger=s.get(Le).scopeTo(`RouteContext<${this.routeConfigContext._friendlyPath}>`),I(this._logger,3150),this._router._subscribeNavigationStart(this);const a=this.container=s.createChild();this._platform=a.get(Fe),a.registerResolver(Yr,this._hostControllerProvider=new $e,!0);const l=new $e("IRouteContext",this);a.registerResolver(wt,l),a.registerResolver(Es,l),n.options.useNavigationModel&&a.get(Na).subscribe("au:router:navigation-end",()=>{r.navigationModel._setIsActive(n,this)})}static setRoot(e){const t=e.get(Le).scopeTo("RouteContext");e.has(mn,!0)||Co(new Error(q(3167)),t),e.has(wt,!0)&&Co(new Error(q(3168)),t);const{controller:s}=e.get(mn);s===void 0&&Co(new Error(q(3169)),t);const n=e.get(xs);return R(n.getRouteContext(null,s.definition,s.viewModel,s.container,null,null,null),r=>{e.register(Pt.instance(wt,r)),r.node=n.routeTree.root})}static resolve(e,t){const s=e.container,n=s.get(Le).scopeTo("RouteContext");if(t==null)return I(n,3152,t),e;if(t instanceof Es)return I(n,3153,t),t;if(t instanceof s.get(Fe).Node){I(n,3154,t.nodeName);try{return W.for(t,{searchParents:!0}).container.get(wt)}catch(r){throw A_(n,3155,t.nodeName,r),r}}if(Ra(t)){const r=t.$controller;return I(n,3156,r.definition.name),r.container.get(wt)}if(Yy(t)){const r=t;return I(n,3157,r.definition.name),r.container.get(wt)}Co(new Error(q(3170,Object.prototype.toString.call(t))),n)}dispose(){this.container.dispose(),this._router._unsubscribeNavigationStart(this)}_resolveViewportAgent(e){I(this._logger,3158,e);const t=this._childViewportAgents.find(s=>s._handles(e));if(t===void 0)throw new Error(q(3174,e,this._printTree()));return t}getAvailableViewportAgents(){return this._childViewportAgents.filter(e=>e._isAvailable())}getFallbackViewportAgent(e){return this._childViewportAgents.find(t=>t._isAvailable()&&t.viewport.name===e&&t.viewport.fallback!=="")??null}_createComponentAgent(e,t){I(this._logger,3159,t),this._hostControllerProvider.prepare(e);const s=this.container.createChild({inheritParentResources:!0}),n=this._platform,r=t.component,o=n.document.createElement(r.name);Xr(s,o,n);const a=s.invoke(r.Type),l=this.routeConfigContext._childRoutesConfigured?void 0:R(Pr(a,!1,this.routeConfigContext.config,t,null),c=>this.routeConfigContext._processConfig(c));return R(l,()=>{const c=Ye.$el(s,a,o,{projections:null},r),u=new kC(a,c,t,this,this._router.options);return this._hostControllerProvider.dispose(),u})}generateRootedPath(e){return R(this.createViewportInstructions(gc(e),null,!0),t=>{var a,l,c;const s=t.toUrl(!0,this._router.options._urlParser);let n="";const r=[];let o=t.options.context;for(;!o.isRoot;){const u=(c=(l=(a=o.vpa)==null?void 0:a._currNode)==null?void 0:l.instruction)==null?void 0:c.toUrlComponent(!1);((u==null?void 0:u.length)??0)!==0&&r.unshift(u),o=o.parent}return n=r.join("/"),n.length===0?s:`${n}/${s}`})}generateRelativePath(e){return R(this.createViewportInstructions(gc(e),null,!0),t=>t.toUrl(!0,this._router.options._urlParser))}createViewportInstructions(e,t,s){if(e instanceof rt)return e;let n=(t==null?void 0:t.context)??this,r=!1;if(!_e(e))e=a.call(this,e);else{const l=e.length;for(let c=0;c<l;++c)e[c]=a.call(this,e[c])}const o=this._router.options;return rt.create(e,o,ss.create(o,{...t,context:n}),this.root,s);function a(l){typeof l=="string"&&(l=this._locationMgr.removeBaseHref(l));const c=eo(l);let u=c?l.component:l;if(typeof u=="string"&&u.startsWith("../")&&n!==null){for(;u.startsWith("../")&&(((n==null?void 0:n.parent)??null)!==null||r);)u=u.slice(3),r||(n=n.parent);r=!0}return c?l.component=u:l=u,l}}_registerViewport(e){const t=ra.for(e,this);return this._childViewportAgents.includes(t)?(I(this._logger,3161,t),t):(I(this._logger,3160,t),this._childViewportAgents.push(t),t)}_unregisterViewport(e){const t=ra.for(e,this);if(!this._childViewportAgents.includes(t)){I(this._logger,3163,t);return}I(this._logger,3162,t),this._childViewportAgents.splice(this._childViewportAgents.indexOf(t),1)}toString(){const t=this._childViewportAgents.map(String).join(",");return`RC(path:'${this.routeConfigContext._friendlyPath}',viewports:[${t}])`}_printTree(){const e=[],t=this.routeConfigContext.path;for(let s=0;s<t.length;++s)e.push(`${" ".repeat(s)}${t[s]}`);return e.join(`
`)}}class SC{get isRoot(){return this.parent===null}get depth(){return this.path.length-1}get navigationModel(){return this._navigationModel}get allResolved(){return this._allResolved}constructor(e,t,s,n,r){this.parent=e,this.component=t,this.config=s,this._router=r,this._childRoutesConfigured=!1,this.childRoutes=[],this._allResolved=null,e===null?(this.root=this,this.path=[this],this._friendlyPath=t.name):(this.root=e.root,this.path=[...e.path,this],this._friendlyPath=`${e._friendlyPath}/${t.name}`),this._logger=n.get(Le).scopeTo(`RouteConfigContext<${this._friendlyPath}>`),I(this._logger,3150),this._moduleLoader=n.get(Cb),this.container=n.createChild(),this._recognizer=new Z1,r.options.useNavigationModel?this._navigationModel=new xC([]):this._navigationModel=null,this._processConfig(s)}_handleNavigationStart(){this.config._handleNavigationStart();for(const e of this.childRoutes)e instanceof Promise||e._handleNavigationStart()}_processConfig(e){var l;const t=[],s=e.routes??Bo,n=s.length;if(n===0){const c=(l=e.component.prototype)==null?void 0:l.getRouteConfig;this._childRoutesConfigured=c==null?!0:typeof c!="function";return}const r=this._navigationModel,o=r!==null;let a=0;for(;a<n;a++){const c=s[a];if(c instanceof Promise){t.push(this._addRoute(c));continue}const u=Pr(c,!0,e,null,this);if(u instanceof Promise){if(!La(c)||c.path==null)throw new Error(q(3173));for(const d of on(c.path))this._$addRoute(d,c.caseSensitive??!1,u);const h=this.childRoutes.length,p=u.then(d=>this.childRoutes[h]=d);this.childRoutes.push(p),o&&r._addRoute(p),t.push(p.then(dt));continue}for(const h of u.path??H)this._$addRoute(h,u.caseSensitive,u);this.childRoutes.push(u),o&&r._addRoute(u)}this._childRoutesConfigured=!0,t.length>0&&(this._allResolved=Promise.all(t).then(()=>{this._allResolved=null}))}_addRoute(e){return I(this._logger,3165,e),R(Pr(e,!0,this.config,null,this),t=>{var s;for(const n of t.path??H)this._$addRoute(n,t.caseSensitive,t);(s=this._navigationModel)==null||s._addRoute(t),this.childRoutes.push(t)})}_$addRoute(e,t,s){this._recognizer.add({path:e,caseSensitive:t,handler:s},!0)}_resolveLazy(e){return this._moduleLoader.load(e,t=>{const s=t.raw;if(typeof s=="function"){const o=W.isType(s)?W.getDefinition(s):null;if(o!=null)return o}let n,r;for(const o of t.items){const a=W.isType(o.value)?o.definition:null;a!=null&&(o.key==="default"?n=a:r===void 0&&(r=a))}if(n===void 0&&r===void 0){if(!Ma(s))throw new Error(q(3175,e));const o=Me.create(s);return W.define(o),o}return r??n})}_generateViewportInstruction(e,t){if(!$C(e))return null;t??(t=!1);const s=e.component;let n,r=!1;if(s instanceof es)n=s.path,r=!0;else if(typeof s=="string"){const f=this.childRoutes.find(_=>_.id===s);if(f===void 0)return null;n=f.path}else if(s.type===0){const f=this.childRoutes.find(_=>_.id===s.value);if(f===void 0)return null;n=f.path}else{const f=Rr(s,this)[1];n=this.childRoutes.reduce((_,b)=>(b.component===f.Type&&_.push(...b.path),_),[]),r=!0}if(n===void 0)return null;const o=e.params,a=this._recognizer,l=n.length,c=[];let u=null;if(l===1){const f=p(n[0]);if(f===null){if(r)throw new Error(q(3166,e,c));return Us(this._logger,3166,e,c),null}return g.call(this,f)}let h=0;for(let f=0;f<l;f++){const _=p(n[f]);_!==null&&(u===null?(u=_,h=Object.keys(_.consumed).length):Object.keys(_.consumed).length>h&&(u=_))}if(u===null){if(r)throw new Error(q(3166,e,c));return Us(this._logger,3166,e,c),null}return g.call(this,u);function p(f){const _=a.getEndpoint(f);if(_===null)return c.push(`No endpoint found for the path: '${f}'.`),null;const b=Object.create(null);for(const m of _.params){const y=m.name;let O=o[y];if(O==null||String(O).length===0){if(!m.isOptional)return c.push(`No value for the required parameter '${y}' is provided for the path: '${f}'.`),null;O=""}else{if(!m.satisfiesPattern(O))return c.push(`The value '${O}' for the parameter '${y}' does not satisfy the pattern '${m.pattern}'.`),null;b[y]=O}const P=m.isStar?`*${y}`:m.isOptional?`:${y}?`:`:${y}`;f=f.replace(P,encodeURIComponent(O))}const v=Object.keys(b),$=Object.fromEntries(Object.entries(o).filter(([m])=>!v.includes(m)));return{path:f.replace(/\/\//g,"/"),endpoint:_,consumed:b,query:$}}async function d(f){const _=e.children,b=(_==null?void 0:_.length)??0;if(b===0)return{instructions:H,query:Ge};const v=f.component,$=W.isType(v)?W.getDefinition(v):Rr(v,this)[1];return R(R(this._router.getRouteConfigContext(f,$,null,this.container,this.config,this),m=>R(m.allResolved,()=>m)),m=>{const y=new Array(b),O=new Array(b);let P=Object.create(null);for(let N=0;N<b;++N){const D=_[N];y[N]=R(m._generateViewportInstruction(eo(D)?{...D,params:D.params??Ge}:{component:D,params:Ge},t),j=>{if(j==null)throw new Error(q(3166,D));O[N]=j.vi,P=Vd(P,j.query)})}return R(Promise.all(y),()=>({instructions:O,query:P}))})}function g(f){return R(t?d.call(this,f.endpoint.route.handler):{instructions:e.children,query:Ge},({instructions:_,query:b})=>({vi:Qe.create({recognizedRoute:new ca(new Oa(f.endpoint,f.consumed),null),component:f.path,children:_,viewport:e.viewport,open:e.open,close:e.close}),query:Vd(f.query,b)}))}}recognize(e,t=!1){I(this._logger,3164,e);let s=this,n=!0,r=null;for(;n;)if(r=s._recognizer.recognize(e),r===null){if(!t||s.isRoot)return null;s=s.parent}else n=!1;return new ca(r,Reflect.has(r.params,Xt)?r.params[Xt]??null:null)}dispose(){this.container.dispose()}}class ca{constructor(e,t){this.route=e,this.residue=t}toString(){const e=this.route,t=e.endpoint.route;return`RR(route:(endpoint:(route:(path:${t.path},handler:${t.handler})),params:${JSON.stringify(e.params)}),residue:${this.residue})`}}class xC{constructor(e){this.routes=e,this._promise=void 0}resolve(){return R(this._promise,dt)}_setIsActive(e,t){R(this._promise,()=>{for(const s of this.routes)s._setIsActive(e,t)})}_addRoute(e){const t=this.routes;if(!(e instanceof Promise)){(e.nav??!1)&&e.redirectTo===null&&t.push(ha._create(e));return}const s=t.length;t.push(void 0);let n;n=this._promise=R(this._promise,()=>R(e,r=>{r.nav&&r.redirectTo===null?t[s]=ha._create(r):t.splice(s,1),this._promise===n&&(this._promise=void 0)}))}}class ha{constructor(e,t,s,n){this.id=e,this.path=t,this.title=s,this.data=n,this._trees=null}static _create(e){return new ha(e.id,on(e.path??H),e.title,e.data)}get isActive(){return this._isActive}_setIsActive(e,t){let s=this._trees;if(s===null){const n=e.options;s=this._trees=this.path.map(r=>{const o=t.routeConfigContext._recognizer.getEndpoint(r);if(o===null)throw new Error(q(3450,r));return new rt(ss.create(n,{context:t}),!1,[Qe.create({recognizedRoute:new ca(new Oa(o,Ge),null),component:r})],to,null)})}this._isActive=s.some(n=>e.routeTree.contains(n,!0))}}class O_{constructor(){this.name=vn,this.usedBy="",this.default="",this.fallback="",this._agent=void 0,this._controller=void 0,this._ctx=S(wt),this._logger=S(Le).scopeTo(`au-viewport<${this._ctx.routeConfigContext._friendlyPath}>`)}_getFallback(e,t,s){const n=this.fallback;return typeof n=="function"&&!W.isType(n)?n(e,t,s):n}hydrated(e){I(this._logger,3e3),this._controller=e,this._agent=this._ctx._registerViewport(this)}attaching(e,t){return I(this._logger,3001),this._agent._activateFromViewport(e,this._controller)}detaching(e,t){return I(this._logger,3002),this._agent._deactivateFromViewport(e,this._controller)}dispose(){I(this._logger,3003),this._ctx._unregisterViewport(this),this._agent._dispose(),this._agent=void 0}toString(){const e=[];for(const t of EC){const s=this[t];switch(typeof s){case"string":s!==""&&e.push(`${t}:'${s}'`);break;default:e.push(`${t}:${String(s)}`)}}return`VP(ctx:'${this._ctx.routeConfigContext._friendlyPath}',${e.join(",")})`}}W.define({name:"au-viewport",bindables:["name","usedBy","default","fallback"]},O_);const EC=["name","usedBy","default","fallback"];class $h{constructor(){this._el=S(Bn),this._router=S(xs),this._ctx=S(wt),this._events=S(Na),this._locationMgr=S(x_),this.attribute="href",this.active=!1,this._href=null,this._instructions=null,this._navigationEndListener=null,this.onClick=t=>{this._instructions!==null&&(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||t.button!==0||(t.preventDefault(),this._router.load(this._instructions,{context:this.context})))};const e=this._el;this._isEnabled=!e.hasAttribute("external")&&!e.hasAttribute("data-external"),this._activeClass=this._router.options.activeClass}binding(){this._isEnabled&&this._el.addEventListener("click",this.onClick),this.valueChanged(),this._navigationEndListener=this._events.subscribe("au:router:navigation-end",e=>{const t=this.active=this._instructions!==null&&this._router.isActive(this._instructions,this.context),s=this._activeClass;s!==null&&this._el.classList.toggle(s,t)})}attaching(){const t=this.context.routeConfigContext.allResolved;if(t!==null)return t.then(()=>{this.valueChanged()})}unbinding(){this._isEnabled&&this._el.removeEventListener("click",this.onClick),this._navigationEndListener.dispose()}valueChanged(){const e=this._router,t=e.options,s=this.route;let n=this.context;if(n===void 0?n=this.context=this._ctx:n===null&&(n=this.context=this._ctx.root),s!=null&&n.routeConfigContext.allResolved===null){const o=this.params,a=this._instructions=e.createViewportInstructions(typeof o=="object"&&o!==null?{component:s,params:o}:s,{context:n});this._href=a.toUrl(!1,t._urlParser)}else this._instructions=null,this._href=null;const r=W.for(this._el,{optional:!0});if(r!==null)r.viewModel[this.attribute]=this._instructions;else if(this._href===null)this._el.removeAttribute(this.attribute);else{const o=t.useUrlFragmentHash?this._href:this._locationMgr.addBaseHref(this._href);this._el.setAttribute(this.attribute,o)}}}Gr.define({name:"load",bindables:{route:{mode:Jn,primary:!0,callback:"valueChanged"},params:{mode:Jn,callback:"valueChanged"},attribute:{mode:Jn},active:{mode:nC},context:{mode:Jn,callback:"valueChanged"}}},$h);class B_{get _isExternal(){return this._el.hasAttribute("external")||this._el.hasAttribute("data-external")}constructor(){if(this._el=S(Bn),this._router=S(xs),this._ctx=S(wt),this._isInitialized=!1,this._router.options.useHref&&this._el.nodeName==="A"){const e=S(Jr).name;switch(this._el.getAttribute("target")){case null:case e:case"_self":this._isEnabled=!0;break;default:this._isEnabled=!1;break}}else this._isEnabled=!1}binding(){this._isInitialized||(this._isInitialized=!0,this._isEnabled=this._isEnabled&&Ft.get(this._el,Gr.getDefinition($h).key)===null),this.valueChanged(this.value),this._el.addEventListener("click",this)}unbinding(){this._el.removeEventListener("click",this)}valueChanged(e){e==null?this._el.removeAttribute("href"):(this._router.options.useUrlFragmentHash&&this._ctx.routeConfigContext.isRoot&&!/^[.#]/.test(e)&&!this._isExternal&&(e=`#${e}`),this._el.setAttribute("href",e))}handleEvent(e){this._onClick(e)}_onClick(e){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||e.button!==0||this._isExternal||!this._isEnabled)return;const t=this._el.getAttribute("href");t!==null&&(e.preventDefault(),this._router.load(t,{context:this._ctx}))}}B_.$au={type:"custom-attribute",name:"href",noMultiBindings:!0,bindables:{value:{mode:Jn}}};const IC=xs,PC=[IC],RC=[O_,$h,B_];function Wd(i,e){let t=null;Pi(e)?t=e.basePath??null:e={};const s=la.create(e);return i.register(Pt.cachedCallback(S_,(n,r,o)=>{const a=n.get(Jr),l=new URL(a.document.baseURI);return l.pathname=E_(t??l.pathname),l}),Pt.instance(kh,s),Pt.instance(la,s),mo.creating(xs,n=>{}),mo.hydrated(Di,Es.setRoot),mo.activated(xs,n=>n.start(!0)),mo.deactivated(xs,n=>n.stop()),...PC,...RC)}const TC={register(i){return Wd(i)},customize(i){return{register(e){return Wd(e,i)}}}};var OC=Object.create,Sh=Object.defineProperty,BC=Object.getOwnPropertyDescriptor,MC=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),M_=i=>{throw TypeError(i)},LC=(i,e,t)=>e in i?Sh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,NC=(i,e)=>Sh(i,"name",{value:e,configurable:!0}),DC=i=>[,,,OC(null)],FC=["class","method","getter","setter","accessor","field","value","get","set"],L_=i=>i!==void 0&&typeof i!="function"?M_("Function expected"):i,jC=(i,e,t,s,n)=>({kind:FC[i],name:e,metadata:s,addInitializer:r=>t._?M_("Already initialized"):n.push(L_(r||null))}),VC=(i,e)=>LC(e,MC("metadata"),i[3]),zC=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},UC=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&BC(n,t));NC(n,t);for(var g=s.length-1;g>=0;g--)l=jC(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,L_(o)&&(n=o);return VC(i,n),d&&Sh(n,t,d),u?c^4?r:d:n},N_,xh;N_=[ab()];const lu=class lu{constructor(e){this.ea=e,this.items=[]}initializing(){try{const e=localStorage.getItem("cart:items");if(e){const t=JSON.parse(e);Array.isArray(t)&&(this.items=t,this.notify())}}catch{}}get count(){return this.items.reduce((e,t)=>e+(t.qty??1),0)}getItems(){return this.items}add(e,t=1){const s=this.items.find(n=>n.id===e.id);s?s.qty=(s.qty??1)+t:this.items.push({...e,qty:t}),this.persist(),this.notify(),this.ea.publish("cart:added",{item:e,qty:t})}remove(e,t=1){const s=this.items.findIndex(n=>n.id===e);if(s>-1){const n=this.items[s],r=(n.qty??1)-t;r>0?n.qty=r:this.items.splice(s,1),this.persist(),this.notify()}}clear(){this.items=[],this.persist(),this.notify()}notify(){this.ea.publish("cart:changed",{count:this.count,items:this.items})}persist(){try{localStorage.setItem("cart:items",JSON.stringify(this.items))}catch{}}};lu.inject=[En];let ti=lu;xh=DC();ti=UC(xh,0,"CartService",N_,ti);zC(xh,1,ti);const D_="cart-icon",_c=`<template>\r
    <a class="cart-icon-btn" load="/cart" href="/cart" role="button">\r
        <span class="cart-icon-svg" aria-hidden="true">\r
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
                <circle cx="9" cy="21" r="1" />\r
                <circle cx="20" cy="21" r="1" />\r
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-7.39H6" />\r
            </svg>\r
            <span class="cart-badge">\${count}</span>\r
        </span>\r
        <span class="cart-label">Cart</span>\r
    </a>\r
</template>`,F_=[],j_={};let wl;function QC(i){wl||(wl=W.define({name:D_,template:_c,dependencies:F_,bindables:j_})),i.register(wl)}const HC=Object.freeze(Object.defineProperty({__proto__:null,bindables:j_,default:_c,dependencies:F_,name:D_,register:QC,template:_c},Symbol.toStringTag,{value:"Module"}));var qC=Object.create,Eh=Object.defineProperty,WC=Object.getOwnPropertyDescriptor,KC=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),io=i=>{throw TypeError(i)},GC=(i,e,t)=>e in i?Eh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Kd=(i,e)=>Eh(i,"name",{value:e,configurable:!0}),YC=i=>[,,,qC(null)],V_=["class","method","getter","setter","accessor","field","value","get","set"],Xn=i=>i!==void 0&&typeof i!="function"?io("Function expected"):i,JC=(i,e,t,s,n)=>({kind:V_[i],name:e,metadata:s,addInitializer:r=>t._?io("Already initialized"):n.push(Xn(r||null))}),XC=(i,e)=>GC(e,KC("metadata"),i[3]),mc=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},z_=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,p=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?p?1:2:0,f=V_[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!p&&(n=n.prototype),h<5&&(h>3||!d)&&WC(h<4?n:{get[t](){return Gd(this,r)},set[t](m){return Yd(this,r,m)}},t));h?d&&h<4&&Kd(r,(h>2?"set ":h>1?"get ":"")+t):Kd(n,t);for(var $=s.length-1;$>=0;$--)c=JC(h,t,l={},i[3],b),h&&(c.static=p,c.private=d,u=c.access={has:d?m=>ZC(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Gd:ek)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,y)=>Yd(m,n,y,h^4?r:v.set):(m,y)=>m[t]=y)),a=(0,s[$])(h?h<4?d?r:v[f]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?Xn(a)&&(h>4?_.unshift(a):h?d?r=a:v[f]=a:n=a):typeof a!="object"||a===null?io("Object expected"):(Xn(o=a.get)&&(v.get=o),Xn(o=a.set)&&(v.set=o),Xn(o=a.init)&&_.unshift(o));return h||XC(i,n),v&&Eh(n,t,v),d?h^4?r:v:n},Ih=(i,e,t)=>e.has(i)||io("Cannot "+t),ZC=(i,e)=>Object(e)!==e?io('Cannot use the "in" operator on this value'):i.has(e),Gd=(i,e,t)=>(Ih(i,e,"read from private field"),t?t.call(i):e.get(i)),Yd=(i,e,t,s)=>(Ih(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),ek=(i,e,t)=>(Ih(i,e,"access private method"),t),U_,Q_,bn;Q_=[et({...HC,name:"cart-icon"})],U_=[ke];class Nr{constructor(){this.count=mc(bn,8,this,0),mc(bn,11,this)}}bn=YC();z_(bn,5,"count",U_,Nr);Nr=z_(bn,0,"CartIcon",Q_,Nr);mc(bn,1,Nr);var tk=Object.create,Ph=Object.defineProperty,sk=Object.getOwnPropertyDescriptor,ik=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),H_=i=>{throw TypeError(i)},nk=(i,e,t)=>e in i?Ph(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,rk=(i,e)=>Ph(i,"name",{value:e,configurable:!0}),ok=i=>[,,,tk(null)],ak=["class","method","getter","setter","accessor","field","value","get","set"],q_=i=>i!==void 0&&typeof i!="function"?H_("Function expected"):i,lk=(i,e,t,s,n)=>({kind:ak[i],name:e,metadata:s,addInitializer:r=>t._?H_("Already initialized"):n.push(q_(r||null))}),ck=(i,e)=>nk(e,ik("metadata"),i[3]),hk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},uk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&sk(n,t));rk(n,t);for(var g=s.length-1;g>=0;g--)l=lk(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,q_(o)&&(n=o);return ck(i,n),d&&Ph(n,t,d),u?c^4?r:d:n},W_,Rh;const K_="currency:changed";W_=[ii(En)];class wn{constructor(e){this.ea=e,this.currency="USD";const t=localStorage.getItem("selectedCurrency");t&&(this.currency=t)}setCurrency(e){if(!(!e||e===this.currency)){this.currency=e;try{localStorage.setItem("selectedCurrency",e)}catch{}this.ea.publish(K_,{currency:e})}}}Rh=ok();wn=uk(Rh,0,"CurrencyService",W_,wn);hk(Rh,1,wn);var dk=Object.create,Th=Object.defineProperty,pk=Object.getOwnPropertyDescriptor,fk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),G_=i=>{throw TypeError(i)},gk=(i,e,t)=>e in i?Th(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,_k=(i,e)=>Th(i,"name",{value:e,configurable:!0}),mk=i=>[,,,dk(null)],vk=["class","method","getter","setter","accessor","field","value","get","set"],Y_=i=>i!==void 0&&typeof i!="function"?G_("Function expected"):i,bk=(i,e,t,s,n)=>({kind:vk[i],name:e,metadata:s,addInitializer:r=>t._?G_("Already initialized"):n.push(Y_(r||null))}),wk=(i,e)=>gk(e,fk("metadata"),i[3]),Ak=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},yk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&pk(n,t));_k(n,t);for(var g=s.length-1;g>=0;g--)l=bk(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,Y_(o)&&(n=o);return wk(i,n),d&&Th(n,t,d),u?c^4?r:d:n},J_,Oh;const Ck=`<template>
	<div class="currency-selector-wrapper">
		<button class="currency-btn" type="button" click.trigger="isOpen = !isOpen">
			<span class="currency-label">\${selectedCurrency}</span>
			<svg class="currency-arrow" aria-expanded.bind="isOpen" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<polyline points="6 9 12 15 18 9" />
			</svg>
		</button>
		<div if.bind="isOpen" class="currency-popup">
			<ul>
				<li repeat.for="currency of currencies" class="currency-option" click.trigger="selectCurrency(currency)">
					\${currency}
				</li>
			</ul>
		</div>
	</div>
</template>`;J_=[et({name:"currency-selector",template:Ck}),ii(wn)];class ua{constructor(e){this.currencyService=e,this.isOpen=!1,this.selectedCurrency="USD",this.currencies=["USD","EUR","GBP","AUD","BRL","ARS","CLP","COP","MXN"],this.closeTimeout=null;const t=localStorage.getItem("selectedCurrency");t&&this.currencies.includes(t)&&(this.selectedCurrency=t,this.currencyService.setCurrency(t))}open(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.isOpen=!0}close(){this.closeTimeout=setTimeout(()=>{this.isOpen=!1,this.closeTimeout=null},200)}selectCurrency(e){this.selectedCurrency=e,this.currencyService.setCurrency(e),this.isOpen=!1}}Oh=mk();ua=yk(Oh,0,"CurrencySelector",J_,ua);Ak(Oh,1,ua);var kk=Object.create,Bh=Object.defineProperty,$k=Object.getOwnPropertyDescriptor,Sk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),no=i=>{throw TypeError(i)},xk=(i,e,t)=>e in i?Bh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Jd=(i,e)=>Bh(i,"name",{value:e,configurable:!0}),Ek=i=>[,,,kk(null)],X_=["class","method","getter","setter","accessor","field","value","get","set"],Zn=i=>i!==void 0&&typeof i!="function"?no("Function expected"):i,Ik=(i,e,t,s,n)=>({kind:X_[i],name:e,metadata:s,addInitializer:r=>t._?no("Already initialized"):n.push(Zn(r||null))}),Pk=(i,e)=>xk(e,Sk("metadata"),i[3]),vc=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Z_=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,p=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?p?1:2:0,f=X_[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!p&&(n=n.prototype),h<5&&(h>3||!d)&&$k(h<4?n:{get[t](){return Xd(this,r)},set[t](m){return Zd(this,r,m)}},t));h?d&&h<4&&Jd(r,(h>2?"set ":h>1?"get ":"")+t):Jd(n,t);for(var $=s.length-1;$>=0;$--)c=Ik(h,t,l={},i[3],b),h&&(c.static=p,c.private=d,u=c.access={has:d?m=>Rk(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?Xd:Tk)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,y)=>Zd(m,n,y,h^4?r:v.set):(m,y)=>m[t]=y)),a=(0,s[$])(h?h<4?d?r:v[f]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?Zn(a)&&(h>4?_.unshift(a):h?d?r=a:v[f]=a:n=a):typeof a!="object"||a===null?no("Object expected"):(Zn(o=a.get)&&(v.get=o),Zn(o=a.set)&&(v.set=o),Zn(o=a.init)&&_.unshift(o));return h||Pk(i,n),v&&Bh(n,t,v),d?h^4?r:v:n},Mh=(i,e,t)=>e.has(i)||no("Cannot "+t),Rk=(i,e)=>Object(e)!==e?no('Cannot use the "in" operator on this value'):i.has(e),Xd=(i,e,t)=>(Mh(i,e,"read from private field"),t?t.call(i):e.get(i)),Zd=(i,e,t,s)=>(Mh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),Tk=(i,e,t)=>(Mh(i,e,"access private method"),t),em,tm,An;const Ok=`<template>
  <ul class="main-categories-list">
    <li repeat.for="cat of categories" class="main-category-item">
  <button class="main-category-btn" class.bind="cat.isOpen ? 'open' : ''" type="button" click.trigger="cat.isOpen = !cat.isOpen">
        <span>\${cat.name}</span>
        <svg class="main-category-arrow" aria-expanded.bind="cat.isOpen" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 12 15 18 9" />
        </svg>
      </button>
      <div if.bind="cat.isOpen" class="main-category-dropdown">
        <div class="main-category-dropdown-content">
          <!-- Aqu puedes renderizar subcategoras, links, etc. -->
          <span class="dropdown-placeholder">Contenido de \${cat.name}</span>
        </div>
      </div>
    </li>
  </ul>
</template>`;tm=[et({name:"category-navigation",template:Ok})],em=[ke];class Dr{constructor(){this.categories=vc(An,8,this,[{name:"CURRENCY"},{name:"ITEMS"},{name:"ACCOUNTS"},{name:"SERVICES"},{name:"SWAP"},{name:"SELL"}]),vc(An,11,this)}open(e){this.categories.forEach(t=>t.isOpen=!1),e.isOpen=!0}close(e){e.isOpen=!1}}An=Ek();Z_(An,5,"categories",em,Dr);Dr=Z_(An,0,"CategoryNavigation",tm,Dr);vc(An,1,Dr);const Bk=""+new URL("Hamburger_icon-B2m7aKwQ.png",import.meta.url).href,Mk=""+new URL("chicks-logo-large-CNcQRT2y.svg",import.meta.url).href;var Lk=Object.create,Lh=Object.defineProperty,Nk=Object.getOwnPropertyDescriptor,Dk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),sm=i=>{throw TypeError(i)},Fk=(i,e,t)=>e in i?Lh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,jk=(i,e)=>Lh(i,"name",{value:e,configurable:!0}),Vk=i=>[,,,Lk(null)],zk=["class","method","getter","setter","accessor","field","value","get","set"],im=i=>i!==void 0&&typeof i!="function"?sm("Function expected"):i,Uk=(i,e,t,s,n)=>({kind:zk[i],name:e,metadata:s,addInitializer:r=>t._?sm("Already initialized"):n.push(im(r||null))}),Qk=(i,e)=>Fk(e,Dk("metadata"),i[3]),Hk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},qk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&Nk(n,t));jk(n,t);for(var g=s.length-1;g>=0;g--)l=Uk(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,im(o)&&(n=o);return Qk(i,n),d&&Lh(n,t,d),u?c^4?r:d:n},nm,Nh;nm=[et({...G1,name:"app-header"}),ii(ti,En,xs)];const cu=class cu{constructor(e,t,s){this.cart=e,this.ea=t,this.router=s,this.cartCount=0,this.sub=void 0,this.isMobileMenuOpen=!1,this.logoUrl=Mk,this.hamburgerUrl=Bk,this.onKeyDown=n=>{n.key==="Escape"&&this.isMobileMenuOpen&&this.closeMobileMenu()}}binding(){this.cartCount=this.cart.count,this.sub=this.ea.subscribe("cart:changed",e=>{this.cartCount=e.count??0,console.log("Cart updated, new count:",this.cartCount)})}detaching(){var e;(e=this.sub)==null||e.dispose(),window.removeEventListener("keydown",this.onKeyDown);try{document.body.style.overflow=""}catch{}}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen,this.updateBodyScroll()}closeMobileMenu(){this.isMobileMenuOpen=!1,this.updateBodyScroll()}updateBodyScroll(){try{const e=document.body;if(!e)return;this.isMobileMenuOpen?e.style.overflow="hidden":e.style.overflow=""}catch{}}attached(){window.addEventListener("keydown",this.onKeyDown)}goToLogin(e){e&&e.preventDefault(),this.isMobileMenuOpen&&this.closeMobileMenu(),this.router.load("/login")}};cu.dependencies=[Nr,ua,Dr];let yn=cu;Nh=Vk();yn=qk(Nh,0,"AppHeader",nm,yn);Hk(Nh,1,yn);const rm="app-footer",bc=`<template>\r
  \r
  <footer class="footer">\r
    <div class="grid-container">\r
      <div class="footer-top-box">\r
        <div class="footer-social-row">\r
          <a href="https://facebook.com" target="_blank" rel="noopener" class="footer-social-icon facebook"\r
            aria-label="Facebook">\r
            <img src="/src/assets/icons/facebook.svg" class="footer-social-icon-img" alt="Facebook" />\r
          </a>\r
          <a href="https://instagram.com" target="_blank" rel="noopener" class="footer-social-icon instagram"\r
            aria-label="Instagram">\r
            <img src="/src/assets/icons/instagram.svg" class="footer-social-icon-img" alt="Instagram" />\r
          </a>\r
          <a href="https://twitter.com" target="_blank" rel="noopener" class="footer-social-icon twitter"\r
            aria-label="Twitter">\r
            <img src="/src/assets/icons/twitter.svg" class="footer-social-icon-img" alt="Twitter" />\r
          </a>\r
          <a href="https://discord.com" target="_blank" rel="noopener" class="footer-social-icon discord"\r
            aria-label="Discord">\r
            <img src="/src/assets/icons/discord.svg" class="footer-social-icon-img" alt="Discord" />\r
          </a>\r
        </div>\r
\r
        <div class="footer-container">\r
          <div class="footer-left-box">\r
            <div class="footer-column-title">\r
              <img src="/src/assets/logo/chicks-logo-large.svg" alt="ChicksGold Logo" class="footer-logo" />\r
            </div>\r
            <div class="footer-support-email">\r
              <a href="mailto:support@chicksgold.com" id="footer-support-email-link">support@chicksgold.com</a>\r
            </div>\r
          </div>\r
          <div class="footer-center-box">\r
            <div class="footer-columns">\r
              <div class="footer-column">\r
                <h4 class="footer-column-title">Chicks Gold</h4>\r
                <ul class="footer-column-list">\r
                  <li><a href="#">Games</a></li>\r
                  <li><a href="#">About Us</a></li>\r
                  <li><a href="#">Blog</a></li>\r
                  <li><a href="#">Sitemap</a></li>\r
                </ul>\r
              </div>\r
              <div class="footer-column">\r
                <h4 class="footer-column-title">Support</h4>\r
                <ul class="footer-column-list">\r
                  <li><a href="#">Contact Us</a></li>\r
                  <li><a href="#">FAQ</a></li>\r
\r
                </ul>\r
              </div>\r
              <div class="footer-column">\r
                <h4 class="footer-column-title">Legal</h4>\r
                <ul class="footer-column-list">\r
                  <li><a href="#">Cookies Policy</a></li>\r
                  <li><a href="#">Terms of Service</a></li>\r
                  <li><a href="#">Copyright Policy</a></li>\r
                </ul>\r
              </div>\r
            </div>\r
          </div>\r
          <div class="footer-right-box">\r
            <h3 class="footer-trustpilot-text">Trustpilot Reviews</h3>\r
            <div class="footer-trustpilot-row">\r
              <span class="footer-trustpilot-stars">\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
                <img src="/src/assets/icons/trustpilot-star.png" alt="Trustpilot star" class="trustpilot-star" />\r
              </span>\r
              <span class="footer-trustpilot-text-counter">5/5</span>\r
            </div>\r
          </div>\r
\r
        </div>\r
        <div class="row-center">\r
          <p class="footer-bottom-text"> 2024 - 2025 ChicksGold.com. All rights reserved.</p>\r
        </div>\r
\r
      </div>\r
  </footer>\r
</template>`,om=[],am={};let Al;function Wk(i){Al||(Al=W.define({name:rm,template:bc,dependencies:om,bindables:am})),i.register(Al)}const Kk=Object.freeze(Object.defineProperty({__proto__:null,bindables:am,default:bc,dependencies:om,name:rm,register:Wk,template:bc},Symbol.toStringTag,{value:"Module"}));var Gk=Object.create,Dh=Object.defineProperty,Yk=Object.getOwnPropertyDescriptor,Jk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),lm=i=>{throw TypeError(i)},Xk=(i,e,t)=>e in i?Dh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Zk=(i,e)=>Dh(i,"name",{value:e,configurable:!0}),e$=i=>[,,,Gk(null)],t$=["class","method","getter","setter","accessor","field","value","get","set"],cm=i=>i!==void 0&&typeof i!="function"?lm("Function expected"):i,s$=(i,e,t,s,n)=>({kind:t$[i],name:e,metadata:s,addInitializer:r=>t._?lm("Already initialized"):n.push(cm(r||null))}),i$=(i,e)=>Xk(e,Jk("metadata"),i[3]),n$=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},r$=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&Yk(n,t));Zk(n,t);for(var g=s.length-1;g>=0;g--)l=s$(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,cm(o)&&(n=o);return i$(i,n),d&&Dh(n,t,d),u?c^4?r:d:n},hm,Fh;hm=[et({...Kk,name:"app-footer"})];class da{constructor(){this.year=new Date().getFullYear()}}Fh=e$();da=r$(Fh,0,"AppFooter",hm,da);n$(Fh,1,da);const um="payment-methods",wc=`<template>\r
  <div class="payment-methods">\r
   <div class="container">\r
      <ul class="payment-methods-list">\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/visa.svg" alt="Visa" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/mastercard-old.svg" alt="Mastercard" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/amex.svg" alt="American Express" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/skrill.svg" alt="Skrill" class="payment-logo payment-logo-lg" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/bitcoin.svg" alt="Bitcoin" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/ethereum.svg" alt="Ethereum" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/bitcoin-cash.svg" alt="Bitcoin cash" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item">\r
          <img src="/src/assets/payment-methods/litecoin.svg" alt="Litecoin" class="payment-logo payment-logo-sm" />\r
        </li>\r
        <li class="payment-method-item ">\r
          <a href="#" class="payment-more">and 50+ more</a>\r
        </li>\r
      </ul>\r
    \r
   </div>\r
  </div>\r
</template>\r
`,dm=[],pm={};let yl;function o$(i){yl||(yl=W.define({name:um,template:wc,dependencies:dm,bindables:pm})),i.register(yl)}const a$=Object.freeze(Object.defineProperty({__proto__:null,bindables:pm,default:wc,dependencies:dm,name:um,register:o$,template:wc},Symbol.toStringTag,{value:"Module"}));var l$=Object.create,jh=Object.defineProperty,c$=Object.getOwnPropertyDescriptor,h$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),fm=i=>{throw TypeError(i)},u$=(i,e,t)=>e in i?jh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,d$=(i,e)=>jh(i,"name",{value:e,configurable:!0}),p$=i=>[,,,l$(null)],f$=["class","method","getter","setter","accessor","field","value","get","set"],gm=i=>i!==void 0&&typeof i!="function"?fm("Function expected"):i,g$=(i,e,t,s,n)=>({kind:f$[i],name:e,metadata:s,addInitializer:r=>t._?fm("Already initialized"):n.push(gm(r||null))}),_$=(i,e)=>u$(e,h$("metadata"),i[3]),m$=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},v$=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&c$(n,t));d$(n,t);for(var g=s.length-1;g>=0;g--)l=g$(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,gm(o)&&(n=o);return _$(i,n),d&&jh(n,t,d),u?c^4?r:d:n},_m,Vh;_m=[et({...a$,name:"payment-methods"})];class pa{}Vh=p$();pa=v$(Vh,0,"PaymentMethods",_m,pa);m$(Vh,1,pa);const mm="toast-notifications",Ac=`<template>\r
  <div class="toast-container" aria-live="polite" aria-atomic="true">\r
    <div repeat.for="t of toasts" class="toast \${t.state}">\r
      <div class="toast-icon" aria-hidden="true"></div>\r
      <div class="toast-content">\r
        <div class="toast-title">Added to cart</div>\r
        <div class="toast-body">\${t.message}</div>\r
      </div>\r
      <button class="toast-close" aria-label="Close" click.trigger="dismiss(t)"></button>\r
    </div>\r
  </div>\r
</template>\r
`,vm=[],bm={};let Cl;function b$(i){Cl||(Cl=W.define({name:mm,template:Ac,dependencies:vm,bindables:bm})),i.register(Cl)}const w$=Object.freeze(Object.defineProperty({__proto__:null,bindables:bm,default:Ac,dependencies:vm,name:mm,register:b$,template:Ac},Symbol.toStringTag,{value:"Module"}));var A$=Object.create,zh=Object.defineProperty,y$=Object.getOwnPropertyDescriptor,C$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),wm=i=>{throw TypeError(i)},k$=(i,e,t)=>e in i?zh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,$$=(i,e)=>zh(i,"name",{value:e,configurable:!0}),S$=i=>[,,,A$(null)],x$=["class","method","getter","setter","accessor","field","value","get","set"],Am=i=>i!==void 0&&typeof i!="function"?wm("Function expected"):i,E$=(i,e,t,s,n)=>({kind:x$[i],name:e,metadata:s,addInitializer:r=>t._?wm("Already initialized"):n.push(Am(r||null))}),I$=(i,e)=>k$(e,C$("metadata"),i[3]),P$=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},R$=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&y$(n,t));$$(n,t);for(var g=s.length-1;g>=0;g--)l=E$(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,Am(o)&&(n=o);return I$(i,n),d&&zh(n,t,d),u?c^4?r:d:n},ym,Uh;ym=[et({...w$,name:"toast-notifications"}),ii(En)];class fa{constructor(e){this.ea=e,this.toasts=[],this.sub=void 0,this.nextId=1}attached(){this.sub=this.ea.subscribe("cart:added",e=>{var n;const t=((n=e==null?void 0:e.item)==null?void 0:n.name)??"Item",s=(e==null?void 0:e.qty)??1;this.show(`${s}  ${t} added to cart`)})}detaching(){var e;(e=this.sub)==null||e.dispose()}show(e,t=2500){const n={id:this.nextId++,message:e,timeout:t,state:"enter"};this.toasts.push(n),setTimeout(()=>n.state="visible");const r=setTimeout(()=>this.dismiss(n),t);n._timer=r}dismiss(e){e._timer&&clearTimeout(e._timer),e.state="leave",setTimeout(()=>{this.toasts=this.toasts.filter(t=>t.id!==e.id)},180)}}Uh=S$();fa=R$(Uh,0,"ToastNotifications",ym,fa);P$(Uh,1,fa);const Cm="pagination",yc=`<template>\r
  <nav class="pagination">\r
    <button class="pagination-btn" disabled.bind="page === 1" click.trigger="changePage(page - 1)">\r
      &#60;\r
    </button>\r
    <template repeat.for="p of pages">\r
      <span if.bind="p === '...'" class="pagination-ellipsis"></span>\r
      <button else\r
              class.bind="p === page ? 'pagination-page active' : 'pagination-page'"\r
              click.trigger="changePage(p)">\r
        \${p}\r
      </button>\r
    </template>\r
    <button class="pagination-btn" disabled.bind="page === totalPages" click.trigger="changePage(page + 1)">\r
      &#62;\r
    </button>\r
  </nav>\r
</template>\r
`,km=[],$m={};let kl;function T$(i){kl||(kl=W.define({name:Cm,template:yc,dependencies:km,bindables:$m})),i.register(kl)}const O$=Object.freeze(Object.defineProperty({__proto__:null,bindables:$m,default:yc,dependencies:km,name:Cm,register:T$,template:yc},Symbol.toStringTag,{value:"Module"}));var B$=Object.create,Qh=Object.defineProperty,M$=Object.getOwnPropertyDescriptor,L$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),ro=i=>{throw TypeError(i)},N$=(i,e,t)=>e in i?Qh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ep=(i,e)=>Qh(i,"name",{value:e,configurable:!0}),D$=i=>[,,,B$(null)],Sm=["class","method","getter","setter","accessor","field","value","get","set"],er=i=>i!==void 0&&typeof i!="function"?ro("Function expected"):i,F$=(i,e,t,s,n)=>({kind:Sm[i],name:e,metadata:s,addInitializer:r=>t._?ro("Already initialized"):n.push(er(r||null))}),j$=(i,e)=>N$(e,L$("metadata"),i[3]),ws=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},oo=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,p=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?p?1:2:0,f=Sm[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!p&&(n=n.prototype),h<5&&(h>3||!d)&&M$(h<4?n:{get[t](){return tp(this,r)},set[t](m){return sp(this,r,m)}},t));h?d&&h<4&&ep(r,(h>2?"set ":h>1?"get ":"")+t):ep(n,t);for(var $=s.length-1;$>=0;$--)c=F$(h,t,l={},i[3],b),h&&(c.static=p,c.private=d,u=c.access={has:d?m=>V$(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?tp:z$)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,y)=>sp(m,n,y,h^4?r:v.set):(m,y)=>m[t]=y)),a=(0,s[$])(h?h<4?d?r:v[f]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?er(a)&&(h>4?_.unshift(a):h?d?r=a:v[f]=a:n=a):typeof a!="object"||a===null?ro("Object expected"):(er(o=a.get)&&(v.get=o),er(o=a.set)&&(v.set=o),er(o=a.init)&&_.unshift(o));return h||j$(i,n),v&&Qh(n,t,v),d?h^4?r:v:n},Hh=(i,e,t)=>e.has(i)||ro("Cannot "+t),V$=(i,e)=>Object(e)!==e?ro('Cannot use the "in" operator on this value'):i.has(e),tp=(i,e,t)=>(Hh(i,e,"read from private field"),t?t.call(i):e.get(i)),sp=(i,e,t,s)=>(Hh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),z$=(i,e,t)=>(Hh(i,e,"access private method"),t),xm,Em,Im,Pm,Rm,it;Rm=[et({...O$,name:"pagination"})],Pm=[ke],Im=[ke],Em=[ke],xm=[ke];class Ts{constructor(){this.page=ws(it,8,this,1),ws(it,11,this),this.pageSize=ws(it,12,this,10),ws(it,15,this),this.total=ws(it,16,this,0),ws(it,19,this),this.pageChange=ws(it,20,this),ws(it,23,this)}get totalPages(){return Math.max(1,Math.ceil(this.total/this.pageSize))}get pages(){const e=this.totalPages,t=this.page;return e<=7?Array.from({length:e},(s,n)=>n+1):t<=4?[...[1,2,3,4].filter(n=>n<=e),"...",e]:t>=e-3?[1,"...",...[e-3,e-2,e-1,e].filter(n=>n>=1)]:[1,"...",t-1,t,t+1,"...",e]}changePage(e){var t;typeof e!="number"||e<1||e>this.totalPages||e===this.page||(t=this.pageChange)==null||t.call(this,e)}}it=D$();oo(it,5,"page",Pm,Ts);oo(it,5,"pageSize",Im,Ts);oo(it,5,"total",Em,Ts);oo(it,5,"pageChange",xm,Ts);Ts=oo(it,0,"Pagination",Rm,Ts);ws(it,1,Ts);const Tm=Object.freeze(Object.defineProperty({__proto__:null,get Pagination(){return Ts}},Symbol.toStringTag,{value:"Module"})),Om="toolbar",Cc=`<template>\r
  <div class="toolbar-row">\r
    <!-- Game Dropdown -->\r
\r
    <div class="toolbar-dropdown toolbar-row-box">\r
      <button class="toolbar-btn" click.trigger="isGameOpen = !isGameOpen">\r
        <img src="/src/assets/icons/sword.svg" alt="Game Icon" class="toolbar-icon" />\r
        <span class="toolbar-selected">\r
          \${selectedGame && selectedGame !== 'All'\r
          ? (games.find(g => g.id == selectedGame)?.name || selectedGame)\r
          : 'Select a game'}\r
        </span>\r
        <svg class="toolbar-arrow\${isGameOpen ? ' open' : ''}" width="16" height="16" viewBox="0 0 24 24" fill="none"\r
          stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
          <polyline points="6 9 12 15 18 9" />\r
        </svg>\r
      </button>\r
      <ul if.bind="isGameOpen" class="toolbar-dropdown-list">\r
        <li class="toolbar-dropdown-item" click.trigger="selectGame('All')">All</li>\r
        <li repeat.for="game of games" class="toolbar-dropdown-item" click.trigger="selectGame(game.id)">\${game.name}</li>\r
      </ul>\r
    </div>\r
    <!-- Search -->\r
\r
    <div class="toolbar-search toolbar-row-box">\r
      <img src="/src/assets/icons/search.svg" alt="Search Icon" class="toolbar-search-icon" />\r
      <input type="text" class="toolbar-search-input" value.bind="search" placeholder="Search"\r
        input.trigger="onSearch()" />\r
\r
    </div>\r
\r
    <!-- Price Dropdown -->\r
\r
    <div class="toolbar-dropdown toolbar-row-box">\r
      <button class="toolbar-btn" click.trigger="isPriceOpen = !isPriceOpen">\r
        <img src="/src/assets/icons/money-sack.svg" alt="Price Icon" class="toolbar-icon" />\r
        <span class="toolbar-label">Price</span>\r
        <span class="toolbar-selected">\${selectedPrice || 'All'}</span>\r
        <svg class="toolbar-arrow\${isPriceOpen ? ' open' : ''}" width="16" height="16" viewBox="0 0 24 24" fill="none"\r
          stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
          <polyline points="6 9 12 15 18 9" />\r
        </svg>\r
      </button>\r
      <ul if.bind="isPriceOpen" class="toolbar-dropdown-list">\r
        <li class="toolbar-dropdown-item" click.trigger="selectPrice('All')">All</li>\r
        <li repeat.for="price of priceOptions" class="toolbar-dropdown-item" click.trigger="selectPrice(price)">\r
          \${price}\r
        </li>\r
      </ul>\r
    </div>\r
\r
    <!-- Item Type Dropdown -->\r
\r
    <div class="toolbar-dropdown toolbar-row-box">\r
      <button class="toolbar-btn" click.trigger="isTypeOpen = !isTypeOpen">\r
        <img src="/src/assets/icons/leaf.svg" alt="Type Icon" class="toolbar-icon" />\r
        <span class="toolbar-label">Item Type</span>\r
        <span class="toolbar-selected">\${selectedType || 'All'}</span>\r
        <svg class="toolbar-arrow\${isTypeOpen ? ' open' : ''}" width="16" height="16" viewBox="0 0 24 24" fill="none"\r
          stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
          <polyline points="6 9 12 15 18 9" />\r
        </svg>\r
      </button>\r
      <ul if.bind="isTypeOpen" class="toolbar-dropdown-list">\r
        <li class="toolbar-dropdown-item" click.trigger="selectType('All')">All</li>\r
        <li repeat.for="type of typeOptions" class="toolbar-dropdown-item" click.trigger="selectType(type)">\${type}\r
        </li>\r
      </ul>\r
    </div>\r
    <!-- Filters button for small screens -->\r
    <button class="filters-btn toolbar-row-box" click.trigger="toggleFilters()">\r
      <img src="/src/assets/icons/filter.svg" alt="Filter Icon" class="toolbar-icon" />\r
      <span>Filters</span>\r
    </button>\r
  </div>\r
  <!-- Bottom sheet filters panel -->\r
  <div if.bind="isFiltersOpen">\r
    <div class="filters-overlay" click.trigger="closeFilters()"></div>\r
    <div class="filters-panel" role="dialog" aria-modal="true">\r
      <div class="filters-header">\r
        <h3>Filters</h3>\r
        <button class="filters-close" aria-label="Close" click.trigger="closeFilters()"></button>\r
      </div>\r
      <div class="filters-section">\r
        <h4>Game</h4>\r
        <ul class="filters-list">\r
          <li class="filters-item \${selectedGame === 'All' || !selectedGame ? 'selected' : ''}" click.trigger="selectGame('All')">All</li>\r
          <li repeat.for="game of games" class="filters-item \${selectedGame == game.id ? 'selected' : ''}" click.trigger="selectGame(game.id)">\${game.name}</li>\r
        </ul>\r
      </div>\r
      <div class="filters-section">\r
        <h4>Price</h4>\r
        <ul class="filters-list">\r
          <li class="filters-item \${selectedPrice === 'All' || !selectedPrice ? 'selected' : ''}" click.trigger="selectPrice('All')">All</li>\r
          <li repeat.for="price of priceOptions" class="filters-item \${selectedPrice == price ? 'selected' : ''}" click.trigger="selectPrice(price)">\${price}</li>\r
        </ul>\r
      </div>\r
      <div class="filters-section">\r
        <h4>Item Type</h4>\r
        <ul class="filters-list">\r
          <li class="filters-item \${selectedType === 'All' || !selectedType ? 'selected' : ''}" click.trigger="selectType('All')">All</li>\r
          <li repeat.for="type of typeOptions" class="filters-item \${selectedType == type ? 'selected' : ''}" click.trigger="selectType(type)">\${type}</li>\r
        </ul>\r
      </div>\r
      <div class="filters-actions">\r
        <button class="filters-apply" click.trigger="closeFilters()">Apply</button>\r
      </div>\r
    </div>\r
  </div>\r
</template>`,Bm=[],Mm={};let $l;function U$(i){$l||($l=W.define({name:Om,template:Cc,dependencies:Bm,bindables:Mm})),i.register($l)}const Q$=Object.freeze(Object.defineProperty({__proto__:null,bindables:Mm,default:Cc,dependencies:Bm,name:Om,register:U$,template:Cc},Symbol.toStringTag,{value:"Module"}));var H$=Object.create,qh=Object.defineProperty,q$=Object.getOwnPropertyDescriptor,W$=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),ao=i=>{throw TypeError(i)},K$=(i,e,t)=>e in i?qh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ip=(i,e)=>qh(i,"name",{value:e,configurable:!0}),G$=i=>[,,,H$(null)],Lm=["class","method","getter","setter","accessor","field","value","get","set"],tr=i=>i!==void 0&&typeof i!="function"?ao("Function expected"):i,Y$=(i,e,t,s,n)=>({kind:Lm[i],name:e,metadata:s,addInitializer:r=>t._?ao("Already initialized"):n.push(tr(r||null))}),J$=(i,e)=>K$(e,W$("metadata"),i[3]),ze=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Ms=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,p=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?p?1:2:0,f=Lm[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!p&&(n=n.prototype),h<5&&(h>3||!d)&&q$(h<4?n:{get[t](){return np(this,r)},set[t](m){return rp(this,r,m)}},t));h?d&&h<4&&ip(r,(h>2?"set ":h>1?"get ":"")+t):ip(n,t);for(var $=s.length-1;$>=0;$--)c=Y$(h,t,l={},i[3],b),h&&(c.static=p,c.private=d,u=c.access={has:d?m=>X$(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?np:Z$)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,y)=>rp(m,n,y,h^4?r:v.set):(m,y)=>m[t]=y)),a=(0,s[$])(h?h<4?d?r:v[f]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?tr(a)&&(h>4?_.unshift(a):h?d?r=a:v[f]=a:n=a):typeof a!="object"||a===null?ao("Object expected"):(tr(o=a.get)&&(v.get=o),tr(o=a.set)&&(v.set=o),tr(o=a.init)&&_.unshift(o));return h||J$(i,n),v&&qh(n,t,v),d?h^4?r:v:n},Wh=(i,e,t)=>e.has(i)||ao("Cannot "+t),X$=(i,e)=>Object(e)!==e?ao('Cannot use the "in" operator on this value'):i.has(e),np=(i,e,t)=>(Wh(i,e,"read from private field"),t?t.call(i):e.get(i)),rp=(i,e,t,s)=>(Wh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),Z$=(i,e,t)=>(Wh(i,e,"access private method"),t),Nm,Dm,Fm,jm,Vm,zm,Um,Qm,Hm,de;Hm=[et({...Q$,name:"toolbar"})],Qm=[ke],Um=[ke],zm=[ke],Vm=[ke],jm=[ke],Fm=[ke],Dm=[ke],Nm=[ke];class Rt{constructor(){this.games=ze(de,8,this,[]),ze(de,11,this),this.priceOptions=ze(de,12,this,[]),ze(de,15,this),this.typeOptions=ze(de,16,this,[]),ze(de,19,this),this.selectedGame=ze(de,20,this,""),ze(de,23,this),this.selectedPrice=ze(de,24,this,""),ze(de,27,this),this.selectedType=ze(de,28,this,""),ze(de,31,this),this.search=ze(de,32,this,""),ze(de,35,this),this.filtersChange=ze(de,36,this),ze(de,39,this),this.isGameOpen=!1,this.isPriceOpen=!1,this.isTypeOpen=!1,this.isFiltersOpen=!1}selectGame(e){this.selectedGame=e,this.isGameOpen=!1,console.log("Selected game:",e),this.emitChange()}selectPrice(e){this.selectedPrice=e,this.isPriceOpen=!1,this.emitChange()}selectType(e){this.selectedType=e,this.isTypeOpen=!1,this.emitChange()}onSearch(){this.emitChange()}toggleFilters(){this.isFiltersOpen=!this.isFiltersOpen}closeFilters(){this.isFiltersOpen=!1}emitChange(){this.filtersChange&&this.filtersChange({game:this.selectedGame,price:this.selectedPrice,type:this.selectedType,search:this.search})}}de=G$();Ms(de,5,"games",Qm,Rt);Ms(de,5,"priceOptions",Um,Rt);Ms(de,5,"typeOptions",zm,Rt);Ms(de,5,"selectedGame",Vm,Rt);Ms(de,5,"selectedPrice",jm,Rt);Ms(de,5,"selectedType",Fm,Rt);Ms(de,5,"search",Dm,Rt);Ms(de,5,"filtersChange",Nm,Rt);Rt=Ms(de,0,"Toolbar",Hm,Rt);ze(de,1,Rt);const eS=Object.freeze(Object.defineProperty({__proto__:null,get Toolbar(){return Rt}},Symbol.toStringTag,{value:"Module"})),qm="product-card",kc=`<template>\r
  <div class="product-card">\r
    <div class="product-card-header">\r
      <div class="card-header-left">\r
        <div class="onsale-status">\r
          <span class="onsale-dot"></span>\r
          <span class="onsale-label">ON SALE</span>\r
        </div>\r
        <div class="stock-row">\r
          <span class="stock-status">In stock</span>\r
        </div>\r
      </div>\r
      <div class="qty-box-horizontal">\r
        <input class="qty-input" type="number" min="1" value.bind="qty" input.trigger="onQtyInput($event)" />\r
        <div class="qty-arrows">\r
          <button class="qty-arrow-btn" click.trigger="increaseQty()" tabindex="-1">&#9650;</button>\r
          <button class="qty-arrow-btn" click.trigger="decreaseQty()" tabindex="-1">&#9660;</button>\r
        </div>\r
      </div>\r
    </div>\r
    <div class="product-image">\r
      <img src.bind="product.imagen" alt="Product Image" class="product-img" />\r
    </div>\r
    <div class="product-name-row">\r
      <span class="product-name">\${product.nombre}</span>\r
      <div class="product-game-icon">\r
        <img src.bind="product.gameIcon" alt="Game Icon" class="game-icon" />\r
\r
      </div>\r
    </div>\r
    <div class="product-price-row" if.bind="product.precio">\r
      <span class="product-price">\${currencySymbol}\${product.precio.toFixed(2)}</span>\r
      <span class="product-price-original" if.bind="product.precioOriginal">\r
        \${currencySymbol}\${product.precioOriginal.toFixed(2)}\r
      </span>\r
    </div>\r
\r
    <span class="product-description">\${product.descripcion}</span>\r
    <div class="product-card-footer">\r
      <button class="details-btn" disabled>DETAILS</button>\r
      <button class="add-btn" disabled.bind="!product.precio" click.trigger="addToCart()">\r
        ADD\r
        <span class="add-cart-icon" aria-hidden="true">\r
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r
            <circle cx="9" cy="21" r="1" />\r
            <circle cx="20" cy="21" r="1" />\r
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61l1.38-7.39H6" />\r
          </svg>\r
        </span>\r
      </button>\r
    </div>\r
  </div>\r
</template>`,Wm=[],Km={};let Sl;function tS(i){Sl||(Sl=W.define({name:qm,template:kc,dependencies:Wm,bindables:Km})),i.register(Sl)}const sS=Object.freeze(Object.defineProperty({__proto__:null,bindables:Km,default:kc,dependencies:Wm,name:qm,register:tS,template:kc},Symbol.toStringTag,{value:"Module"}));var iS=Object.create,Kh=Object.defineProperty,nS=Object.getOwnPropertyDescriptor,rS=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),lo=i=>{throw TypeError(i)},oS=(i,e,t)=>e in i?Kh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,op=(i,e)=>Kh(i,"name",{value:e,configurable:!0}),aS=i=>[,,,iS(null)],Gm=["class","method","getter","setter","accessor","field","value","get","set"],sr=i=>i!==void 0&&typeof i!="function"?lo("Function expected"):i,lS=(i,e,t,s,n)=>({kind:Gm[i],name:e,metadata:s,addInitializer:r=>t._?lo("Already initialized"):n.push(sr(r||null))}),cS=(i,e)=>oS(e,rS("metadata"),i[3]),$c=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Ym=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,p=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?p?1:2:0,f=Gm[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!p&&(n=n.prototype),h<5&&(h>3||!d)&&nS(h<4?n:{get[t](){return ap(this,r)},set[t](m){return lp(this,r,m)}},t));h?d&&h<4&&op(r,(h>2?"set ":h>1?"get ":"")+t):op(n,t);for(var $=s.length-1;$>=0;$--)c=lS(h,t,l={},i[3],b),h&&(c.static=p,c.private=d,u=c.access={has:d?m=>hS(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?ap:uS)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,y)=>lp(m,n,y,h^4?r:v.set):(m,y)=>m[t]=y)),a=(0,s[$])(h?h<4?d?r:v[f]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?sr(a)&&(h>4?_.unshift(a):h?d?r=a:v[f]=a:n=a):typeof a!="object"||a===null?lo("Object expected"):(sr(o=a.get)&&(v.get=o),sr(o=a.set)&&(v.set=o),sr(o=a.init)&&_.unshift(o));return h||cS(i,n),v&&Kh(n,t,v),d?h^4?r:v:n},Gh=(i,e,t)=>e.has(i)||lo("Cannot "+t),hS=(i,e)=>Object(e)!==e?lo('Cannot use the "in" operator on this value'):i.has(e),ap=(i,e,t)=>(Gh(i,e,"read from private field"),t?t.call(i):e.get(i)),lp=(i,e,t,s)=>(Gh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),uS=(i,e,t)=>(Gh(i,e,"access private method"),t),Jm,Xm,Cn;Xm=[et({...sS,name:"product-card"}),ii(ti,wn,En)],Jm=[ke];class Fr{constructor(e,t,s){this.cartService=e,this.currencyService=t,this.ea=s,this.product=$c(Cn,8,this),$c(Cn,11,this),this.qty=1,this.currency="USD",this.sub=void 0}binding(){this.currency=this.currencyService.currency,this.sub=this.ea.subscribe(K_,e=>{this.currency=e.currency})}detaching(){var e;(e=this.sub)==null||e.dispose()}get currencySymbol(){switch(this.currency){case"EUR":return"";case"GBP":return"";case"AUD":return"A$";case"BRL":return"R$";case"ARS":return"ARS$";case"CLP":return"CLP$";case"COP":return"COP$";case"MXN":return"MX$";default:return"$"}}increaseQty(){this.qty++}decreaseQty(){this.qty>1&&this.qty--}onQtyInput(e){const t=parseInt(e.target.value,10);!isNaN(t)&&t>0?this.qty=t:this.qty=1}addToCart(){if(!this.product)return;const e=Number.isFinite(this.qty)&&this.qty>0?this.qty:1;this.cartService.add({id:this.product.id,name:this.product.nombre,price:this.product.precio,image:this.product.imagen,qty:e},e)}}Cn=aS();Ym(Cn,5,"product",Jm,Fr);Fr=Ym(Cn,0,"ProductCard",Xm,Fr);$c(Cn,1,Fr);const dS=Object.freeze(Object.defineProperty({__proto__:null,get ProductCard(){return Fr}},Symbol.toStringTag,{value:"Module"})),Zm="product-list",Sc=`<template>\r
    \r
  <div class="product-list">\r
    <product-card repeat.for="product of products" product.bind="product"></product-card>\r
  </div>\r
</template>\r
`,ev=[dS],tv={};let xl;function pS(i){xl||(xl=W.define({name:Zm,template:Sc,dependencies:ev,bindables:tv})),i.register(xl)}const fS=Object.freeze(Object.defineProperty({__proto__:null,bindables:tv,default:Sc,dependencies:ev,name:Zm,register:pS,template:Sc},Symbol.toStringTag,{value:"Module"}));var gS=Object.create,Yh=Object.defineProperty,_S=Object.getOwnPropertyDescriptor,mS=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),co=i=>{throw TypeError(i)},vS=(i,e,t)=>e in i?Yh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,cp=(i,e)=>Yh(i,"name",{value:e,configurable:!0}),bS=i=>[,,,gS(null)],sv=["class","method","getter","setter","accessor","field","value","get","set"],ir=i=>i!==void 0&&typeof i!="function"?co("Function expected"):i,wS=(i,e,t,s,n)=>({kind:sv[i],name:e,metadata:s,addInitializer:r=>t._?co("Already initialized"):n.push(ir(r||null))}),AS=(i,e)=>vS(e,mS("metadata"),i[3]),xc=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},iv=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,p=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?p?1:2:0,f=sv[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!p&&(n=n.prototype),h<5&&(h>3||!d)&&_S(h<4?n:{get[t](){return hp(this,r)},set[t](m){return up(this,r,m)}},t));h?d&&h<4&&cp(r,(h>2?"set ":h>1?"get ":"")+t):cp(n,t);for(var $=s.length-1;$>=0;$--)c=wS(h,t,l={},i[3],b),h&&(c.static=p,c.private=d,u=c.access={has:d?m=>yS(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?hp:CS)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,y)=>up(m,n,y,h^4?r:v.set):(m,y)=>m[t]=y)),a=(0,s[$])(h?h<4?d?r:v[f]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?ir(a)&&(h>4?_.unshift(a):h?d?r=a:v[f]=a:n=a):typeof a!="object"||a===null?co("Object expected"):(ir(o=a.get)&&(v.get=o),ir(o=a.set)&&(v.set=o),ir(o=a.init)&&_.unshift(o));return h||AS(i,n),v&&Yh(n,t,v),d?h^4?r:v:n},Jh=(i,e,t)=>e.has(i)||co("Cannot "+t),yS=(i,e)=>Object(e)!==e?co('Cannot use the "in" operator on this value'):i.has(e),hp=(i,e,t)=>(Jh(i,e,"read from private field"),t?t.call(i):e.get(i)),up=(i,e,t,s)=>(Jh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),CS=(i,e,t)=>(Jh(i,e,"access private method"),t),nv,rv,kn;rv=[et({...fS,name:"product-list"})],nv=[ke];class jr{constructor(){this.products=xc(kn,8,this,[]),xc(kn,11,this)}}kn=bS();iv(kn,5,"products",nv,jr);jr=iv(kn,0,"ProductList",rv,jr);xc(kn,1,jr);const kS=Object.freeze(Object.defineProperty({__proto__:null,get ProductList(){return jr}},Symbol.toStringTag,{value:"Module"})),ov="element-list",Ec=`<template>\r
    \r
        \r
    <div class="padded-box bg-primary">\r
        <div class="row-justified">\r
            <div>\r
                <span>Showing \${page * pageSize - pageSize + 1} - \${Math.min(page * pageSize, total)} of \${total}</span>\r
            </div>\r
            <div class="sort-dropdown-wrapper">\r
                <button class="sort-dropdown-btn" click.trigger="isSortOpen = !isSortOpen">\r
                    <img src="/src/assets/icons/filter.svg" alt="Sort Icon" class="sort-icon-vertical" />\r
                    <div class="sort-dropdown-labels">\r
                        <span class="sort-label">Sort By</span>\r
                        <span class="sort-selected">\${selectedSort}</span>\r
                    </div>\r
                    <svg class="sort-arrow-vertical\${isSortOpen ? ' open' : ''}" width="20" height="20"\r
                        viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"\r
                        stroke-linejoin="round">\r
                        <polyline points="6 9 12 15 18 9" />\r
                    </svg>\r
                </button>\r
                <ul if.bind="isSortOpen" class="sort-dropdown-list">\r
                    <li repeat.for="option of sortOptions" class="sort-dropdown-item"\r
                        click.trigger="selectSort(option)">\${option}</li>\r
                </ul>\r
            </div>\r
        </div>\r
        <product-list products.bind="items"></product-list>\r
        <pagination \r
            page.bind="page" \r
            page-size.bind="pageSize" \r
            total.bind="total"\r
            page-change.bind="onPageChange">\r
        </pagination>\r
    </div>\r
</template>`,av=[Tm,kS],lv={};let El;function $S(i){El||(El=W.define({name:ov,template:Ec,dependencies:av,bindables:lv})),i.register(El)}const SS=Object.freeze(Object.defineProperty({__proto__:null,bindables:lv,default:Ec,dependencies:av,name:ov,register:$S,template:Ec},Symbol.toStringTag,{value:"Module"}));var xS=Object.create,Xh=Object.defineProperty,ES=Object.getOwnPropertyDescriptor,IS=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),ho=i=>{throw TypeError(i)},PS=(i,e,t)=>e in i?Xh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,dp=(i,e)=>Xh(i,"name",{value:e,configurable:!0}),RS=i=>[,,,xS(null)],cv=["class","method","getter","setter","accessor","field","value","get","set"],nr=i=>i!==void 0&&typeof i!="function"?ho("Function expected"):i,TS=(i,e,t,s,n)=>({kind:cv[i],name:e,metadata:s,addInitializer:r=>t._?ho("Already initialized"):n.push(nr(r||null))}),OS=(i,e)=>PS(e,IS("metadata"),i[3]),gt=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Vi=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,p=!!(e&8),d=!!(e&16),g=h>3?i.length+1:h?p?1:2:0,f=cv[h+5],_=h>3&&(i[g-1]=[]),b=i[g]||(i[g]=[]),v=h&&(!d&&!p&&(n=n.prototype),h<5&&(h>3||!d)&&ES(h<4?n:{get[t](){return pp(this,r)},set[t](m){return fp(this,r,m)}},t));h?d&&h<4&&dp(r,(h>2?"set ":h>1?"get ":"")+t):dp(n,t);for(var $=s.length-1;$>=0;$--)c=TS(h,t,l={},i[3],b),h&&(c.static=p,c.private=d,u=c.access={has:d?m=>BS(n,m):m=>t in m},h^3&&(u.get=d?m=>(h^1?pp:MS)(m,n,h^4?r:v.get):m=>m[t]),h>2&&(u.set=d?(m,y)=>fp(m,n,y,h^4?r:v.set):(m,y)=>m[t]=y)),a=(0,s[$])(h?h<4?d?r:v[f]:h>4?void 0:{get:v.get,set:v.set}:n,c),l._=1,h^4||a===void 0?nr(a)&&(h>4?_.unshift(a):h?d?r=a:v[f]=a:n=a):typeof a!="object"||a===null?ho("Object expected"):(nr(o=a.get)&&(v.get=o),nr(o=a.set)&&(v.set=o),nr(o=a.init)&&_.unshift(o));return h||OS(i,n),v&&Xh(n,t,v),d?h^4?r:v:n},Zh=(i,e,t)=>e.has(i)||ho("Cannot "+t),BS=(i,e)=>Object(e)!==e?ho('Cannot use the "in" operator on this value'):i.has(e),pp=(i,e,t)=>(Zh(i,e,"read from private field"),t?t.call(i):e.get(i)),fp=(i,e,t,s)=>(Zh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),MS=(i,e,t)=>(Zh(i,e,"access private method"),t),hv,uv,dv,pv,fv,gv,_v,Pe;_v=[et({...SS,name:"element-list"})],gv=[ke],fv=[ke],pv=[ke],dv=[ke],uv=[ke],hv=[ke];class ls{constructor(){this.items=gt(Pe,8,this,[]),gt(Pe,11,this),this.page=gt(Pe,12,this,1),gt(Pe,15,this),this.pageSize=gt(Pe,16,this,10),gt(Pe,19,this),this.total=gt(Pe,20,this,0),gt(Pe,23,this),this.sortChange=gt(Pe,24,this),gt(Pe,27,this),this.pageChange=gt(Pe,28,this),gt(Pe,31,this),this.isSortOpen=!1,this.selectedSort="Featured",this.sortOptions=["Featured","Price: Low to High","Price: High to Low","Stock","Name"],this.onPageChange=e=>{this.pageChange&&this.pageChange(e)}}selectSort(e){this.selectedSort=e,this.isSortOpen=!1,this.sortChange&&this.sortChange(e)}}Pe=RS();Vi(Pe,5,"items",gv,ls);Vi(Pe,5,"page",fv,ls);Vi(Pe,5,"pageSize",pv,ls);Vi(Pe,5,"total",dv,ls);Vi(Pe,5,"sortChange",uv,ls);Vi(Pe,5,"pageChange",hv,ls);ls=Vi(Pe,0,"ElementList",_v,ls);gt(Pe,1,ls);const LS=Object.freeze(Object.defineProperty({__proto__:null,get ElementList(){return ls}},Symbol.toStringTag,{value:"Module"})),mv="home",Ic=`<template>\r
  \r
  \r
\r
  \r
  <section class="home">\r
    <div id="epic-background">\r
      <div class="main-content-padding full-width ">\r
        <div class="grid-container">\r
          <div class="main-title-area">\r
            <h1 class="main-title">Condimentum consectetur</h1>\r
          </div>\r
          <toolbar \r
            games.bind="games" \r
            price-options.bind="priceOptions" \r
            type-options.bind="typeOptions" \r
            selected-game.bind="selectedGame" \r
            selected-price.bind="selectedPrice" \r
            selected-type.bind="selectedType" \r
            search.bind="search" \r
            filters-change.bind="onFiltersChange">\r
          </toolbar>\r
          <element-list \r
            items.bind="pagedItems" \r
            page.bind="page" \r
            page-size.bind="pageSize"\r
            total.bind="filteredProducts.length"\r
            sort-change.bind="onSortChange"\r
            page-change.bind="onPageChange">\r
          </element-list>\r
\r
        </div>\r
      </div>\r
\r
\r
    </div>\r
  </section>\r
</template>`,vv=[eS,LS,Tm],bv={};let Il;function NS(i){Il||(Il=W.define({name:mv,template:Ic,dependencies:vv,bindables:bv})),i.register(Il)}const DS=Object.freeze(Object.defineProperty({__proto__:null,bindables:bv,default:Ic,dependencies:vv,name:mv,register:NS,template:Ic},Symbol.toStringTag,{value:"Module"}));var FS=Object.create,eu=Object.defineProperty,jS=Object.getOwnPropertyDescriptor,VS=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),wv=i=>{throw TypeError(i)},zS=(i,e,t)=>e in i?eu(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,US=(i,e)=>eu(i,"name",{value:e,configurable:!0}),QS=i=>[,,,FS(null)],HS=["class","method","getter","setter","accessor","field","value","get","set"],Av=i=>i!==void 0&&typeof i!="function"?wv("Function expected"):i,qS=(i,e,t,s,n)=>({kind:HS[i],name:e,metadata:s,addInitializer:r=>t._?wv("Already initialized"):n.push(Av(r||null))}),WS=(i,e)=>zS(e,VS("metadata"),i[3]),KS=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},GS=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&jS(n,t));US(n,t);for(var g=s.length-1;g>=0;g--)l=qS(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,Av(o)&&(n=o);return WS(i,n),d&&eu(n,t,d),u?c^4?r:d:n},yv,tu;const gp={"ors.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOWxu2j4AAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAASRkBAOgDAABJGQEA6AMAAFBhaW50Lk5FVCA1LjEuOQADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACKyFmG9q9FEwAAAghJREFUSEvVlbFuE0EQhv85OxKCAlMgJIq1jYREFYhEwzYgXsBBoifSuo95A/sFSNyzwhWiTF4AEgmtSwhVGoizHRXXUCBChsK70exylxxlPsnSzvw7nvHc+Aa47FA8MHNPe3uUyv/ilFkjos+5v46zBI+OX3Mq1TPvDgnLmDsABpm8O+8Ov0WjwLL6jeRKQ262rr4E8Ep+eu3OW2buxTuxksbVB1adMi3t7adciDhlJkQ0JmZ+cN7FKlZQHP7G6b3cn3Orde19AeBxLlxEky8HgO9/fj6lvD1OmRGAEkAPQKm93ZZ6G8WPE5zekD6nzB6ABYCO9nZdaoU0BMcAxgA6Tpm+FK5Q+6O0nTJjAAfa2w0A+1JDTYKOOD8hooWwq5hpbzcBQHu7lYtVCRBatANgwsyjXMzoO2XWcmekLgEATMMzSKr6xSd3pa29/QDg/rw7pNCuhLoEgxBYOmWSh1w1QdrbWRiWaX6/LgGwDDwCMMn9EqfMjjBfhPaeUZVgP5uGkVPmmbCxguJQmLKAA+1t0iZi5s181huwCuBLNMKvKMOoJlDT17Rk3h0SM29pb8+dMKfMdtFgzhOcMrNw3M2kKqYFlkHJv/UCJgBARHtVYxlxyvSJaPFfG80pMyaiZKrCLhnEd5BqX//67vbzh0RUQm40GaC9fZP7nTLrRFTbFrHdko12+fkL7YLHrYEKjfEAAAAASUVORK5CYII=",import.meta.url).href,"gi.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOWxu2j4AAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAASRkBAOgDAABJGQEA6AMAAFBhaW50Lk5FVCA1LjEuOQADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACKyFmG9q9FEwAAAYhJREFUSEvtlM1NAzEQhd+sKAAaMEkHcIxPSQVABUlk+iD0EYvQAVQAXMyRdJCsG0g6eBxiB2d2V/xIiAufFMnzPJnxjmcM/PPXiBZI9mz0K60DQDBuAuBFRNZ6j+SZjf4t+V2KyCMAVKXToJ6zKzgA2OgXNvoVybHeA3BcrE/yYp9gUM+53y4Ixt1qzUa/IHmjdXz4P5DskRwKWoIH4/odZZjY6O+yHYw7F5Fl2uulr7iw0c+yj+iaB+NORGSbbU2utT6EjpOR8vT6T19FBw/GXQFYQid4Pb1udNVXIDkDsALwAmAMYJm76NMEqbY9rResRWRNcmijf8LuC6YisgCAI+2taatrSTBuCmCh9czBHPyQjRZKDhKQHJY2Utn0L506UxfrBlUwbpQNG/0TyXIiG6SO2c9CnoMuKhF5LgUb/SZdbIOWdpwcejSpkIarFG30q0E956Cek+Qsr/WFi8h9abdRYee4bWtR7JK1vjld/pqDS04X2C81TTBu1BG8fF6+/Rr883u8Axfp01w/unrhAAAAAElFTkSuQmCC",import.meta.url).href,"wow.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOWxu2j4AAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAASRkBAOgDAABJGQEA6AMAAFBhaW50Lk5FVCA1LjEuOQADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACKyFmG9q9FEwAAAktJREFUSEutlTFv00AcxZ/vcqFNjKWUhkYRkYdChWAGyVWQGLoAC2KABYnFA2JhQ+JTwAcwH4BKSMzQgcHCSMxQBjpYRVZoEJFSp0Ad2yw569+/rVCk/ibfe46f/e5yZzihl6Oae4HtbnKxCif07gJ4yXUAEB1pvuHiSdGR5gcxSOMX3FAQCYCvVHNCr3s/evX86d7WZarPY5DGzwQXASBBpgCcZ3J/Jxk9jqb7T5g+FwHA70jzMzc4S2KxDQDRdP+OE3pd6q2q1jodA4Bp1GMAvghsN1KGKE1Qr2ZdpOOzteYGAMT5oQmgTz1lSJuOAaCnrO3AdiMBALvT8Rd+gynq1/W1E3rdb8l4Q4/X1Jlb1Ps+jY8EAkCa59uYVVTJbjK+Qqroz94cADBMJzepN8p+L2tPkyIbgQT4s84KaBW6f83sgaW3puwko/fQAYHtRueUtcVv0uj+KTqUh3OKivamk1LAqmqt8/41dUM+ckKvuywbV7lHKQJ+Zr+GRy1gnP25DeAG7V8zSONLAPrCMCzutcTCDwA+5k0yAAzTA7tpqDWuE05Xfd1KzfQD243AAvy2bIRkrHnIBU1bNh5UfV2Sp8VzioDAdiNLnHpd3DVjkielCjTD9OAa10BWEHhF1Dgp5s7BScADSn+4/4WuIPCAwHajnrI+Uo2yIpuf/nVA0RUEHgAAcXb4jmuauiE3qw4oCl1BqAqo2lk18zwNXyilgGNwrANKUwqYt3kticV2YLtRU6i33NPw35cCWnLhAtc02pMQLe5p+M77F+r20QeiYsdpAAAAAElFTkSuQmCC",import.meta.url).href,"fn.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOWxu2j4AAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAASRkBAOgDAABJGQEA6AMAAFBhaW50Lk5FVCA1LjEuOQADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACKyFmG9q9FEwAAAd9JREFUSEvdlb1Lw0AYxt/kEmk1CrWYlqB0EBz0LyjoUBB3KVhQQZRMgqvgIjgJXQWnLropiCJOIoIgFEVw0oLQoYgxDTEFjV+NV108OV/baFFB/ME7PM8d95D3PiJADYYuVmfPn67nsF+DVDamr2ITAEDExk/z7YA20lgAgH3sM6SJy41d3siV7dFsTDd4z4+QGNzbbB82FpyDvuPHyw8tFXNlO8EXAPTiSX7Y9O4QAODowdDxWrmynai7RWESXASAFCuncr+O5/BIvIgSZdukbs1+AgA0CnJxKzby4cRoUnMaAOC68hg1qTvA/LcvCIkB26TueD3955lX+0+WtMExk7rjITFgM/8tQCVN1lcWv3v2IvFCZogrjR/PxnRDJU0W03XvwRW9nwSAFVYdUouO5/DUHYAJCnIn9ni+HfAZ/yjAorcqPhHViBJlm79oZ97VDD8eL2Q0i96qTAvxQuaZiShRTkMkUIwQZSrvOclqz3WXHF5e0gbHmJ6xdnqK1F1gukQfIiZ1u5l+1yKTut25sp0wnm6med+PvOck+beHXxxwwG8gdcnhZWxqUnM67zlJ7FejU25d87sLAjYYtX6ZeA8+49db9PcCKFRK2PPjSwGK0OC+HoZU3iul8bgfL8ZtzD+6CWQdAAAAAElFTkSuQmCC",import.meta.url).href,"lol.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOWxu2j4AAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAASRkBAOgDAABJGQEA6AMAAFBhaW50Lk5FVCA1LjEuOQADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACKyFmG9q9FEwAAAQlJREFUSEvNlL0RwjAMRiUmgAVCmICaTEFPmYxFRuCOJQhb8JOCFnoKUYDuxGfLJLkUvPKzT8+WdWZyWF23ghkR0XFeMWYpJhgofQt5uIKx+D+BiOTe+8RI9rlLoSYrF8x8wVzpLdDHF5G8aOsz5kjvFinMfLFFY4chT7C57Q6YeViJiEy/VyMCEclPz3uBeQqVFG19x7VAYPs6BoGA3pOxxuwX9vFtHhUQ0RWDrmAHPMEDg6F4giUGQ4kKirbeY/YLHdEmK2c2jwqGoCPKzF/tDQR4gi7g5FgCATM/mqxcYJ5CJyf2HwUC+vwzmKU4zivW4vgnBUYLbu6KvUn0BmPiCoaeHnEFY/EC52hgeIcAMesAAAAASUVORK5CYII=",import.meta.url).href,"tft.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOWxu2j4AAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAASRkBAOgDAABJGQEA6AMAAFBhaW50Lk5FVCA1LjEuOQADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAACKyFmG9q9FEwAAAjZJREFUSEutlUFrE0EUx/8zydpQa80iQa1hUwX12BbxkAUheKqCaCmC4EFhc/Gk38Av4KX3LAgWLD2oCNKjUOhGvNSL53S3LRaXGpGQpNDNeHDfMpnsrhvxBwu7b96b/9t5M28YMlJ1G0L+blbqTP5OgqsGFSFEUZ0coaAQoqLaVVKzkCd2DGuWMebij+is6dktGkv7m9iBrBMkJSAzEqgE6Yyxn8Meo6TFRAJZs04iNZ4KGVfMcVHnYQDw4nDr42bPrflBd8h5XMq56db6hfs3Tc9u0R/wqtsQmz23Rk6OYelDUWMwwXPvVRsHAD/ogrLPUtQkVmeWn6m26KA5hnVRfr+qnflKj84LfhQhofOCTz6OYc2r4wDAqm5DlHKTuDYx8+Z5qbasOhDqBkjaZbSboho0K3V26+Tl5o9B706Wo09k9eUA8ES/bn7u72umZ+9kDcyKXAMdAP63SCRgenbbMayF8H1HXfNxWdpb24Dark3P3m5W6owKFLbkouyTlYOgs7i0t7aReB80K3X2j4cuSugg6CyOCCgXSRHAIyHEnOI2AvUz07O3NfAjsg/t5biOqNoI5QKaMz37i2ynGqYeFkgB8iSEzgv+2fzU1q/gSDsMugsAMMm1fnvQvwQAp9iJTqwAQVnkwY6PIfIIBe/uv37lB90bqr+KY1h6qgBilo04l5v69Lb8oCqEKD7+9m6FMzbNgNOBELsvz997Sk3zrwLE7d3V7+1Bv4RwaT6UH17J0nl/A6c0ORzgaYanAAAAAElFTkSuQmCC",import.meta.url).href,"marvel.png":new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAeUExURTnhnIqLlJGSmVfNnlfOn0fWnDrgnIuNl0bYnQAAAMwYrhwAAAAKdFJOU////////////wCyzCzPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBQYWludC5ORVQgNS4xLjlsbto+AAAAtmVYSWZJSSoACAAAAAUAGgEFAAEAAABKAAAAGwEFAAEAAABSAAAAKAEDAAEAAAACAAAAMQECABAAAABaAAAAaYcEAAEAAABqAAAAAAAAAGAAAAABAAAAYAAAAAEAAABQYWludC5ORVQgNS4xLjkAAwAAkAcABAAAADAyMzABoAMAAQAAAAEAAAAFoAQAAQAAAJQAAAAAAAAAAgABAAIABAAAAFI5OAACAAcABAAAADAxMDAAAAAATM/ASCWP16AAAABTSURBVChTzc9JEoAgDETRrzjl/he2rLSQoOzpBQW8QAAbhH7jzQSA8oFKWi0OK6WSihxga6cytC4+V48R7BzhHhU+AJyxuUYzrr8Xpz9FipAyJ9yAbxCi7nxEdgAAAABJRU5ErkJggg==",import.meta.url).href};yv=[et({...DS,name:"home"})];class Vr{constructor(){this.page=1,this.pageSize=10,this.products=[],this.filteredProducts=[],this.sort="Featured",this.games=[],this.priceOptions=["< $50","$50 - $100","$100+"],this.typeOptions=["Gold","Item","Account"],this.selectedGame="All",this.selectedPrice="All",this.selectedType="All",this.search="",this.onSortChange=e=>{this.sort=e,this.applySort()},this.onFiltersChange=e=>{this.selectedGame=e.game,this.selectedPrice=e.price,this.selectedType=e.type,this.search=e.search,this.applyFilters()},this.onPageChange=e=>{this.page=e},console.log("Home component loaded")}async attached(){try{const s=await fetch("./data/juegos.json");this.games=await s.json(),console.log("Games loaded:",this.games)}catch(s){console.error("Error loading games:",s),this.games=[]}const t=await(await fetch("./data/productos.json")).json();this.products=t.map(s=>{const n=this.games.find(u=>u.id===s.gameId);let r=null,o=s.precio;n&&n.currencyPercentage&&n.currencyPercentage>0&&(r=s.precio,o=+(s.precio*(1-n.currencyPercentage/100)).toFixed(2));const a=n&&n.icono?String(n.icono).split("/").pop():"",l=a&&gp[a]?gp[a]:"",c=s.imagen?`./${String(s.imagen).replace(/^\/+/,"")}`:"";return{...s,gameIcon:l,imagen:c,precioOriginal:r,precio:o}}),this.filteredProducts=this.products,this.typeOptions=Array.from(new Set(this.products.map(s=>s.type))).filter(Boolean),console.log(this.products)}get pagedItems(){const e=(this.page-1)*this.pageSize;return this.filteredProducts.slice(e,e+this.pageSize)}applyFilters(){let e=this.products;if(this.selectedGame&&this.selectedGame!=="All"&&(e=e.filter(t=>t.gameId==this.selectedGame)),this.selectedType&&this.selectedType!=="All"&&(e=e.filter(t=>t.type===this.selectedType)),this.selectedPrice&&this.selectedPrice!=="All"&&(this.selectedPrice==="< $50"?e=e.filter(t=>t.precio<50):this.selectedPrice==="$50 - $100"?e=e.filter(t=>t.precio>=50&&t.precio<=100):this.selectedPrice==="$100+"&&(e=e.filter(t=>t.precio>100))),this.search){const t=this.search.toLowerCase().split(/\s+/).filter(Boolean);e=e.filter(s=>{const n=s.nombre.toLowerCase(),r=s.descripcion.toLowerCase();return t.some(o=>n.includes(o)||r.includes(o))})}this.filteredProducts=e,this.applySort(),this.page=1}applySort(){this.sort==="Price: Low to High"?this.filteredProducts=[...this.filteredProducts].sort((e,t)=>e.precio-t.precio):this.sort==="Price: High to Low"?this.filteredProducts=[...this.filteredProducts].sort((e,t)=>t.precio-e.precio):this.sort==="Stock"?this.filteredProducts=[...this.filteredProducts].sort((e,t)=>t.stock-e.stock):this.sort==="Name"&&(this.filteredProducts=[...this.filteredProducts].sort((e,t)=>e.nombre.localeCompare(t.nombre)))}}tu=QS();Vr=GS(tu,0,"Home",yv,Vr);KS(tu,1,Vr);const Cv="cart",Pc=`<template>\r
  <section class="home">\r
    <div id="epic-background">\r
      <div class="main-content-padding full-width ">\r
        <div class="container">\r
          <h4>Lo sentimos, el programador se quedo sin tiempo ni cafe para hacer un buen carrito. intente nuevamente mas tarde.</h4>\r
        </div>\r
      </div>\r
\r
\r
    </div>\r
  </section>\r
</template>`,kv=[],$v={};let Pl;function YS(i){Pl||(Pl=W.define({name:Cv,template:Pc,dependencies:kv,bindables:$v})),i.register(Pl)}const JS=Object.freeze(Object.defineProperty({__proto__:null,bindables:$v,default:Pc,dependencies:kv,name:Cv,register:YS,template:Pc},Symbol.toStringTag,{value:"Module"}));var XS=Object.create,su=Object.defineProperty,ZS=Object.getOwnPropertyDescriptor,ex=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Sv=i=>{throw TypeError(i)},tx=(i,e,t)=>e in i?su(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,sx=(i,e)=>su(i,"name",{value:e,configurable:!0}),ix=i=>[,,,XS(null)],nx=["class","method","getter","setter","accessor","field","value","get","set"],xv=i=>i!==void 0&&typeof i!="function"?Sv("Function expected"):i,rx=(i,e,t,s,n)=>({kind:nx[i],name:e,metadata:s,addInitializer:r=>t._?Sv("Already initialized"):n.push(xv(r||null))}),ox=(i,e)=>tx(e,ex("metadata"),i[3]),ax=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},lx=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&ZS(n,t));sx(n,t);for(var g=s.length-1;g>=0;g--)l=rx(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,xv(o)&&(n=o);return ox(i,n),d&&su(n,t,d),u?c^4?r:d:n},Ev,iu;Ev=[et({...JS,name:"cart"})];class zr{}iu=ix();zr=lx(iu,0,"Cart",Ev,zr);ax(iu,1,zr);var cx=Object.create,nu=Object.defineProperty,hx=Object.getOwnPropertyDescriptor,ux=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Iv=i=>{throw TypeError(i)},dx=(i,e,t)=>e in i?nu(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,px=(i,e)=>nu(i,"name",{value:e,configurable:!0}),fx=i=>[,,,cx(null)],gx=["class","method","getter","setter","accessor","field","value","get","set"],Pv=i=>i!==void 0&&typeof i!="function"?Iv("Function expected"):i,_x=(i,e,t,s,n)=>({kind:gx[i],name:e,metadata:s,addInitializer:r=>t._?Iv("Already initialized"):n.push(Pv(r||null))}),mx=(i,e)=>dx(e,ux("metadata"),i[3]),vx=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},bx=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&hx(n,t));px(n,t);for(var g=s.length-1;g>=0;g--)l=_x(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,Pv(o)&&(n=o);return mx(i,n),d&&nu(n,t,d),u?c^4?r:d:n},Rv,ru;Rv=[et("login-page")];class Ur{constructor(){this.email="",this.password="",this.isLoading=!1,this.error=""}async signIn(e){e.preventDefault(),this.error="",this.isLoading=!0;try{if(await new Promise(t=>setTimeout(t,600)),!this.email||!this.password)throw new Error("Please enter email and password");alert(`Signed in as ${this.email}`)}catch(t){this.error=(t==null?void 0:t.message)??"Error signing in"}finally{this.isLoading=!1}}}ru=fx();Ur=bx(ru,0,"LoginPage",Rv,Ur);vx(ru,1,Ur);var wx=Object.create,ou=Object.defineProperty,Ax=Object.getOwnPropertyDescriptor,yx=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Tv=i=>{throw TypeError(i)},Cx=(i,e,t)=>e in i?ou(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,kx=(i,e)=>ou(i,"name",{value:e,configurable:!0}),$x=i=>[,,,wx(null)],Sx=["class","method","getter","setter","accessor","field","value","get","set"],Ov=i=>i!==void 0&&typeof i!="function"?Tv("Function expected"):i,xx=(i,e,t,s,n)=>({kind:Sx[i],name:e,metadata:s,addInitializer:r=>t._?Tv("Already initialized"):n.push(Ov(r||null))}),Ex=(i,e)=>Cx(e,yx("metadata"),i[3]),Ix=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},Px=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!1,h=0,p=i[h]||(i[h]=[]),d=c&&(n=n.prototype,c<5&&(c>3||!u)&&Ax(n,t));kx(n,t);for(var g=s.length-1;g>=0;g--)l=xx(c,t,a={},i[3],p),o=(0,s[g])(n,l),a._=1,Ov(o)&&(n=o);return Ex(i,n),d&&ou(n,t,d),u?c^4?r:d:n},Bv,au;Bv=[et(W1),gC({routes:[{path:"",component:Vr,title:"Home"},{path:"cart",component:zr,title:"Cart"},{path:"login",component:Ur,title:"Sign in"}]})];const hu=class hu{constructor(e){this.cartService=e}get cartCount(){return this.cartService.count}};hu.dependencies=[yn,da,pa,Ts,Vr,zr,Ur,ti,wn,fa];let $n=hu;au=$x();$n=Px(au,0,"MyApp",Bv,$n);Ix(au,1,$n);yr.register(TC).app($n).start();
